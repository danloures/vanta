var dN=Object.defineProperty;var fN=(e,t,n)=>t in e?dN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var On=(e,t,n)=>fN(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N1={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function hN(){if(fv)return rd;fv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,o){var d=null;if(o!==void 0&&(d=""+o),r.key!==void 0&&(d=""+r.key),"key"in r){o={};for(var g in r)g!=="key"&&(o[g]=r[g])}else o=r;return r=o.ref,{$$typeof:e,type:i,key:d,ref:r!==void 0?r:null,props:o}}return rd.Fragment=t,rd.jsx=n,rd.jsxs=n,rd}var hv;function pN(){return hv||(hv=1,N1.exports=hN()),N1.exports}var u=pN(),C1={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function mN(){if(pv)return gt;pv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.iterator;function k(ee){return ee===null||typeof ee!="object"?null:(ee=N&&ee[N]||ee["@@iterator"],typeof ee=="function"?ee:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,P={};function H(ee,ae,ve){this.props=ee,this.context=ae,this.refs=P,this.updater=ve||O}H.prototype.isReactComponent={},H.prototype.setState=function(ee,ae){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,ae,"setState")},H.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function B(){}B.prototype=H.prototype;function j(ee,ae,ve){this.props=ee,this.context=ae,this.refs=P,this.updater=ve||O}var F=j.prototype=new B;F.constructor=j,L(F,H.prototype),F.isPureReactComponent=!0;var Y=Array.isArray;function W(){}var te={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function ie(ee,ae,ve){var Ie=ve.ref;return{$$typeof:e,type:ee,key:ae,ref:Ie!==void 0?Ie:null,props:ve}}function _e(ee,ae){return ie(ee.type,ae,ee.props)}function Ee(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e}function pe(ee){var ae={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(ve){return ae[ve]})}var Ne=/\/+/g;function ue(ee,ae){return typeof ee=="object"&&ee!==null&&ee.key!=null?pe(""+ee.key):ae.toString(36)}function X(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(W,W):(ee.status="pending",ee.then(function(ae){ee.status==="pending"&&(ee.status="fulfilled",ee.value=ae)},function(ae){ee.status==="pending"&&(ee.status="rejected",ee.reason=ae)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function K(ee,ae,ve,Ie,qe){var Oe=typeof ee;(Oe==="undefined"||Oe==="boolean")&&(ee=null);var xt=!1;if(ee===null)xt=!0;else switch(Oe){case"bigint":case"string":case"number":xt=!0;break;case"object":switch(ee.$$typeof){case e:case t:xt=!0;break;case _:return xt=ee._init,K(xt(ee._payload),ae,ve,Ie,qe)}}if(xt)return qe=qe(ee),xt=Ie===""?"."+ue(ee,0):Ie,Y(qe)?(ve="",xt!=null&&(ve=xt.replace(Ne,"$&/")+"/"),K(qe,ae,ve,"",function(In){return In})):qe!=null&&(Ee(qe)&&(qe=_e(qe,ve+(qe.key==null||ee&&ee.key===qe.key?"":(""+qe.key).replace(Ne,"$&/")+"/")+xt)),ae.push(qe)),1;xt=0;var mt=Ie===""?".":Ie+":";if(Y(ee))for(var Ft=0;Ft<ee.length;Ft++)Ie=ee[Ft],Oe=mt+ue(Ie,Ft),xt+=K(Ie,ae,ve,Oe,qe);else if(Ft=k(ee),typeof Ft=="function")for(ee=Ft.call(ee),Ft=0;!(Ie=ee.next()).done;)Ie=Ie.value,Oe=mt+ue(Ie,Ft++),xt+=K(Ie,ae,ve,Oe,qe);else if(Oe==="object"){if(typeof ee.then=="function")return K(X(ee),ae,ve,Ie,qe);throw ae=String(ee),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return xt}function J(ee,ae,ve){if(ee==null)return ee;var Ie=[],qe=0;return K(ee,Ie,"","",function(Oe){return ae.call(ve,Oe,qe++)}),Ie}function oe(ee){if(ee._status===-1){var ae=ee._result;ae=ae(),ae.then(function(ve){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=ve)},function(ve){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=ve)}),ee._status===-1&&(ee._status=0,ee._result=ae)}if(ee._status===1)return ee._result.default;throw ee._result}var fe=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)},Se={map:J,forEach:function(ee,ae,ve){J(ee,function(){ae.apply(this,arguments)},ve)},count:function(ee){var ae=0;return J(ee,function(){ae++}),ae},toArray:function(ee){return J(ee,function(ae){return ae})||[]},only:function(ee){if(!Ee(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}};return gt.Activity=E,gt.Children=Se,gt.Component=H,gt.Fragment=n,gt.Profiler=r,gt.PureComponent=j,gt.StrictMode=i,gt.Suspense=x,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,gt.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return te.H.useMemoCache(ee)}},gt.cache=function(ee){return function(){return ee.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(ee,ae,ve){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var Ie=L({},ee.props),qe=ee.key;if(ae!=null)for(Oe in ae.key!==void 0&&(qe=""+ae.key),ae)!ne.call(ae,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ae.ref===void 0||(Ie[Oe]=ae[Oe]);var Oe=arguments.length-2;if(Oe===1)Ie.children=ve;else if(1<Oe){for(var xt=Array(Oe),mt=0;mt<Oe;mt++)xt[mt]=arguments[mt+2];Ie.children=xt}return ie(ee.type,qe,Ie)},gt.createContext=function(ee){return ee={$$typeof:d,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:o,_context:ee},ee},gt.createElement=function(ee,ae,ve){var Ie,qe={},Oe=null;if(ae!=null)for(Ie in ae.key!==void 0&&(Oe=""+ae.key),ae)ne.call(ae,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(qe[Ie]=ae[Ie]);var xt=arguments.length-2;if(xt===1)qe.children=ve;else if(1<xt){for(var mt=Array(xt),Ft=0;Ft<xt;Ft++)mt[Ft]=arguments[Ft+2];qe.children=mt}if(ee&&ee.defaultProps)for(Ie in xt=ee.defaultProps,xt)qe[Ie]===void 0&&(qe[Ie]=xt[Ie]);return ie(ee,Oe,qe)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(ee){return{$$typeof:g,render:ee}},gt.isValidElement=Ee,gt.lazy=function(ee){return{$$typeof:_,_payload:{_status:-1,_result:ee},_init:oe}},gt.memo=function(ee,ae){return{$$typeof:p,type:ee,compare:ae===void 0?null:ae}},gt.startTransition=function(ee){var ae=te.T,ve={};te.T=ve;try{var Ie=ee(),qe=te.S;qe!==null&&qe(ve,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(W,fe)}catch(Oe){fe(Oe)}finally{ae!==null&&ve.types!==null&&(ae.types=ve.types),te.T=ae}},gt.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},gt.use=function(ee){return te.H.use(ee)},gt.useActionState=function(ee,ae,ve){return te.H.useActionState(ee,ae,ve)},gt.useCallback=function(ee,ae){return te.H.useCallback(ee,ae)},gt.useContext=function(ee){return te.H.useContext(ee)},gt.useDebugValue=function(){},gt.useDeferredValue=function(ee,ae){return te.H.useDeferredValue(ee,ae)},gt.useEffect=function(ee,ae){return te.H.useEffect(ee,ae)},gt.useEffectEvent=function(ee){return te.H.useEffectEvent(ee)},gt.useId=function(){return te.H.useId()},gt.useImperativeHandle=function(ee,ae,ve){return te.H.useImperativeHandle(ee,ae,ve)},gt.useInsertionEffect=function(ee,ae){return te.H.useInsertionEffect(ee,ae)},gt.useLayoutEffect=function(ee,ae){return te.H.useLayoutEffect(ee,ae)},gt.useMemo=function(ee,ae){return te.H.useMemo(ee,ae)},gt.useOptimistic=function(ee,ae){return te.H.useOptimistic(ee,ae)},gt.useReducer=function(ee,ae,ve){return te.H.useReducer(ee,ae,ve)},gt.useRef=function(ee){return te.H.useRef(ee)},gt.useState=function(ee){return te.H.useState(ee)},gt.useSyncExternalStore=function(ee,ae,ve){return te.H.useSyncExternalStore(ee,ae,ve)},gt.useTransition=function(){return te.H.useTransition()},gt.version="19.2.4",gt}var mv;function Km(){return mv||(mv=1,C1.exports=mN()),C1.exports}var V=Km();const an=t3(V);var T1={exports:{}},ad={},I1={exports:{}},R1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function gN(){return gv||(gv=1,(function(e){function t(K,J){var oe=K.length;K.push(J);e:for(;0<oe;){var fe=oe-1>>>1,Se=K[fe];if(0<r(Se,J))K[fe]=J,K[oe]=Se,oe=fe;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var J=K[0],oe=K.pop();if(oe!==J){K[0]=oe;e:for(var fe=0,Se=K.length,ee=Se>>>1;fe<ee;){var ae=2*(fe+1)-1,ve=K[ae],Ie=ae+1,qe=K[Ie];if(0>r(ve,oe))Ie<Se&&0>r(qe,ve)?(K[fe]=qe,K[Ie]=oe,fe=Ie):(K[fe]=ve,K[ae]=oe,fe=ae);else if(Ie<Se&&0>r(qe,oe))K[fe]=qe,K[Ie]=oe,fe=Ie;else break e}}return J}function r(K,J){var oe=K.sortIndex-J.sortIndex;return oe!==0?oe:K.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,g=d.now();e.unstable_now=function(){return d.now()-g}}var x=[],p=[],_=1,E=null,N=3,k=!1,O=!1,L=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function F(K){for(var J=n(p);J!==null;){if(J.callback===null)i(p);else if(J.startTime<=K)i(p),J.sortIndex=J.expirationTime,t(x,J);else break;J=n(p)}}function Y(K){if(L=!1,F(K),!O)if(n(x)!==null)O=!0,W||(W=!0,pe());else{var J=n(p);J!==null&&X(Y,J.startTime-K)}}var W=!1,te=-1,ne=5,ie=-1;function _e(){return P?!0:!(e.unstable_now()-ie<ne)}function Ee(){if(P=!1,W){var K=e.unstable_now();ie=K;var J=!0;try{e:{O=!1,L&&(L=!1,B(te),te=-1),k=!0;var oe=N;try{t:{for(F(K),E=n(x);E!==null&&!(E.expirationTime>K&&_e());){var fe=E.callback;if(typeof fe=="function"){E.callback=null,N=E.priorityLevel;var Se=fe(E.expirationTime<=K);if(K=e.unstable_now(),typeof Se=="function"){E.callback=Se,F(K),J=!0;break t}E===n(x)&&i(x),F(K)}else i(x);E=n(x)}if(E!==null)J=!0;else{var ee=n(p);ee!==null&&X(Y,ee.startTime-K),J=!1}}break e}finally{E=null,N=oe,k=!1}J=void 0}}finally{J?pe():W=!1}}}var pe;if(typeof j=="function")pe=function(){j(Ee)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ue=Ne.port2;Ne.port1.onmessage=Ee,pe=function(){ue.postMessage(null)}}else pe=function(){H(Ee,0)};function X(K,J){te=H(function(){K(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function(K){switch(N){case 1:case 2:case 3:var J=3;break;default:J=N}var oe=N;N=J;try{return K()}finally{N=oe}},e.unstable_requestPaint=function(){P=!0},e.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var oe=N;N=K;try{return J()}finally{N=oe}},e.unstable_scheduleCallback=function(K,J,oe){var fe=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?fe+oe:fe):oe=fe,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=oe+Se,K={id:_++,callback:J,priorityLevel:K,startTime:oe,expirationTime:Se,sortIndex:-1},oe>fe?(K.sortIndex=oe,t(p,K),n(x)===null&&K===n(p)&&(L?(B(te),te=-1):L=!0,X(Y,oe-fe))):(K.sortIndex=Se,t(x,K),O||k||(O=!0,W||(W=!0,pe()))),K},e.unstable_shouldYield=_e,e.unstable_wrapCallback=function(K){var J=N;return function(){var oe=N;N=J;try{return K.apply(this,arguments)}finally{N=oe}}}})(R1)),R1}var xv;function xN(){return xv||(xv=1,I1.exports=gN()),I1.exports}var k1={exports:{}},Xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function yN(){if(yv)return Xi;yv=1;var e=Km();function t(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(x,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:x,containerInfo:p,implementation:_}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xi.createPortal=function(x,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(x,p,null,_)},Xi.flushSync=function(x){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,x)return x()}finally{d.T=p,i.p=_,i.d.f()}},Xi.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(x,p))},Xi.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},Xi.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var _=p.as,E=g(_,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:N,fetchPriority:k}):_==="script"&&i.d.X(x,{crossOrigin:E,integrity:N,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Xi.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=g(p.as,p.crossOrigin);i.d.M(x,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(x)},Xi.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=g(_,p.crossOrigin);i.d.L(x,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Xi.preloadModule=function(x,p){if(typeof x=="string")if(p){var _=g(p.as,p.crossOrigin);i.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(x)},Xi.requestFormReset=function(x){i.d.r(x)},Xi.unstable_batchedUpdates=function(x,p){return x(p)},Xi.useFormState=function(x,p,_){return d.H.useFormState(x,p,_)},Xi.useFormStatus=function(){return d.H.useHostTransitionStatus()},Xi.version="19.2.4",Xi}var vv;function vN(){if(vv)return k1.exports;vv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),k1.exports=yN(),k1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function bN(){if(bv)return ad;bv=1;var e=xN(),t=Km(),n=vN();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function d(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function g(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function x(s){if(o(s)!==s)throw Error(i(188))}function p(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(i(188));return l!==s?null:s}for(var h=s,v=l;;){var C=h.return;if(C===null)break;var I=C.alternate;if(I===null){if(v=C.return,v!==null){h=v;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===h)return x(C),s;if(I===v)return x(C),l;I=I.sibling}throw Error(i(188))}if(h.return!==v.return)h=C,v=I;else{for(var D=!1,q=C.child;q;){if(q===h){D=!0,h=C,v=I;break}if(q===v){D=!0,v=C,h=I;break}q=q.sibling}if(!D){for(q=I.child;q;){if(q===h){D=!0,h=I,v=C;break}if(q===v){D=!0,v=I,h=C;break}q=q.sibling}if(!D)throw Error(i(189))}}if(h.alternate!==v)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?s:l}function _(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=_(s),l!==null)return l;s=s.sibling}return null}var E=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),j=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),_e=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function pe(s){return s===null||typeof s!="object"?null:(s=Ee&&s[Ee]||s["@@iterator"],typeof s=="function"?s:null)}var Ne=Symbol.for("react.client.reference");function ue(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case H:return"Profiler";case P:return"StrictMode";case Y:return"Suspense";case W:return"SuspenseList";case ie:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case j:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case F:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case te:return l=s.displayName||null,l!==null?l:ue(s.type)||"Memo";case ne:l=s._payload,s=s._init;try{return ue(s(l))}catch{}}return null}var X=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},fe=[],Se=-1;function ee(s){return{current:s}}function ae(s){0>Se||(s.current=fe[Se],fe[Se]=null,Se--)}function ve(s,l){Se++,fe[Se]=s.current,s.current=l}var Ie=ee(null),qe=ee(null),Oe=ee(null),xt=ee(null);function mt(s,l){switch(ve(Oe,l),ve(qe,s),ve(Ie,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?Ly(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=Ly(l),s=Py(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ae(Ie),ve(Ie,s)}function Ft(){ae(Ie),ae(qe),ae(Oe)}function In(s){s.memoizedState!==null&&ve(xt,s);var l=Ie.current,h=Py(l,s.type);l!==h&&(ve(qe,s),ve(Ie,h))}function En(s){qe.current===s&&(ae(Ie),ae(qe)),xt.current===s&&(ae(xt),td._currentValue=oe)}var oi,At;function bn(s){if(oi===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);oi=l&&l[1]||"",At=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oi+s+At}var Jn=!1;function mn(s,l){if(!s||Jn)return"";Jn=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(Ae){var ye=Ae}Reflect.construct(s,[],Re)}else{try{Re.call()}catch(Ae){ye=Ae}s.call(Re.prototype)}}else{try{throw Error()}catch(Ae){ye=Ae}(Re=s())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(Ae){if(Ae&&ye&&typeof Ae.stack=="string")return[Ae.stack,ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=v.DetermineComponentFrameRoot(),D=I[0],q=I[1];if(D&&q){var se=D.split(`
`),xe=q.split(`
`);for(C=v=0;v<se.length&&!se[v].includes("DetermineComponentFrameRoot");)v++;for(;C<xe.length&&!xe[C].includes("DetermineComponentFrameRoot");)C++;if(v===se.length||C===xe.length)for(v=se.length-1,C=xe.length-1;1<=v&&0<=C&&se[v]!==xe[C];)C--;for(;1<=v&&0<=C;v--,C--)if(se[v]!==xe[C]){if(v!==1||C!==1)do if(v--,C--,0>C||se[v]!==xe[C]){var Ce=`
`+se[v].replace(" at new "," at ");return s.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",s.displayName)),Ce}while(1<=v&&0<=C);break}}}finally{Jn=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?bn(h):""}function en(s,l){switch(s.tag){case 26:case 27:case 5:return bn(s.type);case 16:return bn("Lazy");case 13:return s.child!==l&&l!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return mn(s.type,!1);case 11:return mn(s.type.render,!1);case 1:return mn(s.type,!0);case 31:return bn("Activity");default:return""}}function zt(s){try{var l="",h=null;do l+=en(s,h),h=s,s=s.return;while(s);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var ze=Object.prototype.hasOwnProperty,ft=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,wt=e.unstable_shouldYield,Un=e.unstable_requestPaint,Nt=e.unstable_now,ls=e.unstable_getCurrentPriorityLevel,Zn=e.unstable_ImmediatePriority,jr=e.unstable_UserBlockingPriority,Qi=e.unstable_NormalPriority,vi=e.unstable_LowPriority,Lo=e.unstable_IdlePriority,ja=e.log,gu=e.unstable_setDisableYieldValue,un=null,Pe=null;function on(s){if(typeof ja=="function"&&gu(s),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(un,s)}catch{}}var yt=Math.clz32?Math.clz32:kl,An=Math.log,Ba=Math.LN2;function kl(s){return s>>>=0,s===0?32:31-(An(s)/Ba|0)|0}var Ua=256,Tt=262144,bs=4194304;function mr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Fa(s,l,h){var v=s.pendingLanes;if(v===0)return 0;var C=0,I=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var q=v&134217727;return q!==0?(v=q&~I,v!==0?C=mr(v):(D&=q,D!==0?C=mr(D):h||(h=q&~s,h!==0&&(C=mr(h))))):(q=v&~I,q!==0?C=mr(q):D!==0?C=mr(D):h||(h=v&~s,h!==0&&(C=mr(h)))),C===0?0:l!==0&&l!==C&&(l&I)===0&&(I=C&-C,h=l&-l,I>=h||I===32&&(h&4194048)!==0)?l:C}function Ti(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Ue(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Be(){var s=bs;return bs<<=1,(bs&62914560)===0&&(bs=4194304),s}function vt(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function Mt(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tn(s,l,h,v,C,I){var D=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var q=s.entanglements,se=s.expirationTimes,xe=s.hiddenUpdates;for(h=D&~h;0<h;){var Ce=31-yt(h),Re=1<<Ce;q[Ce]=0,se[Ce]=-1;var ye=xe[Ce];if(ye!==null)for(xe[Ce]=null,Ce=0;Ce<ye.length;Ce++){var Ae=ye[Ce];Ae!==null&&(Ae.lane&=-536870913)}h&=~Re}v!==0&&Qn(s,v,0),I!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=I&~(D&~l))}function Qn(s,l,h){s.pendingLanes|=l,s.suspendedLanes&=~l;var v=31-yt(l);s.entangledLanes|=l,s.entanglements[v]=s.entanglements[v]|1073741824|h&261930}function Pi(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var v=31-yt(h),C=1<<v;C&l|s[v]&l&&(s[v]|=l),h&=~C}}function gr(s,l){var h=l&-l;return h=(h&42)!==0?1:li(h),(h&(s.suspendedLanes|l))!==0?0:h}function li(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ws(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ii(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:rv(s.type))}function He(s,l){var h=J.p;try{return J.p=s,l()}finally{J.p=h}}var ji=Math.random().toString(36).slice(2),Ht="__reactFiber$"+ji,at="__reactProps$"+ji,Yi="__reactContainer$"+ji,xr="__reactEvents$"+ji,ta="__reactListeners$"+ji,Js="__reactHandles$"+ji,qd="__reactResources$"+ji,Po="__reactMarker$"+ji;function cs(s){delete s[Ht],delete s[at],delete s[xr],delete s[ta],delete s[Js]}function Fn(s){var l=s[Ht];if(l)return l;for(var h=s.parentNode;h;){if(l=h[Yi]||h[Ht]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=Gy(s);s!==null;){if(h=s[Ht])return h;s=Gy(s)}return l}s=h,h=s.parentNode}return null}function $t(s){if(s=s[Ht]||s[Yi]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function za(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function es(s){var l=s[qd];return l||(l=s[qd]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function zn(s){s[Po]=!0}var ke=new Set,Yd={};function nn(s,l){_s(s,l),_s(s+"Capture",l)}function _s(s,l){for(Yd[s]=l,s=0;s<l.length;s++)ke.add(l[s])}var O0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},Bt={};function It(s){return ze.call(Bt,s)?!0:ze.call(Vt,s)?!1:O0.test(s)?Bt[s]=!0:(Vt[s]=!0,!1)}function Va(s,l,h){if(It(l))if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+h)}}function Ga(s,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+h)}}function Es(s,l,h,v){if(v===null)s.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(l,h,""+v)}}function qt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function yr(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function M0(s,l,h){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,I=v.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return C.call(this)},set:function(D){h=""+D,I.call(this,D)}}),Object.defineProperty(s,l,{enumerable:v.enumerable}),{getValue:function(){return h},setValue:function(D){h=""+D},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Sn(s){if(!s._valueTracker){var l=yr(s)?"checked":"value";s._valueTracker=M0(s,l,""+s[l])}}function vr(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),v="";return s&&(v=yr(s)?s.checked?"true":"false":s.value),s=v,s!==h?(l.setValue(s),!0):!1}function Ol(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ha=/[\n"\\]/g;function Ct(s){return s.replace(Ha,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ci(s,l,h,v,C,I,D,q){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),l!=null?D==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+qt(l)):s.value!==""+qt(l)&&(s.value=""+qt(l)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),l!=null?$(s,D,qt(l)):h!=null?$(s,D,qt(h)):v!=null&&s.removeAttribute("value"),C==null&&I!=null&&(s.defaultChecked=!!I),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+qt(q):s.removeAttribute("name")}function me(s,l,h,v,C,I,D,q){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.type=I),l!=null||h!=null){if(!(I!=="submit"&&I!=="reset"||l!=null)){Sn(s);return}h=h!=null?""+qt(h):"",l=l!=null?""+qt(l):h,q||l===s.value||(s.value=l),s.defaultValue=l}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=q?s.checked:!!v,s.defaultChecked=!!v,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D),Sn(s)}function $(s,l,h){l==="number"&&Ol(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function Ke(s,l,h,v){if(s=s.options,l){l={};for(var C=0;C<h.length;C++)l["$"+h[C]]=!0;for(h=0;h<s.length;h++)C=l.hasOwnProperty("$"+s[h].value),s[h].selected!==C&&(s[h].selected=C),C&&v&&(s[h].defaultSelected=!0)}else{for(h=""+qt(h),l=null,C=0;C<s.length;C++){if(s[C].value===h){s[C].selected=!0,v&&(s[C].defaultSelected=!0);return}l!==null||s[C].disabled||(l=s[C])}l!==null&&(l.selected=!0)}}function ei(s,l,h){if(l!=null&&(l=""+qt(l),l!==s.value&&(s.value=l),h==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=h!=null?""+qt(h):""}function ts(s,l,h,v){if(l==null){if(v!=null){if(h!=null)throw Error(i(92));if(X(v)){if(1<v.length)throw Error(i(93));v=v[0]}h=v}h==null&&(h=""),l=h}h=qt(l),s.defaultValue=h,v=s.textContent,v===h&&v!==""&&v!==null&&(s.value=v),Sn(s)}function qa(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ns(s,l,h){var v=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?v?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":v?s.setProperty(l,h):typeof h!="number"||h===0||xu.has(l)?l==="float"?s.cssFloat=h:s[l]=(""+h).trim():s[l]=h+"px"}function tt(s,l,h){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,h!=null){for(var v in h)!h.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var C in l)v=l[C],l.hasOwnProperty(C)&&h[C]!==v&&ns(s,C,v)}else for(var I in l)l.hasOwnProperty(I)&&ns(s,I,l[I])}function gn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(s){return D0.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function us(){}var jo=null;function yu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Nn=null,Zs=null;function br(s){var l=$t(s);if(l&&(s=l.stateNode)){var h=s[at]||null;e:switch(s=l.stateNode,l.type){case"input":if(ci(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ct(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var v=h[l];if(v!==s&&v.form===s.form){var C=v[at]||null;if(!C)throw Error(i(90));ci(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(l=0;l<h.length;l++)v=h[l],v.form===s.form&&vr(v)}break e;case"textarea":ei(s,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&Ke(s,!!h.multiple,l,!1)}}}var st=!1;function Wd(s,l,h){if(st)return s(l,h);st=!0;try{var v=s(l);return v}finally{if(st=!1,(Nn!==null||Zs!==null)&&(Ff(),Nn&&(l=Nn,s=Zs,Zs=Nn=null,br(l),s)))for(l=0;l<s.length;l++)br(s[l])}}function dt(s,l){var h=s.stateNode;if(h===null)return null;var v=h[at]||null;if(v===null)return null;h=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(i(231,l,typeof h));return h}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(xn)try{var na={};Object.defineProperty(na,"passive",{get:function(){vu=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{vu=!1}var wr=null,_r=null,Ml=null;function Xa(){if(Ml)return Ml;var s,l=_r,h=l.length,v,C="value"in wr?wr.value:wr.textContent,I=C.length;for(s=0;s<h&&l[s]===C[s];s++);var D=h-s;for(v=1;v<=D&&l[h-v]===C[I-v];v++);return Ml=C.slice(s,1<v?1-v:void 0)}function Br(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ur(){return!0}function bu(){return!1}function ui(s){function l(h,v,C,I,D){this._reactName=h,this._targetInst=C,this.type=v,this.nativeEvent=I,this.target=D,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(h=s[q],this[q]=h?h(I):I[q]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Ur:bu,this.isPropagationStopped=bu,this}return E(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),l}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=ui(As),Wa=E({},As,{view:0,detail:0}),Kd=ui(Wa),Dl,wu,Bo,Ll=E({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bo&&(Bo&&s.type==="mousemove"?(Dl=s.screenX-Bo.screenX,wu=s.screenY-Bo.screenY):wu=Dl=0,Bo=s),Dl)},movementY:function(s){return"movementY"in s?s.movementY:wu}}),Jt=ui(Ll),$d=E({},Ll,{dataTransfer:0}),Pl=ui($d),Fr=E({},Wa,{relatedTarget:0}),_u=ui(Fr),we=E({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),_t=ui(we),wi=E({},As,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),jl=ui(wi),Jd=E({},As,{data:0}),Zd=ui(Jd),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ti(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Eu[s])?!!l[s]:!1}function Uo(){return ti}var Rn=E({},Wa,{key:function(s){if(s.key){var l=L0[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Br(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?P0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uo,charCode:function(s){return s.type==="keypress"?Br(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Br(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bl=ui(Rn),ia=E({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sn=ui(ia),rt=E({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uo}),j0=ui(rt),yn=E({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),sa=ui(yn),Ka=E({},Ll,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=ui(Ka),Qs=E({},As,{newState:0,oldState:0}),Au=ui(Qs),Qd=[9,13,27,32],Fo=xn&&"CompositionEvent"in window,$a=null;xn&&"documentMode"in document&&($a=document.documentMode);var ef=xn&&"TextEvent"in window&&!$a,tf=xn&&(!Fo||$a&&8<$a&&11>=$a),ra=" ",Ul=!1;function nf(s,l){switch(s){case"keyup":return Qd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ja(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Za=!1;function zr(s,l){switch(s){case"compositionend":return Ja(l);case"keypress":return l.which!==32?null:(Ul=!0,ra);case"textInput":return s=l.data,s===ra&&Ul?null:s;default:return null}}function Fl(s,l){if(Za)return s==="compositionend"||!Fo&&nf(s,l)?(s=Xa(),Ml=_r=wr=null,Za=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tf&&l.locale!=="ko"?null:l.data;default:return null}}var ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!ds[s.type]:l==="textarea"}function Ss(s,l,h,v){Nn?Zs?Zs.push(v):Zs=[v]:Nn=v,l=Xf(l,"onChange"),0<l.length&&(h=new bi("onChange","change",null,h,v),s.push({event:h,listeners:l}))}var zo=null,aa=null;function U0(s){Iy(s,0)}function Vo(s){var l=za(s);if(vr(l))return s}function Ns(s,l){if(s==="change")return l}var sf=!1;if(xn){var Go;if(xn){var oa="oninput"in document;if(!oa){var Dt=document.createElement("div");Dt.setAttribute("oninput","return;"),oa=typeof Dt.oninput=="function"}Go=oa}else Go=!1;sf=Go&&(!document.documentMode||9<document.documentMode)}function Ho(){zo&&(zo.detachEvent("onpropertychange",U),aa=zo=null)}function U(s){if(s.propertyName==="value"&&Vo(aa)){var l=[];Ss(l,aa,s,yu(s)),Wd(U0,l)}}function a(s,l,h){s==="focusin"?(Ho(),zo=l,aa=h,zo.attachEvent("onpropertychange",U)):s==="focusout"&&Ho()}function c(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Vo(aa)}function f(s,l){if(s==="click")return Vo(l)}function m(s,l){if(s==="input"||s==="change")return Vo(l)}function y(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var b=typeof Object.is=="function"?Object.is:y;function A(s,l){if(b(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),v=Object.keys(l);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var C=h[v];if(!ze.call(l,C)||!b(s[C],l[C]))return!1}return!0}function T(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function R(s,l){var h=T(s);s=0;for(var v;h;){if(h.nodeType===3){if(v=s+h.textContent.length,s<=l&&v>=l)return{node:h,offset:l-s};s=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=T(h)}}function M(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?M(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function z(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ol(s.document);l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Ol(s.document)}return l}function G(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Z=xn&&"documentMode"in document&&11>=document.documentMode,re=null,le=null,he=null,be=!1;function je(s,l,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;be||re==null||re!==Ol(v)||(v=re,"selectionStart"in v&&G(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),he&&A(he,v)||(he=v,v=Xf(le,"onSelect"),0<v.length&&(l=new bi("onSelect","select",null,l,h),s.push({event:l,listeners:v}),l.target=re)))}function Le(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var Me={animationend:Le("Animation","AnimationEnd"),animationiteration:Le("Animation","AnimationIteration"),animationstart:Le("Animation","AnimationStart"),transitionrun:Le("Transition","TransitionRun"),transitionstart:Le("Transition","TransitionStart"),transitioncancel:Le("Transition","TransitionCancel"),transitionend:Le("Transition","TransitionEnd")},St={},ht={};xn&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete Me.animationend.animation,delete Me.animationiteration.animation,delete Me.animationstart.animation),"TransitionEvent"in window||delete Me.transitionend.transition);function Vn(s){if(St[s])return St[s];if(!Me[s])return s;var l=Me[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in ht)return St[s]=l[h];return s}var fs=Vn("animationend"),Bi=Vn("animationiteration"),rn=Vn("animationstart"),_i=Vn("transitionrun"),is=Vn("transitionstart"),Qa=Vn("transitioncancel"),la=Vn("transitionend"),rf=new Map,Nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nu.push("scrollEnd");function Er(s,l){rf.set(s,l),nn(l,[s])}var af=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},er=[],zl=0,F0=0;function of(){for(var s=zl,l=F0=zl=0;l<s;){var h=er[l];er[l++]=null;var v=er[l];er[l++]=null;var C=er[l];er[l++]=null;var I=er[l];if(er[l++]=null,v!==null&&C!==null){var D=v.pending;D===null?C.next=C:(C.next=D.next,D.next=C),v.pending=C}I!==0&&ux(h,C,I)}}function lf(s,l,h,v){er[zl++]=s,er[zl++]=l,er[zl++]=h,er[zl++]=v,F0|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function z0(s,l,h,v){return lf(s,l,h,v),cf(s)}function qo(s,l){return lf(s,null,null,l),cf(s)}function ux(s,l,h){s.lanes|=h;var v=s.alternate;v!==null&&(v.lanes|=h);for(var C=!1,I=s.return;I!==null;)I.childLanes|=h,v=I.alternate,v!==null&&(v.childLanes|=h),I.tag===22&&(s=I.stateNode,s===null||s._visibility&1||(C=!0)),s=I,I=I.return;return s.tag===3?(I=s.stateNode,C&&l!==null&&(C=31-yt(h),s=I.hiddenUpdates,v=s[C],v===null?s[C]=[l]:v.push(l),l.lane=h|536870912),I):null}function cf(s){if(50<Wu)throw Wu=0,$p=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Vl={};function W4(s,l,h,v){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(s,l,h,v){return new W4(s,l,h,v)}function V0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ca(s,l){var h=s.alternate;return h===null?(h=Cs(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function dx(s,l){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,l=h.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function uf(s,l,h,v,C,I){var D=0;if(v=s,typeof s=="function")V0(s)&&(D=1);else if(typeof s=="string")D=QS(s,h,Ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ie:return s=Cs(31,h,l,C),s.elementType=ie,s.lanes=I,s;case L:return Yo(h.children,C,I,l);case P:D=8,C|=24;break;case H:return s=Cs(12,h,l,C|2),s.elementType=H,s.lanes=I,s;case Y:return s=Cs(13,h,l,C),s.elementType=Y,s.lanes=I,s;case W:return s=Cs(19,h,l,C),s.elementType=W,s.lanes=I,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:D=10;break e;case B:D=9;break e;case F:D=11;break e;case te:D=14;break e;case ne:D=16,v=null;break e}D=29,h=Error(i(130,s===null?"null":typeof s,"")),v=null}return l=Cs(D,h,l,C),l.elementType=s,l.type=v,l.lanes=I,l}function Yo(s,l,h,v){return s=Cs(7,s,v,l),s.lanes=h,s}function G0(s,l,h){return s=Cs(6,s,null,l),s.lanes=h,s}function fx(s){var l=Cs(18,null,null,0);return l.stateNode=s,l}function H0(s,l,h){return l=Cs(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var hx=new WeakMap;function tr(s,l){if(typeof s=="object"&&s!==null){var h=hx.get(s);return h!==void 0?h:(l={value:s,source:l,stack:zt(l)},hx.set(s,l),l)}return{value:s,source:l,stack:zt(l)}}var Gl=[],Hl=0,df=null,Cu=0,nr=[],ir=0,eo=null,Vr=1,Gr="";function ua(s,l){Gl[Hl++]=Cu,Gl[Hl++]=df,df=s,Cu=l}function px(s,l,h){nr[ir++]=Vr,nr[ir++]=Gr,nr[ir++]=eo,eo=s;var v=Vr;s=Gr;var C=32-yt(v)-1;v&=~(1<<C),h+=1;var I=32-yt(l)+C;if(30<I){var D=C-C%5;I=(v&(1<<D)-1).toString(32),v>>=D,C-=D,Vr=1<<32-yt(l)+C|h<<C|v,Gr=I+s}else Vr=1<<I|h<<C|v,Gr=s}function q0(s){s.return!==null&&(ua(s,1),px(s,1,0))}function Y0(s){for(;s===df;)df=Gl[--Hl],Gl[Hl]=null,Cu=Gl[--Hl],Gl[Hl]=null;for(;s===eo;)eo=nr[--ir],nr[ir]=null,Gr=nr[--ir],nr[ir]=null,Vr=nr[--ir],nr[ir]=null}function mx(s,l){nr[ir++]=Vr,nr[ir++]=Gr,nr[ir++]=eo,Vr=l.id,Gr=l.overflow,eo=s}var Ui=null,Cn=null,jt=!1,to=null,sr=!1,X0=Error(i(519));function no(s){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tu(tr(l,s)),X0}function gx(s){var l=s.stateNode,h=s.type,v=s.memoizedProps;switch(l[Ht]=s,l[at]=v,h){case"dialog":kt("cancel",l),kt("close",l);break;case"iframe":case"object":case"embed":kt("load",l);break;case"video":case"audio":for(h=0;h<$u.length;h++)kt($u[h],l);break;case"source":kt("error",l);break;case"img":case"image":case"link":kt("error",l),kt("load",l);break;case"details":kt("toggle",l);break;case"input":kt("invalid",l),me(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":kt("invalid",l);break;case"textarea":kt("invalid",l),ts(l,v.value,v.defaultValue,v.children)}h=v.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||v.suppressHydrationWarning===!0||My(l.textContent,h)?(v.popover!=null&&(kt("beforetoggle",l),kt("toggle",l)),v.onScroll!=null&&kt("scroll",l),v.onScrollEnd!=null&&kt("scrollend",l),v.onClick!=null&&(l.onclick=us),l=!0):l=!1,l||no(s,!0)}function xx(s){for(Ui=s.return;Ui;)switch(Ui.tag){case 5:case 31:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:Ui=Ui.return}}function ql(s){if(s!==Ui)return!1;if(!jt)return xx(s),jt=!0,!1;var l=s.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||d1(s.type,s.memoizedProps)),h=!h),h&&Cn&&no(s),xx(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Cn=Vy(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Cn=Vy(s)}else l===27?(l=Cn,xo(s.type)?(s=g1,g1=null,Cn=s):Cn=l):Cn=Ui?ar(s.stateNode.nextSibling):null;return!0}function Xo(){Cn=Ui=null,jt=!1}function W0(){var s=to;return s!==null&&(gs===null?gs=s:gs.push.apply(gs,s),to=null),s}function Tu(s){to===null?to=[s]:to.push(s)}var K0=ee(null),Wo=null,da=null;function io(s,l,h){ve(K0,l._currentValue),l._currentValue=h}function fa(s){s._currentValue=K0.current,ae(K0)}function $0(s,l,h){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===h)break;s=s.return}}function J0(s,l,h,v){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var I=C.dependencies;if(I!==null){var D=C.child;I=I.firstContext;e:for(;I!==null;){var q=I;I=C;for(var se=0;se<l.length;se++)if(q.context===l[se]){I.lanes|=h,q=I.alternate,q!==null&&(q.lanes|=h),$0(I.return,h,s),v||(D=null);break e}I=q.next}}else if(C.tag===18){if(D=C.return,D===null)throw Error(i(341));D.lanes|=h,I=D.alternate,I!==null&&(I.lanes|=h),$0(D,h,s),D=null}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===s){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}}function Yl(s,l,h,v){s=null;for(var C=l,I=!1;C!==null;){if(!I){if((C.flags&524288)!==0)I=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var D=C.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var q=C.type;b(C.pendingProps.value,D.value)||(s!==null?s.push(q):s=[q])}}else if(C===xt.current){if(D=C.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(td):s=[td])}C=C.return}s!==null&&J0(l,s,h,v),l.flags|=262144}function ff(s){for(s=s.firstContext;s!==null;){if(!b(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ko(s){Wo=s,da=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Fi(s){return yx(Wo,s)}function hf(s,l){return Wo===null&&Ko(s),yx(s,l)}function yx(s,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},da===null){if(s===null)throw Error(i(308));da=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else da=da.next=l;return h}var K4=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(h,v){s.push(v)}};this.abort=function(){l.aborted=!0,s.forEach(function(h){return h()})}},$4=e.unstable_scheduleCallback,J4=e.unstable_NormalPriority,di={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z0(){return{controller:new K4,data:new Map,refCount:0}}function Iu(s){s.refCount--,s.refCount===0&&$4(J4,function(){s.controller.abort()})}var Ru=null,Q0=0,Xl=0,Wl=null;function Z4(s,l){if(Ru===null){var h=Ru=[];Q0=0,Xl=n1(),Wl={status:"pending",value:void 0,then:function(v){h.push(v)}}}return Q0++,l.then(vx,vx),l}function vx(){if(--Q0===0&&Ru!==null){Wl!==null&&(Wl.status="fulfilled");var s=Ru;Ru=null,Xl=0,Wl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Q4(s,l){var h=[],v={status:"pending",value:null,reason:null,then:function(C){h.push(C)}};return s.then(function(){v.status="fulfilled",v.value=l;for(var C=0;C<h.length;C++)(0,h[C])(l)},function(C){for(v.status="rejected",v.reason=C,C=0;C<h.length;C++)(0,h[C])(void 0)}),v}var bx=K.S;K.S=function(s,l){iy=Nt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Z4(s,l),bx!==null&&bx(s,l)};var $o=ee(null);function ep(){var s=$o.current;return s!==null?s:vn.pooledCache}function pf(s,l){l===null?ve($o,$o.current):ve($o,l.pool)}function wx(){var s=ep();return s===null?null:{parent:di._currentValue,pool:s}}var Kl=Error(i(460)),tp=Error(i(474)),mf=Error(i(542)),gf={then:function(){}};function _x(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ex(s,l,h){switch(h=s[h],h===void 0?s.push(l):h!==l&&(l.then(us,us),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Sx(s),s;default:if(typeof l.status=="string")l.then(us,us);else{if(s=vn,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(v){if(l.status==="pending"){var C=l;C.status="fulfilled",C.value=v}},function(v){if(l.status==="pending"){var C=l;C.status="rejected",C.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Sx(s),s}throw Zo=l,Kl}}function Jo(s){try{var l=s._init;return l(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Zo=h,Kl):h}}var Zo=null;function Ax(){if(Zo===null)throw Error(i(459));var s=Zo;return Zo=null,s}function Sx(s){if(s===Kl||s===mf)throw Error(i(483))}var $l=null,ku=0;function xf(s){var l=ku;return ku+=1,$l===null&&($l=[]),Ex($l,s,l)}function Ou(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function yf(s,l){throw l.$$typeof===N?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Nx(s){function l(de,ce){if(s){var ge=de.deletions;ge===null?(de.deletions=[ce],de.flags|=16):ge.push(ce)}}function h(de,ce){if(!s)return null;for(;ce!==null;)l(de,ce),ce=ce.sibling;return null}function v(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function C(de,ce){return de=ca(de,ce),de.index=0,de.sibling=null,de}function I(de,ce,ge){return de.index=ge,s?(ge=de.alternate,ge!==null?(ge=ge.index,ge<ce?(de.flags|=67108866,ce):ge):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function D(de){return s&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,ge,Te){return ce===null||ce.tag!==6?(ce=G0(ge,de.mode,Te),ce.return=de,ce):(ce=C(ce,ge),ce.return=de,ce)}function se(de,ce,ge,Te){var nt=ge.type;return nt===L?Ce(de,ce,ge.props.children,Te,ge.key):ce!==null&&(ce.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===ne&&Jo(nt)===ce.type)?(ce=C(ce,ge.props),Ou(ce,ge),ce.return=de,ce):(ce=uf(ge.type,ge.key,ge.props,null,de.mode,Te),Ou(ce,ge),ce.return=de,ce)}function xe(de,ce,ge,Te){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ge.containerInfo||ce.stateNode.implementation!==ge.implementation?(ce=H0(ge,de.mode,Te),ce.return=de,ce):(ce=C(ce,ge.children||[]),ce.return=de,ce)}function Ce(de,ce,ge,Te,nt){return ce===null||ce.tag!==7?(ce=Yo(ge,de.mode,Te,nt),ce.return=de,ce):(ce=C(ce,ge),ce.return=de,ce)}function Re(de,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=G0(""+ce,de.mode,ge),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case k:return ge=uf(ce.type,ce.key,ce.props,null,de.mode,ge),Ou(ge,ce),ge.return=de,ge;case O:return ce=H0(ce,de.mode,ge),ce.return=de,ce;case ne:return ce=Jo(ce),Re(de,ce,ge)}if(X(ce)||pe(ce))return ce=Yo(ce,de.mode,ge,null),ce.return=de,ce;if(typeof ce.then=="function")return Re(de,xf(ce),ge);if(ce.$$typeof===j)return Re(de,hf(de,ce),ge);yf(de,ce)}return null}function ye(de,ce,ge,Te){var nt=ce!==null?ce.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return nt!==null?null:q(de,ce,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case k:return ge.key===nt?se(de,ce,ge,Te):null;case O:return ge.key===nt?xe(de,ce,ge,Te):null;case ne:return ge=Jo(ge),ye(de,ce,ge,Te)}if(X(ge)||pe(ge))return nt!==null?null:Ce(de,ce,ge,Te,null);if(typeof ge.then=="function")return ye(de,ce,xf(ge),Te);if(ge.$$typeof===j)return ye(de,ce,hf(de,ge),Te);yf(de,ge)}return null}function Ae(de,ce,ge,Te,nt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return de=de.get(ge)||null,q(ce,de,""+Te,nt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case k:return de=de.get(Te.key===null?ge:Te.key)||null,se(ce,de,Te,nt);case O:return de=de.get(Te.key===null?ge:Te.key)||null,xe(ce,de,Te,nt);case ne:return Te=Jo(Te),Ae(de,ce,ge,Te,nt)}if(X(Te)||pe(Te))return de=de.get(ge)||null,Ce(ce,de,Te,nt,null);if(typeof Te.then=="function")return Ae(de,ce,ge,xf(Te),nt);if(Te.$$typeof===j)return Ae(de,ce,ge,hf(ce,Te),nt);yf(ce,Te)}return null}function Xe(de,ce,ge,Te){for(var nt=null,Yt=null,$e=ce,Et=ce=0,Pt=null;$e!==null&&Et<ge.length;Et++){$e.index>Et?(Pt=$e,$e=null):Pt=$e.sibling;var Xt=ye(de,$e,ge[Et],Te);if(Xt===null){$e===null&&($e=Pt);break}s&&$e&&Xt.alternate===null&&l(de,$e),ce=I(Xt,ce,Et),Yt===null?nt=Xt:Yt.sibling=Xt,Yt=Xt,$e=Pt}if(Et===ge.length)return h(de,$e),jt&&ua(de,Et),nt;if($e===null){for(;Et<ge.length;Et++)$e=Re(de,ge[Et],Te),$e!==null&&(ce=I($e,ce,Et),Yt===null?nt=$e:Yt.sibling=$e,Yt=$e);return jt&&ua(de,Et),nt}for($e=v($e);Et<ge.length;Et++)Pt=Ae($e,de,Et,ge[Et],Te),Pt!==null&&(s&&Pt.alternate!==null&&$e.delete(Pt.key===null?Et:Pt.key),ce=I(Pt,ce,Et),Yt===null?nt=Pt:Yt.sibling=Pt,Yt=Pt);return s&&$e.forEach(function(_o){return l(de,_o)}),jt&&ua(de,Et),nt}function ot(de,ce,ge,Te){if(ge==null)throw Error(i(151));for(var nt=null,Yt=null,$e=ce,Et=ce=0,Pt=null,Xt=ge.next();$e!==null&&!Xt.done;Et++,Xt=ge.next()){$e.index>Et?(Pt=$e,$e=null):Pt=$e.sibling;var _o=ye(de,$e,Xt.value,Te);if(_o===null){$e===null&&($e=Pt);break}s&&$e&&_o.alternate===null&&l(de,$e),ce=I(_o,ce,Et),Yt===null?nt=_o:Yt.sibling=_o,Yt=_o,$e=Pt}if(Xt.done)return h(de,$e),jt&&ua(de,Et),nt;if($e===null){for(;!Xt.done;Et++,Xt=ge.next())Xt=Re(de,Xt.value,Te),Xt!==null&&(ce=I(Xt,ce,Et),Yt===null?nt=Xt:Yt.sibling=Xt,Yt=Xt);return jt&&ua(de,Et),nt}for($e=v($e);!Xt.done;Et++,Xt=ge.next())Xt=Ae($e,de,Et,Xt.value,Te),Xt!==null&&(s&&Xt.alternate!==null&&$e.delete(Xt.key===null?Et:Xt.key),ce=I(Xt,ce,Et),Yt===null?nt=Xt:Yt.sibling=Xt,Yt=Xt);return s&&$e.forEach(function(uN){return l(de,uN)}),jt&&ua(de,Et),nt}function hn(de,ce,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===L&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case k:e:{for(var nt=ge.key;ce!==null;){if(ce.key===nt){if(nt=ge.type,nt===L){if(ce.tag===7){h(de,ce.sibling),Te=C(ce,ge.props.children),Te.return=de,de=Te;break e}}else if(ce.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===ne&&Jo(nt)===ce.type){h(de,ce.sibling),Te=C(ce,ge.props),Ou(Te,ge),Te.return=de,de=Te;break e}h(de,ce);break}else l(de,ce);ce=ce.sibling}ge.type===L?(Te=Yo(ge.props.children,de.mode,Te,ge.key),Te.return=de,de=Te):(Te=uf(ge.type,ge.key,ge.props,null,de.mode,Te),Ou(Te,ge),Te.return=de,de=Te)}return D(de);case O:e:{for(nt=ge.key;ce!==null;){if(ce.key===nt)if(ce.tag===4&&ce.stateNode.containerInfo===ge.containerInfo&&ce.stateNode.implementation===ge.implementation){h(de,ce.sibling),Te=C(ce,ge.children||[]),Te.return=de,de=Te;break e}else{h(de,ce);break}else l(de,ce);ce=ce.sibling}Te=H0(ge,de.mode,Te),Te.return=de,de=Te}return D(de);case ne:return ge=Jo(ge),hn(de,ce,ge,Te)}if(X(ge))return Xe(de,ce,ge,Te);if(pe(ge)){if(nt=pe(ge),typeof nt!="function")throw Error(i(150));return ge=nt.call(ge),ot(de,ce,ge,Te)}if(typeof ge.then=="function")return hn(de,ce,xf(ge),Te);if(ge.$$typeof===j)return hn(de,ce,hf(de,ge),Te);yf(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ce!==null&&ce.tag===6?(h(de,ce.sibling),Te=C(ce,ge),Te.return=de,de=Te):(h(de,ce),Te=G0(ge,de.mode,Te),Te.return=de,de=Te),D(de)):h(de,ce)}return function(de,ce,ge,Te){try{ku=0;var nt=hn(de,ce,ge,Te);return $l=null,nt}catch($e){if($e===Kl||$e===mf)throw $e;var Yt=Cs(29,$e,null,de.mode);return Yt.lanes=Te,Yt.return=de,Yt}finally{}}}var Qo=Nx(!0),Cx=Nx(!1),so=!1;function np(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ip(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ro(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ao(s,l,h){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Zt&2)!==0){var C=v.pending;return C===null?l.next=l:(l.next=C.next,C.next=l),v.pending=l,l=cf(s),ux(s,null,h),l}return lf(s,v,l,h),cf(s)}function Mu(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var v=l.lanes;v&=s.pendingLanes,h|=v,l.lanes=h,Pi(s,h)}}function sp(s,l){var h=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var C=null,I=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};I===null?C=I=D:I=I.next=D,h=h.next}while(h!==null);I===null?C=I=l:I=I.next=l}else C=I=l;h={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:v.shared,callbacks:v.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}var rp=!1;function Du(){if(rp){var s=Wl;if(s!==null)throw s}}function Lu(s,l,h,v){rp=!1;var C=s.updateQueue;so=!1;var I=C.firstBaseUpdate,D=C.lastBaseUpdate,q=C.shared.pending;if(q!==null){C.shared.pending=null;var se=q,xe=se.next;se.next=null,D===null?I=xe:D.next=xe,D=se;var Ce=s.alternate;Ce!==null&&(Ce=Ce.updateQueue,q=Ce.lastBaseUpdate,q!==D&&(q===null?Ce.firstBaseUpdate=xe:q.next=xe,Ce.lastBaseUpdate=se))}if(I!==null){var Re=C.baseState;D=0,Ce=xe=se=null,q=I;do{var ye=q.lane&-536870913,Ae=ye!==q.lane;if(Ae?(Lt&ye)===ye:(v&ye)===ye){ye!==0&&ye===Xl&&(rp=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Xe=s,ot=q;ye=l;var hn=h;switch(ot.tag){case 1:if(Xe=ot.payload,typeof Xe=="function"){Re=Xe.call(hn,Re,ye);break e}Re=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ot.payload,ye=typeof Xe=="function"?Xe.call(hn,Re,ye):Xe,ye==null)break e;Re=E({},Re,ye);break e;case 2:so=!0}}ye=q.callback,ye!==null&&(s.flags|=64,Ae&&(s.flags|=8192),Ae=C.callbacks,Ae===null?C.callbacks=[ye]:Ae.push(ye))}else Ae={lane:ye,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ce===null?(xe=Ce=Ae,se=Re):Ce=Ce.next=Ae,D|=ye;if(q=q.next,q===null){if(q=C.shared.pending,q===null)break;Ae=q,q=Ae.next,Ae.next=null,C.lastBaseUpdate=Ae,C.shared.pending=null}}while(!0);Ce===null&&(se=Re),C.baseState=se,C.firstBaseUpdate=xe,C.lastBaseUpdate=Ce,I===null&&(C.shared.lanes=0),fo|=D,s.lanes=D,s.memoizedState=Re}}function Tx(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function Ix(s,l){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)Tx(h[s],l)}var Jl=ee(null),vf=ee(0);function Rx(s,l){s=wa,ve(vf,s),ve(Jl,l),wa=s|l.baseLanes}function ap(){ve(vf,wa),ve(Jl,Jl.current)}function op(){wa=vf.current,ae(Jl),ae(vf)}var Ts=ee(null),rr=null;function oo(s){var l=s.alternate;ve(ni,ni.current&1),ve(Ts,s),rr===null&&(l===null||Jl.current!==null||l.memoizedState!==null)&&(rr=s)}function lp(s){ve(ni,ni.current),ve(Ts,s),rr===null&&(rr=s)}function kx(s){s.tag===22?(ve(ni,ni.current),ve(Ts,s),rr===null&&(rr=s)):lo()}function lo(){ve(ni,ni.current),ve(Ts,Ts.current)}function Is(s){ae(Ts),rr===s&&(rr=null),ae(ni)}var ni=ee(0);function bf(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||p1(h)||m1(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ha=0,bt=null,dn=null,fi=null,wf=!1,Zl=!1,el=!1,_f=0,Pu=0,Ql=null,eS=0;function Gn(){throw Error(i(321))}function cp(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!b(s[h],l[h]))return!1;return!0}function up(s,l,h,v,C,I){return ha=I,bt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=s===null||s.memoizedState===null?p2:Sp,el=!1,I=h(v,C),el=!1,Zl&&(I=Mx(l,h,v,C)),Ox(s),I}function Ox(s){K.H=Uu;var l=dn!==null&&dn.next!==null;if(ha=0,fi=dn=bt=null,wf=!1,Pu=0,Ql=null,l)throw Error(i(300));s===null||hi||(s=s.dependencies,s!==null&&ff(s)&&(hi=!0))}function Mx(s,l,h,v){bt=s;var C=0;do{if(Zl&&(Ql=null),Pu=0,Zl=!1,25<=C)throw Error(i(301));if(C+=1,fi=dn=null,s.updateQueue!=null){var I=s.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}K.H=m2,I=l(h,v)}while(Zl);return I}function tS(){var s=K.H,l=s.useState()[0];return l=typeof l.then=="function"?ju(l):l,s=s.useState()[0],(dn!==null?dn.memoizedState:null)!==s&&(bt.flags|=1024),l}function dp(){var s=_f!==0;return _f=0,s}function fp(s,l,h){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~h}function hp(s){if(wf){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}wf=!1}ha=0,fi=dn=bt=null,Zl=!1,Pu=_f=0,Ql=null}function ss(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?bt.memoizedState=fi=s:fi=fi.next=s,fi}function ii(){if(dn===null){var s=bt.alternate;s=s!==null?s.memoizedState:null}else s=dn.next;var l=fi===null?bt.memoizedState:fi.next;if(l!==null)fi=l,dn=s;else{if(s===null)throw bt.alternate===null?Error(i(467)):Error(i(310));dn=s,s={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},fi===null?bt.memoizedState=fi=s:fi=fi.next=s}return fi}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(s){var l=Pu;return Pu+=1,Ql===null&&(Ql=[]),s=Ex(Ql,s,l),l=bt,(fi===null?l.memoizedState:fi.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?p2:Sp),s}function Af(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ju(s);if(s.$$typeof===j)return Fi(s)}throw Error(i(438,String(s)))}function pp(s){var l=null,h=bt.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var v=bt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(C){return C.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=Ef(),bt.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(s),v=0;v<s;v++)h[v]=_e;return l.index++,h}function pa(s,l){return typeof l=="function"?l(s):l}function Sf(s){var l=ii();return mp(l,dn,s)}function mp(s,l,h){var v=s.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=h;var C=s.baseQueue,I=v.pending;if(I!==null){if(C!==null){var D=C.next;C.next=I.next,I.next=D}l.baseQueue=C=I,v.pending=null}if(I=s.baseState,C===null)s.memoizedState=I;else{l=C.next;var q=D=null,se=null,xe=l,Ce=!1;do{var Re=xe.lane&-536870913;if(Re!==xe.lane?(Lt&Re)===Re:(ha&Re)===Re){var ye=xe.revertLane;if(ye===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Re===Xl&&(Ce=!0);else if((ha&ye)===ye){xe=xe.next,ye===Xl&&(Ce=!0);continue}else Re={lane:0,revertLane:xe.revertLane,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},se===null?(q=se=Re,D=I):se=se.next=Re,bt.lanes|=ye,fo|=ye;Re=xe.action,el&&h(I,Re),I=xe.hasEagerState?xe.eagerState:h(I,Re)}else ye={lane:Re,revertLane:xe.revertLane,gesture:xe.gesture,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},se===null?(q=se=ye,D=I):se=se.next=ye,bt.lanes|=Re,fo|=Re;xe=xe.next}while(xe!==null&&xe!==l);if(se===null?D=I:se.next=q,!b(I,s.memoizedState)&&(hi=!0,Ce&&(h=Wl,h!==null)))throw h;s.memoizedState=I,s.baseState=D,s.baseQueue=se,v.lastRenderedState=I}return C===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function gp(s){var l=ii(),h=l.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=s;var v=h.dispatch,C=h.pending,I=l.memoizedState;if(C!==null){h.pending=null;var D=C=C.next;do I=s(I,D.action),D=D.next;while(D!==C);b(I,l.memoizedState)||(hi=!0),l.memoizedState=I,l.baseQueue===null&&(l.baseState=I),h.lastRenderedState=I}return[I,v]}function Dx(s,l,h){var v=bt,C=ii(),I=jt;if(I){if(h===void 0)throw Error(i(407));h=h()}else h=l();var D=!b((dn||C).memoizedState,h);if(D&&(C.memoizedState=h,hi=!0),C=C.queue,vp(jx.bind(null,v,C,s),[s]),C.getSnapshot!==l||D||fi!==null&&fi.memoizedState.tag&1){if(v.flags|=2048,ec(9,{destroy:void 0},Px.bind(null,v,C,h,l),null),vn===null)throw Error(i(349));I||(ha&127)!==0||Lx(v,l,h)}return h}function Lx(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=bt.updateQueue,l===null?(l=Ef(),bt.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function Px(s,l,h,v){l.value=h,l.getSnapshot=v,Bx(l)&&Ux(s)}function jx(s,l,h){return h(function(){Bx(l)&&Ux(s)})}function Bx(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!b(s,h)}catch{return!0}}function Ux(s){var l=qo(s,2);l!==null&&xs(l,s,2)}function xp(s){var l=ss();if(typeof s=="function"){var h=s;if(s=h(),el){on(!0);try{h()}finally{on(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:s},l}function Fx(s,l,h,v){return s.baseState=h,mp(s,dn,typeof v=="function"?v:pa)}function nS(s,l,h,v,C){if(Tf(s))throw Error(i(485));if(s=l.action,s!==null){var I={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){I.listeners.push(D)}};K.T!==null?h(!0):I.isTransition=!1,v(I),h=l.pending,h===null?(I.next=l.pending=I,zx(l,I)):(I.next=h.next,l.pending=h.next=I)}}function zx(s,l){var h=l.action,v=l.payload,C=s.state;if(l.isTransition){var I=K.T,D={};K.T=D;try{var q=h(C,v),se=K.S;se!==null&&se(D,q),Vx(s,l,q)}catch(xe){yp(s,l,xe)}finally{I!==null&&D.types!==null&&(I.types=D.types),K.T=I}}else try{I=h(C,v),Vx(s,l,I)}catch(xe){yp(s,l,xe)}}function Vx(s,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(v){Gx(s,l,v)},function(v){return yp(s,l,v)}):Gx(s,l,h)}function Gx(s,l,h){l.status="fulfilled",l.value=h,Hx(l),s.state=h,l=s.pending,l!==null&&(h=l.next,h===l?s.pending=null:(h=h.next,l.next=h,zx(s,h)))}function yp(s,l,h){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=h,Hx(l),l=l.next;while(l!==v)}s.action=null}function Hx(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function qx(s,l){return l}function Yx(s,l){if(jt){var h=vn.formState;if(h!==null){e:{var v=bt;if(jt){if(Cn){t:{for(var C=Cn,I=sr;C.nodeType!==8;){if(!I){C=null;break t}if(C=ar(C.nextSibling),C===null){C=null;break t}}I=C.data,C=I==="F!"||I==="F"?C:null}if(C){Cn=ar(C.nextSibling),v=C.data==="F!";break e}}no(v)}v=!1}v&&(l=h[0])}}return h=ss(),h.memoizedState=h.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qx,lastRenderedState:l},h.queue=v,h=d2.bind(null,bt,v),v.dispatch=h,v=xp(!1),I=Ap.bind(null,bt,!1,v.queue),v=ss(),C={state:l,dispatch:null,action:s,pending:null},v.queue=C,h=nS.bind(null,bt,C,I,h),C.dispatch=h,v.memoizedState=s,[l,h,!1]}function Xx(s){var l=ii();return Wx(l,dn,s)}function Wx(s,l,h){if(l=mp(s,l,qx)[0],s=Sf(pa)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=ju(l)}catch(D){throw D===Kl?mf:D}else v=l;l=ii();var C=l.queue,I=C.dispatch;return h!==l.memoizedState&&(bt.flags|=2048,ec(9,{destroy:void 0},iS.bind(null,C,h),null)),[v,I,s]}function iS(s,l){s.action=l}function Kx(s){var l=ii(),h=dn;if(h!==null)return Wx(l,h,s);ii(),l=l.memoizedState,h=ii();var v=h.queue.dispatch;return h.memoizedState=s,[l,v,!1]}function ec(s,l,h,v){return s={tag:s,create:h,deps:v,inst:l,next:null},l=bt.updateQueue,l===null&&(l=Ef(),bt.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=s.next=s:(v=h.next,h.next=s,s.next=v,l.lastEffect=s),s}function $x(){return ii().memoizedState}function Nf(s,l,h,v){var C=ss();bt.flags|=s,C.memoizedState=ec(1|l,{destroy:void 0},h,v===void 0?null:v)}function Cf(s,l,h,v){var C=ii();v=v===void 0?null:v;var I=C.memoizedState.inst;dn!==null&&v!==null&&cp(v,dn.memoizedState.deps)?C.memoizedState=ec(l,I,h,v):(bt.flags|=s,C.memoizedState=ec(1|l,I,h,v))}function Jx(s,l){Nf(8390656,8,s,l)}function vp(s,l){Cf(2048,8,s,l)}function sS(s){bt.flags|=4;var l=bt.updateQueue;if(l===null)l=Ef(),bt.updateQueue=l,l.events=[s];else{var h=l.events;h===null?l.events=[s]:h.push(s)}}function Zx(s){var l=ii().memoizedState;return sS({ref:l,nextImpl:s}),function(){if((Zt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function Qx(s,l){return Cf(4,2,s,l)}function e2(s,l){return Cf(4,4,s,l)}function t2(s,l){if(typeof l=="function"){s=s();var h=l(s);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function n2(s,l,h){h=h!=null?h.concat([s]):null,Cf(4,4,t2.bind(null,l,s),h)}function bp(){}function i2(s,l){var h=ii();l=l===void 0?null:l;var v=h.memoizedState;return l!==null&&cp(l,v[1])?v[0]:(h.memoizedState=[s,l],s)}function s2(s,l){var h=ii();l=l===void 0?null:l;var v=h.memoizedState;if(l!==null&&cp(l,v[1]))return v[0];if(v=s(),el){on(!0);try{s()}finally{on(!1)}}return h.memoizedState=[v,l],v}function wp(s,l,h){return h===void 0||(ha&1073741824)!==0&&(Lt&261930)===0?s.memoizedState=l:(s.memoizedState=h,s=ry(),bt.lanes|=s,fo|=s,h)}function r2(s,l,h,v){return b(h,l)?h:Jl.current!==null?(s=wp(s,h,v),b(s,l)||(hi=!0),s):(ha&42)===0||(ha&1073741824)!==0&&(Lt&261930)===0?(hi=!0,s.memoizedState=h):(s=ry(),bt.lanes|=s,fo|=s,l)}function a2(s,l,h,v,C){var I=J.p;J.p=I!==0&&8>I?I:8;var D=K.T,q={};K.T=q,Ap(s,!1,l,h);try{var se=C(),xe=K.S;if(xe!==null&&xe(q,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Ce=Q4(se,v);Bu(s,l,Ce,Os(s))}else Bu(s,l,v,Os(s))}catch(Re){Bu(s,l,{then:function(){},status:"rejected",reason:Re},Os())}finally{J.p=I,D!==null&&q.types!==null&&(D.types=q.types),K.T=D}}function rS(){}function _p(s,l,h,v){if(s.tag!==5)throw Error(i(476));var C=o2(s).queue;a2(s,C,l,oe,h===null?rS:function(){return l2(s),h(v)})}function o2(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:oe},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:h},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function l2(s){var l=o2(s);l.next===null&&(l=s.alternate.memoizedState),Bu(s,l.next.queue,{},Os())}function Ep(){return Fi(td)}function c2(){return ii().memoizedState}function u2(){return ii().memoizedState}function aS(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var h=Os();s=ro(h);var v=ao(l,s,h);v!==null&&(xs(v,l,h),Mu(v,l,h)),l={cache:Z0()},s.payload=l;return}l=l.return}}function oS(s,l,h){var v=Os();h={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Tf(s)?f2(l,h):(h=z0(s,l,h,v),h!==null&&(xs(h,s,v),h2(h,l,v)))}function d2(s,l,h){var v=Os();Bu(s,l,h,v)}function Bu(s,l,h,v){var C={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Tf(s))f2(l,C);else{var I=s.alternate;if(s.lanes===0&&(I===null||I.lanes===0)&&(I=l.lastRenderedReducer,I!==null))try{var D=l.lastRenderedState,q=I(D,h);if(C.hasEagerState=!0,C.eagerState=q,b(q,D))return lf(s,l,C,0),vn===null&&of(),!1}catch{}finally{}if(h=z0(s,l,C,v),h!==null)return xs(h,s,v),h2(h,l,v),!0}return!1}function Ap(s,l,h,v){if(v={lane:2,revertLane:n1(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Tf(s)){if(l)throw Error(i(479))}else l=z0(s,h,v,2),l!==null&&xs(l,s,2)}function Tf(s){var l=s.alternate;return s===bt||l!==null&&l===bt}function f2(s,l){Zl=wf=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function h2(s,l,h){if((h&4194048)!==0){var v=l.lanes;v&=s.pendingLanes,h|=v,l.lanes=h,Pi(s,h)}}var Uu={readContext:Fi,use:Af,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn};Uu.useEffectEvent=Gn;var p2={readContext:Fi,use:Af,useCallback:function(s,l){return ss().memoizedState=[s,l===void 0?null:l],s},useContext:Fi,useEffect:Jx,useImperativeHandle:function(s,l,h){h=h!=null?h.concat([s]):null,Nf(4194308,4,t2.bind(null,l,s),h)},useLayoutEffect:function(s,l){return Nf(4194308,4,s,l)},useInsertionEffect:function(s,l){Nf(4,2,s,l)},useMemo:function(s,l){var h=ss();l=l===void 0?null:l;var v=s();if(el){on(!0);try{s()}finally{on(!1)}}return h.memoizedState=[v,l],v},useReducer:function(s,l,h){var v=ss();if(h!==void 0){var C=h(l);if(el){on(!0);try{h(l)}finally{on(!1)}}}else C=l;return v.memoizedState=v.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},v.queue=s,s=s.dispatch=oS.bind(null,bt,s),[v.memoizedState,s]},useRef:function(s){var l=ss();return s={current:s},l.memoizedState=s},useState:function(s){s=xp(s);var l=s.queue,h=d2.bind(null,bt,l);return l.dispatch=h,[s.memoizedState,h]},useDebugValue:bp,useDeferredValue:function(s,l){var h=ss();return wp(h,s,l)},useTransition:function(){var s=xp(!1);return s=a2.bind(null,bt,s.queue,!0,!1),ss().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,h){var v=bt,C=ss();if(jt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=l(),vn===null)throw Error(i(349));(Lt&127)!==0||Lx(v,l,h)}C.memoizedState=h;var I={value:h,getSnapshot:l};return C.queue=I,Jx(jx.bind(null,v,I,s),[s]),v.flags|=2048,ec(9,{destroy:void 0},Px.bind(null,v,I,h,l),null),h},useId:function(){var s=ss(),l=vn.identifierPrefix;if(jt){var h=Gr,v=Vr;h=(v&~(1<<32-yt(v)-1)).toString(32)+h,l="_"+l+"R_"+h,h=_f++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=eS++,l="_"+l+"r_"+h.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Ep,useFormState:Yx,useActionState:Yx,useOptimistic:function(s){var l=ss();l.memoizedState=l.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=Ap.bind(null,bt,!0,h),h.dispatch=l,[s,l]},useMemoCache:pp,useCacheRefresh:function(){return ss().memoizedState=aS.bind(null,bt)},useEffectEvent:function(s){var l=ss(),h={impl:s};return l.memoizedState=h,function(){if((Zt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Sp={readContext:Fi,use:Af,useCallback:i2,useContext:Fi,useEffect:vp,useImperativeHandle:n2,useInsertionEffect:Qx,useLayoutEffect:e2,useMemo:s2,useReducer:Sf,useRef:$x,useState:function(){return Sf(pa)},useDebugValue:bp,useDeferredValue:function(s,l){var h=ii();return r2(h,dn.memoizedState,s,l)},useTransition:function(){var s=Sf(pa)[0],l=ii().memoizedState;return[typeof s=="boolean"?s:ju(s),l]},useSyncExternalStore:Dx,useId:c2,useHostTransitionStatus:Ep,useFormState:Xx,useActionState:Xx,useOptimistic:function(s,l){var h=ii();return Fx(h,dn,s,l)},useMemoCache:pp,useCacheRefresh:u2};Sp.useEffectEvent=Zx;var m2={readContext:Fi,use:Af,useCallback:i2,useContext:Fi,useEffect:vp,useImperativeHandle:n2,useInsertionEffect:Qx,useLayoutEffect:e2,useMemo:s2,useReducer:gp,useRef:$x,useState:function(){return gp(pa)},useDebugValue:bp,useDeferredValue:function(s,l){var h=ii();return dn===null?wp(h,s,l):r2(h,dn.memoizedState,s,l)},useTransition:function(){var s=gp(pa)[0],l=ii().memoizedState;return[typeof s=="boolean"?s:ju(s),l]},useSyncExternalStore:Dx,useId:c2,useHostTransitionStatus:Ep,useFormState:Kx,useActionState:Kx,useOptimistic:function(s,l){var h=ii();return dn!==null?Fx(h,dn,s,l):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:pp,useCacheRefresh:u2};m2.useEffectEvent=Zx;function Np(s,l,h,v){l=s.memoizedState,h=h(v,l),h=h==null?l:E({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Cp={enqueueSetState:function(s,l,h){s=s._reactInternals;var v=Os(),C=ro(v);C.payload=l,h!=null&&(C.callback=h),l=ao(s,C,v),l!==null&&(xs(l,s,v),Mu(l,s,v))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var v=Os(),C=ro(v);C.tag=1,C.payload=l,h!=null&&(C.callback=h),l=ao(s,C,v),l!==null&&(xs(l,s,v),Mu(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=Os(),v=ro(h);v.tag=2,l!=null&&(v.callback=l),l=ao(s,v,h),l!==null&&(xs(l,s,h),Mu(l,s,h))}};function g2(s,l,h,v,C,I,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,I,D):l.prototype&&l.prototype.isPureReactComponent?!A(h,v)||!A(C,I):!0}function x2(s,l,h,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,v),l.state!==s&&Cp.enqueueReplaceState(l,l.state,null)}function tl(s,l){var h=l;if("ref"in l){h={};for(var v in l)v!=="ref"&&(h[v]=l[v])}if(s=s.defaultProps){h===l&&(h=E({},h));for(var C in s)h[C]===void 0&&(h[C]=s[C])}return h}function y2(s){af(s)}function v2(s){console.error(s)}function b2(s){af(s)}function If(s,l){try{var h=s.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function w2(s,l,h){try{var v=s.onCaughtError;v(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Tp(s,l,h){return h=ro(h),h.tag=3,h.payload={element:null},h.callback=function(){If(s,l)},h}function _2(s){return s=ro(s),s.tag=3,s}function E2(s,l,h,v){var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var I=v.value;s.payload=function(){return C(I)},s.callback=function(){w2(l,h,v)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){w2(l,h,v),typeof C!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var q=v.stack;this.componentDidCatch(v.value,{componentStack:q!==null?q:""})})}function lS(s,l,h,v,C){if(h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=h.alternate,l!==null&&Yl(l,h,C,!0),h=Ts.current,h!==null){switch(h.tag){case 31:case 13:return rr===null?zf():h.alternate===null&&Hn===0&&(Hn=3),h.flags&=-257,h.flags|=65536,h.lanes=C,v===gf?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([v]):l.add(v),Qp(s,v,C)),!1;case 22:return h.flags|=65536,v===gf?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([v]):h.add(v)),Qp(s,v,C)),!1}throw Error(i(435,h.tag))}return Qp(s,v,C),zf(),!1}if(jt)return l=Ts.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=C,v!==X0&&(s=Error(i(422),{cause:v}),Tu(tr(s,h)))):(v!==X0&&(l=Error(i(423),{cause:v}),Tu(tr(l,h))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,v=tr(v,h),C=Tp(s.stateNode,v,C),sp(s,C),Hn!==4&&(Hn=2)),!1;var I=Error(i(520),{cause:v});if(I=tr(I,h),Xu===null?Xu=[I]:Xu.push(I),Hn!==4&&(Hn=2),l===null)return!0;v=tr(v,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,s=C&-C,h.lanes|=s,s=Tp(h.stateNode,v,s),sp(h,s),!1;case 1:if(l=h.type,I=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ho===null||!ho.has(I))))return h.flags|=65536,C&=-C,h.lanes|=C,C=_2(C),E2(C,s,h,v),sp(h,C),!1}h=h.return}while(h!==null);return!1}var Ip=Error(i(461)),hi=!1;function zi(s,l,h,v){l.child=s===null?Cx(l,null,h,v):Qo(l,s.child,h,v)}function A2(s,l,h,v,C){h=h.render;var I=l.ref;if("ref"in v){var D={};for(var q in v)q!=="ref"&&(D[q]=v[q])}else D=v;return Ko(l),v=up(s,l,h,D,I,C),q=dp(),s!==null&&!hi?(fp(s,l,C),ma(s,l,C)):(jt&&q&&q0(l),l.flags|=1,zi(s,l,v,C),l.child)}function S2(s,l,h,v,C){if(s===null){var I=h.type;return typeof I=="function"&&!V0(I)&&I.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=I,N2(s,l,I,v,C)):(s=uf(h.type,null,v,l,l.mode,C),s.ref=l.ref,s.return=l,l.child=s)}if(I=s.child,!jp(s,C)){var D=I.memoizedProps;if(h=h.compare,h=h!==null?h:A,h(D,v)&&s.ref===l.ref)return ma(s,l,C)}return l.flags|=1,s=ca(I,v),s.ref=l.ref,s.return=l,l.child=s}function N2(s,l,h,v,C){if(s!==null){var I=s.memoizedProps;if(A(I,v)&&s.ref===l.ref)if(hi=!1,l.pendingProps=v=I,jp(s,C))(s.flags&131072)!==0&&(hi=!0);else return l.lanes=s.lanes,ma(s,l,C)}return Rp(s,l,h,v,C)}function C2(s,l,h,v){var C=v.children,I=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(I=I!==null?I.baseLanes|h:h,s!==null){for(v=l.child=s.child,C=0;v!==null;)C=C|v.lanes|v.childLanes,v=v.sibling;v=C&~I}else v=0,l.child=null;return T2(s,l,I,h,v)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&pf(l,I!==null?I.cachePool:null),I!==null?Rx(l,I):ap(),kx(l);else return v=l.lanes=536870912,T2(s,l,I!==null?I.baseLanes|h:h,h,v)}else I!==null?(pf(l,I.cachePool),Rx(l,I),lo(),l.memoizedState=null):(s!==null&&pf(l,null),ap(),lo());return zi(s,l,C,h),l.child}function Fu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function T2(s,l,h,v,C){var I=ep();return I=I===null?null:{parent:di._currentValue,pool:I},l.memoizedState={baseLanes:h,cachePool:I},s!==null&&pf(l,null),ap(),kx(l),s!==null&&Yl(s,l,v,!0),l.childLanes=C,null}function Rf(s,l){return l=Of({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function I2(s,l,h){return Qo(l,s.child,null,h),s=Rf(l,l.pendingProps),s.flags|=2,Is(l),l.memoizedState=null,s}function cS(s,l,h){var v=l.pendingProps,C=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(jt){if(v.mode==="hidden")return s=Rf(l,v),l.lanes=536870912,Fu(null,s);if(lp(l),(s=Cn)?(s=zy(s,sr),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:eo!==null?{id:Vr,overflow:Gr}:null,retryLane:536870912,hydrationErrors:null},h=fx(s),h.return=l,l.child=h,Ui=l,Cn=null)):s=null,s===null)throw no(l);return l.lanes=536870912,null}return Rf(l,v)}var I=s.memoizedState;if(I!==null){var D=I.dehydrated;if(lp(l),C)if(l.flags&256)l.flags&=-257,l=I2(s,l,h);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(i(558));else if(hi||Yl(s,l,h,!1),C=(h&s.childLanes)!==0,hi||C){if(v=vn,v!==null&&(D=gr(v,h),D!==0&&D!==I.retryLane))throw I.retryLane=D,qo(s,D),xs(v,s,D),Ip;zf(),l=I2(s,l,h)}else s=I.treeContext,Cn=ar(D.nextSibling),Ui=l,jt=!0,to=null,sr=!1,s!==null&&mx(l,s),l=Rf(l,v),l.flags|=4096;return l}return s=ca(s.child,{mode:v.mode,children:v.children}),s.ref=l.ref,l.child=s,s.return=l,s}function kf(s,l){var h=l.ref;if(h===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(s===null||s.ref!==h)&&(l.flags|=4194816)}}function Rp(s,l,h,v,C){return Ko(l),h=up(s,l,h,v,void 0,C),v=dp(),s!==null&&!hi?(fp(s,l,C),ma(s,l,C)):(jt&&v&&q0(l),l.flags|=1,zi(s,l,h,C),l.child)}function R2(s,l,h,v,C,I){return Ko(l),l.updateQueue=null,h=Mx(l,v,h,C),Ox(s),v=dp(),s!==null&&!hi?(fp(s,l,I),ma(s,l,I)):(jt&&v&&q0(l),l.flags|=1,zi(s,l,h,I),l.child)}function k2(s,l,h,v,C){if(Ko(l),l.stateNode===null){var I=Vl,D=h.contextType;typeof D=="object"&&D!==null&&(I=Fi(D)),I=new h(v,I),l.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Cp,l.stateNode=I,I._reactInternals=l,I=l.stateNode,I.props=v,I.state=l.memoizedState,I.refs={},np(l),D=h.contextType,I.context=typeof D=="object"&&D!==null?Fi(D):Vl,I.state=l.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Np(l,h,D,v),I.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(D=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),D!==I.state&&Cp.enqueueReplaceState(I,I.state,null),Lu(l,v,I,C),Du(),I.state=l.memoizedState),typeof I.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(s===null){I=l.stateNode;var q=l.memoizedProps,se=tl(h,q);I.props=se;var xe=I.context,Ce=h.contextType;D=Vl,typeof Ce=="object"&&Ce!==null&&(D=Fi(Ce));var Re=h.getDerivedStateFromProps;Ce=typeof Re=="function"||typeof I.getSnapshotBeforeUpdate=="function",q=l.pendingProps!==q,Ce||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q||xe!==D)&&x2(l,I,v,D),so=!1;var ye=l.memoizedState;I.state=ye,Lu(l,v,I,C),Du(),xe=l.memoizedState,q||ye!==xe||so?(typeof Re=="function"&&(Np(l,h,Re,v),xe=l.memoizedState),(se=so||g2(l,h,se,v,ye,xe,D))?(Ce||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(l.flags|=4194308)):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=xe),I.props=v,I.state=xe,I.context=D,v=se):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{I=l.stateNode,ip(s,l),D=l.memoizedProps,Ce=tl(h,D),I.props=Ce,Re=l.pendingProps,ye=I.context,xe=h.contextType,se=Vl,typeof xe=="object"&&xe!==null&&(se=Fi(xe)),q=h.getDerivedStateFromProps,(xe=typeof q=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==Re||ye!==se)&&x2(l,I,v,se),so=!1,ye=l.memoizedState,I.state=ye,Lu(l,v,I,C),Du();var Ae=l.memoizedState;D!==Re||ye!==Ae||so||s!==null&&s.dependencies!==null&&ff(s.dependencies)?(typeof q=="function"&&(Np(l,h,q,v),Ae=l.memoizedState),(Ce=so||g2(l,h,Ce,v,ye,Ae,se)||s!==null&&s.dependencies!==null&&ff(s.dependencies))?(xe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,Ae,se),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,Ae,se)),typeof I.componentDidUpdate=="function"&&(l.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof I.componentDidUpdate!="function"||D===s.memoizedProps&&ye===s.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ye===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=Ae),I.props=v,I.state=Ae,I.context=se,v=Ce):(typeof I.componentDidUpdate!="function"||D===s.memoizedProps&&ye===s.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ye===s.memoizedState||(l.flags|=1024),v=!1)}return I=v,kf(s,l),v=(l.flags&128)!==0,I||v?(I=l.stateNode,h=v&&typeof h.getDerivedStateFromError!="function"?null:I.render(),l.flags|=1,s!==null&&v?(l.child=Qo(l,s.child,null,C),l.child=Qo(l,null,h,C)):zi(s,l,h,C),l.memoizedState=I.state,s=l.child):s=ma(s,l,C),s}function O2(s,l,h,v){return Xo(),l.flags|=256,zi(s,l,h,v),l.child}var kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Op(s){return{baseLanes:s,cachePool:wx()}}function Mp(s,l,h){return s=s!==null?s.childLanes&~h:0,l&&(s|=ks),s}function M2(s,l,h){var v=l.pendingProps,C=!1,I=(l.flags&128)!==0,D;if((D=I)||(D=s!==null&&s.memoizedState===null?!1:(ni.current&2)!==0),D&&(C=!0,l.flags&=-129),D=(l.flags&32)!==0,l.flags&=-33,s===null){if(jt){if(C?oo(l):lo(),(s=Cn)?(s=zy(s,sr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:eo!==null?{id:Vr,overflow:Gr}:null,retryLane:536870912,hydrationErrors:null},h=fx(s),h.return=l,l.child=h,Ui=l,Cn=null)):s=null,s===null)throw no(l);return m1(s)?l.lanes=32:l.lanes=536870912,null}var q=v.children;return v=v.fallback,C?(lo(),C=l.mode,q=Of({mode:"hidden",children:q},C),v=Yo(v,C,h,null),q.return=l,v.return=l,q.sibling=v,l.child=q,v=l.child,v.memoizedState=Op(h),v.childLanes=Mp(s,D,h),l.memoizedState=kp,Fu(null,v)):(oo(l),Dp(l,q))}var se=s.memoizedState;if(se!==null&&(q=se.dehydrated,q!==null)){if(I)l.flags&256?(oo(l),l.flags&=-257,l=Lp(s,l,h)):l.memoizedState!==null?(lo(),l.child=s.child,l.flags|=128,l=null):(lo(),q=v.fallback,C=l.mode,v=Of({mode:"visible",children:v.children},C),q=Yo(q,C,h,null),q.flags|=2,v.return=l,q.return=l,v.sibling=q,l.child=v,Qo(l,s.child,null,h),v=l.child,v.memoizedState=Op(h),v.childLanes=Mp(s,D,h),l.memoizedState=kp,l=Fu(null,v));else if(oo(l),m1(q)){if(D=q.nextSibling&&q.nextSibling.dataset,D)var xe=D.dgst;D=xe,v=Error(i(419)),v.stack="",v.digest=D,Tu({value:v,source:null,stack:null}),l=Lp(s,l,h)}else if(hi||Yl(s,l,h,!1),D=(h&s.childLanes)!==0,hi||D){if(D=vn,D!==null&&(v=gr(D,h),v!==0&&v!==se.retryLane))throw se.retryLane=v,qo(s,v),xs(D,s,v),Ip;p1(q)||zf(),l=Lp(s,l,h)}else p1(q)?(l.flags|=192,l.child=s.child,l=null):(s=se.treeContext,Cn=ar(q.nextSibling),Ui=l,jt=!0,to=null,sr=!1,s!==null&&mx(l,s),l=Dp(l,v.children),l.flags|=4096);return l}return C?(lo(),q=v.fallback,C=l.mode,se=s.child,xe=se.sibling,v=ca(se,{mode:"hidden",children:v.children}),v.subtreeFlags=se.subtreeFlags&65011712,xe!==null?q=ca(xe,q):(q=Yo(q,C,h,null),q.flags|=2),q.return=l,v.return=l,v.sibling=q,l.child=v,Fu(null,v),v=l.child,q=s.child.memoizedState,q===null?q=Op(h):(C=q.cachePool,C!==null?(se=di._currentValue,C=C.parent!==se?{parent:se,pool:se}:C):C=wx(),q={baseLanes:q.baseLanes|h,cachePool:C}),v.memoizedState=q,v.childLanes=Mp(s,D,h),l.memoizedState=kp,Fu(s.child,v)):(oo(l),h=s.child,s=h.sibling,h=ca(h,{mode:"visible",children:v.children}),h.return=l,h.sibling=null,s!==null&&(D=l.deletions,D===null?(l.deletions=[s],l.flags|=16):D.push(s)),l.child=h,l.memoizedState=null,h)}function Dp(s,l){return l=Of({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Of(s,l){return s=Cs(22,s,null,l),s.lanes=0,s}function Lp(s,l,h){return Qo(l,s.child,null,h),s=Dp(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function D2(s,l,h){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),$0(s.return,l,h)}function Pp(s,l,h,v,C,I){var D=s.memoizedState;D===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:C,treeForkCount:I}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=v,D.tail=h,D.tailMode=C,D.treeForkCount=I)}function L2(s,l,h){var v=l.pendingProps,C=v.revealOrder,I=v.tail;v=v.children;var D=ni.current,q=(D&2)!==0;if(q?(D=D&1|2,l.flags|=128):D&=1,ve(ni,D),zi(s,l,v,h),v=jt?Cu:0,!q&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&D2(s,h,l);else if(s.tag===19)D2(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(h=l.child,C=null;h!==null;)s=h.alternate,s!==null&&bf(s)===null&&(C=h),h=h.sibling;h=C,h===null?(C=l.child,l.child=null):(C=h.sibling,h.sibling=null),Pp(l,!1,C,h,I,v);break;case"backwards":case"unstable_legacy-backwards":for(h=null,C=l.child,l.child=null;C!==null;){if(s=C.alternate,s!==null&&bf(s)===null){l.child=C;break}s=C.sibling,C.sibling=h,h=C,C=s}Pp(l,!0,h,null,I,v);break;case"together":Pp(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function ma(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),fo|=l.lanes,(h&l.childLanes)===0)if(s!==null){if(Yl(s,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,h=ca(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=ca(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function jp(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&ff(s)))}function uS(s,l,h){switch(l.tag){case 3:mt(l,l.stateNode.containerInfo),io(l,di,s.memoizedState.cache),Xo();break;case 27:case 5:In(l);break;case 4:mt(l,l.stateNode.containerInfo);break;case 10:io(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,lp(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(oo(l),l.flags|=128,null):(h&l.child.childLanes)!==0?M2(s,l,h):(oo(l),s=ma(s,l,h),s!==null?s.sibling:null);oo(l);break;case 19:var C=(s.flags&128)!==0;if(v=(h&l.childLanes)!==0,v||(Yl(s,l,h,!1),v=(h&l.childLanes)!==0),C){if(v)return L2(s,l,h);l.flags|=128}if(C=l.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ve(ni,ni.current),v)break;return null;case 22:return l.lanes=0,C2(s,l,h,l.pendingProps);case 24:io(l,di,s.memoizedState.cache)}return ma(s,l,h)}function P2(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps)hi=!0;else{if(!jp(s,h)&&(l.flags&128)===0)return hi=!1,uS(s,l,h);hi=(s.flags&131072)!==0}else hi=!1,jt&&(l.flags&1048576)!==0&&px(l,Cu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var v=l.pendingProps;if(s=Jo(l.elementType),l.type=s,typeof s=="function")V0(s)?(v=tl(s,v),l.tag=1,l=k2(null,l,s,v,h)):(l.tag=0,l=Rp(null,l,s,v,h));else{if(s!=null){var C=s.$$typeof;if(C===F){l.tag=11,l=A2(null,l,s,v,h);break e}else if(C===te){l.tag=14,l=S2(null,l,s,v,h);break e}}throw l=ue(s)||s,Error(i(306,l,""))}}return l;case 0:return Rp(s,l,l.type,l.pendingProps,h);case 1:return v=l.type,C=tl(v,l.pendingProps),k2(s,l,v,C,h);case 3:e:{if(mt(l,l.stateNode.containerInfo),s===null)throw Error(i(387));v=l.pendingProps;var I=l.memoizedState;C=I.element,ip(s,l),Lu(l,v,null,h);var D=l.memoizedState;if(v=D.cache,io(l,di,v),v!==I.cache&&J0(l,[di],h,!0),Du(),v=D.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:D.cache},l.updateQueue.baseState=I,l.memoizedState=I,l.flags&256){l=O2(s,l,v,h);break e}else if(v!==C){C=tr(Error(i(424)),l),Tu(C),l=O2(s,l,v,h);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Cn=ar(s.firstChild),Ui=l,jt=!0,to=null,sr=!0,h=Cx(l,null,v,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Xo(),v===C){l=ma(s,l,h);break e}zi(s,l,v,h)}l=l.child}return l;case 26:return kf(s,l),s===null?(h=Xy(l.type,null,l.pendingProps,null))?l.memoizedState=h:jt||(h=l.type,s=l.pendingProps,v=Wf(Oe.current).createElement(h),v[Ht]=l,v[at]=s,Vi(v,h,s),zn(v),l.stateNode=v):l.memoizedState=Xy(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return In(l),s===null&&jt&&(v=l.stateNode=Hy(l.type,l.pendingProps,Oe.current),Ui=l,sr=!0,C=Cn,xo(l.type)?(g1=C,Cn=ar(v.firstChild)):Cn=C),zi(s,l,l.pendingProps.children,h),kf(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&jt&&((C=v=Cn)&&(v=FS(v,l.type,l.pendingProps,sr),v!==null?(l.stateNode=v,Ui=l,Cn=ar(v.firstChild),sr=!1,C=!0):C=!1),C||no(l)),In(l),C=l.type,I=l.pendingProps,D=s!==null?s.memoizedProps:null,v=I.children,d1(C,I)?v=null:D!==null&&d1(C,D)&&(l.flags|=32),l.memoizedState!==null&&(C=up(s,l,tS,null,null,h),td._currentValue=C),kf(s,l),zi(s,l,v,h),l.child;case 6:return s===null&&jt&&((s=h=Cn)&&(h=zS(h,l.pendingProps,sr),h!==null?(l.stateNode=h,Ui=l,Cn=null,s=!0):s=!1),s||no(l)),null;case 13:return M2(s,l,h);case 4:return mt(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=Qo(l,null,v,h):zi(s,l,v,h),l.child;case 11:return A2(s,l,l.type,l.pendingProps,h);case 7:return zi(s,l,l.pendingProps,h),l.child;case 8:return zi(s,l,l.pendingProps.children,h),l.child;case 12:return zi(s,l,l.pendingProps.children,h),l.child;case 10:return v=l.pendingProps,io(l,l.type,v.value),zi(s,l,v.children,h),l.child;case 9:return C=l.type._context,v=l.pendingProps.children,Ko(l),C=Fi(C),v=v(C),l.flags|=1,zi(s,l,v,h),l.child;case 14:return S2(s,l,l.type,l.pendingProps,h);case 15:return N2(s,l,l.type,l.pendingProps,h);case 19:return L2(s,l,h);case 31:return cS(s,l,h);case 22:return C2(s,l,h,l.pendingProps);case 24:return Ko(l),v=Fi(di),s===null?(C=ep(),C===null&&(C=vn,I=Z0(),C.pooledCache=I,I.refCount++,I!==null&&(C.pooledCacheLanes|=h),C=I),l.memoizedState={parent:v,cache:C},np(l),io(l,di,C)):((s.lanes&h)!==0&&(ip(s,l),Lu(l,null,null,h),Du()),C=s.memoizedState,I=l.memoizedState,C.parent!==v?(C={parent:v,cache:v},l.memoizedState=C,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=C),io(l,di,v)):(v=I.cache,io(l,di,v),v!==C.cache&&J0(l,[di],h,!0))),zi(s,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function ga(s){s.flags|=4}function Bp(s,l,h,v,C){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(cy())s.flags|=8192;else throw Zo=gf,tp}else s.flags&=-16777217}function j2(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Zy(l))if(cy())s.flags|=8192;else throw Zo=gf,tp}function Mf(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Be():536870912,s.lanes|=l,sc|=l)}function zu(s,l){if(!jt)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Tn(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,v=0;if(l)for(var C=s.child;C!==null;)h|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)h|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=v,s.childLanes=h,l}function dS(s,l,h){var v=l.pendingProps;switch(Y0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(l),null;case 1:return Tn(l),null;case 3:return h=l.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),fa(di),Ft(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(ql(l)?ga(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,W0())),Tn(l),null;case 26:var C=l.type,I=l.memoizedState;return s===null?(ga(l),I!==null?(Tn(l),j2(l,I)):(Tn(l),Bp(l,C,null,v,h))):I?I!==s.memoizedState?(ga(l),Tn(l),j2(l,I)):(Tn(l),l.flags&=-16777217):(s=s.memoizedProps,s!==v&&ga(l),Tn(l),Bp(l,C,s,v,h)),null;case 27:if(En(l),h=Oe.current,C=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&ga(l);else{if(!v){if(l.stateNode===null)throw Error(i(166));return Tn(l),null}s=Ie.current,ql(l)?gx(l):(s=Hy(C,v,h),l.stateNode=s,ga(l))}return Tn(l),null;case 5:if(En(l),C=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&ga(l);else{if(!v){if(l.stateNode===null)throw Error(i(166));return Tn(l),null}if(I=Ie.current,ql(l))gx(l);else{var D=Wf(Oe.current);switch(I){case 1:I=D.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:I=D.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":I=D.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":I=D.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":I=D.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof v.is=="string"?D.createElement("select",{is:v.is}):D.createElement("select"),v.multiple?I.multiple=!0:v.size&&(I.size=v.size);break;default:I=typeof v.is=="string"?D.createElement(C,{is:v.is}):D.createElement(C)}}I[Ht]=l,I[at]=v;e:for(D=l.child;D!==null;){if(D.tag===5||D.tag===6)I.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===l)break e;for(;D.sibling===null;){if(D.return===null||D.return===l)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}l.stateNode=I;e:switch(Vi(I,C,v),C){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&ga(l)}}return Tn(l),Bp(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,h),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==v&&ga(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(i(166));if(s=Oe.current,ql(l)){if(s=l.stateNode,h=l.memoizedProps,v=null,C=Ui,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}s[Ht]=l,s=!!(s.nodeValue===h||v!==null&&v.suppressHydrationWarning===!0||My(s.nodeValue,h)),s||no(l,!0)}else s=Wf(s).createTextNode(v),s[Ht]=l,l.stateNode=s}return Tn(l),null;case 31:if(h=l.memoizedState,s===null||s.memoizedState!==null){if(v=ql(l),h!==null){if(s===null){if(!v)throw Error(i(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ht]=l}else Xo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Tn(l),s=!1}else h=W0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return l.flags&256?(Is(l),l):(Is(l),null);if((l.flags&128)!==0)throw Error(i(558))}return Tn(l),null;case 13:if(v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=ql(l),v!==null&&v.dehydrated!==null){if(s===null){if(!C)throw Error(i(318));if(C=l.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[Ht]=l}else Xo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Tn(l),C=!1}else C=W0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return l.flags&256?(Is(l),l):(Is(l),null)}return Is(l),(l.flags&128)!==0?(l.lanes=h,l):(h=v!==null,s=s!==null&&s.memoizedState!==null,h&&(v=l.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool),I=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(I=v.memoizedState.cachePool.pool),I!==C&&(v.flags|=2048)),h!==s&&h&&(l.child.flags|=8192),Mf(l,l.updateQueue),Tn(l),null);case 4:return Ft(),s===null&&a1(l.stateNode.containerInfo),Tn(l),null;case 10:return fa(l.type),Tn(l),null;case 19:if(ae(ni),v=l.memoizedState,v===null)return Tn(l),null;if(C=(l.flags&128)!==0,I=v.rendering,I===null)if(C)zu(v,!1);else{if(Hn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(I=bf(s),I!==null){for(l.flags|=128,zu(v,!1),s=I.updateQueue,l.updateQueue=s,Mf(l,s),l.subtreeFlags=0,s=h,h=l.child;h!==null;)dx(h,s),h=h.sibling;return ve(ni,ni.current&1|2),jt&&ua(l,v.treeForkCount),l.child}s=s.sibling}v.tail!==null&&Nt()>Bf&&(l.flags|=128,C=!0,zu(v,!1),l.lanes=4194304)}else{if(!C)if(s=bf(I),s!==null){if(l.flags|=128,C=!0,s=s.updateQueue,l.updateQueue=s,Mf(l,s),zu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!jt)return Tn(l),null}else 2*Nt()-v.renderingStartTime>Bf&&h!==536870912&&(l.flags|=128,C=!0,zu(v,!1),l.lanes=4194304);v.isBackwards?(I.sibling=l.child,l.child=I):(s=v.last,s!==null?s.sibling=I:l.child=I,v.last=I)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Nt(),s.sibling=null,h=ni.current,ve(ni,C?h&1|2:h&1),jt&&ua(l,v.treeForkCount),s):(Tn(l),null);case 22:case 23:return Is(l),op(),v=l.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(h&536870912)!==0&&(l.flags&128)===0&&(Tn(l),l.subtreeFlags&6&&(l.flags|=8192)):Tn(l),h=l.updateQueue,h!==null&&Mf(l,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==h&&(l.flags|=2048),s!==null&&ae($o),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),fa(di),Tn(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function fS(s,l){switch(Y0(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return fa(di),Ft(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return En(l),null;case 31:if(l.memoizedState!==null){if(Is(l),l.alternate===null)throw Error(i(340));Xo()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Is(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Xo()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return ae(ni),null;case 4:return Ft(),null;case 10:return fa(l.type),null;case 22:case 23:return Is(l),op(),s!==null&&ae($o),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return fa(di),null;case 25:return null;default:return null}}function B2(s,l){switch(Y0(l),l.tag){case 3:fa(di),Ft();break;case 26:case 27:case 5:En(l);break;case 4:Ft();break;case 31:l.memoizedState!==null&&Is(l);break;case 13:Is(l);break;case 19:ae(ni);break;case 10:fa(l.type);break;case 22:case 23:Is(l),op(),s!==null&&ae($o);break;case 24:fa(di)}}function Vu(s,l){try{var h=l.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var C=v.next;h=C;do{if((h.tag&s)===s){v=void 0;var I=h.create,D=h.inst;v=I(),D.destroy=v}h=h.next}while(h!==C)}}catch(q){cn(l,l.return,q)}}function co(s,l,h){try{var v=l.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var I=C.next;v=I;do{if((v.tag&s)===s){var D=v.inst,q=D.destroy;if(q!==void 0){D.destroy=void 0,C=l;var se=h,xe=q;try{xe()}catch(Ce){cn(C,se,Ce)}}}v=v.next}while(v!==I)}}catch(Ce){cn(l,l.return,Ce)}}function U2(s){var l=s.updateQueue;if(l!==null){var h=s.stateNode;try{Ix(l,h)}catch(v){cn(s,s.return,v)}}}function F2(s,l,h){h.props=tl(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(v){cn(s,l,v)}}function Gu(s,l){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof h=="function"?s.refCleanup=h(v):h.current=v}}catch(C){cn(s,l,C)}}function Hr(s,l){var h=s.ref,v=s.refCleanup;if(h!==null)if(typeof v=="function")try{v()}catch(C){cn(s,l,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(C){cn(s,l,C)}else h.current=null}function z2(s){var l=s.type,h=s.memoizedProps,v=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&v.focus();break e;case"img":h.src?v.src=h.src:h.srcSet&&(v.srcset=h.srcSet)}}catch(C){cn(s,s.return,C)}}function Up(s,l,h){try{var v=s.stateNode;DS(v,s.type,h,l),v[at]=l}catch(C){cn(s,s.return,C)}}function V2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&xo(s.type)||s.tag===4}function Fp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||V2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&xo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zp(s,l,h){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(s),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=us));else if(v!==4&&(v===27&&xo(s.type)&&(h=s.stateNode,l=null),s=s.child,s!==null))for(zp(s,l,h),s=s.sibling;s!==null;)zp(s,l,h),s=s.sibling}function Df(s,l,h){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(v!==4&&(v===27&&xo(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(Df(s,l,h),s=s.sibling;s!==null;)Df(s,l,h),s=s.sibling}function G2(s){var l=s.stateNode,h=s.memoizedProps;try{for(var v=s.type,C=l.attributes;C.length;)l.removeAttributeNode(C[0]);Vi(l,v,h),l[Ht]=s,l[at]=h}catch(I){cn(s,s.return,I)}}var xa=!1,pi=!1,Vp=!1,H2=typeof WeakSet=="function"?WeakSet:Set,Ri=null;function hS(s,l){if(s=s.containerInfo,c1=th,s=z(s),G(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var C=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{h.nodeType,I.nodeType}catch{h=null;break e}var D=0,q=-1,se=-1,xe=0,Ce=0,Re=s,ye=null;t:for(;;){for(var Ae;Re!==h||C!==0&&Re.nodeType!==3||(q=D+C),Re!==I||v!==0&&Re.nodeType!==3||(se=D+v),Re.nodeType===3&&(D+=Re.nodeValue.length),(Ae=Re.firstChild)!==null;)ye=Re,Re=Ae;for(;;){if(Re===s)break t;if(ye===h&&++xe===C&&(q=D),ye===I&&++Ce===v&&(se=D),(Ae=Re.nextSibling)!==null)break;Re=ye,ye=Re.parentNode}Re=Ae}h=q===-1||se===-1?null:{start:q,end:se}}else h=null}h=h||{start:0,end:0}}else h=null;for(u1={focusedElem:s,selectionRange:h},th=!1,Ri=l;Ri!==null;)if(l=Ri,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Ri=s;else for(;Ri!==null;){switch(l=Ri,I=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)C=s[h],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&I!==null){s=void 0,h=l,C=I.memoizedProps,I=I.memoizedState,v=h.stateNode;try{var Xe=tl(h.type,C);s=v.getSnapshotBeforeUpdate(Xe,I),v.__reactInternalSnapshotBeforeUpdate=s}catch(ot){cn(h,h.return,ot)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,h=s.nodeType,h===9)h1(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":h1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,Ri=s;break}Ri=l.return}}function q2(s,l,h){var v=h.flags;switch(h.tag){case 0:case 11:case 15:va(s,h),v&4&&Vu(5,h);break;case 1:if(va(s,h),v&4)if(s=h.stateNode,l===null)try{s.componentDidMount()}catch(D){cn(h,h.return,D)}else{var C=tl(h.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(C,l,s.__reactInternalSnapshotBeforeUpdate)}catch(D){cn(h,h.return,D)}}v&64&&U2(h),v&512&&Gu(h,h.return);break;case 3:if(va(s,h),v&64&&(s=h.updateQueue,s!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{Ix(s,l)}catch(D){cn(h,h.return,D)}}break;case 27:l===null&&v&4&&G2(h);case 26:case 5:va(s,h),l===null&&v&4&&z2(h),v&512&&Gu(h,h.return);break;case 12:va(s,h);break;case 31:va(s,h),v&4&&W2(s,h);break;case 13:va(s,h),v&4&&K2(s,h),v&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=_S.bind(null,h),VS(s,h))));break;case 22:if(v=h.memoizedState!==null||xa,!v){l=l!==null&&l.memoizedState!==null||pi,C=xa;var I=pi;xa=v,(pi=l)&&!I?ba(s,h,(h.subtreeFlags&8772)!==0):va(s,h),xa=C,pi=I}break;case 30:break;default:va(s,h)}}function Y2(s){var l=s.alternate;l!==null&&(s.alternate=null,Y2(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&cs(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kn=null,hs=!1;function ya(s,l,h){for(h=h.child;h!==null;)X2(s,l,h),h=h.sibling}function X2(s,l,h){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(un,h)}catch{}switch(h.tag){case 26:pi||Hr(h,l),ya(s,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:pi||Hr(h,l);var v=kn,C=hs;xo(h.type)&&(kn=h.stateNode,hs=!1),ya(s,l,h),Zu(h.stateNode),kn=v,hs=C;break;case 5:pi||Hr(h,l);case 6:if(v=kn,C=hs,kn=null,ya(s,l,h),kn=v,hs=C,kn!==null)if(hs)try{(kn.nodeType===9?kn.body:kn.nodeName==="HTML"?kn.ownerDocument.body:kn).removeChild(h.stateNode)}catch(I){cn(h,l,I)}else try{kn.removeChild(h.stateNode)}catch(I){cn(h,l,I)}break;case 18:kn!==null&&(hs?(s=kn,Uy(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),fc(s)):Uy(kn,h.stateNode));break;case 4:v=kn,C=hs,kn=h.stateNode.containerInfo,hs=!0,ya(s,l,h),kn=v,hs=C;break;case 0:case 11:case 14:case 15:co(2,h,l),pi||co(4,h,l),ya(s,l,h);break;case 1:pi||(Hr(h,l),v=h.stateNode,typeof v.componentWillUnmount=="function"&&F2(h,l,v)),ya(s,l,h);break;case 21:ya(s,l,h);break;case 22:pi=(v=pi)||h.memoizedState!==null,ya(s,l,h),pi=v;break;default:ya(s,l,h)}}function W2(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{fc(s)}catch(h){cn(l,l.return,h)}}}function K2(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{fc(s)}catch(h){cn(l,l.return,h)}}function pS(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new H2),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new H2),l;default:throw Error(i(435,s.tag))}}function Lf(s,l){var h=pS(s);l.forEach(function(v){if(!h.has(v)){h.add(v);var C=ES.bind(null,s,v);v.then(C,C)}})}function ps(s,l){var h=l.deletions;if(h!==null)for(var v=0;v<h.length;v++){var C=h[v],I=s,D=l,q=D;e:for(;q!==null;){switch(q.tag){case 27:if(xo(q.type)){kn=q.stateNode,hs=!1;break e}break;case 5:kn=q.stateNode,hs=!1;break e;case 3:case 4:kn=q.stateNode.containerInfo,hs=!0;break e}q=q.return}if(kn===null)throw Error(i(160));X2(I,D,C),kn=null,hs=!1,I=C.alternate,I!==null&&(I.return=null),C.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)$2(l,s),l=l.sibling}var Ar=null;function $2(s,l){var h=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ps(l,s),ms(s),v&4&&(co(3,s,s.return),Vu(3,s),co(5,s,s.return));break;case 1:ps(l,s),ms(s),v&512&&(pi||h===null||Hr(h,h.return)),v&64&&xa&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?v:h.concat(v))));break;case 26:var C=Ar;if(ps(l,s),ms(s),v&512&&(pi||h===null||Hr(h,h.return)),v&4){var I=h!==null?h.memoizedState:null;if(v=s.memoizedState,h===null)if(v===null)if(s.stateNode===null){e:{v=s.type,h=s.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":I=C.getElementsByTagName("title")[0],(!I||I[Po]||I[Ht]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=C.createElement(v),C.head.insertBefore(I,C.querySelector("head > title"))),Vi(I,v,h),I[Ht]=s,zn(I),v=I;break e;case"link":var D=$y("link","href",C).get(v+(h.href||""));if(D){for(var q=0;q<D.length;q++)if(I=D[q],I.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&I.getAttribute("rel")===(h.rel==null?null:h.rel)&&I.getAttribute("title")===(h.title==null?null:h.title)&&I.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(q,1);break t}}I=C.createElement(v),Vi(I,v,h),C.head.appendChild(I);break;case"meta":if(D=$y("meta","content",C).get(v+(h.content||""))){for(q=0;q<D.length;q++)if(I=D[q],I.getAttribute("content")===(h.content==null?null:""+h.content)&&I.getAttribute("name")===(h.name==null?null:h.name)&&I.getAttribute("property")===(h.property==null?null:h.property)&&I.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&I.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(q,1);break t}}I=C.createElement(v),Vi(I,v,h),C.head.appendChild(I);break;default:throw Error(i(468,v))}I[Ht]=s,zn(I),v=I}s.stateNode=v}else Jy(C,s.type,s.stateNode);else s.stateNode=Ky(C,v,s.memoizedProps);else I!==v?(I===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):I.count--,v===null?Jy(C,s.type,s.stateNode):Ky(C,v,s.memoizedProps)):v===null&&s.stateNode!==null&&Up(s,s.memoizedProps,h.memoizedProps)}break;case 27:ps(l,s),ms(s),v&512&&(pi||h===null||Hr(h,h.return)),h!==null&&v&4&&Up(s,s.memoizedProps,h.memoizedProps);break;case 5:if(ps(l,s),ms(s),v&512&&(pi||h===null||Hr(h,h.return)),s.flags&32){C=s.stateNode;try{qa(C,"")}catch(Xe){cn(s,s.return,Xe)}}v&4&&s.stateNode!=null&&(C=s.memoizedProps,Up(s,C,h!==null?h.memoizedProps:C)),v&1024&&(Vp=!0);break;case 6:if(ps(l,s),ms(s),v&4){if(s.stateNode===null)throw Error(i(162));v=s.memoizedProps,h=s.stateNode;try{h.nodeValue=v}catch(Xe){cn(s,s.return,Xe)}}break;case 3:if(Jf=null,C=Ar,Ar=Kf(l.containerInfo),ps(l,s),Ar=C,ms(s),v&4&&h!==null&&h.memoizedState.isDehydrated)try{fc(l.containerInfo)}catch(Xe){cn(s,s.return,Xe)}Vp&&(Vp=!1,J2(s));break;case 4:v=Ar,Ar=Kf(s.stateNode.containerInfo),ps(l,s),ms(s),Ar=v;break;case 12:ps(l,s),ms(s);break;case 31:ps(l,s),ms(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Lf(s,v)));break;case 13:ps(l,s),ms(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(jf=Nt()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Lf(s,v)));break;case 22:C=s.memoizedState!==null;var se=h!==null&&h.memoizedState!==null,xe=xa,Ce=pi;if(xa=xe||C,pi=Ce||se,ps(l,s),pi=Ce,xa=xe,ms(s),v&8192)e:for(l=s.stateNode,l._visibility=C?l._visibility&-2:l._visibility|1,C&&(h===null||se||xa||pi||nl(s)),h=null,l=s;;){if(l.tag===5||l.tag===26){if(h===null){se=h=l;try{if(I=se.stateNode,C)D=I.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{q=se.stateNode;var Re=se.memoizedProps.style,ye=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;q.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(Xe){cn(se,se.return,Xe)}}}else if(l.tag===6){if(h===null){se=l;try{se.stateNode.nodeValue=C?"":se.memoizedProps}catch(Xe){cn(se,se.return,Xe)}}}else if(l.tag===18){if(h===null){se=l;try{var Ae=se.stateNode;C?Fy(Ae,!0):Fy(se.stateNode,!1)}catch(Xe){cn(se,se.return,Xe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=s.updateQueue,v!==null&&(h=v.retryQueue,h!==null&&(v.retryQueue=null,Lf(s,h))));break;case 19:ps(l,s),ms(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Lf(s,v)));break;case 30:break;case 21:break;default:ps(l,s),ms(s)}}function ms(s){var l=s.flags;if(l&2){try{for(var h,v=s.return;v!==null;){if(V2(v)){h=v;break}v=v.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var C=h.stateNode,I=Fp(s);Df(s,I,C);break;case 5:var D=h.stateNode;h.flags&32&&(qa(D,""),h.flags&=-33);var q=Fp(s);Df(s,q,D);break;case 3:case 4:var se=h.stateNode.containerInfo,xe=Fp(s);zp(s,xe,se);break;default:throw Error(i(161))}}catch(Ce){cn(s,s.return,Ce)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function J2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;J2(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function va(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)q2(s,l.alternate,l),l=l.sibling}function nl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:co(4,l,l.return),nl(l);break;case 1:Hr(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&F2(l,l.return,h),nl(l);break;case 27:Zu(l.stateNode);case 26:case 5:Hr(l,l.return),nl(l);break;case 22:l.memoizedState===null&&nl(l);break;case 30:nl(l);break;default:nl(l)}s=s.sibling}}function ba(s,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,C=s,I=l,D=I.flags;switch(I.tag){case 0:case 11:case 15:ba(C,I,h),Vu(4,I);break;case 1:if(ba(C,I,h),v=I,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(xe){cn(v,v.return,xe)}if(v=I,C=v.updateQueue,C!==null){var q=v.stateNode;try{var se=C.shared.hiddenCallbacks;if(se!==null)for(C.shared.hiddenCallbacks=null,C=0;C<se.length;C++)Tx(se[C],q)}catch(xe){cn(v,v.return,xe)}}h&&D&64&&U2(I),Gu(I,I.return);break;case 27:G2(I);case 26:case 5:ba(C,I,h),h&&v===null&&D&4&&z2(I),Gu(I,I.return);break;case 12:ba(C,I,h);break;case 31:ba(C,I,h),h&&D&4&&W2(C,I);break;case 13:ba(C,I,h),h&&D&4&&K2(C,I);break;case 22:I.memoizedState===null&&ba(C,I,h),Gu(I,I.return);break;case 30:break;default:ba(C,I,h)}l=l.sibling}}function Gp(s,l){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Iu(h))}function Hp(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Iu(s))}function Sr(s,l,h,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Z2(s,l,h,v),l=l.sibling}function Z2(s,l,h,v){var C=l.flags;switch(l.tag){case 0:case 11:case 15:Sr(s,l,h,v),C&2048&&Vu(9,l);break;case 1:Sr(s,l,h,v);break;case 3:Sr(s,l,h,v),C&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Iu(s)));break;case 12:if(C&2048){Sr(s,l,h,v),s=l.stateNode;try{var I=l.memoizedProps,D=I.id,q=I.onPostCommit;typeof q=="function"&&q(D,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(se){cn(l,l.return,se)}}else Sr(s,l,h,v);break;case 31:Sr(s,l,h,v);break;case 13:Sr(s,l,h,v);break;case 23:break;case 22:I=l.stateNode,D=l.alternate,l.memoizedState!==null?I._visibility&2?Sr(s,l,h,v):Hu(s,l):I._visibility&2?Sr(s,l,h,v):(I._visibility|=2,tc(s,l,h,v,(l.subtreeFlags&10256)!==0||!1)),C&2048&&Gp(D,l);break;case 24:Sr(s,l,h,v),C&2048&&Hp(l.alternate,l);break;default:Sr(s,l,h,v)}}function tc(s,l,h,v,C){for(C=C&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var I=s,D=l,q=h,se=v,xe=D.flags;switch(D.tag){case 0:case 11:case 15:tc(I,D,q,se,C),Vu(8,D);break;case 23:break;case 22:var Ce=D.stateNode;D.memoizedState!==null?Ce._visibility&2?tc(I,D,q,se,C):Hu(I,D):(Ce._visibility|=2,tc(I,D,q,se,C)),C&&xe&2048&&Gp(D.alternate,D);break;case 24:tc(I,D,q,se,C),C&&xe&2048&&Hp(D.alternate,D);break;default:tc(I,D,q,se,C)}l=l.sibling}}function Hu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=s,v=l,C=v.flags;switch(v.tag){case 22:Hu(h,v),C&2048&&Gp(v.alternate,v);break;case 24:Hu(h,v),C&2048&&Hp(v.alternate,v);break;default:Hu(h,v)}l=l.sibling}}var qu=8192;function nc(s,l,h){if(s.subtreeFlags&qu)for(s=s.child;s!==null;)Q2(s,l,h),s=s.sibling}function Q2(s,l,h){switch(s.tag){case 26:nc(s,l,h),s.flags&qu&&s.memoizedState!==null&&eN(h,Ar,s.memoizedState,s.memoizedProps);break;case 5:nc(s,l,h);break;case 3:case 4:var v=Ar;Ar=Kf(s.stateNode.containerInfo),nc(s,l,h),Ar=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=qu,qu=16777216,nc(s,l,h),qu=v):nc(s,l,h));break;default:nc(s,l,h)}}function ey(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Yu(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var v=l[h];Ri=v,ny(v,s)}ey(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ty(s),s=s.sibling}function ty(s){switch(s.tag){case 0:case 11:case 15:Yu(s),s.flags&2048&&co(9,s,s.return);break;case 3:Yu(s);break;case 12:Yu(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Pf(s)):Yu(s);break;default:Yu(s)}}function Pf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var v=l[h];Ri=v,ny(v,s)}ey(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:co(8,l,l.return),Pf(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,Pf(l));break;default:Pf(l)}s=s.sibling}}function ny(s,l){for(;Ri!==null;){var h=Ri;switch(h.tag){case 0:case 11:case 15:co(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var v=h.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Iu(h.memoizedState.cache)}if(v=h.child,v!==null)v.return=h,Ri=v;else e:for(h=s;Ri!==null;){v=Ri;var C=v.sibling,I=v.return;if(Y2(v),v===h){Ri=null;break e}if(C!==null){C.return=I,Ri=C;break e}Ri=I}}}var mS={getCacheForType:function(s){var l=Fi(di),h=l.data.get(s);return h===void 0&&(h=s(),l.data.set(s,h)),h},cacheSignal:function(){return Fi(di).controller.signal}},gS=typeof WeakMap=="function"?WeakMap:Map,Zt=0,vn=null,Rt=null,Lt=0,ln=0,Rs=null,uo=!1,ic=!1,qp=!1,wa=0,Hn=0,fo=0,il=0,Yp=0,ks=0,sc=0,Xu=null,gs=null,Xp=!1,jf=0,iy=0,Bf=1/0,Uf=null,ho=null,Ei=0,po=null,rc=null,_a=0,Wp=0,Kp=null,sy=null,Wu=0,$p=null;function Os(){return(Zt&2)!==0&&Lt!==0?Lt&-Lt:K.T!==null?n1():Ii()}function ry(){if(ks===0)if((Lt&536870912)===0||jt){var s=Tt;Tt<<=1,(Tt&3932160)===0&&(Tt=262144),ks=s}else ks=536870912;return s=Ts.current,s!==null&&(s.flags|=32),ks}function xs(s,l,h){(s===vn&&(ln===2||ln===9)||s.cancelPendingCommit!==null)&&(ac(s,0),mo(s,Lt,ks,!1)),Mt(s,h),((Zt&2)===0||s!==vn)&&(s===vn&&((Zt&2)===0&&(il|=h),Hn===4&&mo(s,Lt,ks,!1)),qr(s))}function ay(s,l,h){if((Zt&6)!==0)throw Error(i(327));var v=!h&&(l&127)===0&&(l&s.expiredLanes)===0||Ti(s,l),C=v?vS(s,l):Zp(s,l,!0),I=v;do{if(C===0){ic&&!v&&mo(s,l,0,!1);break}else{if(h=s.current.alternate,I&&!xS(h)){C=Zp(s,l,!1),I=!1;continue}if(C===2){if(I=l,s.errorRecoveryDisabledLanes&I)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){l=D;e:{var q=s;C=Xu;var se=q.current.memoizedState.isDehydrated;if(se&&(ac(q,D).flags|=256),D=Zp(q,D,!1),D!==2){if(qp&&!se){q.errorRecoveryDisabledLanes|=I,il|=I,C=4;break e}I=gs,gs=C,I!==null&&(gs===null?gs=I:gs.push.apply(gs,I))}C=D}if(I=!1,C!==2)continue}}if(C===1){ac(s,0),mo(s,l,0,!0);break}e:{switch(v=s,I=C,I){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:mo(v,l,ks,!uo);break e;case 2:gs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(C=jf+300-Nt(),10<C)){if(mo(v,l,ks,!uo),Fa(v,0,!0)!==0)break e;_a=l,v.timeoutHandle=jy(oy.bind(null,v,h,gs,Uf,Xp,l,ks,il,sc,uo,I,"Throttled",-0,0),C);break e}oy(v,h,gs,Uf,Xp,l,ks,il,sc,uo,I,null,-0,0)}}break}while(!0);qr(s)}function oy(s,l,h,v,C,I,D,q,se,xe,Ce,Re,ye,Ae){if(s.timeoutHandle=-1,Re=l.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:us},Q2(l,I,Re);var Xe=(I&62914560)===I?jf-Nt():(I&4194048)===I?iy-Nt():0;if(Xe=tN(Re,Xe),Xe!==null){_a=I,s.cancelPendingCommit=Xe(my.bind(null,s,l,I,h,v,C,D,q,se,Ce,Re,null,ye,Ae)),mo(s,I,D,!xe);return}}my(s,l,I,h,v,C,D,q,se)}function xS(s){for(var l=s;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var v=0;v<h.length;v++){var C=h[v],I=C.getSnapshot;C=C.value;try{if(!b(I(),C))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function mo(s,l,h,v){l&=~Yp,l&=~il,s.suspendedLanes|=l,s.pingedLanes&=~l,v&&(s.warmLanes|=l),v=s.expirationTimes;for(var C=l;0<C;){var I=31-yt(C),D=1<<I;v[I]=-1,C&=~D}h!==0&&Qn(s,h,l)}function Ff(){return(Zt&6)===0?(Ku(0),!1):!0}function Jp(){if(Rt!==null){if(ln===0)var s=Rt.return;else s=Rt,da=Wo=null,hp(s),$l=null,ku=0,s=Rt;for(;s!==null;)B2(s.alternate,s),s=s.return;Rt=null}}function ac(s,l){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,jS(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),_a=0,Jp(),vn=s,Rt=h=ca(s.current,null),Lt=l,ln=0,Rs=null,uo=!1,ic=Ti(s,l),qp=!1,sc=ks=Yp=il=fo=Hn=0,gs=Xu=null,Xp=!1,(l&8)!==0&&(l|=l&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=l;0<v;){var C=31-yt(v),I=1<<C;l|=s[C],v&=~I}return wa=l,of(),h}function ly(s,l){bt=null,K.H=Uu,l===Kl||l===mf?(l=Ax(),ln=3):l===tp?(l=Ax(),ln=4):ln=l===Ip?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Rs=l,Rt===null&&(Hn=1,If(s,tr(l,s.current)))}function cy(){var s=Ts.current;return s===null?!0:(Lt&4194048)===Lt?rr===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?s===rr:!1}function uy(){var s=K.H;return K.H=Uu,s===null?Uu:s}function dy(){var s=K.A;return K.A=mS,s}function zf(){Hn=4,uo||(Lt&4194048)!==Lt&&Ts.current!==null||(ic=!0),(fo&134217727)===0&&(il&134217727)===0||vn===null||mo(vn,Lt,ks,!1)}function Zp(s,l,h){var v=Zt;Zt|=2;var C=uy(),I=dy();(vn!==s||Lt!==l)&&(Uf=null,ac(s,l)),l=!1;var D=Hn;e:do try{if(ln!==0&&Rt!==null){var q=Rt,se=Rs;switch(ln){case 8:Jp(),D=6;break e;case 3:case 2:case 9:case 6:Ts.current===null&&(l=!0);var xe=ln;if(ln=0,Rs=null,oc(s,q,se,xe),h&&ic){D=0;break e}break;default:xe=ln,ln=0,Rs=null,oc(s,q,se,xe)}}yS(),D=Hn;break}catch(Ce){ly(s,Ce)}while(!0);return l&&s.shellSuspendCounter++,da=Wo=null,Zt=v,K.H=C,K.A=I,Rt===null&&(vn=null,Lt=0,of()),D}function yS(){for(;Rt!==null;)fy(Rt)}function vS(s,l){var h=Zt;Zt|=2;var v=uy(),C=dy();vn!==s||Lt!==l?(Uf=null,Bf=Nt()+500,ac(s,l)):ic=Ti(s,l);e:do try{if(ln!==0&&Rt!==null){l=Rt;var I=Rs;t:switch(ln){case 1:ln=0,Rs=null,oc(s,l,I,1);break;case 2:case 9:if(_x(I)){ln=0,Rs=null,hy(l);break}l=function(){ln!==2&&ln!==9||vn!==s||(ln=7),qr(s)},I.then(l,l);break e;case 3:ln=7;break e;case 4:ln=5;break e;case 7:_x(I)?(ln=0,Rs=null,hy(l)):(ln=0,Rs=null,oc(s,l,I,7));break;case 5:var D=null;switch(Rt.tag){case 26:D=Rt.memoizedState;case 5:case 27:var q=Rt;if(D?Zy(D):q.stateNode.complete){ln=0,Rs=null;var se=q.sibling;if(se!==null)Rt=se;else{var xe=q.return;xe!==null?(Rt=xe,Vf(xe)):Rt=null}break t}}ln=0,Rs=null,oc(s,l,I,5);break;case 6:ln=0,Rs=null,oc(s,l,I,6);break;case 8:Jp(),Hn=6;break e;default:throw Error(i(462))}}bS();break}catch(Ce){ly(s,Ce)}while(!0);return da=Wo=null,K.H=v,K.A=C,Zt=h,Rt!==null?0:(vn=null,Lt=0,of(),Hn)}function bS(){for(;Rt!==null&&!wt();)fy(Rt)}function fy(s){var l=P2(s.alternate,s,wa);s.memoizedProps=s.pendingProps,l===null?Vf(s):Rt=l}function hy(s){var l=s,h=l.alternate;switch(l.tag){case 15:case 0:l=R2(h,l,l.pendingProps,l.type,void 0,Lt);break;case 11:l=R2(h,l,l.pendingProps,l.type.render,l.ref,Lt);break;case 5:hp(l);default:B2(h,l),l=Rt=dx(l,wa),l=P2(h,l,wa)}s.memoizedProps=s.pendingProps,l===null?Vf(s):Rt=l}function oc(s,l,h,v){da=Wo=null,hp(l),$l=null,ku=0;var C=l.return;try{if(lS(s,C,l,h,Lt)){Hn=1,If(s,tr(h,s.current)),Rt=null;return}}catch(I){if(C!==null)throw Rt=C,I;Hn=1,If(s,tr(h,s.current)),Rt=null;return}l.flags&32768?(jt||v===1?s=!0:ic||(Lt&536870912)!==0?s=!1:(uo=s=!0,(v===2||v===9||v===3||v===6)&&(v=Ts.current,v!==null&&v.tag===13&&(v.flags|=16384))),py(l,s)):Vf(l)}function Vf(s){var l=s;do{if((l.flags&32768)!==0){py(l,uo);return}s=l.return;var h=dS(l.alternate,l,wa);if(h!==null){Rt=h;return}if(l=l.sibling,l!==null){Rt=l;return}Rt=l=s}while(l!==null);Hn===0&&(Hn=5)}function py(s,l){do{var h=fS(s.alternate,s);if(h!==null){h.flags&=32767,Rt=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(s=s.sibling,s!==null)){Rt=s;return}Rt=s=h}while(s!==null);Hn=6,Rt=null}function my(s,l,h,v,C,I,D,q,se){s.cancelPendingCommit=null;do Gf();while(Ei!==0);if((Zt&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(I=l.lanes|l.childLanes,I|=F0,tn(s,h,I,D,q,se),s===vn&&(Rt=vn=null,Lt=0),rc=l,po=s,_a=h,Wp=I,Kp=C,sy=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,AS(Qi,function(){return by(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=K.T,K.T=null,C=J.p,J.p=2,D=Zt,Zt|=4;try{hS(s,l,h)}finally{Zt=D,J.p=C,K.T=v}}Ei=1,gy(),xy(),yy()}}function gy(){if(Ei===1){Ei=0;var s=po,l=rc,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=K.T,K.T=null;var v=J.p;J.p=2;var C=Zt;Zt|=4;try{$2(l,s);var I=u1,D=z(s.containerInfo),q=I.focusedElem,se=I.selectionRange;if(D!==q&&q&&q.ownerDocument&&M(q.ownerDocument.documentElement,q)){if(se!==null&&G(q)){var xe=se.start,Ce=se.end;if(Ce===void 0&&(Ce=xe),"selectionStart"in q)q.selectionStart=xe,q.selectionEnd=Math.min(Ce,q.value.length);else{var Re=q.ownerDocument||document,ye=Re&&Re.defaultView||window;if(ye.getSelection){var Ae=ye.getSelection(),Xe=q.textContent.length,ot=Math.min(se.start,Xe),hn=se.end===void 0?ot:Math.min(se.end,Xe);!Ae.extend&&ot>hn&&(D=hn,hn=ot,ot=D);var de=R(q,ot),ce=R(q,hn);if(de&&ce&&(Ae.rangeCount!==1||Ae.anchorNode!==de.node||Ae.anchorOffset!==de.offset||Ae.focusNode!==ce.node||Ae.focusOffset!==ce.offset)){var ge=Re.createRange();ge.setStart(de.node,de.offset),Ae.removeAllRanges(),ot>hn?(Ae.addRange(ge),Ae.extend(ce.node,ce.offset)):(ge.setEnd(ce.node,ce.offset),Ae.addRange(ge))}}}}for(Re=[],Ae=q;Ae=Ae.parentNode;)Ae.nodeType===1&&Re.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Re.length;q++){var Te=Re[q];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}th=!!c1,u1=c1=null}finally{Zt=C,J.p=v,K.T=h}}s.current=l,Ei=2}}function xy(){if(Ei===2){Ei=0;var s=po,l=rc,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=K.T,K.T=null;var v=J.p;J.p=2;var C=Zt;Zt|=4;try{q2(s,l.alternate,l)}finally{Zt=C,J.p=v,K.T=h}}Ei=3}}function yy(){if(Ei===4||Ei===3){Ei=0,Un();var s=po,l=rc,h=_a,v=sy;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ei=5:(Ei=0,rc=po=null,vy(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(ho=null),ws(h),l=l.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(un,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=K.T,C=J.p,J.p=2,K.T=null;try{for(var I=s.onRecoverableError,D=0;D<v.length;D++){var q=v[D];I(q.value,{componentStack:q.stack})}}finally{K.T=l,J.p=C}}(_a&3)!==0&&Gf(),qr(s),C=s.pendingLanes,(h&261930)!==0&&(C&42)!==0?s===$p?Wu++:(Wu=0,$p=s):Wu=0,Ku(0)}}function vy(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Iu(l)))}function Gf(){return gy(),xy(),yy(),by()}function by(){if(Ei!==5)return!1;var s=po,l=Wp;Wp=0;var h=ws(_a),v=K.T,C=J.p;try{J.p=32>h?32:h,K.T=null,h=Kp,Kp=null;var I=po,D=_a;if(Ei=0,rc=po=null,_a=0,(Zt&6)!==0)throw Error(i(331));var q=Zt;if(Zt|=4,ty(I.current),Z2(I,I.current,D,h),Zt=q,Ku(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(un,I)}catch{}return!0}finally{J.p=C,K.T=v,vy(s,l)}}function wy(s,l,h){l=tr(h,l),l=Tp(s.stateNode,l,2),s=ao(s,l,2),s!==null&&(Mt(s,2),qr(s))}function cn(s,l,h){if(s.tag===3)wy(s,s,h);else for(;l!==null;){if(l.tag===3){wy(l,s,h);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ho===null||!ho.has(v))){s=tr(h,s),h=_2(2),v=ao(l,h,2),v!==null&&(E2(h,v,l,s),Mt(v,2),qr(v));break}}l=l.return}}function Qp(s,l,h){var v=s.pingCache;if(v===null){v=s.pingCache=new gS;var C=new Set;v.set(l,C)}else C=v.get(l),C===void 0&&(C=new Set,v.set(l,C));C.has(h)||(qp=!0,C.add(h),s=wS.bind(null,s,l,h),l.then(s,s))}function wS(s,l,h){var v=s.pingCache;v!==null&&v.delete(l),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,vn===s&&(Lt&h)===h&&(Hn===4||Hn===3&&(Lt&62914560)===Lt&&300>Nt()-jf?(Zt&2)===0&&ac(s,0):Yp|=h,sc===Lt&&(sc=0)),qr(s)}function _y(s,l){l===0&&(l=Be()),s=qo(s,l),s!==null&&(Mt(s,l),qr(s))}function _S(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),_y(s,h)}function ES(s,l){var h=0;switch(s.tag){case 31:case 13:var v=s.stateNode,C=s.memoizedState;C!==null&&(h=C.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(l),_y(s,h)}function AS(s,l){return ft(s,l)}var Hf=null,lc=null,e1=!1,qf=!1,t1=!1,go=0;function qr(s){s!==lc&&s.next===null&&(lc===null?Hf=lc=s:lc=lc.next=s),qf=!0,e1||(e1=!0,NS())}function Ku(s,l){if(!t1&&qf){t1=!0;do for(var h=!1,v=Hf;v!==null;){if(s!==0){var C=v.pendingLanes;if(C===0)var I=0;else{var D=v.suspendedLanes,q=v.pingedLanes;I=(1<<31-yt(42|s)+1)-1,I&=C&~(D&~q),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(h=!0,Ny(v,I))}else I=Lt,I=Fa(v,v===vn?I:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(I&3)===0||Ti(v,I)||(h=!0,Ny(v,I));v=v.next}while(h);t1=!1}}function SS(){Ey()}function Ey(){qf=e1=!1;var s=0;go!==0&&PS()&&(s=go);for(var l=Nt(),h=null,v=Hf;v!==null;){var C=v.next,I=Ay(v,l);I===0?(v.next=null,h===null?Hf=C:h.next=C,C===null&&(lc=h)):(h=v,(s!==0||(I&3)!==0)&&(qf=!0)),v=C}Ei!==0&&Ei!==5||Ku(s),go!==0&&(go=0)}function Ay(s,l){for(var h=s.suspendedLanes,v=s.pingedLanes,C=s.expirationTimes,I=s.pendingLanes&-62914561;0<I;){var D=31-yt(I),q=1<<D,se=C[D];se===-1?((q&h)===0||(q&v)!==0)&&(C[D]=Ue(q,l)):se<=l&&(s.expiredLanes|=q),I&=~q}if(l=vn,h=Lt,h=Fa(s,s===l?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,h===0||s===l&&(ln===2||ln===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&De(v),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||Ti(s,h)){if(l=h&-h,l===s.callbackPriority)return l;switch(v!==null&&De(v),ws(h)){case 2:case 8:h=jr;break;case 32:h=Qi;break;case 268435456:h=Lo;break;default:h=Qi}return v=Sy.bind(null,s),h=ft(h,v),s.callbackPriority=l,s.callbackNode=h,l}return v!==null&&v!==null&&De(v),s.callbackPriority=2,s.callbackNode=null,2}function Sy(s,l){if(Ei!==0&&Ei!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Gf()&&s.callbackNode!==h)return null;var v=Lt;return v=Fa(s,s===vn?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(ay(s,v,l),Ay(s,Nt()),s.callbackNode!=null&&s.callbackNode===h?Sy.bind(null,s):null)}function Ny(s,l){if(Gf())return null;ay(s,l,!0)}function NS(){BS(function(){(Zt&6)!==0?ft(Zn,SS):Ey()})}function n1(){if(go===0){var s=Xl;s===0&&(s=Ua,Ua<<=1,(Ua&261888)===0&&(Ua=256)),go=s}return go}function Cy(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ya(""+s)}function Ty(s,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,s.id&&h.setAttribute("form",s.id),l.parentNode.insertBefore(h,l),s=new FormData(s),h.parentNode.removeChild(h),s}function CS(s,l,h,v,C){if(l==="submit"&&h&&h.stateNode===C){var I=Cy((C[at]||null).action),D=v.submitter;D&&(l=(l=D[at]||null)?Cy(l.formAction):D.getAttribute("formAction"),l!==null&&(I=l,D=null));var q=new bi("action","action",null,v,C);s.push({event:q,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(go!==0){var se=D?Ty(C,D):new FormData(C);_p(h,{pending:!0,data:se,method:C.method,action:I},null,se)}}else typeof I=="function"&&(q.preventDefault(),se=D?Ty(C,D):new FormData(C),_p(h,{pending:!0,data:se,method:C.method,action:I},I,se))},currentTarget:C}]})}}for(var i1=0;i1<Nu.length;i1++){var s1=Nu[i1],TS=s1.toLowerCase(),IS=s1[0].toUpperCase()+s1.slice(1);Er(TS,"on"+IS)}Er(fs,"onAnimationEnd"),Er(Bi,"onAnimationIteration"),Er(rn,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(_i,"onTransitionRun"),Er(is,"onTransitionStart"),Er(Qa,"onTransitionCancel"),Er(la,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($u));function Iy(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var v=s[h],C=v.event;v=v.listeners;e:{var I=void 0;if(l)for(var D=v.length-1;0<=D;D--){var q=v[D],se=q.instance,xe=q.currentTarget;if(q=q.listener,se!==I&&C.isPropagationStopped())break e;I=q,C.currentTarget=xe;try{I(C)}catch(Ce){af(Ce)}C.currentTarget=null,I=se}else for(D=0;D<v.length;D++){if(q=v[D],se=q.instance,xe=q.currentTarget,q=q.listener,se!==I&&C.isPropagationStopped())break e;I=q,C.currentTarget=xe;try{I(C)}catch(Ce){af(Ce)}C.currentTarget=null,I=se}}}}function kt(s,l){var h=l[xr];h===void 0&&(h=l[xr]=new Set);var v=s+"__bubble";h.has(v)||(Ry(l,s,2,!1),h.add(v))}function r1(s,l,h){var v=0;l&&(v|=4),Ry(h,s,v,l)}var Yf="_reactListening"+Math.random().toString(36).slice(2);function a1(s){if(!s[Yf]){s[Yf]=!0,ke.forEach(function(h){h!=="selectionchange"&&(RS.has(h)||r1(h,!1,s),r1(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Yf]||(l[Yf]=!0,r1("selectionchange",!1,l))}}function Ry(s,l,h,v){switch(rv(l)){case 2:var C=sN;break;case 8:C=rN;break;default:C=w1}h=C.bind(null,l,h,s),C=void 0,!vu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(C=!0),v?C!==void 0?s.addEventListener(l,h,{capture:!0,passive:C}):s.addEventListener(l,h,!0):C!==void 0?s.addEventListener(l,h,{passive:C}):s.addEventListener(l,h,!1)}function o1(s,l,h,v,C){var I=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var D=v.tag;if(D===3||D===4){var q=v.stateNode.containerInfo;if(q===C)break;if(D===4)for(D=v.return;D!==null;){var se=D.tag;if((se===3||se===4)&&D.stateNode.containerInfo===C)return;D=D.return}for(;q!==null;){if(D=Fn(q),D===null)return;if(se=D.tag,se===5||se===6||se===26||se===27){v=I=D;continue e}q=q.parentNode}}v=v.return}Wd(function(){var xe=I,Ce=yu(h),Re=[];e:{var ye=rf.get(s);if(ye!==void 0){var Ae=bi,Xe=s;switch(s){case"keypress":if(Br(h)===0)break e;case"keydown":case"keyup":Ae=Bl;break;case"focusin":Xe="focus",Ae=_u;break;case"focusout":Xe="blur",Ae=_u;break;case"beforeblur":case"afterblur":Ae=_u;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Pl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=j0;break;case fs:case Bi:case rn:Ae=_t;break;case la:Ae=sa;break;case"scroll":case"scrollend":Ae=Kd;break;case"wheel":Ae=B0;break;case"copy":case"cut":case"paste":Ae=jl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=sn;break;case"toggle":case"beforetoggle":Ae=Au}var ot=(l&4)!==0,hn=!ot&&(s==="scroll"||s==="scrollend"),de=ot?ye!==null?ye+"Capture":null:ye;ot=[];for(var ce=xe,ge;ce!==null;){var Te=ce;if(ge=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ge===null||de===null||(Te=dt(ce,de),Te!=null&&ot.push(Ju(ce,Te,ge))),hn)break;ce=ce.return}0<ot.length&&(ye=new Ae(ye,Xe,null,h,Ce),Re.push({event:ye,listeners:ot}))}}if((l&7)===0){e:{if(ye=s==="mouseover"||s==="pointerover",Ae=s==="mouseout"||s==="pointerout",ye&&h!==jo&&(Xe=h.relatedTarget||h.fromElement)&&(Fn(Xe)||Xe[Yi]))break e;if((Ae||ye)&&(ye=Ce.window===Ce?Ce:(ye=Ce.ownerDocument)?ye.defaultView||ye.parentWindow:window,Ae?(Xe=h.relatedTarget||h.toElement,Ae=xe,Xe=Xe?Fn(Xe):null,Xe!==null&&(hn=o(Xe),ot=Xe.tag,Xe!==hn||ot!==5&&ot!==27&&ot!==6)&&(Xe=null)):(Ae=null,Xe=xe),Ae!==Xe)){if(ot=Jt,Te="onMouseLeave",de="onMouseEnter",ce="mouse",(s==="pointerout"||s==="pointerover")&&(ot=sn,Te="onPointerLeave",de="onPointerEnter",ce="pointer"),hn=Ae==null?ye:za(Ae),ge=Xe==null?ye:za(Xe),ye=new ot(Te,ce+"leave",Ae,h,Ce),ye.target=hn,ye.relatedTarget=ge,Te=null,Fn(Ce)===xe&&(ot=new ot(de,ce+"enter",Xe,h,Ce),ot.target=ge,ot.relatedTarget=hn,Te=ot),hn=Te,Ae&&Xe)t:{for(ot=kS,de=Ae,ce=Xe,ge=0,Te=de;Te;Te=ot(Te))ge++;Te=0;for(var nt=ce;nt;nt=ot(nt))Te++;for(;0<ge-Te;)de=ot(de),ge--;for(;0<Te-ge;)ce=ot(ce),Te--;for(;ge--;){if(de===ce||ce!==null&&de===ce.alternate){ot=de;break t}de=ot(de),ce=ot(ce)}ot=null}else ot=null;Ae!==null&&ky(Re,ye,Ae,ot,!1),Xe!==null&&hn!==null&&ky(Re,hn,Xe,ot,!0)}}e:{if(ye=xe?za(xe):window,Ae=ye.nodeName&&ye.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ye.type==="file")var Yt=Ns;else if(Su(ye))if(sf)Yt=m;else{Yt=c;var $e=a}else Ae=ye.nodeName,!Ae||Ae.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?xe&&gn(xe.elementType)&&(Yt=Ns):Yt=f;if(Yt&&(Yt=Yt(s,xe))){Ss(Re,Yt,h,Ce);break e}$e&&$e(s,ye,xe),s==="focusout"&&xe&&ye.type==="number"&&xe.memoizedProps.value!=null&&$(ye,"number",ye.value)}switch($e=xe?za(xe):window,s){case"focusin":(Su($e)||$e.contentEditable==="true")&&(re=$e,le=xe,he=null);break;case"focusout":he=le=re=null;break;case"mousedown":be=!0;break;case"contextmenu":case"mouseup":case"dragend":be=!1,je(Re,h,Ce);break;case"selectionchange":if(Z)break;case"keydown":case"keyup":je(Re,h,Ce)}var Et;if(Fo)e:{switch(s){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Za?nf(s,h)&&(Pt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Pt="onCompositionStart");Pt&&(tf&&h.locale!=="ko"&&(Za||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Za&&(Et=Xa()):(wr=Ce,_r="value"in wr?wr.value:wr.textContent,Za=!0)),$e=Xf(xe,Pt),0<$e.length&&(Pt=new Zd(Pt,s,null,h,Ce),Re.push({event:Pt,listeners:$e}),Et?Pt.data=Et:(Et=Ja(h),Et!==null&&(Pt.data=Et)))),(Et=ef?zr(s,h):Fl(s,h))&&(Pt=Xf(xe,"onBeforeInput"),0<Pt.length&&($e=new Zd("onBeforeInput","beforeinput",null,h,Ce),Re.push({event:$e,listeners:Pt}),$e.data=Et)),CS(Re,s,xe,h,Ce)}Iy(Re,l)})}function Ju(s,l,h){return{instance:s,listener:l,currentTarget:h}}function Xf(s,l){for(var h=l+"Capture",v=[];s!==null;){var C=s,I=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||I===null||(C=dt(s,h),C!=null&&v.unshift(Ju(s,C,I)),C=dt(s,l),C!=null&&v.push(Ju(s,C,I))),s.tag===3)return v;s=s.return}return[]}function kS(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ky(s,l,h,v,C){for(var I=l._reactName,D=[];h!==null&&h!==v;){var q=h,se=q.alternate,xe=q.stateNode;if(q=q.tag,se!==null&&se===v)break;q!==5&&q!==26&&q!==27||xe===null||(se=xe,C?(xe=dt(h,I),xe!=null&&D.unshift(Ju(h,xe,se))):C||(xe=dt(h,I),xe!=null&&D.push(Ju(h,xe,se)))),h=h.return}D.length!==0&&s.push({event:l,listeners:D})}var OS=/\r\n?/g,MS=/\u0000|\uFFFD/g;function Oy(s){return(typeof s=="string"?s:""+s).replace(OS,`
`).replace(MS,"")}function My(s,l){return l=Oy(l),Oy(s)===l}function fn(s,l,h,v,C,I){switch(h){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||qa(s,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&qa(s,""+v);break;case"className":Ga(s,"class",v);break;case"tabIndex":Ga(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Ga(s,h,v);break;case"style":tt(s,v,I);break;case"data":if(l!=="object"){Ga(s,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||h!=="href")){s.removeAttribute(h);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(h);break}v=Ya(""+v),s.setAttribute(h,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(h==="formAction"?(l!=="input"&&fn(s,l,"name",C.name,C,null),fn(s,l,"formEncType",C.formEncType,C,null),fn(s,l,"formMethod",C.formMethod,C,null),fn(s,l,"formTarget",C.formTarget,C,null)):(fn(s,l,"encType",C.encType,C,null),fn(s,l,"method",C.method,C,null),fn(s,l,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(h);break}v=Ya(""+v),s.setAttribute(h,v);break;case"onClick":v!=null&&(s.onclick=us);break;case"onScroll":v!=null&&kt("scroll",s);break;case"onScrollEnd":v!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(h=v.__html,h!=null){if(C.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}h=Ya(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(h,""+v):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":v===!0?s.setAttribute(h,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(h,v):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(h,v):s.removeAttribute(h);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(h):s.setAttribute(h,v);break;case"popover":kt("beforetoggle",s),kt("toggle",s),Va(s,"popover",v);break;case"xlinkActuate":Es(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Es(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Es(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Es(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Es(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Es(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Es(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Es(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Es(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Va(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Xd.get(h)||h,Va(s,h,v))}}function l1(s,l,h,v,C,I){switch(h){case"style":tt(s,v,I);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(h=v.__html,h!=null){if(C.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"children":typeof v=="string"?qa(s,v):(typeof v=="number"||typeof v=="bigint")&&qa(s,""+v);break;case"onScroll":v!=null&&kt("scroll",s);break;case"onScrollEnd":v!=null&&kt("scrollend",s);break;case"onClick":v!=null&&(s.onclick=us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(C=h.endsWith("Capture"),l=h.slice(2,C?h.length-7:void 0),I=s[at]||null,I=I!=null?I[h]:null,typeof I=="function"&&s.removeEventListener(l,I,C),typeof v=="function")){typeof I!="function"&&I!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(l,v,C);break e}h in s?s[h]=v:v===!0?s.setAttribute(h,""):Va(s,h,v)}}}function Vi(s,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var v=!1,C=!1,I;for(I in h)if(h.hasOwnProperty(I)){var D=h[I];if(D!=null)switch(I){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:fn(s,l,I,D,h,null)}}C&&fn(s,l,"srcSet",h.srcSet,h,null),v&&fn(s,l,"src",h.src,h,null);return;case"input":kt("invalid",s);var q=I=D=C=null,se=null,xe=null;for(v in h)if(h.hasOwnProperty(v)){var Ce=h[v];if(Ce!=null)switch(v){case"name":C=Ce;break;case"type":D=Ce;break;case"checked":se=Ce;break;case"defaultChecked":xe=Ce;break;case"value":I=Ce;break;case"defaultValue":q=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,l));break;default:fn(s,l,v,Ce,h,null)}}me(s,I,q,se,xe,D,C,!1);return;case"select":kt("invalid",s),v=D=I=null;for(C in h)if(h.hasOwnProperty(C)&&(q=h[C],q!=null))switch(C){case"value":I=q;break;case"defaultValue":D=q;break;case"multiple":v=q;default:fn(s,l,C,q,h,null)}l=I,h=D,s.multiple=!!v,l!=null?Ke(s,!!v,l,!1):h!=null&&Ke(s,!!v,h,!0);return;case"textarea":kt("invalid",s),I=C=v=null;for(D in h)if(h.hasOwnProperty(D)&&(q=h[D],q!=null))switch(D){case"value":v=q;break;case"defaultValue":C=q;break;case"children":I=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:fn(s,l,D,q,h,null)}ts(s,v,C,I);return;case"option":for(se in h)if(h.hasOwnProperty(se)&&(v=h[se],v!=null))switch(se){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:fn(s,l,se,v,h,null)}return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(v=0;v<$u.length;v++)kt($u[v],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in h)if(h.hasOwnProperty(xe)&&(v=h[xe],v!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:fn(s,l,xe,v,h,null)}return;default:if(gn(l)){for(Ce in h)h.hasOwnProperty(Ce)&&(v=h[Ce],v!==void 0&&l1(s,l,Ce,v,h,void 0));return}}for(q in h)h.hasOwnProperty(q)&&(v=h[q],v!=null&&fn(s,l,q,v,h,null))}function DS(s,l,h,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,I=null,D=null,q=null,se=null,xe=null,Ce=null;for(Ae in h){var Re=h[Ae];if(h.hasOwnProperty(Ae)&&Re!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":se=Re;default:v.hasOwnProperty(Ae)||fn(s,l,Ae,null,v,Re)}}for(var ye in v){var Ae=v[ye];if(Re=h[ye],v.hasOwnProperty(ye)&&(Ae!=null||Re!=null))switch(ye){case"type":I=Ae;break;case"name":C=Ae;break;case"checked":xe=Ae;break;case"defaultChecked":Ce=Ae;break;case"value":D=Ae;break;case"defaultValue":q=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,l));break;default:Ae!==Re&&fn(s,l,ye,Ae,v,Re)}}ci(s,D,q,se,xe,Ce,I,C);return;case"select":Ae=D=q=ye=null;for(I in h)if(se=h[I],h.hasOwnProperty(I)&&se!=null)switch(I){case"value":break;case"multiple":Ae=se;default:v.hasOwnProperty(I)||fn(s,l,I,null,v,se)}for(C in v)if(I=v[C],se=h[C],v.hasOwnProperty(C)&&(I!=null||se!=null))switch(C){case"value":ye=I;break;case"defaultValue":q=I;break;case"multiple":D=I;default:I!==se&&fn(s,l,C,I,v,se)}l=q,h=D,v=Ae,ye!=null?Ke(s,!!h,ye,!1):!!v!=!!h&&(l!=null?Ke(s,!!h,l,!0):Ke(s,!!h,h?[]:"",!1));return;case"textarea":Ae=ye=null;for(q in h)if(C=h[q],h.hasOwnProperty(q)&&C!=null&&!v.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:fn(s,l,q,null,v,C)}for(D in v)if(C=v[D],I=h[D],v.hasOwnProperty(D)&&(C!=null||I!=null))switch(D){case"value":ye=C;break;case"defaultValue":Ae=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==I&&fn(s,l,D,C,v,I)}ei(s,ye,Ae);return;case"option":for(var Xe in h)if(ye=h[Xe],h.hasOwnProperty(Xe)&&ye!=null&&!v.hasOwnProperty(Xe))switch(Xe){case"selected":s.selected=!1;break;default:fn(s,l,Xe,null,v,ye)}for(se in v)if(ye=v[se],Ae=h[se],v.hasOwnProperty(se)&&ye!==Ae&&(ye!=null||Ae!=null))switch(se){case"selected":s.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:fn(s,l,se,ye,v,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in h)ye=h[ot],h.hasOwnProperty(ot)&&ye!=null&&!v.hasOwnProperty(ot)&&fn(s,l,ot,null,v,ye);for(xe in v)if(ye=v[xe],Ae=h[xe],v.hasOwnProperty(xe)&&ye!==Ae&&(ye!=null||Ae!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,l));break;default:fn(s,l,xe,ye,v,Ae)}return;default:if(gn(l)){for(var hn in h)ye=h[hn],h.hasOwnProperty(hn)&&ye!==void 0&&!v.hasOwnProperty(hn)&&l1(s,l,hn,void 0,v,ye);for(Ce in v)ye=v[Ce],Ae=h[Ce],!v.hasOwnProperty(Ce)||ye===Ae||ye===void 0&&Ae===void 0||l1(s,l,Ce,ye,v,Ae);return}}for(var de in h)ye=h[de],h.hasOwnProperty(de)&&ye!=null&&!v.hasOwnProperty(de)&&fn(s,l,de,null,v,ye);for(Re in v)ye=v[Re],Ae=h[Re],!v.hasOwnProperty(Re)||ye===Ae||ye==null&&Ae==null||fn(s,l,Re,ye,v,Ae)}function Dy(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LS(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,h=performance.getEntriesByType("resource"),v=0;v<h.length;v++){var C=h[v],I=C.transferSize,D=C.initiatorType,q=C.duration;if(I&&q&&Dy(D)){for(D=0,q=C.responseEnd,v+=1;v<h.length;v++){var se=h[v],xe=se.startTime;if(xe>q)break;var Ce=se.transferSize,Re=se.initiatorType;Ce&&Dy(Re)&&(se=se.responseEnd,D+=Ce*(se<q?1:(q-xe)/(se-xe)))}if(--v,l+=8*(I+D)/(C.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var c1=null,u1=null;function Wf(s){return s.nodeType===9?s:s.ownerDocument}function Ly(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Py(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function d1(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var f1=null;function PS(){var s=window.event;return s&&s.type==="popstate"?s===f1?!1:(f1=s,!0):(f1=null,!1)}var jy=typeof setTimeout=="function"?setTimeout:void 0,jS=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,BS=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(s){return By.resolve(null).then(s).catch(US)}:jy;function US(s){setTimeout(function(){throw s})}function xo(s){return s==="head"}function Uy(s,l){var h=l,v=0;do{var C=h.nextSibling;if(s.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"||h==="/&"){if(v===0){s.removeChild(C),fc(l);return}v--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")v++;else if(h==="html")Zu(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,Zu(h);for(var I=h.firstChild;I;){var D=I.nextSibling,q=I.nodeName;I[Po]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&I.rel.toLowerCase()==="stylesheet"||h.removeChild(I),I=D}}else h==="body"&&Zu(s.ownerDocument.body);h=C}while(h);fc(l)}function Fy(s,l){var h=s;s=0;do{var v=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=v}while(h)}function h1(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":h1(h),cs(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function FS(s,l,h,v){for(;s.nodeType===1;){var C=h;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Po])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(I=s.getAttribute("rel"),I==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(I!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(I=s.getAttribute("src"),(I!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&I&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var I=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===I)return s}else return s;if(s=ar(s.nextSibling),s===null)break}return null}function zS(s,l,h){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=ar(s.nextSibling),s===null))return null;return s}function zy(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ar(s.nextSibling),s===null))return null;return s}function p1(s){return s.data==="$?"||s.data==="$~"}function m1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function VS(s,l){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||h.readyState!=="loading")l();else{var v=function(){l(),h.removeEventListener("DOMContentLoaded",v)};h.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function ar(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var g1=null;function Vy(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(l===0)return ar(s.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}s=s.nextSibling}return null}function Gy(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return s;l--}else h!=="/$"&&h!=="/&"||l++}s=s.previousSibling}return null}function Hy(s,l,h){switch(l=Wf(h),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Zu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);cs(s)}var or=new Map,qy=new Set;function Kf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ea=J.d;J.d={f:GS,r:HS,D:qS,C:YS,L:XS,m:WS,X:$S,S:KS,M:JS};function GS(){var s=Ea.f(),l=Ff();return s||l}function HS(s){var l=$t(s);l!==null&&l.tag===5&&l.type==="form"?l2(l):Ea.r(s)}var cc=typeof document>"u"?null:document;function Yy(s,l,h){var v=cc;if(v&&typeof l=="string"&&l){var C=Ct(l);C='link[rel="'+s+'"][href="'+C+'"]',typeof h=="string"&&(C+='[crossorigin="'+h+'"]'),qy.has(C)||(qy.add(C),s={rel:s,crossOrigin:h,href:l},v.querySelector(C)===null&&(l=v.createElement("link"),Vi(l,"link",s),zn(l),v.head.appendChild(l)))}}function qS(s){Ea.D(s),Yy("dns-prefetch",s,null)}function YS(s,l){Ea.C(s,l),Yy("preconnect",s,l)}function XS(s,l,h){Ea.L(s,l,h);var v=cc;if(v&&s&&l){var C='link[rel="preload"][as="'+Ct(l)+'"]';l==="image"&&h&&h.imageSrcSet?(C+='[imagesrcset="'+Ct(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(C+='[imagesizes="'+Ct(h.imageSizes)+'"]')):C+='[href="'+Ct(s)+'"]';var I=C;switch(l){case"style":I=uc(s);break;case"script":I=dc(s)}or.has(I)||(s=E({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:s,as:l},h),or.set(I,s),v.querySelector(C)!==null||l==="style"&&v.querySelector(Qu(I))||l==="script"&&v.querySelector(ed(I))||(l=v.createElement("link"),Vi(l,"link",s),zn(l),v.head.appendChild(l)))}}function WS(s,l){Ea.m(s,l);var h=cc;if(h&&s){var v=l&&typeof l.as=="string"?l.as:"script",C='link[rel="modulepreload"][as="'+Ct(v)+'"][href="'+Ct(s)+'"]',I=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=dc(s)}if(!or.has(I)&&(s=E({rel:"modulepreload",href:s},l),or.set(I,s),h.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ed(I)))return}v=h.createElement("link"),Vi(v,"link",s),zn(v),h.head.appendChild(v)}}}function KS(s,l,h){Ea.S(s,l,h);var v=cc;if(v&&s){var C=es(v).hoistableStyles,I=uc(s);l=l||"default";var D=C.get(I);if(!D){var q={loading:0,preload:null};if(D=v.querySelector(Qu(I)))q.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":l},h),(h=or.get(I))&&x1(s,h);var se=D=v.createElement("link");zn(se),Vi(se,"link",s),se._p=new Promise(function(xe,Ce){se.onload=xe,se.onerror=Ce}),se.addEventListener("load",function(){q.loading|=1}),se.addEventListener("error",function(){q.loading|=2}),q.loading|=4,$f(D,l,v)}D={type:"stylesheet",instance:D,count:1,state:q},C.set(I,D)}}}function $S(s,l){Ea.X(s,l);var h=cc;if(h&&s){var v=es(h).hoistableScripts,C=dc(s),I=v.get(C);I||(I=h.querySelector(ed(C)),I||(s=E({src:s,async:!0},l),(l=or.get(C))&&y1(s,l),I=h.createElement("script"),zn(I),Vi(I,"link",s),h.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(C,I))}}function JS(s,l){Ea.M(s,l);var h=cc;if(h&&s){var v=es(h).hoistableScripts,C=dc(s),I=v.get(C);I||(I=h.querySelector(ed(C)),I||(s=E({src:s,async:!0,type:"module"},l),(l=or.get(C))&&y1(s,l),I=h.createElement("script"),zn(I),Vi(I,"link",s),h.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(C,I))}}function Xy(s,l,h,v){var C=(C=Oe.current)?Kf(C):null;if(!C)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=uc(h.href),h=es(C).hoistableStyles,v=h.get(l),v||(v={type:"style",instance:null,count:0,state:null},h.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=uc(h.href);var I=es(C).hoistableStyles,D=I.get(s);if(D||(C=C.ownerDocument||C,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(s,D),(I=C.querySelector(Qu(s)))&&!I._p&&(D.instance=I,D.state.loading=5),or.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},or.set(s,h),I||ZS(C,s,h,D.state))),l&&v===null)throw Error(i(528,""));return D}if(l&&v!==null)throw Error(i(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=dc(h),h=es(C).hoistableScripts,v=h.get(l),v||(v={type:"script",instance:null,count:0,state:null},h.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function uc(s){return'href="'+Ct(s)+'"'}function Qu(s){return'link[rel="stylesheet"]['+s+"]"}function Wy(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function ZS(s,l,h,v){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=s.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),Vi(l,"link",h),zn(l),s.head.appendChild(l))}function dc(s){return'[src="'+Ct(s)+'"]'}function ed(s){return"script[async]"+s}function Ky(s,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var v=s.querySelector('style[data-href~="'+Ct(h.href)+'"]');if(v)return l.instance=v,zn(v),v;var C=E({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),zn(v),Vi(v,"style",C),$f(v,h.precedence,s),l.instance=v;case"stylesheet":C=uc(h.href);var I=s.querySelector(Qu(C));if(I)return l.state.loading|=4,l.instance=I,zn(I),I;v=Wy(h),(C=or.get(C))&&x1(v,C),I=(s.ownerDocument||s).createElement("link"),zn(I);var D=I;return D._p=new Promise(function(q,se){D.onload=q,D.onerror=se}),Vi(I,"link",v),l.state.loading|=4,$f(I,h.precedence,s),l.instance=I;case"script":return I=dc(h.src),(C=s.querySelector(ed(I)))?(l.instance=C,zn(C),C):(v=h,(C=or.get(I))&&(v=E({},h),y1(v,C)),s=s.ownerDocument||s,C=s.createElement("script"),zn(C),Vi(C,"link",v),s.head.appendChild(C),l.instance=C);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,$f(v,h.precedence,s));return l.instance}function $f(s,l,h){for(var v=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,I=C,D=0;D<v.length;D++){var q=v[D];if(q.dataset.precedence===l)I=q;else if(I!==C)break}I?I.parentNode.insertBefore(s,I.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(s,l.firstChild))}function x1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function y1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Jf=null;function $y(s,l,h){if(Jf===null){var v=new Map,C=Jf=new Map;C.set(h,v)}else C=Jf,v=C.get(h),v||(v=new Map,C.set(h,v));if(v.has(s))return v;for(v.set(s,null),h=h.getElementsByTagName(s),C=0;C<h.length;C++){var I=h[C];if(!(I[Po]||I[Ht]||s==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var D=I.getAttribute(l)||"";D=s+D;var q=v.get(D);q?q.push(I):v.set(D,[I])}}return v}function Jy(s,l,h){s=s.ownerDocument||s,s.head.insertBefore(h,l==="title"?s.querySelector("head > title"):null)}function QS(s,l,h){if(h===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Zy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function eN(s,l,h,v){if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var C=uc(v.href),I=l.querySelector(Qu(C));if(I){l=I._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Zf.bind(s),l.then(s,s)),h.state.loading|=4,h.instance=I,zn(I);return}I=l.ownerDocument||l,v=Wy(v),(C=or.get(C))&&x1(v,C),I=I.createElement("link"),zn(I);var D=I;D._p=new Promise(function(q,se){D.onload=q,D.onerror=se}),Vi(I,"link",v),h.instance=I}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=Zf.bind(s),l.addEventListener("load",h),l.addEventListener("error",h))}}var v1=0;function tN(s,l){return s.stylesheets&&s.count===0&&eh(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var v=setTimeout(function(){if(s.stylesheets&&eh(s,s.stylesheets),s.unsuspend){var I=s.unsuspend;s.unsuspend=null,I()}},6e4+l);0<s.imgBytes&&v1===0&&(v1=62500*LS());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&eh(s,s.stylesheets),s.unsuspend)){var I=s.unsuspend;s.unsuspend=null,I()}},(s.imgBytes>v1?50:800)+l);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(C)}}:null}function Zf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Qf=null;function eh(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Qf=new Map,l.forEach(nN,s),Qf=null,Zf.call(s))}function nN(s,l){if(!(l.state.loading&4)){var h=Qf.get(s);if(h)var v=h.get(null);else{h=new Map,Qf.set(s,h);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<C.length;I++){var D=C[I];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),v=D)}v&&h.set(null,v)}C=l.instance,D=C.getAttribute("data-precedence"),I=h.get(D)||v,I===v&&h.set(null,C),h.set(D,C),this.count++,v=Zf.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),I?I.parentNode.insertBefore(C,I.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),l.state.loading|=4}}var td={$$typeof:j,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function iN(s,l,h,v,C,I,D,q,se){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.hiddenUpdates=vt(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=I,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function Qy(s,l,h,v,C,I,D,q,se,xe,Ce,Re){return s=new iN(s,l,h,D,se,xe,Ce,Re,q),l=1,I===!0&&(l|=24),I=Cs(3,null,null,l),s.current=I,I.stateNode=s,l=Z0(),l.refCount++,s.pooledCache=l,l.refCount++,I.memoizedState={element:v,isDehydrated:h,cache:l},np(I),s}function ev(s){return s?(s=Vl,s):Vl}function tv(s,l,h,v,C,I){C=ev(C),v.context===null?v.context=C:v.pendingContext=C,v=ro(l),v.payload={element:h},I=I===void 0?null:I,I!==null&&(v.callback=I),h=ao(s,v,l),h!==null&&(xs(h,s,l),Mu(h,s,l))}function nv(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function b1(s,l){nv(s,l),(s=s.alternate)&&nv(s,l)}function iv(s){if(s.tag===13||s.tag===31){var l=qo(s,67108864);l!==null&&xs(l,s,67108864),b1(s,67108864)}}function sv(s){if(s.tag===13||s.tag===31){var l=Os();l=li(l);var h=qo(s,l);h!==null&&xs(h,s,l),b1(s,l)}}var th=!0;function sN(s,l,h,v){var C=K.T;K.T=null;var I=J.p;try{J.p=2,w1(s,l,h,v)}finally{J.p=I,K.T=C}}function rN(s,l,h,v){var C=K.T;K.T=null;var I=J.p;try{J.p=8,w1(s,l,h,v)}finally{J.p=I,K.T=C}}function w1(s,l,h,v){if(th){var C=_1(v);if(C===null)o1(s,l,v,nh,h),av(s,v);else if(oN(C,s,l,h,v))v.stopPropagation();else if(av(s,v),l&4&&-1<aN.indexOf(s)){for(;C!==null;){var I=$t(C);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var D=mr(I.pendingLanes);if(D!==0){var q=I;for(q.pendingLanes|=2,q.entangledLanes|=2;D;){var se=1<<31-yt(D);q.entanglements[1]|=se,D&=~se}qr(I),(Zt&6)===0&&(Bf=Nt()+500,Ku(0))}}break;case 31:case 13:q=qo(I,2),q!==null&&xs(q,I,2),Ff(),b1(I,2)}if(I=_1(v),I===null&&o1(s,l,v,nh,h),I===C)break;C=I}C!==null&&v.stopPropagation()}else o1(s,l,v,null,h)}}function _1(s){return s=yu(s),E1(s)}var nh=null;function E1(s){if(nh=null,s=Fn(s),s!==null){var l=o(s);if(l===null)s=null;else{var h=l.tag;if(h===13){if(s=d(l),s!==null)return s;s=null}else if(h===31){if(s=g(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return nh=s,null}function rv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ls()){case Zn:return 2;case jr:return 8;case Qi:case vi:return 32;case Lo:return 268435456;default:return 32}default:return 32}}var A1=!1,yo=null,vo=null,bo=null,nd=new Map,id=new Map,wo=[],aN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function av(s,l){switch(s){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":nd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(l.pointerId)}}function sd(s,l,h,v,C,I){return s===null||s.nativeEvent!==I?(s={blockedOn:l,domEventName:h,eventSystemFlags:v,nativeEvent:I,targetContainers:[C]},l!==null&&(l=$t(l),l!==null&&iv(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,C!==null&&l.indexOf(C)===-1&&l.push(C),s)}function oN(s,l,h,v,C){switch(l){case"focusin":return yo=sd(yo,s,l,h,v,C),!0;case"dragenter":return vo=sd(vo,s,l,h,v,C),!0;case"mouseover":return bo=sd(bo,s,l,h,v,C),!0;case"pointerover":var I=C.pointerId;return nd.set(I,sd(nd.get(I)||null,s,l,h,v,C)),!0;case"gotpointercapture":return I=C.pointerId,id.set(I,sd(id.get(I)||null,s,l,h,v,C)),!0}return!1}function ov(s){var l=Fn(s.target);if(l!==null){var h=o(l);if(h!==null){if(l=h.tag,l===13){if(l=d(h),l!==null){s.blockedOn=l,He(s.priority,function(){sv(h)});return}}else if(l===31){if(l=g(h),l!==null){s.blockedOn=l,He(s.priority,function(){sv(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ih(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=_1(s.nativeEvent);if(h===null){h=s.nativeEvent;var v=new h.constructor(h.type,h);jo=v,h.target.dispatchEvent(v),jo=null}else return l=$t(h),l!==null&&iv(l),s.blockedOn=h,!1;l.shift()}return!0}function lv(s,l,h){ih(s)&&h.delete(l)}function lN(){A1=!1,yo!==null&&ih(yo)&&(yo=null),vo!==null&&ih(vo)&&(vo=null),bo!==null&&ih(bo)&&(bo=null),nd.forEach(lv),id.forEach(lv)}function sh(s,l){s.blockedOn===l&&(s.blockedOn=null,A1||(A1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lN)))}var rh=null;function cv(s){rh!==s&&(rh=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){rh===s&&(rh=null);for(var l=0;l<s.length;l+=3){var h=s[l],v=s[l+1],C=s[l+2];if(typeof v!="function"){if(E1(v||h)===null)continue;break}var I=$t(h);I!==null&&(s.splice(l,3),l-=3,_p(I,{pending:!0,data:C,method:h.method,action:v},v,C))}}))}function fc(s){function l(se){return sh(se,s)}yo!==null&&sh(yo,s),vo!==null&&sh(vo,s),bo!==null&&sh(bo,s),nd.forEach(l),id.forEach(l);for(var h=0;h<wo.length;h++){var v=wo[h];v.blockedOn===s&&(v.blockedOn=null)}for(;0<wo.length&&(h=wo[0],h.blockedOn===null);)ov(h),h.blockedOn===null&&wo.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(v=0;v<h.length;v+=3){var C=h[v],I=h[v+1],D=C[at]||null;if(typeof I=="function")D||cv(h);else if(D){var q=null;if(I&&I.hasAttribute("formAction")){if(C=I,D=I[at]||null)q=D.formAction;else if(E1(C)!==null)continue}else q=D.action;typeof q=="function"?h[v+1]=q:(h.splice(v,3),v-=3),cv(h)}}}function uv(){function s(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(D){return C=D})},focusReset:"manual",scroll:"manual"})}function l(){C!==null&&(C(),C=null),v||setTimeout(h,20)}function h(){if(!v&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),C!==null&&(C(),C=null)}}}function S1(s){this._internalRoot=s}ah.prototype.render=S1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var h=l.current,v=Os();tv(h,v,s,l,null,null)},ah.prototype.unmount=S1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;tv(s.current,2,null,s,null,null),Ff(),l[Yi]=null}};function ah(s){this._internalRoot=s}ah.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ii();s={blockedOn:null,target:s,priority:l};for(var h=0;h<wo.length&&l!==0&&l<wo[h].priority;h++);wo.splice(h,0,s),h===0&&ov(s)}};var dv=t.version;if(dv!=="19.2.4")throw Error(i(527,dv,"19.2.4"));J.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(l),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var cN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{un=oh.inject(cN),Pe=oh}catch{}}return ad.createRoot=function(s,l){if(!r(s))throw Error(i(299));var h=!1,v="",C=y2,I=v2,D=b2;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(I=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError)),l=Qy(s,1,!1,null,null,h,v,null,C,I,D,uv),s[Yi]=l.current,a1(s),new S1(l)},ad.hydrateRoot=function(s,l,h){if(!r(s))throw Error(i(299));var v=!1,C="",I=y2,D=v2,q=b2,se=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(C=h.identifierPrefix),h.onUncaughtError!==void 0&&(I=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(q=h.onRecoverableError),h.formState!==void 0&&(se=h.formState)),l=Qy(s,1,!0,l,h??null,v,C,se,I,D,q,uv),l.context=ev(null),h=l.current,v=Os(),v=li(v),C=ro(v),C.callback=null,ao(h,C,v),h=v,l.current.lanes=h,Mt(l,h),qr(l),s[Yi]=l.current,a1(s),new ah(l)},ad.version="19.2.4",ad}var wv;function wN(){if(wv)return T1.exports;wv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),T1.exports=bN(),T1.exports}var _N=wN();const EN=t3(_N);var Ki=(e=>(e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.ADMIN="ADMIN",e.VANTA_PROD="VANTA_PROD",e.VANTA_SOCIO="VANTA_SOCIO",e.VANTA_PROMOTER="VANTA_PROMOTER",e.VANTA_PORTARIA="VANTA_PORTARIA",e.VANTA_STAFF="VANTA_STAFF",e.VANTA_FINANCEIRO="VANTA_FINANCEIRO",e.RESTRICTED="RESTRICTED",e))(Ki||{});const AN=["admin","master","vanta_master"],Zh=e=>e?AN.includes(e.role.toLowerCase()):!1;var n3=(e=>(e.CLASSIC="CLASSIC",e.PLUS="PLUS",e.BLACK="BLACK",e))(n3||{}),i3=(e=>(e.CLASSIC="VANTA CLASSIC",e.VIP="VANTA VIP",e.ELITE="VANTA ELITE",e))(i3||{});const SN=[{id:"event_view",label:"Ver Eventos"},{id:"event_edit",label:"Editar Eventos"},{id:"list_view",label:"Ver Listas"},{id:"list_checkin",label:"Executar Check-in"}],NN=[{id:"unit_edit",label:"Editar Unidade"},{id:"unit_staff",label:"Gerir Equipe"},{id:"unit_finance",label:"Ver Financeiro"}],CN=e=>{const t=e.role.toLowerCase();return Zh(e)||["vanta_prod","produtor","vanta_socio","vanta_promoter","vanta_portaria","vanta_staff","vanta_financeiro"].includes(t)};var ol=(e=>(e.OPEN="open",e.VOTING="voting",e.CLOSED="closed",e))(ol||{}),$i=(e=>(e.ABSOLVICAO="absolvicao",e.ADVERTENCIA="advertencia",e.SUSPENSAO="suspensao",e.BANIMENTO="banimento",e))($i||{});function Qh(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function TN(e,t,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function g(_){try{p(i.next(_))}catch(E){d(E)}}function x(_){try{p(i.throw(_))}catch(E){d(E)}}function p(_){_.done?o(_.value):r(_.value).then(g,x)}p((i=i.apply(e,t||[])).next())})}const IN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class $m extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class RN extends $m{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _v extends $m{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ev extends $m{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var J1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(J1||(J1={}));class kN{constructor(t,{headers:n={},customFetch:i,region:r=J1.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=IN(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return TN(this,arguments,void 0,function*(n,i={}){var r;let o,d;try{const{headers:g,method:x,body:p,signal:_,timeout:E}=i;let N={},{region:k}=i;k||(k=this.region);const O=new URL(`${this.url}/${n}`);k&&k!=="any"&&(N["x-region"]=k,O.searchParams.set("forceFunctionRegion",k));let L;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",L=p):typeof p=="string"?(N["Content-Type"]="text/plain",L=p):typeof FormData<"u"&&p instanceof FormData?L=p:(N["Content-Type"]="application/json",L=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?L=JSON.stringify(p):L=p;let P=_;E&&(d=new AbortController,o=setTimeout(()=>d.abort(),E),_?(P=d.signal,_.addEventListener("abort",()=>d.abort())):P=d.signal);const H=yield this.fetch(O.toString(),{method:x||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),g),body:L,signal:P}).catch(Y=>{throw new RN(Y)}),B=H.headers.get("x-relay-error");if(B&&B==="true")throw new _v(H);if(!H.ok)throw new Ev(H);let j=((r=H.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),F;return j==="application/json"?F=yield H.json():j==="application/octet-stream"||j==="application/pdf"?F=yield H.blob():j==="text/event-stream"?F=H:j==="multipart/form-data"?F=yield H.formData():F=yield H.text(),{data:F,error:null,response:H}}catch(g){return{data:null,error:g,response:g instanceof Ev||g instanceof _v?g.context:void 0}}finally{o&&clearTimeout(o)}})}}var ON=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},MN=class{constructor(e){var t,n,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(i=e.urlLengthLimit)!==null&&i!==void 0?i:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let d=null,g=null,x=null,p=o.status,_=o.statusText;if(o.ok){var E,N;if(n.method!=="HEAD"){var k;const H=await o.text();H===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((k=n.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?g=H:g=JSON.parse(H))}const L=(E=n.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),P=(N=o.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");L&&P&&P.length>1&&(x=parseInt(P[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(g)&&(g.length>1?(d={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,x=null,p=406,_="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var O;const L=await o.text();try{d=JSON.parse(L),Array.isArray(d)&&o.status===404&&(g=[],d=null,p=200,_="OK")}catch{o.status===404&&L===""?(p=204,_="No Content"):d={message:L}}if(d&&n.isMaybeSingle&&(!(d==null||(O=d.details)===null||O===void 0)&&O.includes("0 rows"))&&(d=null,p=200,_="OK"),d&&n.shouldThrowOnError)throw new ON(d)}return{error:d,data:g,count:x,status:p,statusText:_}});return this.shouldThrowOnError||(r=r.catch(o=>{var d;let g="",x="",p="";const _=o==null?void 0:o.cause;if(_){var E,N,k,O;const H=(E=_==null?void 0:_.message)!==null&&E!==void 0?E:"",B=(N=_==null?void 0:_.code)!==null&&N!==void 0?N:"";g=`${(k=o==null?void 0:o.name)!==null&&k!==void 0?k:"FetchError"}: ${o==null?void 0:o.message}`,g+=`

Caused by: ${(O=_==null?void 0:_.name)!==null&&O!==void 0?O:"Error"}: ${H}`,B&&(g+=` (${B})`),_!=null&&_.stack&&(g+=`
${_.stack}`)}else{var L;g=(L=o==null?void 0:o.stack)!==null&&L!==void 0?L:""}const P=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(p="",x="Request was aborted (timeout or manual cancellation)",P>this.urlLengthLimit&&(x+=`. Note: Your request URL is ${P} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((_==null?void 0:_.name)==="HeadersOverflowError"||(_==null?void 0:_.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",x="HTTP headers exceeded server limits (typically 16KB)",P>this.urlLengthLimit&&(x+=`. Your request URL is ${P} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,details:g,hint:x,code:p},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},DN=class extends MN{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",d=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${d?`${d},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var d;const g=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),x=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${x}"; options=${g};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Av=new RegExp("[,()]");var wc=class extends DN{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&Av.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&Av.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},LN=class{constructor(e,{headers:t={},schema:n,fetch:i,urlLengthLimit:r=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=i,this.urlLengthLimit=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:i}=t??{},r=n?"HEAD":"GET";let o=!1;const d=(e??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:g,headers:x}=this.cloneRequestState();return g.searchParams.set("select",d),i&&x.append("Prefer",`count=${i}`),new wc({method:r,url:g,headers:x,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var i;const r="POST",{url:o,headers:d}=this.cloneRequestState();if(t&&d.append("Prefer",`count=${t}`),n||d.append("Prefer","missing=default"),Array.isArray(e)){const g=e.reduce((x,p)=>x.concat(Object.keys(p)),[]);if(g.length>0){const x=[...new Set(g)].map(p=>`"${p}"`);o.searchParams.set("columns",x.join(","))}}return new wc({method:r,url:o,headers:d,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){var o;const d="POST",{url:g,headers:x}=this.cloneRequestState();if(x.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&g.searchParams.set("on_conflict",t),i&&x.append("Prefer",`count=${i}`),r||x.append("Prefer","missing=default"),Array.isArray(e)){const p=e.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(p.length>0){const _=[...new Set(p)].map(E=>`"${E}"`);g.searchParams.set("columns",_.join(","))}}return new wc({method:d,url:g,headers:x,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const i="PATCH",{url:r,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new wc({method:i,url:r,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:i,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new wc({method:n,url:i,headers:r,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function PN(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Ed(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jN(e){var t=PN(e,"string");return Ed(t)=="symbol"?t:t+""}function BN(e,t,n){return(t=jN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function ch(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sv(Object(n),!0).forEach(function(i){BN(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sv(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var UN=class s3{constructor(t,{headers:n={},schema:i,fetch:r,timeout:o,urlLengthLimit:d=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.urlLengthLimit=d;const g=r??globalThis.fetch;o!==void 0&&o>0?this.fetch=(x,p)=>{const _=new AbortController,E=setTimeout(()=>_.abort(),o),N=p==null?void 0:p.signal;if(N){if(N.aborted)return clearTimeout(E),g(x,p);const k=()=>{clearTimeout(E),_.abort()};return N.addEventListener("abort",k,{once:!0}),g(x,ch(ch({},p),{},{signal:_.signal})).finally(()=>{clearTimeout(E),N.removeEventListener("abort",k)})}return g(x,ch(ch({},p),{},{signal:_.signal})).finally(()=>clearTimeout(E))}:this.fetch=g}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new LN(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new s3(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:i=!1,get:r=!1,count:o}={}){var d;let g;const x=new URL(`${this.url}/rpc/${t}`);let p;const _=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(_)),E=i&&Object.values(n).some(_);E?(g="POST",p=n):i||r?(g=i?"HEAD":"GET",Object.entries(n).filter(([k,O])=>O!==void 0).map(([k,O])=>[k,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([k,O])=>{x.searchParams.append(k,O)})):(g="POST",p=n);const N=new Headers(this.headers);return E?N.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&N.set("Prefer",`count=${o}`),new wc({method:g,url:x,headers:N,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};class FN{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const r=i.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const zN="2.95.3",VN=`realtime-js/${zN}`,GN="1.0.0",r3="2.0.0",Nv=r3,Z1=1e4,HN=1e3,qN=100;var So;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(So||(So={}));var Ai;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ai||(Ai={}));var Tr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Tr||(Tr={}));var Q1;(function(e){e.websocket="websocket"})(Q1||(Q1={}));var dl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dl||(dl={}));class YN{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const r=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(t){var n,i;const r=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,n,i){var r,o;const d=t.topic,g=(r=t.ref)!==null&&r!==void 0?r:"",x=(o=t.join_ref)!==null&&o!==void 0?o:"",p=t.payload.event,_=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},E=Object.keys(_).length===0?"":JSON.stringify(_);if(x.length>255)throw new Error(`joinRef length ${x.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+x.length+g.length+d.length+p.length+E.length,k=new ArrayBuffer(this.HEADER_LENGTH+N);let O=new DataView(k),L=0;O.setUint8(L++,this.KINDS.userBroadcastPush),O.setUint8(L++,x.length),O.setUint8(L++,g.length),O.setUint8(L++,d.length),O.setUint8(L++,p.length),O.setUint8(L++,E.length),O.setUint8(L++,n),Array.from(x,H=>O.setUint8(L++,H.charCodeAt(0))),Array.from(g,H=>O.setUint8(L++,H.charCodeAt(0))),Array.from(d,H=>O.setUint8(L++,H.charCodeAt(0))),Array.from(p,H=>O.setUint8(L++,H.charCodeAt(0))),Array.from(E,H=>O.setUint8(L++,H.charCodeAt(0)));var P=new Uint8Array(k.byteLength+i.byteLength);return P.set(new Uint8Array(k),0),P.set(new Uint8Array(i),k.byteLength),P.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[r,o,d,g,x]=i;return n({join_ref:r,ref:o,topic:d,event:g,payload:x})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,r)}}_decodeUserBroadcast(t,n,i){const r=n.getUint8(1),o=n.getUint8(2),d=n.getUint8(3),g=n.getUint8(4);let x=this.HEADER_LENGTH+4;const p=i.decode(t.slice(x,x+r));x=x+r;const _=i.decode(t.slice(x,x+o));x=x+o;const E=i.decode(t.slice(x,x+d));x=x+d;const N=t.slice(x,t.byteLength),k=g===this.JSON_ENCODING?JSON.parse(i.decode(N)):N,O={type:this.BROADCAST_EVENT,event:_,payload:k};return d>0&&(O.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:O}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class a3{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(wn||(wn={}));const Cv=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((o,d)=>(o[d]=XN(d,e,t,r),o),{}):{}},XN=(e,t,n,i)=>{const r=t.find(g=>g.name===e),o=r==null?void 0:r.type,d=n[e];return o&&!i.includes(o)?o3(o,d):em(d)},o3=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return JN(t,n)}switch(e){case wn.bool:return WN(t);case wn.float4:case wn.float8:case wn.int2:case wn.int4:case wn.int8:case wn.numeric:case wn.oid:return KN(t);case wn.json:case wn.jsonb:return $N(t);case wn.timestamp:return ZN(t);case wn.abstime:case wn.date:case wn.daterange:case wn.int4range:case wn.int8range:case wn.money:case wn.reltime:case wn.text:case wn.time:case wn.timestamptz:case wn.timetz:case wn.tsrange:case wn.tstzrange:return em(t);default:return em(t)}},em=e=>e,WN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},KN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$N=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},JN=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let o;const d=e.slice(1,n);try{o=JSON.parse("["+d+"]")}catch{o=d?d.split(","):[]}return o.map(g=>o3(t,g))}return e},ZN=e=>typeof e=="string"?e.replace(" ","T"):e,l3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class O1{constructor(t,n,i={},r=Z1){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Tv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Tv||(Tv={}));class yd{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:o,onLeave:d,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yd.syncState(this.state,r,o,d),this.pendingDiffs.forEach(x=>{this.state=yd.syncDiff(this.state,x,o,d)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},r=>{const{onJoin:o,onLeave:d,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=yd.syncDiff(this.state,r,o,d),g())}),this.onJoin((r,o,d)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:d})}),this.onLeave((r,o,d)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const o=this.cloneDeep(t),d=this.transformState(n),g={},x={};return this.map(o,(p,_)=>{d[p]||(x[p]=_)}),this.map(d,(p,_)=>{const E=o[p];if(E){const N=_.map(P=>P.presence_ref),k=E.map(P=>P.presence_ref),O=_.filter(P=>k.indexOf(P.presence_ref)<0),L=E.filter(P=>N.indexOf(P.presence_ref)<0);O.length>0&&(g[p]=O),L.length>0&&(x[p]=L)}else g[p]=_}),this.syncDiff(o,{joins:g,leaves:x},i,r)}static syncDiff(t,n,i,r){const{joins:o,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(g,x)=>{var p;const _=(p=t[g])!==null&&p!==void 0?p:[];if(t[g]=this.cloneDeep(x),_.length>0){const E=t[g].map(k=>k.presence_ref),N=_.filter(k=>E.indexOf(k.presence_ref)<0);t[g].unshift(...N)}i(g,_,x)}),this.map(d,(g,x)=>{let p=t[g];if(!p)return;const _=x.map(E=>E.presence_ref);p=p.filter(E=>_.indexOf(E.presence_ref)<0),t[g]=p,r(g,p,x),p.length===0&&delete t[g]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Iv||(Iv={}));var vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vd||(vd={}));var Na;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Na||(Na={}));class Nc{constructor(t,n={config:{}},i){var r,o;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Ai.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new O1(this,Tr.join,this.params,this.timeout),this.rejoinTimer=new a3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ai.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ai.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ai.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ai.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ai.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tr.reply,{},(d,g)=>{this._trigger(this._replyEventName(g),d)}),this.presence=new yd(this),this.broadcastEndpointURL=l3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,r,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ai.closed){const{config:{broadcast:d,presence:g,private:x}}=this.params,p=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(k=>k.filter))!==null&&r!==void 0?r:[],_=!!this.bindings[vd.PRESENCE]&&this.bindings[vd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,E={},N={broadcast:d,presence:Object.assign(Object.assign({},g),{enabled:_}),postgres_changes:p,private:x};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(k=>t==null?void 0:t(Na.CHANNEL_ERROR,k)),this._onClose(()=>t==null?void 0:t(Na.CLOSED)),this.updateJoinPayload(Object.assign({config:N},E)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:k})=>{var O;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){t==null||t(Na.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,P=(O=L==null?void 0:L.length)!==null&&O!==void 0?O:0,H=[];for(let B=0;B<P;B++){const j=L[B],{filter:{event:F,schema:Y,table:W,filter:te}}=j,ne=k&&k[B];if(ne&&ne.event===F&&Nc.isFilterValueEqual(ne.schema,Y)&&Nc.isFilterValueEqual(ne.table,W)&&Nc.isFilterValueEqual(ne.filter,te))H.push(Object.assign(Object.assign({},j),{id:ne.id}));else{this.unsubscribe(),this.state=Ai.errored,t==null||t(Na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,t&&t(Na.SUBSCRIBED);return}}).receive("error",k=>{this.state=Ai.errored,t==null||t(Na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Ai.joined&&t===vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(g.status===202)return{success:!0};let x=g.statusText;try{const p=await g.json();x=p.error||p.message||x}catch{}return Promise.reject(new Error(x))}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:d}=t,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const x={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var d,g,x;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((x=(g=(d=this.params)===null||d===void 0?void 0:d.config)===null||g===void 0?void 0:g.broadcast)===null||x===void 0)&&x.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ai.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new O1(this,Tr.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ai.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const r=new AbortController,o=setTimeout(()=>r.abort(),i),d=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(o),d}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new O1(this,t,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>qN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,o;const d=t.toLocaleLowerCase(),{close:g,error:x,leave:p,join:_}=Tr;if(i&&[g,x,p,_].indexOf(d)>=0&&i!==this._joinRef())return;let N=this._onMessage(d,n,i);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(k=>{var O,L,P;return((O=k.filter)===null||O===void 0?void 0:O.event)==="*"||((P=(L=k.filter)===null||L===void 0?void 0:L.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===d}).map(k=>k.callback(N,i)):(o=this.bindings[d])===null||o===void 0||o.filter(k=>{var O,L,P,H,B,j;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in k){const F=k.id,Y=(O=k.filter)===null||O===void 0?void 0:O.event;return F&&((L=n.ids)===null||L===void 0?void 0:L.includes(F))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const F=(B=(H=k==null?void 0:k.filter)===null||H===void 0?void 0:H.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return F==="*"||F===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===d}).map(k=>{if(typeof N=="object"&&"ids"in N){const O=N.data,{schema:L,table:P,commit_timestamp:H,type:B,errors:j}=O;N=Object.assign(Object.assign({},{schema:L,table:P,commit_timestamp:H,eventType:B,new:{},old:{},errors:j}),this._getPayloadRecords(O))}k.callback(N,i)})}_isClosed(){return this.state===Ai.closed}_isJoined(){return this.state===Ai.joined}_isJoining(){return this.state===Ai.joining}_isLeaving(){return this.state===Ai.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),o={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Nc.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Tr.close,{},t)}_onError(t){this._on(Tr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ai.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Cv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Cv(t.columns,t.old_record)),n}}const M1=()=>{},uh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QN=[1e3,2e3,5e3,1e4],eC=1e4,tC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nC{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Z1,this.transport=null,this.heartbeatIntervalMs=uh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=M1,this.ref=0,this.reconnectTimer=null,this.vsn=Nv,this.logger=M1,this.conn=null,this.sendBuffer=[],this.serializer=new YN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...o)=>r(...o):(...o)=>fetch(...o),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Q1.websocket}`,this.httpEndpoint=l3(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=FN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return n==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case So.connecting:return dl.Connecting;case So.open:return dl.Open;case So.closing:return dl.Closing;default:return dl.Closed}}isConnected(){return this.connectionState()===dl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{const o=new Nc(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:i,payload:r,ref:o}=t,d=()=>{this.encode(t,g=>{var x;(x=this.conn)===null||x===void 0||x.send(g)})};this.log("push",`${n} ${i} (${o})`,r),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(HN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},uh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",p)}catch(_){this.log("error","error in heartbeat callback",_)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:r,payload:o,ref:d}=n,g=d?`(${d})`:"",x=o.status||"";this.log("receive",`${x} ${i} ${r} ${g}`.trim(),o),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(r,o,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===So.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===So.open||this.conn.readyState===So.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Tr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([tC],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,i=!1;if(t)n=t,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:VN};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Tr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new a3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,r,o,d,g,x,p,_,E,N,k;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Z1,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:uh.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(d=t==null?void 0:t.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(g=t==null?void 0:t.heartbeatCallback)!==null&&g!==void 0?g:M1,this.vsn=(x=t==null?void 0:t.vsn)!==null&&x!==void 0?x:Nv,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:(O=>QN[O-1]||eC),this.vsn){case GN:this.encode=(_=t==null?void 0:t.encode)!==null&&_!==void 0?_:((O,L)=>L(JSON.stringify(O))),this.decode=(E=t==null?void 0:t.decode)!==null&&E!==void 0?E:((O,L)=>L(JSON.parse(O)));break;case r3:this.encode=(N=t==null?void 0:t.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(k=t==null?void 0:t.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ad=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function iC(e,t,n){const i=new URL(t,e);if(n)for(const[r,o]of Object.entries(n))o!==void 0&&i.searchParams.set(r,o);return i.toString()}async function sC(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function rC(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:r,body:o,headers:d}){const g=iC(e.baseUrl,i,r),x=await sC(e.auth),p=await t(g,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...x,...d},body:o?JSON.stringify(o):void 0}),_=await p.text(),E=(p.headers.get("content-type")||"").includes("application/json"),N=E&&_?JSON.parse(_):_;if(!p.ok){const k=E?N:void 0,O=k==null?void 0:k.error;throw new Ad((O==null?void 0:O.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:O==null?void 0:O.type,icebergCode:O==null?void 0:O.code,details:k})}return{status:p.status,headers:p.headers,data:N}}}}function dh(e){return e.join("")}var aC=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:dh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dh(e.namespace)}`}),!0}catch(t){if(t instanceof Ad&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Ad&&n.status===409)return;throw n}}};function hc(e){return e.join("")}var oC=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hc(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Ad&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Ad&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},lC=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=rC({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new aC(this.client,t),this.tableOps=new oC(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},e0=class extends Error{constructor(e,t="storage",n,i){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function t0(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var fh=class extends e0{constructor(e,t,n,i="storage"){super(e,i,t,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},c3=class extends e0{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const cC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uC=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tm=e=>{if(Array.isArray(e))return e.map(n=>tm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[r]=tm(i)}),t},dC=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function fC(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Sd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hC(e){var t=fC(e,"string");return Sd(t)=="symbol"?t:t+""}function pC(e,t,n){return(t=hC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rv(Object(n),!0).forEach(function(i){pC(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rv(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const kv=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},mC=async(e,t,n,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e,o=r.status||500;if(typeof r.json=="function")r.json().then(d=>{const g=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||o+"";t(new fh(kv(d),o,g,i))}).catch(()=>{if(i==="vectors"){const d=o+"";t(new fh(r.statusText||`HTTP ${o} error`,o,d,i))}else{const d=o+"";t(new fh(r.statusText||`HTTP ${o} error`,o,d,i))}});else{const d=o+"";t(new fh(r.statusText||`HTTP ${o} error`,o,d,i))}}else t(new c3(kv(e),e,i))},gC=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!i?ut(ut({},r),n):(uC(i)?(r.headers=ut({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,t!=null&&t.duplex&&(r.duplex=t.duplex),ut(ut({},r),n))};async function od(e,t,n,i,r,o,d){return new Promise((g,x)=>{e(n,gC(t,i,r,o)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;if(d==="vectors"){const _=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!_||!_.includes("application/json"))return{}}return p.json()}).then(p=>g(p)).catch(p=>mC(p,x,i,d))})}function u3(e="storage"){return{get:async(t,n,i,r)=>od(t,"GET",n,i,r,void 0,e),post:async(t,n,i,r,o)=>od(t,"POST",n,r,o,i,e),put:async(t,n,i,r,o)=>od(t,"PUT",n,r,o,i,e),head:async(t,n,i,r)=>od(t,"HEAD",n,ut(ut({},i),{},{noResolveJson:!0}),r,void 0,e),remove:async(t,n,i,r,o)=>od(t,"DELETE",n,r,o,i,e)}}const xC=u3("storage"),{get:Nd,post:Cr,put:nm,head:yC,remove:Jm}=xC,zs=u3("vectors");var Qc=class{constructor(e,t={},n,i="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=cC(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(t0(n))return{data:null,error:n};throw n}}},vC=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(t0(t))return{data:null,error:t};throw t}}};let d3;d3=Symbol.toStringTag;var bC=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[d3]="BlobDownloadBuilder",this.promise=null}asStream(){return new vC(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(t0(t))return{data:null,error:t};throw t}}};const wC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ov={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var _C=class extends Qc{constructor(e,t={},n,i){super(e,t,i,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,i){var r=this;return r.handleOperation(async()=>{let o;const d=ut(ut({},Ov),i);let g=ut(ut({},r.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const x=d.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",d.cacheControl),x&&o.append("metadata",r.encodeMetadata(x)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",d.cacheControl),x&&!o.has("metadata")&&o.append("metadata",r.encodeMetadata(x))):(o=n,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType,x&&(g["x-metadata"]=r.toBase64(r.encodeMetadata(x))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!d.duplex&&(d.duplex="half")),i!=null&&i.headers&&(g=ut(ut({},g),i.headers));const p=r._removeEmptyFolders(t),_=r._getFinalPath(p),E=await(e=="PUT"?nm:Cr)(r.fetch,`${r.url}/object/${_}`,o,ut({headers:g},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{path:p,id:E.Id,fullPath:E.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,i){var r=this;const o=r._removeEmptyFolders(e),d=r._getFinalPath(o),g=new URL(r.url+`/object/upload/sign/${d}`);return g.searchParams.set("token",t),r.handleOperation(async()=>{let x;const p=ut({upsert:Ov.upsert},i),_=ut(ut({},r.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(x=new FormData,x.append("cacheControl",p.cacheControl),x.append("",n)):typeof FormData<"u"&&n instanceof FormData?(x=n,x.append("cacheControl",p.cacheControl)):(x=n,_["cache-control"]=`max-age=${p.cacheControl}`,_["content-type"]=p.contentType),{path:o,fullPath:(await nm(r.fetch,g.toString(),x,{headers:_})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e);const r=ut({},n.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const o=await Cr(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:r}),d=new URL(n.url+o.url),g=d.searchParams.get("token");if(!g)throw new e0("No token returned by API");return{signedUrl:d.toString(),path:e,token:g}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var i=this;return i.handleOperation(async()=>await Cr(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}))}async copy(e,t,n){var i=this;return i.handleOperation(async()=>({path:(await Cr(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(e,t,n){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(e),o=await Cr(i.fetch,`${i.url}/object/sign/${r}`,ut({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const d=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${o.signedURL}${d}`)}})}async createSignedUrls(e,t,n){var i=this;return i.handleOperation(async()=>{const r=await Cr(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(d=>ut(ut({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${o}`):null}))})}download(e,t,n){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=r?`?${r}`:"",d=this._getFinalPath(e),g=()=>Nd(this.fetch,`${this.url}/${i}/${d}${o}`,{headers:this.headers,noResolveJson:!0},n);return new bC(g,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>tm(await Nd(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await yC(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(t0(i)&&i instanceof c3){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&i.push(d);let g=i.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${g}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Jm(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var i=this;return i.handleOperation(async()=>{const r=ut(ut(ut({},wC),t),{},{prefix:e||""});return await Cr(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const i=ut({},e);return await Cr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const EC="2.95.3",Pd={"X-Client-Info":`storage-js/${EC}`};var AC=class extends Qc{constructor(e,t={},n,i){const r=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const o=r.href.replace(/\/$/,""),d=ut(ut({},Pd),t);super(o,d,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Nd(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nd(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Cr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await nm(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Cr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Jm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},SC=class extends Qc{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=ut(ut({},Pd),t);super(i,r,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Cr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),r=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await Nd(t.fetch,r,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Jm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!dC(e))throw new e0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new lC({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(r,o){const d=r[o];return typeof d!="function"?d:async(...g)=>{try{return{data:await d.apply(r,g),error:null}}catch(x){if(i)throw x;return{data:null,error:x}}}}})}},NC=class extends Qc{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=ut(ut({},Pd),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await zs.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await zs.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},CC=class extends Qc{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=ut(ut({},Pd),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},TC=class extends Qc{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=ut(ut({},Pd),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await zs.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},IC=class extends TC{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new RC(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},RC=class extends NC{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new kC(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},kC=class extends CC{constructor(e,t,n,i,r){super(e,t,r),this.vectorBucketName=n,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,ut(ut({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},OC=class extends AC{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new _C(this.url,this.headers,e,this.fetch)}get vectors(){return new IC(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SC(this.url+"/iceberg",this.headers,this.fetch)}};const f3="2.95.3",_c=30*1e3,im=3,D1=im*_c,MC="http://localhost:9999",DC="supabase.auth.token",LC={"X-Client-Info":`gotrue-js/${f3}`},sm="X-Supabase-Api-Version",h3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jC=600*1e3;class Cd extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class BC extends Cd{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function UC(e){return Je(e)&&e.name==="AuthApiError"}class fl extends Cd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Da extends Cd{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class js extends Da{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function L1(e){return Je(e)&&e.name==="AuthSessionMissingError"}class pc extends Da{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hh extends Da{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ph extends Da{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function FC(e){return Je(e)&&e.name==="AuthImplicitGrantRedirectError"}class Mv extends Da{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zC extends Da{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class rm extends Da{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function P1(e){return Je(e)&&e.name==="AuthRetryableFetchError"}class Dv extends Da{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class am extends Da{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lv=` 	
\r=`.split(""),VC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lv.length;t+=1)e[Lv[t].charCodeAt(0)]=-2;for(let t=0;t<kh.length;t+=1)e[kh[t].charCodeAt(0)]=t;return e})();function Pv(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(kh[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(kh[i]),t.queuedBits-=6}}function p3(e,t,n){const i=VC[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function jv(e){const t=[],n=d=>{t.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=d=>{qC(d,i,n)};for(let d=0;d<e.length;d+=1)p3(e.charCodeAt(d),r,o);return t.join("")}function GC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function HC(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}GC(i,t)}}function qC(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Oc(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)p3(e.charCodeAt(r),n,i);return new Uint8Array(t)}function YC(e){const t=[];return HC(e,n=>t.push(n)),new Uint8Array(t)}function hl(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>Pv(r,n,i)),Pv(null,n,i),t.join("")}function XC(e){return Math.round(Date.now()/1e3)+e}function WC(){return Symbol("auth-callback")}const Hi=()=>typeof window<"u"&&typeof document<"u",sl={tested:!1,writable:!1},m3=()=>{if(!Hi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sl.tested)return sl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sl.tested=!0,sl.writable=!0}catch{sl.tested=!0,sl.writable=!1}return sl.writable};function KC(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{t[o]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const g3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$C=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ec=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},rl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gi=async(e,t)=>{await e.removeItem(t)};class n0{constructor(){this.promise=new n0.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}n0.promiseConstructor=Promise;function mh(e){const t=e.split(".");if(t.length!==3)throw new am("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!PC.test(t[i]))throw new am("JWT not in base64url format");return{header:JSON.parse(jv(t[0])),payload:JSON.parse(jv(t[1])),signature:Oc(t[2]),raw:{header:t[0],payload:t[1]}}}async function JC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ZC(e,t){return new Promise((i,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const d=await e(o);if(!t(o,null,d)){i(d);return}}catch(d){if(!t(o,d)){r(d);return}}})()})}function QC(e){return("0"+e.toString(16)).substr(-2)}function eT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let o=0;o<56;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,QC).join("")}async function tT(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function nT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await tT(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mc(e,t,n=!1){const i=eT();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await Ec(e,`${t}-code-verifier`,r);const o=await nT(i);return[o,i===o?"plain":"s256"]}const iT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sT(e){const t=e.headers.get(sm);if(!t||!t.match(iT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function aT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gc(e){if(!oT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function j1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lT(e,t){return new Proxy(e,{get:(n,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,r)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,r)}})}function Bv(e){return JSON.parse(JSON.stringify(e))}const ll=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cT=[502,503,504];async function Uv(e){var t;if(!$C(e))throw new rm(ll(e),0);if(cT.includes(e.status))throw new rm(ll(e),e.status);let n;try{n=await e.json()}catch(o){throw new fl(ll(o),o)}let i;const r=sT(e);if(r&&r.getTime()>=h3["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Dv(ll(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new js}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,d)=>o&&typeof d=="string",!0))throw new Dv(ll(n),e.status,n.weak_password.reasons);throw new BC(ll(n),e.status||500,i)}const uT=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function ct(e,t,n,i){var r;const o=Object.assign({},i==null?void 0:i.headers);o[sm]||(o[sm]=h3["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const d=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(d.redirect_to=i.redirectTo);const g=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",x=await dT(e,t,n+g,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(x):{data:Object.assign({},x),error:null}}async function dT(e,t,n,i,r,o){const d=uT(t,i,r,o);let g;try{g=await e(n,Object.assign({},d))}catch(x){throw console.error(x),new rm(ll(x),0)}if(g.ok||await Uv(g),i!=null&&i.noResolveJson)return g;try{return await g.json()}catch(x){await Uv(x)}}function Nr(e){var t;let n=null;pT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=XC(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Fv(e){const t=Nr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Co(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fT(e){return{data:e,error:null}}function hT(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o}=e,d=Qh(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o},x=Object.assign({},d);return{data:{properties:g,user:x},error:null}}function zv(e){return e}function pT(e){return e.access_token&&e.refresh_token&&e.expires_in}const B1=["global","local","others"];class mT{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=g3(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=B1[0]){if(B1.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${B1.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Je(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Co})}catch(i){if(Je(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Qh(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:hT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Je(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Co})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,o,d,g,x;try{const p={nextPage:null,lastPage:0,total:0},_=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:zv});if(_.error)throw _.error;const E=await _.json(),N=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,k=(x=(g=_.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&x!==void 0?x:[];return k.length>0&&(k.forEach(O=>{const L=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(O.split(";")[1].split("=")[1]);p[`${P}Page`]=L}),p.total=parseInt(N)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(Je(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){gc(t);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Co})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){gc(t);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Co})}catch(i){if(Je(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){gc(t);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Co})}catch(i){if(Je(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){gc(t.userId);try{const{data:n,error:i}=await ct(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _deleteFactor(t){gc(t.userId),gc(t.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,r,o,d,g,x;try{const p={nextPage:null,lastPage:0,total:0},_=await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:zv});if(_.error)throw _.error;const E=await _.json(),N=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,k=(x=(g=_.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&x!==void 0?x:[];return k.length>0&&(k.forEach(O=>{const L=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(O.split(";")[1].split("=")[1]);p[`${P}Page`]=L}),p.total=parseInt(N)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(Je(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}}function Vv(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const xc={debug:!!(globalThis&&m3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class x3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class gT extends x3{}async function xT(e,t,n){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),xc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function yT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function y3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function vT(e){return parseInt(e,16)}function bT(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function wT(e){var t;const{chainId:n,domain:i,expirationTime:r,issuedAt:o=new Date,nonce:d,notBefore:g,requestId:x,resources:p,scheme:_,uri:E,version:N}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const k=y3(e.address),O=_?`${_}://${i}`:i,L=e.statement?`${e.statement}
`:"",P=`${O} wants you to sign in with your Ethereum account:
${k}

${L}`;let H=`URI: ${E}
Version: ${N}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${o.toISOString()}`;if(r&&(H+=`
Expiration Time: ${r.toISOString()}`),g&&(H+=`
Not Before: ${g.toISOString()}`),x&&(H+=`
Request ID: ${x}`),p){let B=`
Resources:`;for(const j of p){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);B+=`
- ${j}`}H+=B}return`${P}
${H}`}class mi extends Error{constructor({message:t,code:n,cause:i,name:r}){var o;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=r??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Oh extends mi{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function _T({error:e,options:t}){var n,i,r;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new mi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new mi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new mi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new mi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const d=window.location.hostname;if(v3(d)){if(o.rp.id!==d)return new mi({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new mi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new mi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ET({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(v3(i)){if(n.rpId!==i)return new mi({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new mi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class AT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ST=new AT;function NT(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,r=Qh(e,["challenge","user","excludeCredentials"]),o=Oc(t).buffer,d=Object.assign(Object.assign({},n),{id:Oc(n.id).buffer}),g=Object.assign(Object.assign({},r),{challenge:o,user:d});if(i&&i.length>0){g.excludeCredentials=new Array(i.length);for(let x=0;x<i.length;x++){const p=i[x];g.excludeCredentials[x]=Object.assign(Object.assign({},p),{id:Oc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function CT(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Qh(e,["challenge","allowCredentials"]),r=Oc(t).buffer,o=Object.assign(Object.assign({},i),{challenge:r});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const g=n[d];o.allowCredentials[d]=Object.assign(Object.assign({},g),{id:Oc(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return o}function TT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:hl(new Uint8Array(e.response.attestationObject)),clientDataJSON:hl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function IT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:hl(new Uint8Array(r.authenticatorData)),clientDataJSON:hl(new Uint8Array(r.clientDataJSON)),signature:hl(new Uint8Array(r.signature)),userHandle:r.userHandle?hl(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function v3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Gv(){var e,t;return!!(Hi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function RT(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Oh("Browser returned unexpected credential type",t)}:{data:null,error:new Oh("Empty credential response",t)}}catch(t){return{data:null,error:_T({error:t,options:e})}}}async function kT(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Oh("Browser returned unexpected credential type",t)}:{data:null,error:new Oh("Empty credential response",t)}}catch(t){return{data:null,error:ET({error:t,options:e})}}}const OT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},MT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mh(...e){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of e)if(r)for(const o in r){const d=r[o];if(d!==void 0)if(Array.isArray(d))i[o]=d;else if(n(d))i[o]=d;else if(t(d)){const g=i[o];t(g)?i[o]=Mh(g,d):i[o]=Mh(d)}else i[o]=d}return i}function DT(e,t){return Mh(OT,e,t||{})}function LT(e,t){return Mh(MT,e,t||{})}class PT{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:r},o){var d;try{const{data:g,error:x}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!g)return{data:null,error:x};const p=r??ST.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:_}=g.webauthn.credential_options.publicKey;if(!_.name){const E=i;if(E)_.name=`${_.id}:${E}`;else{const k=(await this.client.getUser()).data.user,O=((d=k==null?void 0:k.user_metadata)===null||d===void 0?void 0:d.name)||(k==null?void 0:k.email)||(k==null?void 0:k.id)||"User";_.name=`${_.id}:${O}`}}_.displayName||(_.displayName=_.name)}switch(g.webauthn.type){case"create":{const _=DT(g.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:E,error:N}=await RT({publicKey:_,signal:p});return E?{data:{factorId:t,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:E}},error:null}:{data:null,error:N}}case"request":{const _=LT(g.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:E,error:N}=await kT(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:_,signal:p}));return E?{data:{factorId:t,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:E}},error:null}:{data:null,error:N}}}}catch(g){return Je(g)?{data:null,error:g}:{data:null,error:new fl("Unexpected error in challenge",g)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},o){if(!n)return{data:null,error:new Cd("rpId is required for WebAuthn authentication")};try{if(!Gv())return{data:null,error:new fl("Browser does not support WebAuthn",null)};const{data:d,error:g}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:r},{request:o});if(!d)return{data:null,error:g};const{webauthn:x}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:x.type,rpId:n,rpOrigins:i,credential_response:x.credential_response}})}catch(d){return Je(d)?{data:null,error:d}:{data:null,error:new fl("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},o){if(!n)return{data:null,error:new Cd("rpId is required for WebAuthn registration")};try{if(!Gv())return{data:null,error:new fl("Browser does not support WebAuthn",null)};const{data:d,error:g}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(_=>{var E;return(E=_.data)===null||E===void 0?void 0:E.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===t&&N.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_==null?void 0:_.id}):void 0),{data:null,error:g};const{data:x,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:r},{create:o});return x?this._verify({factorId:d.id,challengeId:x.challengeId,webauthn:{rpId:n,rpOrigins:i,type:x.webauthn.type,credential_response:x.webauthn.credential_response}}):{data:null,error:p}}catch(d){return Je(d)?{data:null,error:d}:{data:null,error:new fl("Unexpected error in register",d)}}}}yT();const jT={url:MC,storageKey:DC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:LC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Hv(e,t,n){return await n()}const yc={};class Td{get jwks(){var t,n;return(n=(t=yc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=yc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},jT),t);if(this.storageKey=o.storageKey,this.instanceID=(n=Td.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Td.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Hi()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new mT({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=g3(o.fetch),this.lock=o.lock||Hv,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Hi()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=xT:this.lock=Hv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:m3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vv(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Vv(this.memoryStorage)),Hi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${f3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(Hi()&&(n=KC(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Hi()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),FC(o)){const x=(t=o.details)===null||t===void 0?void 0:t.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:d,redirectType:g}=r;return this._debug("#_initialize()","detected session in URL",d,"redirect type",g),await this._saveSession(d),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Je(n)?this._returnResult({error:n}):this._returnResult({error:new fl("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Nr}),{data:d,error:g}=o;if(g||!d)return this._returnResult({data:{user:null,session:null},error:g});const x=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",x)),this._returnResult({data:{user:p,session:x},error:null})}catch(o){if(Je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,i,r;try{let o;if("email"in t){const{email:_,password:E,options:N}=t;let k=null,O=null;this.flowType==="pkce"&&([k,O]=await mc(this.storage,this.storageKey)),o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:_,password:E,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:k,code_challenge_method:O},xform:Nr})}else if("phone"in t){const{phone:_,password:E,options:N}=t;o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:E,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},channel:(r=N==null?void 0:N.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:Nr})}else throw new hh("You must provide either an email or phone number and a password");const{data:d,error:g}=o;if(g||!d)return await Gi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const x=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",x)),this._returnResult({data:{user:p,session:x},error:null})}catch(o){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:d,options:g}=t;n=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:d,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Fv})}else if("phone"in t){const{phone:o,password:d,options:g}=t;n=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:d,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Fv})}else throw new hh("You must provide either an email or phone number and a password");const{data:i,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const o=new pc;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(Je(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,r,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,r,o,d,g,x,p,_,E,N;let k,O;if("message"in t)k=t.message,O=t.signature;else{const{chain:L,wallet:P,statement:H,options:B}=t;let j;if(Hi())if(typeof P=="object")j=P;else{const ie=window;if("ethereum"in ie&&typeof ie.ethereum=="object"&&"request"in ie.ethereum&&typeof ie.ethereum.request=="function")j=ie.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=P}const F=new URL((n=B==null?void 0:B.url)!==null&&n!==void 0?n:window.location.href),Y=await j.request({method:"eth_requestAccounts"}).then(ie=>ie).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=y3(Y[0]);let te=(i=B==null?void 0:B.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!te){const ie=await j.request({method:"eth_chainId"});te=vT(ie)}const ne={domain:F.host,address:W,statement:H,uri:F.href,version:"1",chainId:te,nonce:(r=B==null?void 0:B.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(d=(o=B==null?void 0:B.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(g=B==null?void 0:B.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(x=B==null?void 0:B.signInWithEthereum)===null||x===void 0?void 0:x.notBefore,requestId:(p=B==null?void 0:B.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(_=B==null?void 0:B.signInWithEthereum)===null||_===void 0?void 0:_.resources};k=wT(ne),O=await j.request({method:"personal_sign",params:[bT(k),W]})}try{const{data:L,error:P}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:O},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(N=t.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Nr});if(P)throw P;if(!L||!L.session||!L.user){const H=new pc;return this._returnResult({data:{user:null,session:null},error:H})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:P})}catch(L){if(Je(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(t){var n,i,r,o,d,g,x,p,_,E,N,k;let O,L;if("message"in t)O=t.message,L=t.signature;else{const{chain:P,wallet:H,statement:B,options:j}=t;let F;if(Hi())if(typeof H=="object")F=H;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))F=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=H}const Y=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const W=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),B?{statement:B}:null));let te;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")te=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)te=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)O=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),L=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${Y.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(r=(i=j==null?void 0:j.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((g=j==null?void 0:j.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((x=j==null?void 0:j.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((p=j==null?void 0:j.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((E=(_=j==null?void 0:j.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||E===void 0)&&E.length?["Resources",...j.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const W=await F.signMessage(new TextEncoder().encode(O),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=W}}try{const{data:P,error:H}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:hl(L)},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(k=t.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Nr});if(H)throw H;if(!P||!P.session||!P.user){const B=new pc;return this._returnResult({data:{user:null,session:null},error:B})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:H})}catch(P){if(Je(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(t){const n=await rl(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new zC;const{data:o,error:d}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Nr});if(await Gi(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!o||!o.session||!o.user){const g=new pc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:d})}catch(o){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:o,nonce:d}=t,g=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:o,nonce:d,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Nr}),{data:x,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!x||!x.session||!x.user){const _=new pc;return this._returnResult({data:{user:null,session:null},error:_})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:x,error:p})}catch(n){if(Je(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,r,o,d;try{if("email"in t){const{email:g,options:x}=t;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await mc(this.storage,this.storageKey));const{error:E}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},create_user:(i=x==null?void 0:x.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:p,code_challenge_method:_},redirectTo:x==null?void 0:x.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in t){const{phone:g,options:x}=t,{data:p,error:_}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},create_user:(o=x==null?void 0:x.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},channel:(d=x==null?void 0:x.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:_})}throw new hh("You must provide either an email or phone number.")}catch(g){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(t){var n,i;try{let r,o;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:g}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Nr});if(g)throw g;if(!d)throw new Error("An error occurred on token verification.");const x=d.session,p=d.user;return x!=null&&x.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),this._returnResult({data:{user:p,session:x},error:null})}catch(r){if(Je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(t){var n,i,r,o,d;try{let g=null,x=null;this.flowType==="pkce"&&([g,x]=await mc(this.storage,this.storageKey));const p=await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:x}),headers:this.headers,xform:fT});return!((o=p.data)===null||o===void 0)&&o.url&&Hi()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new js;const{error:r}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(t){if(Je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:o}=t,{error:d}=await ct(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:i,type:r,options:o}=t,{data:d,error:g}=await ct(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:g})}throw new hh("You must provide either an email or phone number and a type")}catch(n){if(Je(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await rl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<D1:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const d=await rl(this.userStorage,this.storageKey+"-user");d!=null&&d.user?t.user=d.user:t.user=j1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=lT(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Co}):await this._useSession(async n=>{var i,r,o;const{data:d,error:g}=n;if(g)throw g;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new js}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:Co})})}catch(n){if(Je(n))return L1(n)&&(await this._removeSession(),await Gi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:o}=i;if(o)throw o;if(!r.session)throw new js;const d=r.session;let g=null,x=null;this.flowType==="pkce"&&t.email!=null&&([g,x]=await mc(this.storage,this.storageKey));const{data:p,error:_}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:g,code_challenge_method:x}),jwt:d.access_token,xform:Co});if(_)throw _;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new js;const n=Date.now()/1e3;let i=n,r=!0,o=null;const{payload:d}=mh(t.access_token);if(d.exp&&(i=d.exp,r=i<=n),r){const{data:g,error:x}=await this._callRefreshToken(t.refresh_token);if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!g)return{data:{user:null,session:null},error:null};o=g}else{const{data:g,error:x}=await this._getUser(t.access_token);if(x)return this._returnResult({data:{user:null,session:null},error:x});o={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:d,error:g}=n;if(g)throw g;t=(i=d.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new js;const{data:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Je(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Hi())throw new ph("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ph(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ph("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Mv("No code detected.");const{data:B,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:o,refresh_token:d,expires_in:g,expires_at:x,token_type:p}=t;if(!o||!g||!d||!p)throw new ph("No session defined in URL");const _=Math.round(Date.now()/1e3),E=parseInt(g);let N=_+E;x&&(N=parseInt(x));const k=N-_;k*1e3<=_c&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${E}s`);const O=N-E;_-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,N,_):_-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,N,_);const{data:L,error:P}=await this._getUser(o);if(P)throw P;const H={provider_token:i,provider_refresh_token:r,access_token:o,expires_in:E,expires_at:N,refresh_token:d,token_type:p,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:t.type},error:null})}catch(i){if(Je(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await rl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o&&!L1(o))return this._returnResult({error:o});const d=(i=r.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:g}=await this.admin.signOut(d,t);if(g&&!(UC(g)&&(g.status===404||g.status===401||g.status===403)||L1(g)))return this._returnResult({error:g})}return t!=="others"&&(await this._removeSession(),await Gi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=WC(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:o},error:d}=n;if(d)throw d;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await mc(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:r}=await this._useSession(async o=>{var d,g,x,p,_;const{data:E,error:N}=o;if(N)throw N;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(x=t.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",k,{headers:this.headers,jwt:(_=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&_!==void 0?_:void 0})});if(r)throw r;return Hi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Je(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:r,data:{session:o}}=n;if(r)throw r;const{options:d,provider:g,token:x,access_token:p,nonce:_}=t,E=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:g,id_token:x,access_token:p,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Nr}),{data:N,error:k}=E;return k?this._returnResult({data:{user:null,session:null},error:k}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new pc}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:k}))}catch(r){if(await Gi(this.storage,`${this.storageKey}-code-verifier`),Je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:d}=n;if(d)throw d;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await ZC(async r=>(r>0&&await JC(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Nr})),(r,o)=>{const d=200*Math.pow(2,r);return o&&P1(o)&&Date.now()+d-i<_c})}catch(i){if(this._debug(n,"error",i),Je(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Hi()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await rl(this.storage,this.storageKey);if(r&&this.userStorage){let d=await rl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:r.user},await Ec(this.userStorage,this.storageKey+"-user",d)),r.user=(t=d==null?void 0:d.user)!==null&&t!==void 0?t:j1()}else if(r&&!r.user&&!r.user){const d=await rl(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(r.user=d.user,await Gi(this.storage,this.storageKey+"-user"),await Ec(this.storage,this.storageKey,r)):r.user=j1()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const o=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<D1;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${D1}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:d}=await this._callRefreshToken(r.refresh_token);d&&(console.error(d),P1(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:g}=await this._getUser(r.access_token);!g&&(d!=null&&d.user)?(r.user=d.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new js;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new n0;const{data:o,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!o.session)throw new js;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const g={data:o.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(o){if(this._debug(r,"error",o),Je(o)){const d={data:null,error:o};return P1(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],d=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(t,n)}catch(x){o.push(x)}});if(await Promise.all(d),o.length>0){for(let g=0;g<o.length;g+=1)console.error(o[g]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Gi(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Ec(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const o=Bv(r);await Ec(this.storage,this.storageKey,o)}else{const r=Bv(n);await Ec(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Gi(this.storage,this.storageKey),await Gi(this.storage,this.storageKey+"-code-verifier"),await Gi(this.storage,this.storageKey+"-user"),this.userStorage&&await Gi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Hi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_c);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/_c);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${_c}ms, refresh threshold is ${im} ticks`),r<=im&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof x3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,d]=await mc(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(d)}`});r.push(g.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);r.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?this._returnResult({data:null,error:o}):await ct(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:d}=n;if(d)return this._returnResult({data:null,error:d});const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:x,error:p}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&x.type==="totp"&&(!((r=x==null?void 0:x.totp)===null||r===void 0)&&r.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),this._returnResult({data:x,error:null}))})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return this._returnResult({data:null,error:o});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?TT(t.webauthn.credential_response):IT(t.webauthn.credential_response)})}:{code:t.code}),{data:g,error:x}=await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return x?this._returnResult({data:null,error:x}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:x}))})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return this._returnResult({data:null,error:o});const d=await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:g}=d;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:NT(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:CT(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])r.all.push(o),o.status==="verified"&&r[o.factor_type].push(o);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,i,r,o;if(t)try{const{payload:k}=mh(t);let O=null;k.aal&&(O=k.aal);let L=O;const{data:{user:P},error:H}=await this.getUser(t);if(H)return this._returnResult({data:null,error:H});((i=(n=P==null?void 0:P.factors)===null||n===void 0?void 0:n.filter(F=>F.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(L="aal2");const j=k.amr||[];return{data:{currentLevel:O,nextLevel:L,currentAuthenticationMethods:j},error:null}}catch(k){if(Je(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:d},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:x}=mh(d.access_token);let p=null;x.aal&&(p=x.aal);let _=p;((o=(r=d.user.factors)===null||r===void 0?void 0:r.filter(k=>k.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(_="aal2");const N=x.amr||[];return{data:{currentLevel:p,nextLevel:_,currentAuthenticationMethods:N},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?await ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new js})})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new js});const d=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return d.data&&d.data.redirect_url&&Hi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(Je(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new js});const d=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return d.data&&d.data.redirect_url&&Hi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(Je(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new js})})}catch(t){if(Je(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?(await ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new js})})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(g=>g.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(g=>g.kid===t),i&&this.jwks_cached_at+jC>r)return i;const{data:o,error:d}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=r,i=o.keys.find(g=>g.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:k,error:O}=await this.getSession();if(O||!k.session)return this._returnResult({data:null,error:O});i=k.session.access_token}const{header:r,payload:o,signature:d,raw:{header:g,payload:x}}=mh(i);n!=null&&n.allowExpired||rT(o.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:k}=await this.getUser(i);if(k)throw k;return{data:{claims:o,header:r,signature:d},error:null}}const _=aT(r.alg),E=await crypto.subtle.importKey("jwk",p,_,!0,["verify"]);if(!await crypto.subtle.verify(_,E,d,YC(`${g}.${x}`)))throw new am("Invalid JWT signature");return{data:{claims:o,header:r,signature:d},error:null}}catch(i){if(Je(i))return this._returnResult({data:null,error:i});throw i}}}Td.nextInstanceID={};const BT=Td,UT="2.95.3";let hd="";typeof Deno<"u"?hd="deno":typeof document<"u"?hd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hd="react-native":hd="node";const FT={"X-Client-Info":`supabase-js-${hd}/${UT}`},zT={headers:FT},VT={schema:"public"},GT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HT={};function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function qT(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Id(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YT(e){var t=qT(e,"string");return Id(t)=="symbol"?t:t+""}function XT(e,t,n){return(t=YT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qv(Object(n),!0).forEach(function(i){XT(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qv(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const WT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),KT=()=>Headers,$T=(e,t,n)=>{const i=WT(n),r=KT();return async(o,d)=>{var g;const x=(g=await t())!==null&&g!==void 0?g:e;let p=new r(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${x}`),i(o,Wn(Wn({},d),{},{headers:p}))}};function JT(e){return e.endsWith("/")?e:e+"/"}function ZT(e,t){var n,i;const{db:r,auth:o,realtime:d,global:g}=e,{db:x,auth:p,realtime:_,global:E}=t,N={db:Wn(Wn({},x),r),auth:Wn(Wn({},p),o),realtime:Wn(Wn({},_),d),storage:{},global:Wn(Wn(Wn({},E),g),{},{headers:Wn(Wn({},(n=E==null?void 0:E.headers)!==null&&n!==void 0?n:{}),(i=g==null?void 0:g.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?N.accessToken=e.accessToken:delete N.accessToken,N}function QT(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(JT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var eI=class extends BT{constructor(e){super(e)}},tI=class{constructor(e,t,n){var i,r;this.supabaseUrl=e,this.supabaseKey=t;const o=QT(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const d=`sb-${o.hostname.split(".")[0]}-auth-token`,g={db:VT,realtime:HT,auth:Wn(Wn({},GT),{},{storageKey:d}),global:zT},x=ZT(n??{},g);if(this.storageKey=(i=x.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=x.global.headers)!==null&&r!==void 0?r:{},x.accessToken)this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(_,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=x.auth)!==null&&p!==void 0?p:{},this.headers,x.global.fetch)}this.fetch=$T(t,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Wn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new UN(new URL("rest/v1",o).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch,timeout:x.db.timeout,urlLengthLimit:x.db.urlLengthLimit}),this.storage=new OC(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new kN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:r,storageKey:o,flowType:d,lock:g,debug:x,throwOnError:p},_,E){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eI({url:this.authUrl.href,headers:Wn(Wn({},N),_),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:r,flowType:d,lock:g,debug:x,throwOnError:p,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nC(this.realtimeUrl.href,Wn(Wn({},e),{},{params:Wn(Wn({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const nI=(e,t,n)=>new tI(e,t,n);function iI(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}iI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function sI(){try{const e=window;return(e==null?void 0:e.__VANTA_ENV__)||(e==null?void 0:e.__VANTA_ENV_FROM_FILE__)||(e==null?void 0:e.__ENV__)||{}}catch{return{}}}function rI(){var e;try{return((e=import.meta)==null?void 0:e.env)||{}}catch{return{}}}const b3=rI(),w3=typeof window<"u"?sI():{},_3=b3.VITE_SUPABASE_URL||w3.VITE_SUPABASE_URL,E3=b3.VITE_SUPABASE_ANON_KEY||w3.VITE_SUPABASE_ANON_KEY,A3=!!(_3&&E3),Q=A3?nI(_3,E3):null;A3||console.warn("[VANTA][SUPABASE] Desativado: faltou VITE_SUPABASE_URL / VITE_SUPABASE_ANON_KEY no env (.env.local ou runtime env.js/index.html).");class aI{constructor(){On(this,"items",[]);On(this,"listeners",[]);On(this,"isLoaded",!1);this.loadFromSupabase(),this.subscribeToRealtime()}async loadFromSupabase(){if(!Q)return;const{data:t,error:n}=await Q.from("vanta_indica").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(n||!t){this.isLoaded=!0,this.notify();return}this.items=t.map(i=>({id:i.id,type:i.type,eventId:i.event_id,url:i.url,title:i.title,image:i.image_url,tag:i.tag||"VANTA INDICA",city:i.city})),this.isLoaded=!0,this.notify()}subscribeToRealtime(){Q&&Q.channel("vanta_indica_consumer").on("postgres_changes",{event:"*",schema:"public",table:"vanta_indica"},()=>{this.loadFromSupabase()}).subscribe()}notify(){this.listeners.forEach(t=>t())}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}getItems(){return[...this.items]}getIsLoaded(){return this.isLoaded}}const Ac=new aI;let Yv=0;const oI=1100;async function lI(e){const{city:t,state:n}=e;if(!t||!n)return null;const i=Date.now(),r=Math.max(0,oI-(i-Yv));r>0&&await new Promise(o=>setTimeout(o,r)),Yv=Date.now();try{const o=`${e.location?e.location+", ":""}${t}, ${n}, Brasil`,d=`https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encodeURIComponent(o)}`,g=await fetch(d,{headers:{"User-Agent":"Vanta-Lifestyle-App/1.0"}});if(!g.ok)return null;const x=await g.json();return x&&x.length>0?{latitude:parseFloat(x[0].lat),longitude:parseFloat(x[0].lon),query:o}:null}catch{return null}}const _l=e=>{const t=String(e||"").toLowerCase();return["female","feminino","f","woman","mulher"].includes(t)?"https://bmqkdlqbtyvzlqpfrtdr.supabase.co/storage/v1/object/public/public_assets/f00b33a8-a117-400e-8a2d-68fda6462114/avatar-default-female.png":"https://bmqkdlqbtyvzlqpfrtdr.supabase.co/storage/v1/object/public/public_assets/f00b33a8-a117-400e-8a2d-68fda6462114/avatar-default-male.png"},om=e=>{const t=e.user_metadata||{},r=((e.app_metadata||{}).role??t.role??"user").toString().toLowerCase()||"user";let o=Ki.APPROVED;["admin","master","vanta_master"].includes(r)?o=Ki.ADMIN:["vanta_prod","produtor"].includes(r)?o=Ki.VANTA_PROD:["vanta_socio","socio"].includes(r)?o=Ki.VANTA_SOCIO:["vanta_promoter","promoter"].includes(r)?o=Ki.VANTA_PROMOTER:["vanta_portaria","portaria"].includes(r)?o=Ki.VANTA_PORTARIA:o=Ki.APPROVED;const d=t.gender,x=t.avatar_url||t.avatar||_l(d),p=t.curated_level,_=Array.isArray(p)?p:[p||"VANTA CLASSIC"];return{id:e.id,fullName:t.full_name||"Membro VANTA",username:t.username||"vanta_member",email:e.email||"",phone_e164:t.phone_e164||t.phone,instagram:t.instagram||t.instagram_handle||t.instagram_username||"vanta_member",gender:d,status:o,role:r,permissions:t.permissions||{},level:t.level||n3.CLASSIC,curatedLevel:_,selfieUrl:t.selfie_url,avatar:x,bio:t.bio||"",gallery:Array.isArray(t.gallery)?t.gallery:[],isVantaPlus:!!t.is_vanta_plus,privacy:t.privacy||{profileInfo:"todos",confirmedEvents:"amigos",messages:"amigos"},joinedAt:new Date(e.created_at).getTime(),vantaMoments:0,friends:[],friendRequestsSent:[],friendRequestsReceived:[],confirmedEventsIds:[],isGloballyRestricted:!!t.is_globally_restricted,restriction_notes:t.restriction_notes||"",approvedByName:t.approved_by_name,approvedAt:t.approved_at}};class cI{constructor(){On(this,"listeners",[]);On(this,"notifications",[]);On(this,"currentUserId",null);this.init()}async init(){if(!Q)return;const{data:{session:t}}=await Q.auth.getSession();t!=null&&t.user&&(this.currentUserId=t.user.id,this.loadFromSupabase(),this.subscribeToRealtime())}async loadFromSupabase(){if(!Q||!this.currentUserId)return;const{data:t,error:n}=await Q.from("notifications").select("*").eq("user_id",this.currentUserId).order("created_at",{ascending:!1});n||!t||(this.notifications=t.map(i=>{var r;return{id:i.id,type:i.type,memberId:i.member_id||"",eventId:i.event_id||((r=i.metadata)==null?void 0:r.eventId)||"",text:i.text,timestamp:new Date(i.created_at).getTime(),read:i.read,metadata:i.metadata}}),this.notify())}subscribeToRealtime(){!Q||!this.currentUserId||Q.channel(`notifications:${this.currentUserId}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${this.currentUserId}`},()=>{this.loadFromSupabase()}).subscribe()}getAll(){return[...this.notifications]}getUnreadCount(){return this.notifications.filter(t=>!t.read).length}getUnreadMessageCount(){return this.notifications.filter(t=>t.type==="message"&&!t.read).length}async addNotification(t,n,i,r){if(!Q)return;let o="";t==="friend_request"?o=`${i} enviou uma solicitao de conexo.`:t==="friend_accepted"?o=`Conexo confirmada com ${i}.`:t==="staff_assignment"?o=`Voc foi escalado para ${(r==null?void 0:r.roleName)||"Staff"} em ${(r==null?void 0:r.communityName)||"unidade"}.`:t==="quota_received"?o=`Voc recebeu uma cota de ${(r==null?void 0:r.quotaAmount)||0} convites cortesia.`:t==="guest_arrival"?o=`Protocolo: ${r==null?void 0:r.guestName} acessou o evento.`:t==="message"?o=`Nova mensagem de ${i}`:t==="event_share"?o=`${i} compartilhou um evento com voc.`:o=`Nova atualizao de ${i}`;let d="message";t==="friend_request"?d="friend_request":t==="friend_accepted"?d="friend_accept":t==="message"?d="message":t==="event_share"?d="event_share":t==="staff_assignment"?d="staff_assignment":t==="vip_invite"&&(d="event_invite"),await Q.rpc("vanta_notify",{p_user_id:n,p_type:d,p_text:o,p_member_id:this.currentUserId,p_event_id:(r==null?void 0:r.eventId)||null,p_metadata:r||{}})}async markAsRead(t){Q&&(await Q.from("notifications").update({read:!0}).eq("id",t),this.notifications=this.notifications.map(n=>n.id===t?{...n,read:!0}:n),this.notify())}async markMessagesAsRead(t){if(!Q||!this.currentUserId)return;const i=this.notifications.filter(r=>r.type==="message"&&r.memberId===t&&!r.read).map(r=>r.id);i.length!==0&&(await Q.from("notifications").update({read:!0}).in("id",i),this.notifications=this.notifications.map(r=>i.includes(r.id)?{...r,read:!0}:r),this.notify())}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notify(){this.listeners.forEach(t=>t())}}const Ji=new cI,Nh="America/Sao_Paulo";function uI(e,t){var d,g,x;const n=new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e),i=((d=n.find(p=>p.type==="year"))==null?void 0:d.value)??"1970",r=((g=n.find(p=>p.type==="month"))==null?void 0:g.value)??"01",o=((x=n.find(p=>p.type==="day"))==null?void 0:x.value)??"01";return`${i}-${r}-${o}`}function lm(e,t){var o,d;const n=new Intl.DateTimeFormat("pt-BR",{timeZone:t,hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e),i=((o=n.find(g=>g.type==="hour"))==null?void 0:o.value)??"00",r=((d=n.find(g=>g.type==="minute"))==null?void 0:d.value)??"00";return`${i}:${r}`}function Xv(e){if(e==null||e==="")return null;if(typeof e=="number")return Number.isFinite(e)?e:null;const t=Number(e);return Number.isFinite(t)?t:null}function S3(e,t,n){const[i,r,o]=e.split("-").map(Number),[d,g]=t.split(":").map(Number),[x,p]=n.split(":").map(Number),_=new Date(i,r-1,o,d,g,0),E=new Date(i,r-1,o,x,p,0);return E<=_&&E.setDate(E.getDate()+1),{startISO:_.toISOString(),endISO:E.toISOString()}}function Uc(e){if(!e.startDate||!e.endTime)return!1;const[t,n,i]=e.startDate.split("-").map(Number),[r,o]=(e.startTime||"00:00").split(":").map(Number),[d,g]=e.endTime.split(":").map(Number),x=new Date(t,n-1,i,r,o,0);let p=new Date(t,n-1,i,d,g,0);return p<=x&&p.setDate(p.getDate()+1),new Date>p}async function N3(){if(!Q)return[];const{data:e,error:t}=await Q.from("events").select("id, community_id, creator_id, title, description, image_url, city, state, venue, address, start_at, end_at, is_vip_only, is_active, is_featured, is_transfer_enabled, latitude, longitude, capacity, staff, batches, guest_list_rules, vibe_tags, lineup, dress_code, entry_tips").eq("is_active",!0).order("start_at",{ascending:!0});return t||!e?[]:e.map(n=>{const i=new Date(n.start_at),r=n.end_at?new Date(n.end_at):null,o=uI(i,Nh),d=lm(i,Nh),g=r?lm(r,Nh):"06:00";return{id:String(n.id),title:n.title||"",description:n.description||"",startDate:o,startTime:d,endTime:g,location:n.venue||n.address||"",city:n.city||"",state:n.state||"",image:n.image_url||"",isVipOnly:!!n.is_vip_only,isFeatured:!!n.is_featured,isTransferEnabled:n.is_transfer_enabled!==!1,latitude:Xv(n.latitude),longitude:Xv(n.longitude),capacity:n.capacity||0,rsvps:0,communityId:n.community_id,creatorId:n.creator_id,staff:n.staff||[],batches:n.batches||[],vibeTags:n.vibe_tags||[],lineup:n.lineup||"",dressCode:n.dress_code||"",entryTips:n.entry_tips||"",guestListRules:n.guest_list_rules||[],isListEnabled:!!(n.guest_list_rules&&n.guest_list_rules.length>0),guests:[]}})}async function dI(e){if(!Q)return null;try{const{startISO:t,endISO:n}=S3(e.startDate,e.startTime,e.endTime),{data:i,error:r}=await Q.from("events").insert([{community_id:e.communityId,creator_id:e.creatorId,title:e.title,description:e.description,image_url:e.image,start_at:t,end_at:n,venue:e.location,city:e.city,state:e.state,latitude:e.latitude,longitude:e.longitude,is_vip_only:e.isVipOnly,is_transfer_enabled:e.isTransferEnabled,capacity:e.capacity,staff:e.staff,batches:e.batches,guest_list_rules:e.guestListRules,vibe_tags:e.vibeTags||[],lineup:e.lineup||null,dress_code:e.dressCode||null,entry_tips:e.entryTips||null}]).select().single();if(r)throw r;if(!i)return null;const o=new Date(i.start_at);return{...e,id:i.id,startTime:lm(o,Nh)}}catch(t){return console.error("[VANTA EVENTS API] Erro ao criar evento:",t),null}}async function fI(e,t){if(!Q)return!1;try{const n={};if(t.title!==void 0&&(n.title=t.title),t.description!==void 0&&(n.description=t.description),t.image!==void 0&&(n.image_url=t.image),t.location!==void 0&&(n.venue=t.location),t.city!==void 0&&(n.city=t.city),t.state!==void 0&&(n.state=t.state),t.capacity!==void 0&&(n.capacity=t.capacity),t.isVipOnly!==void 0&&(n.is_vip_only=t.isVipOnly),t.isTransferEnabled!==void 0&&(n.is_transfer_enabled=t.isTransferEnabled),t.latitude!==void 0&&(n.latitude=t.latitude),t.longitude!==void 0&&(n.longitude=t.longitude),t.vibeTags!==void 0&&(n.vibe_tags=t.vibeTags),t.staff!==void 0&&(n.staff=t.staff),t.batches!==void 0&&(n.batches=t.batches),t.guestListRules!==void 0&&(n.guest_list_rules=t.guestListRules),t.lineup!==void 0&&(n.lineup=t.lineup||null),t.dressCode!==void 0&&(n.dress_code=t.dressCode||null),t.entryTips!==void 0&&(n.entry_tips=t.entryTips||null),t.startDate&&t.startTime&&t.endTime){const{startISO:r,endISO:o}=S3(t.startDate,t.startTime,t.endTime);n.start_at=r,n.end_at=o}const{error:i}=await Q.from("events").update(n).eq("id",e);if(i)throw i;return!0}catch(n){return console.error("Error updating event:",n),!1}}async function Fc(e){if(!Q)return null;try{const{error:t}=await Q.from("vanta_audit_logs").insert([{community_id:e.communityId??null,event_id:e.eventId??null,action:e.action,category:e.category,target_id:e.targetId??null,details:{...e.details,_vanta_audit_v:"3.1_hardened",_timestamp:Date.now()}}]);t&&console.error("[VANTA AUDIT CRITICAL] Falha na persistncia:",t)}catch(t){console.error("[VANTA AUDIT CRITICAL] Erro de protocolo:",t)}}async function hI(e,t,n){Q&&Q.from("vanta_navigation_telemetry").insert([{screen_name:e,resource_id:t,details:n||{}}]).then(({error:i})=>{i&&console.warn("[VANTA TELEMETRY] Falha no sinal:",i.message)}).catch(()=>{})}async function pI(e){if(!Q)return[];let t=Q.from("vanta_audit_logs").select("*").order("created_at",{ascending:!1});e.communityId&&(t=t.eq("community_id",e.communityId)),e.eventId&&(t=t.eq("event_id",e.eventId)),e.category&&(t=t.eq("category",e.category)),e.limit&&(t=t.limit(e.limit));const{data:n,error:i}=await t;return i?(console.error("[VANTA AUDIT] Falha ao buscar logs:",i),[]):n||[]}async function mI(e){if(!Q)return[];try{const{data:t,error:n}=await Q.from("community_co_owners").select("user_id").eq("community_id",e);if(n)throw n;return(t||[]).map(i=>i.user_id)}catch(t){return console.error("[VANTA COMMUNITIES] Erro ao carregar co-owners:",t),[]}}async function gI(e){if(!Q||!e)return[];try{const{data:t,error:n}=await Q.from("community_staff").select("community_id").eq("user_id",e);if(n)throw n;return(t||[]).map(i=>i.community_id).filter(Boolean)}catch(t){return console.error("[VANTA STAFF API] Erro ao buscar community_ids do usurio:",t),[]}}async function xI(e,t){if(!Q||!e||!t)return{};try{const{data:n,error:i}=await Q.from("community_staff").select("permissions").eq("community_id",e).eq("user_id",t).maybeSingle();if(i)throw i;return(n==null?void 0:n.permissions)||{}}catch(n){return console.error("[VANTA STAFF API] Erro ao buscar permisses contextuais:",n),{}}}async function yI(e,t,n){if(!Q)return!1;try{const{error:i}=await Q.from("community_staff").upsert({community_id:e,user_id:t,template_id:n.id,role_name:n.name,permissions:n.permissions},{onConflict:"community_id,user_id"});if(i)throw i;const{error:r}=await Q.from("profiles").update({role:"vanta_staff"}).eq("id",t);if(r)throw r;await Fc({communityId:e,action:"GRANT_STAFF_ACCESS",category:"STAFF",targetId:t,details:{role_name:n.name}});const{data:o}=await Q.from("communities").select("name").eq("id",e).single(),{data:{user:d}}=await Q.auth.getUser();return await Q.rpc("vanta_notify",{p_user_id:t,p_type:"staff_assignment",p_text:`Voc recebeu acesso administrativo como ${n.name} em ${(o==null?void 0:o.name)||"Unidade"}.`,p_member_id:d==null?void 0:d.id,p_event_id:null,p_metadata:{roleName:n.name,communityName:o==null?void 0:o.name,action_type:"staff_assignment"}}),!0}catch(i){return console.error("[VANTA STAFF API] Erro ao conceder acesso:",i),!1}}async function vI(e,t){if(!Q)return!1;try{const{error:n}=await Q.from("community_staff").delete().match({community_id:e,user_id:t});if(n)throw n;const{data:i}=await Q.from("community_staff").select("id").eq("user_id",t).limit(1);if(!i||i.length===0){const{data:r}=await Q.from("profiles").select("role").eq("id",t).single();r&&!["admin","master","vanta_master"].includes(r.role.toLowerCase())&&await Q.from("profiles").update({role:"user",permissions:{}}).eq("id",t)}return await Fc({communityId:e,action:"REVOKE_STAFF_ACCESS",category:"STAFF",targetId:t}),!0}catch(n){return console.error("[VANTA STAFF API] Erro ao revogar acesso:",n),!1}}async function C3(e){if(!Q)return[];const{data:t,error:n}=await Q.from("community_staff").select(`
      *,
      profile:profiles!user_id(id, full_name, avatar_url, instagram_handle, gender)
    `).eq("community_id",e);return n?(console.error("[VANTA STAFF API] Erro ao listar equipe:",n),[]):(t||[]).map(i=>({...i.profile,id:i.user_id,staff_id:i.id,role:i.role_name,permissions:i.permissions,joined_at:i.created_at}))}async function bI(){if(!Q)return[];try{const{data:e,error:t}=await Q.from("communities").select("*, owner:profiles!owner_id(full_name, avatar_url, gender)").eq("is_active",!0).eq("is_archived",!1).order("name",{ascending:!0});if(t)throw t;return e?e.map(n=>{var i,r,o;return{id:n.id,name:n.name,description:n.description||"",image_url:n.image_url||"",logo_url:n.logo_url||"",type:n.type,address:n.address,city:n.city||"",state:n.state||"",latitude:n.latitude,longitude:n.longitude,owner_id:n.owner_id,owner_name:((i=n.owner)==null?void 0:i.full_name)||"Membro VANTA",owner_avatar:((r=n.owner)==null?void 0:r.avatar_url)||_l((o=n.owner)==null?void 0:o.gender),is_active:n.is_active,is_archived:n.is_archived===!0,eventIds:[],createdAt:new Date(n.created_at).getTime()}}):[]}catch(e){return console.error("[VANTA COMMUNITIES API] Erro ao carregar:",e),[]}}async function T3(e){if(!Q||!e)return[];try{const t=await gI(e);let n=Q.from("communities").select("*, owner:profiles!owner_id(full_name, avatar_url, gender)").eq("is_archived",!1).eq("owner_id",e);t.length>0&&(n=n.or(`id.in.(${t.join(",")})`));const{data:i,error:r}=await n;if(r)throw r;const o=new Map;return(i||[]).forEach(d=>{d!=null&&d.id&&o.set(d.id,d)}),Array.from(o.values()).map(d=>{var g,x,p;return{id:d.id,name:d.name,description:d.description||"",image_url:d.image_url||"",logo_url:d.logo_url||"",type:d.type,address:d.address,city:d.city||"",state:d.state||"",latitude:d.latitude,longitude:d.longitude,owner_id:d.owner_id,owner_name:((g=d.owner)==null?void 0:g.full_name)||"Membro VANTA",owner_avatar:((x=d.owner)==null?void 0:x.avatar_url)||_l((p=d.owner)==null?void 0:p.gender),is_active:d.is_active,is_archived:d.is_archived===!0,eventIds:[],createdAt:new Date(d.created_at).getTime()}})}catch(t){return console.error("[VANTA COMMUNITIES API] Erro ao carregar comunidades do usurio:",t),[]}}async function wI(e){var t,n,i;if(!Q)return null;try{const{data:r,error:o}=await Q.from("communities").insert([{name:e.name,description:e.description,image_url:e.image_url,logo_url:e.logo_url,type:e.type,address:e.address,city:e.city,state:e.state,latitude:e.latitude,longitude:e.longitude,owner_id:e.owner_id,is_active:e.is_active,is_archived:!1}]).select("*, owner:profiles!owner_id(full_name, avatar_url, gender)").single();if(o)throw o;return r?{id:r.id,name:r.name,description:r.description||"",image_url:r.image_url||"",logo_url:r.logo_url||"",type:r.type,address:r.address,city:r.city||"",state:r.state||"",latitude:r.latitude,longitude:r.longitude,owner_id:r.owner_id,owner_name:((t=r.owner)==null?void 0:t.full_name)||"Membro VANTA",owner_avatar:((n=r.owner)==null?void 0:n.avatar_url)||_l((i=r.owner)==null?void 0:i.gender),is_active:r.is_active,is_archived:r.is_archived===!0,eventIds:[],createdAt:new Date(r.created_at).getTime()}:null}catch(r){return console.error("[VANTA COMMUNITIES API] Erro ao criar unidade:",r),null}}async function _I(e,t){if(!Q)return!1;try{const n={};["name","description","image_url","logo_url","type","address","city","state","latitude","longitude","is_active"].forEach(o=>{t[o]!==void 0&&(n[o]=t[o])});const{error:r}=await Q.from("communities").update(n).eq("id",e);if(r)throw r;return!0}catch(n){return console.error("[VANTA COMMUNITIES API] Erro ao atualizar unidade:",n),!1}}async function EI(e){if(!Q||!e)return[];const{data:t,error:n}=await Q.from("community_custom_roles").select("*").eq("community_id",e);return n?(console.error("[VANTA ROLES API] Erro ao carregar cargos:",n),[]):(t||[]).map(i=>({id:i.id,communityId:i.community_id,name:i.name,scope:i.scope,permissions:i.permissions}))}async function Zm(){if(!Q)return[];const{data:e,error:t}=await Q.from("vanta_global_tags").select("*").order("priority",{ascending:!1});return t?[]:e.map(n=>({id:n.id,name:n.name,color:n.color,priority:n.priority}))}async function AI(e){if(!Q)return null;const{data:t,error:n}=await Q.from("vanta_global_tags").insert([e]).select().single();return n?null:{id:t.id,name:t.name,color:t.color,priority:t.priority}}async function SI(e){if(!Q)return!1;const{error:t}=await Q.from("vanta_global_tags").delete().eq("id",e);return!t}class NI{constructor(){On(this,"listeners",[]);On(this,"toasts",[]);On(this,"activeConfirm",null)}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notify(){this.listeners.forEach(t=>t())}toast(t,n,i){const r=Math.random().toString(36).substring(2,9);this.toasts=[...this.toasts,{id:r,type:t,title:n,message:i}],this.notify(),setTimeout(()=>{this.removeToast(r)},4e3)}removeToast(t){this.toasts=this.toasts.filter(n=>n.id!==t),this.notify()}getToasts(){return this.toasts}confirm(t){this.activeConfirm=t,this.notify()}resolveConfirm(t){this.activeConfirm&&(t?this.activeConfirm.onConfirm():this.activeConfirm.onCancel&&this.activeConfirm.onCancel(),this.activeConfirm=null,this.notify())}getConfirm(){return this.activeConfirm}}const Fe=new NI;async function CI(){if(!Q)return[];const{data:e,error:t}=await Q.from("vanta_indica").select("*").order("created_at",{ascending:!1});return t?(console.error("[INDICA ADMIN] Erro ao buscar itens:",t),[]):e}async function I3(e){if(!Q)return{success:!1,message:"Erro de conexo"};if(e.is_active){const{count:i,error:r}=await Q.from("vanta_indica").select("*",{count:"exact",head:!0}).eq("is_active",!0).neq("id",e.id||"00000000-0000-0000-0000-000000000000");if(!r&&(i||0)>=5)return{success:!1,message:"Limite atingido: Mximo de 5 destaques ativos simultaneamente."}}const t={type:e.type,title:e.title,image_url:e.image_url,tag:e.tag,city:e.city||null,event_id:e.type==="EVENT"?e.event_id:null,url:e.type==="LINK"?e.url:null,is_active:e.is_active};let n;if(e.id){const{error:i}=await Q.from("vanta_indica").update(t).eq("id",e.id);n=i}else{const{error:i}=await Q.from("vanta_indica").insert([t]);n=i}return n?(console.error("[INDICA ADMIN] Erro ao salvar:",n),{success:!1,message:n.message}):{success:!0}}async function TI(e){if(!Q)return!1;const{error:t}=await Q.from("vanta_indica").delete().eq("id",e);return!t}const II=(e,t,n)=>{const[i]=V.useState(Ac.getItems()),[r,o]=V.useState(!1),[d,g]=V.useState(!1),[x,p]=V.useState(!1),[_,E]=V.useState(null),[N,k]=V.useState(!1),[O,L]=V.useState(!1),[P,H]=V.useState(!1),[B,j]=V.useState([]),[F,Y]=V.useState([]),[W,te]=V.useState(!1),[ne,ie]=V.useState(null),[_e,Ee]=V.useState("global"),[pe,Ne]=V.useState([]),[ue,X]=V.useState([]),[K,J]=V.useState([]),[oe,fe]=V.useState({}),[Se,ee]=V.useState("all"),[ae,ve]=V.useState("all"),Ie=V.useRef(null),qe=V.useRef(null),Oe=V.useRef(null),xt=V.useRef(null),[mt,Ft]=V.useState({isOpen:!1,src:"",field:null,aspectRatio:1,maskShape:"rect"}),In=Zh(e),En=Ue=>(Ue==null?void 0:Ue.is_archived)===!0,[oi,At]=V.useState({title:"",tag:"EXCLUSIVE ACCESS",eventId:"",image:"",type:"EVENT",url:""}),[bn,Jn]=V.useState({name:"",description:"",type:"BOATE",address:"",city:"",state:"",logo_url:"",image_url:"",is_active:!0,latitude:null,longitude:null,owner_id:"",owner_name:""}),[mn,en]=V.useState({id:void 0,title:"",description:"",startDate:"",startTime:"22:00",endTime:"06:00",location:"",city:"",state:"",image:"",isVipOnly:!1,isTransferEnabled:!0,capacity:200,latitude:null,longitude:null,batches:[],staff:[],guestListRules:[],isListEnabled:!0,vibeTags:[],lineup:"",dressCode:"",entryTips:""}),[zt,ze]=V.useState(!1),[ft,De]=V.useState({name:"",limit:50,validUntil:"",validUntilTime:"23:59",variations:[]}),[wt,Un]=V.useState({area:"Pista",gender:"Unisex",price:void 0,limit:void 0});V.useEffect(()=>{(async()=>{if(In)try{const Be=await Zm();X(Be)}catch(Be){console.error("Falha ao carregar tags globais",Be)}})()},[In]),V.useEffect(()=>{if(ne&&B.length>0){const Ue=B.find(Be=>Be.id===ne);Ue&&Ue.address&&en(Be=>({...Be,location:Ue.address||""})),Zn(ne),Nt(ne),In?fe({}):xI(ne,e.id).then(fe)}},[ne,B,e.id,In]),V.useEffect(()=>{(async()=>{if(!In||!Q)return;te(!0);const{data:Be,error:vt}=await Q.from("profiles").select("*").contains("curated_level",["vanta classic"]).order("created_at",{ascending:!1});!vt&&Be&&Y(Be),te(!1)})()},[In]);const Nt=async Ue=>{const Be=await C3(Ue);Ne(Be)},ls=(Ue,Be)=>{var vt;return In?!0:Be&&Be===ne?!!oe[Ue]:!!((vt=e.permissions)!=null&&vt[Ue])},Zn=async Ue=>{const Be=await EI(Ue);J(Be)},jr=async()=>{H(!0);try{const Ue=Q;if(!Ue){j([]);return}let Be=[];if(In)Be=await bI();else{const tn=await T3(e.id),{data:Qn}=await Ue.from("community_co_owners").select("community:communities(*, owner:profiles!owner_id(full_name, avatar_url, gender))").eq("user_id",e.id),{data:Pi}=await Ue.from("community_staff").select("community:communities(*, owner:profiles!owner_id(full_name, avatar_url, gender))").eq("user_id",e.id),gr=Ht=>{var Yi,xr,ta;const at=Ht==null?void 0:Ht.community;return!at||En(at)?null:{id:at.id,name:at.name,description:at.description||"",image_url:at.image_url||"",logo_url:at.logo_url||"",type:at.type,address:at.address,city:at.city||"",state:at.state||"",latitude:at.latitude,longitude:at.longitude,owner_id:at.owner_id,owner_name:((Yi=at.owner)==null?void 0:Yi.full_name)||"Membro VANTA",owner_avatar:((xr=at.owner)==null?void 0:xr.avatar_url)||_l((ta=at.owner)==null?void 0:ta.gender),is_active:at.is_active,eventIds:[],createdAt:new Date(at.created_at).getTime(),...typeof at.is_archived<"u"?{is_archived:at.is_archived}:{}}},li=(Qn||[]).map(gr).filter(Boolean),ws=(Pi||[]).map(gr).filter(Boolean),Ii=(tn||[]).filter(Ht=>!En(Ht)),He=new Set(Ii.map(Ht=>Ht.id)),ji=[...li,...ws].filter(Ht=>He.has(Ht.id)?!1:(He.add(Ht.id),!0));Be=[...Ii,...ji]}const vt=(Be||[]).filter(tn=>!En(tn)),Mt=await Promise.all((vt||[]).map(async tn=>{const Qn=await mI(tn.id);return{...tn,co_owners:Qn}}));j(Mt)}finally{H(!1)}};V.useEffect(()=>{e!=null&&e.id&&Q&&jr()},[e.id,In]),V.useEffect(()=>{if(B.length===0)return;const Ue=ne?B.some(Be=>Be.id===ne):!1;(!ne||!Ue)&&ie(B[0].id)},[B,ne]);const Qi=async()=>{if(!ls("event_edit",ne||void 0))return!1;if(!mn.image||!mn.title.trim()||!ne)return Fe.toast("warning","Protocolo Incompleto","Defina banner e ttulo."),!1;k(!0);try{const Ue=await dI({...mn,communityId:ne,creatorId:e.id});if(Ue){n([Ue,...t]);const Be=B.find(Mt=>Mt.id===ne),vt=(mn.staff||[]).map(Mt=>Ji.addNotification("staff_assignment",Mt.id,e.fullName,{eventId:Ue.id,communityName:(Be==null?void 0:Be.name)||"Sua Unidade",roleName:Mt.role,date:mn.startDate,action_type:"staff_assignment"}));return await Promise.all(vt),await Fc({communityId:ne,eventId:Ue.id,action:"CREATE_EVENT_WITH_SCALE",category:"GENERAL",details:{title:Ue.title,staff_count:(mn.staff||[]).length,automated_inheritance:!0}}),g(!0),E({title:"Sesso Publicada",subtitle:"A escala de equipe foi automatizada com sucesso."}),o(!0),!0}return!1}finally{k(!1)}},vi=async()=>{if(!mn.id||!ls("event_edit",ne||void 0))return!1;k(!0);try{return await fI(mn.id,{...mn})?(n(t.map(Be=>Be.id===mn.id?{...Be,...mn}:Be)),await Fc({communityId:ne,eventId:mn.id,action:"UPDATE_EVENT",category:"GENERAL",details:{title:mn.title}}),g(!0),E({title:"Evento Atualizado",subtitle:"As alteraes foram sincronizadas."}),o(!0),!0):!1}finally{k(!1)}},Lo=async(Ue,Be,vt)=>{const Mt={id:Ue.id,email:Ue.email||Ue.instagram_handle||"membro@vanta.com",role:Be,status:"PENDING"};if((mn.staff||[]).some(Qn=>Qn.id===Mt.id)){Fe.toast("warning","Membro j escalado","Este perfil j est na lista.");return}en(Qn=>({...Qn,staff:[...Qn.staff||[],Mt]}))},ja=Ue=>{en(Be=>({...Be,staff:(Be.staff||[]).filter(vt=>vt.id!==Ue)}))},gu=async()=>{if(!oi.title||!oi.image){Fe.toast("warning","Dados Incompletos","Ttulo e imagem obrigatrios.");return}k(!0);try{await I3({title:oi.title,image_url:oi.image,tag:oi.tag,type:oi.type,event_id:oi.eventId||null,url:oi.url||void 0,is_active:!0,city:null}),At({title:"",tag:"EXCLUSIVE ACCESS",eventId:"",image:"",type:"EVENT",url:""}),p(!0),E({title:"Destaque Criado",subtitle:"O item j est ativo no radar."}),o(!0)}finally{k(!1)}},un=V.useMemo(()=>{let Ue=[...F];return Se!=="all"&&(Ue=Ue.filter(Be=>Be.gender===Se)),ae==="high"&&(Ue=Ue.filter(Be=>(Be.followers_count||0)>=5e3)),Ue},[F,Se,ae]);return{indicaItems:i,showSuccessOverlay:r,setShowSuccessOverlay:o,curatorshipSuccess:_,isProcessing:N,isGeocoding:O,isLoadingCommunities:P,communities:B,qualificationQueue:F,isLoadingQueue:W,selectedCommunityId:ne,setSelectedCommunityId:ie,currentScopeId:_e,setCurrentScopeId:Ee,communityForm:bn,setCommunityForm:Jn,eventForm:mn,setEventForm:en,fileInputRef:Ie,logoInputRef:qe,coverInputRef:Oe,eventImageInputRef:xt,newIndica:oi,setNewIndica:At,loadCommunities:jr,handleCreateEvent:Qi,handleUpdateEvent:vi,handleFileSelect:(Ue,Be)=>{var Pi;const vt=(Pi=Ue.target.files)==null?void 0:Pi[0];if(!vt)return;let Mt=1,tn="rect";Be==="logo"?(Mt=1,tn="rect"):(Be==="cover"||Be==="event_image"||Be==="image")&&(Mt=16/9,tn="rect");const Qn=new FileReader;Qn.onloadend=()=>{const gr=Qn.result;Ft({isOpen:!0,src:gr,field:Be,aspectRatio:Mt,maskShape:tn})},Qn.readAsDataURL(vt),Ue.target.value=""},handleAddStaff:Lo,handleRemoveStaff:ja,showBatchEditor:zt,setShowBatchEditor:ze,tempBatch:ft,setTempBatch:De,tempVariation:wt,setTempVariation:Un,unitStaff:pe,globalTags:ue,checkPermission:ls,handleAddIndica:gu,filteredQueue:un,updateMemberLevel:(Ue,Be)=>{Y(vt=>vt.map(Mt=>{if(Mt.id!==Ue)return Mt;const tn=Mt.curated_level||[],Qn=tn.includes(Be)?tn.filter(Pi=>Pi!==Be):[...tn,Be];return{...Mt,curated_level:Qn}}))},handleQualifyMember:async Ue=>{const Be=F.find(Mt=>Mt.id===Ue),vt=(Be==null?void 0:Be.curated_level)||[];if(!(!Be||vt.length===0)){k(!0);try{const{error:Mt}=await Q.from("profiles").update({curated_level:vt}).eq("id",Be.id);if(Mt)throw Mt;Y(tn=>tn.filter(Qn=>Qn.id!==Ue)),E({title:"Qualificao Assinada",subtitle:"As novas tags foram sincronizadas na rede."}),o(!0)}catch(Mt){console.error(Mt)}finally{k(!1)}}},filterGender:Se,setFilterGender:ee,filterInfluence:ae,setFilterInfluence:ve,handleCreateCommunity:async()=>{if(!bn.name||!bn.owner_id)return Fe.toast("warning","Responsvel ausente","Atribua um dono  unidade."),!1;k(!0);try{const Ue=await wI(bn);return Ue?(Ue!=null&&Ue.is_archived?await jr():j([Ue,...B]),E({title:"Unidade Criada",subtitle:"O cluster j est operacional."}),o(!0),!0):!1}finally{k(!1)}},handleUpdateCommunity:async()=>{if(ne){k(!0);try{await _I(ne,bn)&&(await jr(),E({title:"Unidade Atualizada",subtitle:"Os protocolos foram sincronizados."}),o(!0))}finally{k(!1)}}},handleAddressSearch:async()=>{if(bn.address){L(!0);try{const Ue=await lI({location:bn.address,city:bn.city,state:bn.state});Ue&&Jn(Be=>({...Be,latitude:Ue.latitude,longitude:Ue.longitude}))}finally{L(!1)}}},addVariationToBatch:()=>{!wt.area||wt.price===void 0||(De(Ue=>({...Ue,variations:[...Ue.variations||[],{...wt,id:Math.random().toString(36).substr(2,9)}]})),Un({area:"Pista",gender:"Unisex"}))},confirmBatch:()=>{!ft.name||!ft.validUntil||(en(Ue=>({...Ue,batches:[...Ue.batches,{...ft,id:Math.random().toString(36).substr(2,9),soldCount:0}]})),De({name:"",limit:50,variations:[]}),ze(!1))},handleAddLegoRule:Ue=>{en(Be=>({...Be,guestListRules:[...Be.guestListRules,Ue]}))},handleRemoveLegoRule:Ue=>{en(Be=>({...Be,guestListRules:Be.guestListRules.filter(vt=>vt.id!==Ue)}))},isMaster:In,currentUserUnitPermissions:oe,cropState:mt,handleCropConfirm:Ue=>{const Be=mt.field;Be==="image"&&At(vt=>({...vt,image:Ue})),Be==="logo"&&Jn(vt=>({...vt,logo_url:Ue})),Be==="cover"&&Jn(vt=>({...vt,image_url:Ue})),Be==="event_image"&&en(vt=>({...vt,image:Ue})),Ft(vt=>({...vt,isOpen:!1,src:""}))},handleCropCancel:()=>{Ft(Ue=>({...Ue,isOpen:!1,src:""}))},eventSuccess:d,setEventSuccess:g,indicaSuccess:x,setIndicaSuccess:p}},RI=({userRole:e,setActiveView:t,currentUser:n})=>{const i=e.toLowerCase(),r=Zh(n),[o,d]=V.useState({});V.useEffect(()=>{if(r||!Q)return;(async()=>{const{data:_}=await Q.from("community_staff").select("permissions").eq("user_id",n.id);if(_){const E={};_.forEach(N=>{Object.entries(N.permissions||{}).forEach(([k,O])=>{O&&(E[k]=!0)})}),d(E)}})()},[n.id,r]);const x=[{id:"TEAM",label:"Time Vanta",icon:"",roles:["admin","master","vanta_master"],permissionId:"unit_staff"},{id:"MEMBROS",label:"Membros",icon:"",roles:["admin","master","vanta_master"],permissionId:"list_view"},{id:"CURADORIA",label:"Curadoria",icon:"",roles:["admin","master","vanta_master"],permissionId:"list_view"},{id:"INDICA",label:"Vanta Indica",icon:"",roles:["admin","master","vanta_master"],permissionId:"unit_edit"},{id:"COMUNIDADES",label:"Comunidades",icon:"",roles:["admin","master","vanta_master","vanta_prod","produtor","vanta_socio"],permissionId:"unit_edit"},{id:"EVENTOS",label:"Eventos",icon:"",roles:["admin","master","vanta_master","vanta_prod","produtor","vanta_socio"],permissionId:"event_view"},{id:"PORTARIA",label:"Portaria",icon:"",roles:["admin","master","vanta_master","vanta_portaria","portaria","vanta_staff"],permissionId:"list_checkin"},{id:"BROADCASTER",label:"Broadcaster",icon:"",roles:["admin","master","vanta_master"]},{id:"STAFF_TEMPLATES",label:"Staff",icon:"",roles:["admin","master","vanta_master","vanta_prod","produtor","vanta_socio"],permissionId:"unit_staff"},{id:"GLOBAL_TAGS",label:"Tags",icon:"",roles:["admin","master","vanta_master"]},{id:"DIAGNOSTICO",label:"Diagnstico",icon:"",roles:["admin","master","vanta_master"]},{id:"FINANCEIRO",label:"Financeiro",icon:"",roles:["admin","master","vanta_master","vanta_prod","produtor","vanta_socio","vanta_financeiro"],permissionId:"unit_finance"},{id:"PERMISSOES",label:"Permisses",icon:"",roles:["admin","master","vanta_master","vanta_prod","vanta_socio"],permissionId:"unit_staff"},{id:"ETICA",label:"tica",icon:"",roles:["admin","master","vanta_master","vanta_prod","vanta_socio","vanta_portaria"],permissionId:"unit_staff"}].filter(p=>{var E;if(r)return!0;const _=p.roles.includes(i);if(p.permissionId){const N=!!((E=n.permissions)!=null&&E[p.permissionId]),k=!!o[p.permissionId];return _&&(N||k)}return _});return u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[u.jsx("div",{className:"grid grid-cols-2 gap-4",children:x.map(p=>u.jsxs("button",{onClick:()=>t(p.id),className:"aspect-square p-8 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] flex flex-col items-center justify-center gap-4 active:scale-95 transition-all hover:bg-zinc-800/60 group relative overflow-hidden",children:[["CURADORIA","BROADCASTER","GLOBAL_TAGS","MEMBROS","TEAM"].includes(p.id)&&u.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-20 group-hover:opacity-100 transition-opacity",children:u.jsx("span",{className:"text-[10px]",children:""})}),p.id==="ETICA"&&u.jsx("div",{className:"absolute inset-0 bg-red-600/5 group-hover:bg-red-600/10 transition-colors pointer-events-none"}),u.jsx("span",{className:`text-3xl ${p.id==="ETICA"?"drop-shadow-[0_0_8px_rgba(220,38,38,0.5)]":""}`,children:p.icon}),u.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest text-center ${p.id==="ETICA"?"text-red-500":"text-zinc-400"}`,children:p.label})]},p.id))}),x.length===0&&u.jsx("div",{className:"py-32 text-center opacity-30 border border-dashed border-white/5 rounded-[3rem]",children:u.jsx("p",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-[0.3em]",children:"Nenhum comando liberado para sua identidade."})})]})},Ge={Home:e=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:u.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),Explore:e=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:u.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),Calendar:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),u.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),u.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),User:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),MapPin:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),u.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Plus:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Search:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Bell:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),u.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Message:e=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})}),ArrowLeft:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),u.jsx("polyline",{points:"12 19 5 12 12 5"})]}),Star:e=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:u.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),Edit:e=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},cm={RJ:{name:"Rio de Janeiro",cities:["Rio de Janeiro","Niteri","Bzios"]},SP:{name:"So Paulo",cities:["So Paulo","Campinas","Santos"]},MG:{name:"Minas Gerais",cities:["Belo Horizonte","Uberlndia"]}},kI=["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","64","63","65","66","67","68","69","71","73","74","75","77","79","81","87","82","83","84","85","88","86","89","91","93","94","92","97","95","96","98","99"].sort(),OI=(e,t,n=800,i=800)=>new Promise(r=>{const o=new Image;o.src=e,o.onload=()=>{const d=document.createElement("canvas");d.width=n,d.height=i;const g=d.getContext("2d");g&&(g.fillStyle="#000000",g.fillRect(0,0,n,i),g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(o,t.x,t.y,t.width,t.height,0,0,n,i)),r(d.toDataURL("image/jpeg",.95))}}),MI=e=>{const t=e.split(","),n=atob(t[1]),i=t[0].split(":")[1].split(";")[0],r=new ArrayBuffer(n.length),o=new Uint8Array(r);for(let d=0;d<n.length;d++)o[d]=n.charCodeAt(d);return new Blob([r],{type:i})},Wv=async(e,t,n)=>{if(!Q)throw new Error("Conexo com a rede VANTA no estabelecida.");const i="profiles",r=`${e}/${n}.jpg`,{error:o}=await Q.storage.from(i).upload(r,t,{contentType:"image/jpeg",upsert:!0,cacheControl:"0"});if(o)throw o;const{data:d}=Q.storage.from(i).getPublicUrl(r);return`${d.publicUrl}?v=${Date.now()}`},Qm=({imageSrc:e,onConfirm:t,onCancel:n,aspectRatio:i=1,maskShape:r="circle"})=>{var te;const[o,d]=V.useState(1),[g,x]=V.useState(.1),[p,_]=V.useState({x:0,y:0}),[E,N]=V.useState(!1),[k,O]=V.useState({x:0,y:0}),[L,P]=V.useState({width:280,height:280}),H=V.useRef(null),B=V.useRef(null);V.useEffect(()=>{const ne=window.innerWidth*.9,ie=window.innerHeight*.5;let _e=280,Ee=280;if(r==="circle")_e=280,Ee=280;else{const pe=Math.min(340,ne);_e=pe,Ee=pe/i,Ee>ie&&(Ee=ie,_e=Ee*i)}P({width:_e,height:Ee})},[i,r]);const j=()=>{if(!B.current||!H.current)return;const ne=B.current,ie=ne.naturalWidth,_e=ne.naturalHeight,Ee=L.width/ie,pe=L.height/_e,Ne=Math.max(Ee,pe);x(Ne),d(Ne),_({x:0,y:0})},F=ne=>{N(!0);const ie="touches"in ne?ne.touches[0].clientX:ne.clientX,_e="touches"in ne?ne.touches[0].clientY:ne.clientY;O({x:ie-p.x,y:_e-p.y})},Y=ne=>{if(!E||!B.current)return;const ie=B.current,_e="touches"in ne?ne.touches[0].clientX:ne.clientX,Ee="touches"in ne?ne.touches[0].clientY:ne.clientY,pe=_e-k.x,Ne=Ee-k.y,ue=ie.naturalWidth*o,X=ie.naturalHeight*o,K=Math.max(0,(ue-L.width)/2),J=Math.max(0,(X-L.height)/2);_({x:Math.max(-K,Math.min(K,pe)),y:Math.max(-J,Math.min(J,Ne))})},W=async()=>{if(!B.current||!H.current)return;const ne=B.current,ie=ne.naturalWidth/(ne.naturalWidth*o),_e=(ne.naturalWidth*o/2-L.width/2-p.x)*ie,Ee=(ne.naturalHeight*o/2-L.height/2-p.y)*ie,pe=L.width*ie,Ne=L.height*ie,ue=r==="rect"?1280:800,X=ue/i,K=await OI(e,{x:_e,y:Ee,width:pe,height:Ne},ue,X);t(K)};return u.jsxs("div",{className:"fixed inset-0 z-[12000] bg-black flex flex-col animate-in fade-in duration-300 overflow-hidden touch-none",children:[u.jsxs("header",{className:"px-8 pt-16 pb-6 flex justify-between items-center shrink-0",children:[u.jsx("button",{onClick:n,className:"text-zinc-500 text-[10px] font-black uppercase tracking-widest",children:"Abortar"}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"text-[11px] font-black text-white uppercase tracking-[0.4em]",children:"Enquadramento"}),u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-widest mt-1 italic",children:r==="circle"?"Centralize no Crculo":"Ajuste o Banner"})]}),u.jsx("button",{onClick:W,className:"text-white text-[10px] font-black uppercase tracking-widest bg-zinc-900 px-4 py-2 rounded-full border border-white/10",children:"Confirmar"})]}),u.jsxs("div",{ref:H,className:"flex-1 relative bg-zinc-950 flex items-center justify-center overflow-hidden touch-none",onMouseDown:F,onMouseMove:Y,onMouseUp:()=>N(!1),onMouseLeave:()=>N(!1),onTouchStart:F,onTouchMove:Y,onTouchEnd:()=>N(!1),children:[u.jsx("img",{ref:B,src:e,onLoad:j,alt:"Cropper",className:"max-w-none select-none pointer-events-none transition-transform duration-75",style:{width:`${(te=B.current)==null?void 0:te.naturalWidth}px`,transform:`translate(${p.x}px, ${p.y}px) scale(${o})`,cursor:E?"grabbing":"grab"}}),u.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:u.jsxs("div",{className:"w-full h-full bg-black/70 flex items-center justify-center",children:[u.jsxs("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:[u.jsx("defs",{children:u.jsxs("mask",{id:"visor-mask",children:[u.jsx("rect",{width:"100%",height:"100%",fill:"white"}),r==="circle"?u.jsx("circle",{cx:"50%",cy:"50%",r:L.width/2,fill:"black"}):u.jsx("rect",{x:"50%",y:"50%",width:L.width,height:L.height,fill:"black",transform:`translate(-${L.width/2}, -${L.height/2})`})]})}),u.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.8)",mask:"url(#visor-mask)"}),r==="circle"?u.jsx("circle",{cx:"50%",cy:"50%",r:L.width/2,fill:"transparent",stroke:"#d4af37",strokeWidth:"1",strokeDasharray:"4 4"}):u.jsx("rect",{x:"50%",y:"50%",width:L.width,height:L.height,fill:"transparent",stroke:"#d4af37",strokeWidth:"1",strokeDasharray:"4 4",transform:`translate(-${L.width/2}, -${L.height/2})`})]}),u.jsx("div",{className:"absolute w-4 h-[1px] bg-white/20"}),u.jsx("div",{className:"absolute h-4 w-[1px] bg-white/20"})]})})]}),u.jsx("footer",{className:"p-10 bg-black space-y-8 shrink-0",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center px-2",children:[u.jsx("span",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:"Escala de Aproximao"}),u.jsxs("span",{className:"text-[10px] text-white font-black",children:[Math.round(o/g*100),"%"]})]}),u.jsx("input",{type:"range",min:g,max:g*4,step:"0.0001",value:o,onChange:ne=>{const ie=parseFloat(ne.target.value);d(ie),_(_e=>{if(!B.current)return _e;const Ee=B.current.naturalWidth*ie,pe=B.current.naturalHeight*ie,Ne=Math.max(0,(Ee-L.width)/2),ue=Math.max(0,(pe-L.height)/2);return{x:Math.max(-Ne,Math.min(Ne,_e.x)),y:Math.max(-ue,Math.min(ue,_e.y))}})},className:"w-full h-1 bg-zinc-900 rounded-lg appearance-none cursor-pointer accent-[#d4af37]"})]})})]})},DI=({events:e})=>{const[t,n]=V.useState([]),[i,r]=V.useState(!0),[o,d]=V.useState(!1),[g,x]=V.useState(!1),[p,_]=V.useState(null),[E,N]=V.useState({title:"",image_url:"",tag:"EXCLUSIVE ACCESS",type:"EVENT",city:null,is_active:!0,event_id:"",url:""}),[k,O]=V.useState({isOpen:!1,src:""}),L=V.useRef(null);V.useEffect(()=>{P()},[]);const P=async()=>{r(!0);const ne=await CI();n(ne),r(!1)},H=ne=>{N({...ne,event_id:ne.event_id||"",url:ne.url||""}),_(ne.id||null),x(!0)},B=()=>{N({title:"",image_url:"",tag:"EXCLUSIVE ACCESS",type:"EVENT",city:null,is_active:!0,event_id:"",url:""}),_(null),x(!0)},j=ne=>{Fe.confirm({title:"Excluir Destaque",message:"Esta ao remover o item permanentemente.",confirmLabel:"Excluir",isDestructive:!0,onConfirm:async()=>{d(!0),await TI(ne)?(Fe.toast("success","Removido","Item excludo com sucesso."),P()):Fe.toast("error","Erro","Falha ao excluir item."),d(!1)}})},F=async()=>{if(!E.title||!E.image_url){Fe.toast("warning","Dados Incompletos","Ttulo e Imagem so obrigatrios.");return}if(E.type==="EVENT"&&!E.event_id){Fe.toast("warning","Dados Incompletos","Selecione um evento para vincular.");return}if(E.type==="LINK"&&!E.url){Fe.toast("warning","Dados Incompletos","Insira a URL de destino.");return}d(!0);const ne=await I3({...E,id:p||void 0});ne.success?(Fe.toast("success",p?"Atualizado":"Criado","Destaque salvo no sistema."),x(!1),P()):Fe.toast("error","Operao Negada",ne.message||"Erro desconhecido."),d(!1)},Y=ne=>{var Ee;const ie=(Ee=ne.target.files)==null?void 0:Ee[0];if(!ie)return;const _e=new FileReader;_e.onloadend=()=>{O({isOpen:!0,src:_e.result})},_e.readAsDataURL(ie),ne.target.value=""},W=ne=>{N(ie=>({...ie,image_url:ne})),O({isOpen:!1,src:""})},te=an.useMemo(()=>{const ne=[];return Object.values(cm).forEach(ie=>{ne.push(...ie.cities)}),ne.sort()},[]);return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-32",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"GESTO DE VITRINE"}),u.jsx("p",{className:"text-[22px] font-serif italic text-white tracking-tighter uppercase",children:"Vanta Indica"})]}),!g&&u.jsx("button",{onClick:B,className:"px-6 py-3 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Novo Destaque"})]}),g&&u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-6 shadow-2xl animate-in zoom-in-95",children:[u.jsx("h3",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-[#d4af37]",children:p?"EDITAR DESTAQUE":"CRIAR NOVO DESTAQUE"}),u.jsxs("div",{onClick:()=>{var ne;return(ne=L.current)==null?void 0:ne.click()},className:"aspect-[16/9] w-full bg-zinc-900 border border-dashed border-white/5 rounded-[2rem] overflow-hidden cursor-pointer group relative flex flex-col items-center justify-center text-center hover:border-[#d4af37]/30 transition-all",children:[E.image_url?u.jsx("img",{src:E.image_url,className:"w-full h-full object-cover",alt:"Preview"}):u.jsxs("div",{className:"space-y-2 opacity-30 group-hover:opacity-100 transition-opacity",children:[u.jsx(Ge.Plus,{className:"w-8 h-8 mx-auto"}),u.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest block",children:"Carregar Banner (16:9)"})]}),u.jsx("input",{ref:L,type:"file",accept:"image/*",onChange:Y,className:"hidden"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Ttulo Principal"}),u.jsx("input",{type:"text",value:E.title,onChange:ne=>N({...E,title:ne.target.value}),placeholder:"EX: A CHAVE EST EM SUAS MOS",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[10px] text-white uppercase outline-none focus:border-white/20"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Etiqueta (Tag)"}),u.jsx("input",{type:"text",value:E.tag,onChange:ne=>N({...E,tag:ne.target.value}),placeholder:"EX: EXCLUSIVE ACCESS",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none focus:border-white/20"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Abrangncia"}),u.jsxs("select",{value:E.city||"",onChange:ne=>N({...E,city:ne.target.value||null}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none focus:border-white/20",children:[u.jsx("option",{value:"",children:"GLOBAL (TODAS AS CIDADES)"}),te.map(ne=>u.jsx("option",{value:ne,children:ne.toUpperCase()},ne))]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Destino"}),u.jsxs("div",{className:"flex bg-zinc-900 rounded-full p-1 border border-white/5 mb-2",children:[u.jsx("button",{onClick:()=>N({...E,type:"EVENT"}),className:`flex-1 py-3 text-[8px] font-black uppercase tracking-widest rounded-full transition-all ${E.type==="EVENT"?"bg-white text-black shadow-lg":"text-zinc-500"}`,children:"Evento Interno"}),u.jsx("button",{onClick:()=>N({...E,type:"LINK"}),className:`flex-1 py-3 text-[8px] font-black uppercase tracking-widest rounded-full transition-all ${E.type==="LINK"?"bg-white text-black shadow-lg":"text-zinc-500"}`,children:"Link Externo"})]}),E.type==="EVENT"?u.jsxs("select",{value:E.event_id||"",onChange:ne=>N({...E,event_id:ne.target.value}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none focus:border-[#d4af37]/20",children:[u.jsx("option",{value:"",children:"SELECIONE UM EVENTO..."}),e.map(ne=>u.jsxs("option",{value:ne.id,children:[ne.title," (",ne.city,")"]},ne.id))]}):u.jsx("input",{type:"text",value:E.url||"",onChange:ne=>N({...E,url:ne.target.value}),placeholder:"HTTPS://...",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none focus:border-[#d4af37]/20"})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900 border border-white/5 rounded-2xl",children:[u.jsx("span",{className:"text-[9px] font-black text-white uppercase tracking-widest ml-2",children:"Visibilidade Ativa"}),u.jsx("button",{onClick:()=>N(ne=>({...ne,is_active:!ne.is_active})),className:`w-12 h-7 rounded-full relative transition-all ${E.is_active?"bg-[#d4af37]":"bg-zinc-800"}`,children:u.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white transition-all ${E.is_active?"left-6":"left-1"}`})})]})]}),u.jsxs("div",{className:"flex gap-4 pt-4",children:[u.jsx("button",{onClick:F,disabled:o,className:"flex-1 py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all disabled:opacity-50",children:o?"Salvando...":"Salvar Destaque"}),u.jsx("button",{onClick:()=>x(!1),disabled:o,className:"px-8 py-5 border border-white/10 text-zinc-500 text-[10px] font-black uppercase rounded-full",children:"Cancelar"})]})]}),k.isOpen&&u.jsx(Qm,{imageSrc:k.src,onConfirm:W,onCancel:()=>O({isOpen:!1,src:""}),aspectRatio:16/9,maskShape:"rect"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h4",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:["Itens no Banco de Dados (",t.length,")"]}),i?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):t.length>0?u.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map(ne=>u.jsxs("div",{className:"bg-zinc-900/40 border border-white/5 rounded-[2.5rem] p-5 flex items-center gap-5 group hover:border-[#d4af37]/20 transition-all",children:[u.jsx("div",{className:"w-20 h-14 rounded-2xl overflow-hidden shrink-0 border border-white/10 relative",children:u.jsx("img",{src:ne.image_url,className:`w-full h-full object-cover transition-all ${ne.is_active?"":"grayscale opacity-50"}`,alt:""})}),u.jsxs("div",{className:"flex-1 relative z-10",children:[u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[u.jsx("h5",{className:`text-[10px] font-black uppercase break-words whitespace-normal leading-tight ${ne.is_active?"text-white":"text-zinc-500 line-through"}`,children:ne.title||"(SEM TTULO)"}),u.jsx("span",{className:`text-[6px] font-black uppercase px-2 py-0.5 rounded-full shrink-0 ${ne.is_active?"bg-emerald-500/10 text-emerald-500":"bg-zinc-800 text-zinc-600"}`,children:ne.is_active?"ATIVO":"INATIVO"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-widest",children:ne.city||"GLOBAL"}),u.jsxs("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:[" ",ne.type]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>H(ne),className:"p-3 bg-zinc-900 border border-white/5 rounded-full text-zinc-400 hover:text-[#d4af37] transition-all",children:u.jsx(Ge.Edit,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>j(ne.id),className:"p-3 bg-zinc-900 border border-white/5 rounded-full text-red-900/40 hover:text-red-500 transition-all",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]})]},ne.id))}):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] opacity-30",children:u.jsx("p",{className:"text-[8px] font-black uppercase",children:"Nenhum destaque cadastrado."})})]})]})},Kn=({src:e,gender:t,className:n="w-full h-full object-cover",alt:i="Membro"})=>{const r=!e||e.includes("avatar-default")||e==="",o=(e==null?void 0:e.startsWith("blob:"))||(e==null?void 0:e.startsWith("data:")),g=(()=>{if(r)return _l(t||void 0);if(o)return e;const x=e.includes("?")?"&":"?";return`${e}${x}v=${Date.now()}`})();return u.jsx("img",{src:g,alt:i,className:n,loading:"lazy",style:{objectFit:"cover",objectPosition:"center",borderRadius:"50%",overflow:"hidden"},onError:x=>{x.target.src=_l(t||void 0)}})},LI=({filteredQueue:e,isLoadingQueue:t,updateMemberLevel:n,handleQualifyMember:i,isProcessing:r,filterGender:o,setFilterGender:d,filterInfluence:g,setFilterInfluence:x,globalTags:p})=>{const _=p.length>0?p:[{id:"1",name:"vanta classic",color:"#d4af37",priority:1},{id:"2",name:"vanta vip",color:"#d4af37",priority:10}];return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-48",children:[u.jsxs("div",{className:"flex flex-col gap-6 mb-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"MESA DE QUALIFICAO"}),u.jsxs("p",{className:"text-[22px] font-serif italic text-white tracking-tighter uppercase",children:["Fila de Elite (",e.length,")"]})]}),t&&u.jsx("div",{className:"w-4 h-4 border border-white/10 border-t-[#d4af37] rounded-full animate-spin"})]}),u.jsxs("div",{className:"space-y-4 bg-zinc-950/50 p-6 border border-white/5 rounded-[2rem]",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"SEGMENTAR VISO"}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("div",{className:"flex bg-black rounded-full p-1 border border-white/5",children:[{id:"all",label:"TODOS"},{id:"male",label:"MASCULINO"},{id:"female",label:"FEMININO"}].map(E=>u.jsx("button",{onClick:()=>d(E.id),className:`flex-1 py-3 text-[8px] font-black uppercase tracking-widest rounded-full transition-all ${o===E.id?"bg-white text-black":"text-zinc-600"}`,children:E.label},E.id))}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:()=>x(g==="all"?"high":"all"),className:`flex-1 py-3 border rounded-full text-[8px] font-black uppercase tracking-widest transition-all ${g==="high"?"bg-[#d4af37]/10 border-[#d4af37]/30 text-[#d4af37]":"bg-black border-white/5 text-zinc-600"}`,children:g==="high"?" ALTA INFLUNCIA ATIVA":"TODOS OS PERFIS"})})]})]})]}),e.length>0?u.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.map(E=>u.jsxs("div",{className:"bg-zinc-950 border border-white/5 rounded-[3rem] p-8 space-y-8 shadow-2xl relative overflow-hidden group hover:border-[#d4af37]/20 transition-all",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#d4af37]/5 rounded-full -mr-16 -mt-16 blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("div",{className:"w-20 h-20 rounded-full border border-white/10 p-1 bg-black overflow-hidden shrink-0",children:u.jsx(Kn,{src:E.avatar_url,gender:E.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-white text-[15px] font-black uppercase tracking-widest truncate",children:E.full_name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsxs("p",{className:"text-[#d4af37] text-[10px] font-black uppercase tracking-widest",children:["@",E.instagram_handle]}),u.jsx("div",{className:"w-1 h-1 rounded-full bg-zinc-800"}),u.jsxs("span",{className:"text-[8px] text-zinc-500 font-black uppercase",children:[(E.followers_count||0).toLocaleString()," Reach"]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("span",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Atribuir Nvel de Curadoria"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(N=>{var O;const k=(O=E.curated_level)==null?void 0:O.includes(N.name);return u.jsx("button",{onClick:()=>n(E.id,N.name),className:`py-4 px-2 rounded-2xl text-[8px] font-black uppercase tracking-widest border transition-all ${k?"bg-[#d4af37] text-black border-[#d4af37] shadow-xl scale-[1.02]":"bg-zinc-900/50 text-zinc-500 border-white/5 hover:border-white/10"}`,children:N.name},N.id)})})]}),u.jsx("button",{onClick:()=>i(E.id),disabled:r||!E.curated_level||E.curated_level.length===0,className:"w-full py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-95 disabled:opacity-20 transition-all",children:r?"Efetivando...":"Assinar Perfil e Finalizar"})]},E.id))}):u.jsxs("div",{className:"py-32 text-center space-y-6 animate-in fade-in",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mx-auto opacity-20",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsxs("p",{className:"text-[10px] text-zinc-700 font-black uppercase tracking-[0.5em] italic",children:["FILA DE QUALIFICAO VAZIA.",u.jsx("br",{}),"TODOS OS MEMBROS ESTO SINCRONIZADOS."]})]})]})},PI=({communities:e,isLoading:t,isMaster:n,onSelect:i,onEdit:r,onCreate:o})=>u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"GESTO DE UNIDADES"}),u.jsxs("p",{className:"text-[20px] font-serif italic text-white tracking-tighter",children:["Minhas Comunidades (",e.length,")"]})]}),n&&u.jsx("button",{onClick:o,className:"px-6 py-3 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Nova Unidade"})]}),t?u.jsxs("div",{className:"py-24 flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"}),u.jsx("p",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:"Sincronizando com a Nuvem..."})]}):u.jsx("div",{className:"grid grid-cols-1 gap-8",children:e.map(d=>{var g,x,p;return u.jsxs("div",{className:"bg-zinc-950 border border-white/5 rounded-[3rem] overflow-hidden flex flex-col shadow-2xl group transition-all hover:border-[#d4af37]/20",children:[u.jsxs("div",{className:"relative aspect-[16/9] w-full overflow-hidden",children:[u.jsx("img",{src:d.image_url,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-1000 scale-105 group-hover:scale-100",alt:d.name}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),u.jsx("div",{className:"absolute top-6 left-6",children:u.jsx("div",{className:"w-16 h-16 rounded-2xl border-2 border-white/10 p-1 bg-black/40 backdrop-blur-xl overflow-hidden",children:u.jsx("img",{src:d.logo_url,className:"w-full h-full object-cover rounded-xl",alt:"Logo"})})}),u.jsxs("div",{className:"absolute bottom-6 left-8 right-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"px-3 py-1 bg-[#d4af37] text-black text-[8px] font-black uppercase tracking-widest rounded-full",children:d.type}),!d.is_active&&u.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-[8px] font-black uppercase tracking-widest rounded-full",children:"Desativada"})]}),u.jsx("h4",{className:"text-3xl font-serif italic text-white tracking-tighter uppercase",children:d.name}),u.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded-full border border-[#d4af37]/40 p-0.5 overflow-hidden bg-zinc-900 shrink-0",children:u.jsx("img",{src:d.owner_avatar||"",className:"w-full h-full object-cover rounded-full",alt:""})}),u.jsxs("span",{className:"text-[7px] text-zinc-400 font-black uppercase tracking-[0.3em]",children:["RESPONSVEL: ",u.jsx("span",{className:"text-white",children:d.owner_name||"Protocolando..."})]})]})]})]}),u.jsxs("div",{className:"p-8 space-y-8",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-4 border-b border-white/5 pb-8",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Eventos"}),u.jsx("p",{className:"text-xl font-serif italic text-white",children:((g=d.stats)==null?void 0:g.eventCount)||0})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Membros"}),u.jsx("p",{className:"text-xl font-serif italic text-white",children:((x=d.stats)==null?void 0:x.totalRsvps)||0})]}),u.jsxs("div",{className:"space-y-1 text-right",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Receita Bruta"}),u.jsx("p",{className:"text-xl font-serif italic text-[#d4af37]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(((p=d.stats)==null?void 0:p.totalRevenue)||0)})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:"Endereo Base"}),u.jsx("span",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-widest mt-1 truncate max-w-[200px]",children:d.address})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>r(d.id),className:"p-4 bg-zinc-900 border border-white/5 rounded-2xl text-white active:scale-95 transition-all",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:u.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),u.jsx("button",{onClick:()=>i(d.id),className:"px-6 py-4 bg-white text-black text-[9px] font-black uppercase tracking-widest rounded-2xl active:scale-95 transition-all shadow-xl",children:"Gesto Full"})]})]})]})]},d.id)})})]});async function R3(e){if(!Q)return[];try{const{data:t,error:n}=await Q.rpc("search_public_profiles",{search_query:e.trim()});if(n)throw n;return t||[]}catch(t){return console.error("[VANTA SOVEREIGN RPC] Falha na busca social:",t),[]}}async function jI(e){if(!Q||!e)return null;try{const{data:t,error:n}=await Q.rpc("get_public_profile",{target_id:e});if(n)throw n;return(t==null?void 0:t[0])??null}catch(t){return console.error("[VANTA SOVEREIGN RPC] Erro ao carregar perfil:",t),null}}async function Kv(e,t,n={}){if(!Q)return!1;const{data:i,error:r}=await Q.rpc("admin_update_member_role",{target_id:e,new_role:t,new_perms:n});return r?(console.error("[VANTA SOVEREIGN RPC] Falha ao atualizar cargo:",r),!1):i===!0}const eu=({onSelect:e,placeholder:t,label:n})=>{const[i,r]=V.useState(""),[o,d]=V.useState([]),[g,x]=V.useState(!1),[p,_]=V.useState(!1);return V.useEffect(()=>{if(!i.trim()){d([]),_(!1);return}const E=setTimeout(async()=>{x(!0);const N=await R3(i);d(N),_(!0),x(!1)},400);return()=>clearTimeout(E)},[i]),u.jsxs("div",{className:"relative w-full space-y-2",children:[n&&u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-[0.3em] ml-4",children:n}),u.jsxs("div",{className:"relative",children:[u.jsx(Ge.Search,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-700"}),u.jsx("input",{type:"text",value:i,onChange:E=>r(E.target.value),placeholder:t||"BUSCAR POR NOME, @INSTA OU E-MAIL...",className:"w-full bg-zinc-900/60 border border-white/5 rounded-2xl py-4 pl-12 pr-6 text-[9px] text-white uppercase tracking-widest outline-none focus:border-[#d4af37]/30 transition-all"}),g&&u.jsx("div",{className:"absolute right-5 top-1/2 -translate-y-1/2",children:u.jsx("div",{className:"w-3 h-3 border border-white/10 border-t-[#d4af37] rounded-full animate-spin"})})]}),p&&o.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-zinc-950 border border-white/10 rounded-[2rem] shadow-2xl z-[500] max-h-60 overflow-y-auto no-scrollbar py-2 animate-in fade-in slide-in-from-top-2",children:o.map(E=>u.jsxs("button",{onClick:()=>{e(E),r(""),_(!1)},className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0 text-left",children:[u.jsx("div",{className:"w-10 h-10 rounded-full border border-white/10 p-0.5 overflow-hidden bg-zinc-900 shrink-0",children:u.jsx(Kn,{src:E.avatar_url,gender:E.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-[10px] font-black text-white uppercase truncate",children:E.full_name||"Sem Nome"}),u.jsx("div",{className:"flex flex-col",children:u.jsxs("p",{className:"text-[8px] text-zinc-600 uppercase tracking-widest truncate",children:["@",E.instagram_handle||"vanta"]})})]}),u.jsx("div",{className:"text-[#d4af37] opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(Ge.Plus,{className:"w-4 h-4"})})]},E.id))})]})},Aa={selectedDate:new Date,permissionStatus:localStorage.getItem("vanta_radar_permission")||"prompt",lastCoords:(()=>{try{const e=localStorage.getItem("vanta_radar_coords");return e?JSON.parse(e):null}catch{return null}})(),setSelectedDate(e){this.selectedDate=e},setPermission(e){this.permissionStatus=e,localStorage.setItem("vanta_radar_permission",e)},setCoords(e){this.lastCoords=e,localStorage.setItem("vanta_radar_coords",JSON.stringify(e))},getSelectedDate(){return this.selectedDate}},Mc={"Rio de Janeiro":[-43.1729,-22.9068],"So Paulo":[-46.6333,-23.5505],"Belo Horizonte":[-43.9378,-19.9217],Braslia:[-47.8828,-15.7941],Salvador:[-38.5016,-12.9777],Trancoso:[-39.0914,-16.5911],Bzios:[-41.8869,-22.7561],"Angra dos Reis":[-44.3182,-23.0067]},gl=[-43.1729,-22.9068],BI=(e,t)=>{const[n,i]=V.useState(Aa.permissionStatus),[r,o]=V.useState(Aa.selectedDate),[d,g]=V.useState(!1),[x,p]=V.useState(null),[_,E]=V.useState(!1),[N,k]=V.useState(Aa.lastCoords),[O,L]=V.useState("init"),[P,H]=V.useState(""),B=V.useRef(null),j=V.useRef([]),F=V.useRef(null),Y=ue=>{const X=ue;return X.startDate??X.start_date??X.startDateStr??null},W=ue=>{const X=ue,K=X.latitude??X.lat,J=X.longitude??X.lng;if(typeof K=="number"&&typeof J=="number")return[J,K];const oe=Mc[ue.city]||gl,fe=ue.id.split("").reduce((ae,ve)=>ae+ve.charCodeAt(0),0),Se=(fe%100-50)/4e3,ee=(fe*7%100-50)/4e3;return[oe[0]+Se,oe[1]+ee]},te=()=>new Promise((ue,X)=>{if(window.L)return ue(window.L);const K="leaflet-css";if(!document.getElementById(K)){const Se=document.createElement("link");Se.id=K,Se.rel="stylesheet",Se.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(Se)}const J="leaflet-js",oe=document.createElement("script");oe.id=J,oe.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js";const fe=setTimeout(()=>X(new Error("Leaflet timeout")),8e3);oe.onload=()=>{clearTimeout(fe),ue(window.L)},oe.onerror=()=>{clearTimeout(fe),X(new Error("Leaflet load error"))},document.head.appendChild(oe)}),ne=async(ue,X)=>{if(!(!X||B.current))try{L("loading");const K=await te(),J=[ue[1],ue[0]];B.current=K.map(X,{zoomControl:!1,attributionControl:!1}).setView(J,14),K.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{maxZoom:19,subdomains:"abcd"}).addTo(B.current),B.current.on("click",()=>p(null)),E(!0),L("ready")}catch(K){H(K.message),L("failed")}},ie=ue=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(X=>{const K=[X.coords.longitude,X.coords.latitude];k(K),i("granted"),Aa.setPermission("granted"),Aa.setCoords(K),ne(K,ue)},()=>{i("denied"),Aa.setPermission("denied"),ne(Mc["Rio de Janeiro"]||gl,ue)},{timeout:8e3}):(i("denied"),Aa.setPermission("denied"),ne(gl,ue))},_e=()=>{n!=="denied"&&"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(ue=>{const X=[ue.coords.longitude,ue.coords.latitude];k(X),Aa.setCoords(X),B.current&&B.current.setView([X[1],X[0]],14,{animate:!0})},()=>{},{timeout:5e3})},Ee=ue=>{o(ue),Aa.setSelectedDate(ue),p(null)},pe=ue=>{const X=new Date,K=new Date(`${ue.startDate}T${ue.startTime||"00:00"}`);let J=new Date(`${ue.startDate}T${ue.endTime||"23:59"}`);return J<K&&J.setDate(J.getDate()+1),X>=K&&X<=J},Ne=V.useMemo(()=>{const ue=r.toISOString().split("T")[0];return e.filter(X=>Y(X)===ue)},[e,r]);return V.useEffect(()=>{if(!_||!B.current)return;const ue=window.L;ue&&(j.current.forEach(X=>X.remove()),j.current=[],Ne.forEach(X=>{const K=W(X);if(K){const J=pe(X),oe=document.createElement("div");oe.className=`w-10 h-10 bg-zinc-900 border ${J?"border-[#d4af37]":"border-white/20"} rounded-xl overflow-hidden shadow-[0_4px_12px_rgba(212,175,55,0.4)] cursor-pointer active:scale-95 transition-all flex items-center justify-center relative`;let fe="";J&&(fe=`
            <div class="absolute inset-[-4px] rounded-xl border-2 border-[#d4af37]/40 animate-pulse z-[-1]"></div>
            <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-[#d4af37] px-1 rounded-full whitespace-nowrap shadow-xl">
              <span class="text-[5px] text-black font-black uppercase tracking-tighter">ACONTECENDO AGORA</span>
            </div>
          `),oe.innerHTML=`${fe}
          <img src="${X.image}" class="w-full h-full object-cover" onerror="this.style.display='none'; if(this.nextElementSibling) this.nextElementSibling.style.display='flex';" />
          <div class="vanta-fallback w-full h-full hidden items-center justify-center bg-zinc-950"><span class="text-[12px] font-serif italic text-[#d4af37] font-bold">V</span></div>`;const Se=ue.divIcon({html:oe.outerHTML,className:"",iconSize:[40,40],iconAnchor:[20,20]}),ee=ue.marker([K[1],K[0]],{icon:Se}).addTo(B.current);ee.on("click",ae=>{ue.DomEvent.stopPropagation(ae),p(X.id)}),j.current.push(ee)}}))},[Ne,_]),V.useEffect(()=>{if(!_||!B.current||!N)return;const ue=window.L;if(!ue)return;F.current&&F.current.remove();const X=document.createElement("div");X.className="relative w-8 h-8 flex items-center justify-center",X.innerHTML=`<div class="absolute inset-0 rounded-full bg-[#d4af37]/40 animate-ping"></div><div class="relative w-full h-full rounded-full border-2 border-white p-0.5 bg-black overflow-hidden z-10 flex items-center justify-center"><img src="${(t==null?void 0:t.avatar)||""}" class="w-full h-full object-cover rounded-full" /></div>`;const K=ue.divIcon({html:X.outerHTML,className:"",iconSize:[32,32],iconAnchor:[16,16]});F.current=ue.marker([N[1],N[0]],{icon:K}).addTo(B.current)},[_,N,t==null?void 0:t.avatar]),{permissionStatus:n,setPermissionStatus:i,selectedDate:r,setSelectedDate:o,showCalendar:d,setShowCalendar:g,previewEventId:x,setPreviewEventId:p,mapLoaded:_,userCoords:N,initStage:O,lastError:P,requestLocation:ie,recenterMap:_e,handleDateChange:Ee,filteredEvents:Ne,isEventLiveNow:pe,initMap:ne}},k3=({isOpen:e,initialLat:t,initialLng:n,city:i,onConfirm:r,onClose:o})=>{const d=V.useRef(null),g=V.useRef(null),x=V.useRef(null),[p,_]=V.useState(null),[E,N]=V.useState(!1),[k,O]=V.useState(null);return V.useEffect(()=>{t&&n&&_([t,n])},[t,n,e]),V.useEffect(()=>{if(!e)return;let L=!0,P=null;const H=()=>{if(g.current){try{g.current.off(),g.current.remove()}catch(F){console.warn("Erro ao limpar mapa:",F)}g.current=null,x.current=null,N(!1)}},B=()=>{if(L&&d.current){g.current&&H();try{const F=window.L;if(!F){O("Biblioteca de mapas no carregada.");return}let Y=gl;t&&n?Y=[t,n]:i&&Mc[i]&&(Y=[Mc[i][1],Mc[i][0]]);const W=F.map(d.current,{zoomControl:!1,attributionControl:!1}).setView(Y,15);F.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{maxZoom:19,subdomains:"abcd"}).addTo(W);const te=(ne,ie)=>{const _e=document.createElement("div");_e.className="w-6 h-6 bg-[#d4af37] rounded-full border-2 border-white shadow-xl cursor-grab active:cursor-grabbing";const Ee=F.divIcon({html:_e.outerHTML,className:"",iconSize:[24,24],iconAnchor:[12,12]}),pe=F.marker([ne,ie],{icon:Ee,draggable:!0,autoPan:!0}).addTo(W);return pe.on("dragend",Ne=>{const{lat:ue,lng:X}=Ne.target.getLatLng();_([ue,X])}),pe};W.on("click",ne=>{const{lat:ie,lng:_e}=ne.latlng;_([ie,_e]),x.current?x.current.setLatLng([ie,_e]):x.current=te(ie,_e)}),t&&n?x.current=te(t,n):"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(ne=>{const{latitude:ie,longitude:_e}=ne.coords;!x.current&&L&&(W.flyTo([ie,_e],16,{animate:!0,duration:1.5}),x.current=te(ie,_e),_([ie,_e]))},ne=>{console.warn("GPS indisponvel no picker:",ne)},{timeout:5e3,enableHighAccuracy:!0}),g.current=W,N(!0),setTimeout(()=>{W.invalidateSize()},250)}catch(F){console.error("Erro crtico ao iniciar mapa:",F),O("Falha ao renderizar mapa.")}}};return(()=>{if(window.L){B();return}const F="leaflet-script-vanta";if(document.getElementById(F))P=setInterval(()=>{window.L&&(clearInterval(P),L&&B())},100);else{const Y=document.createElement("link");Y.rel="stylesheet",Y.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(Y);const W=document.createElement("script");W.id=F,W.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",W.async=!0,W.onload=()=>{L&&B()},W.onerror=()=>{L&&O("Erro de rede ao carregar mapa.")},document.head.appendChild(W)}})(),()=>{L=!1,P&&clearInterval(P),H()}},[e]),e?u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-lg bg-zinc-950 border border-white/10 rounded-[3rem] overflow-hidden flex flex-col shadow-2xl h-[70vh]",children:[u.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-black/40",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"text-white text-[12px] font-black uppercase tracking-widest",children:"Ajuste de Radar"}),u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest",children:"Arraste o pino para o local exato"})]}),u.jsx("button",{onClick:o,className:"text-zinc-500 hover:text-white transition-colors text-[9px] font-black uppercase tracking-widest",children:"Fechar"})]}),u.jsxs("div",{className:"flex-1 relative bg-zinc-900",children:[u.jsx("div",{ref:d,className:"absolute inset-0"}),!E&&!k&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-zinc-900 z-10",children:u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}),k&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-zinc-900 z-20 p-6 text-center",children:u.jsx("p",{className:"text-red-500 text-[10px] font-black uppercase tracking-widest",children:k})}),u.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-[1000]",children:u.jsx("button",{onClick:()=>p&&r(p[0],p[1]),disabled:!p,className:"px-8 py-4 bg-[#d4af37] text-black font-black uppercase text-[10px] rounded-full shadow-xl disabled:opacity-50 disabled:scale-95 active:scale-95 transition-all tracking-widest",children:"Confirmar Local"})})]})]})}):null},UI=({view:e,communityForm:t,setCommunityForm:n,onSubmit:i,onAddressBlur:r,logoInputRef:o,coverInputRef:d,onFileSelect:g,isGeocoding:x,isProcessing:p})=>{const[_,E]=V.useState(!1);return u.jsxs("div",{className:"space-y-12 animate-in slide-in-from-bottom duration-500 pb-40",children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:e==="CREATE"?"PROTOCOLO DE CRIAO":"EDITOR DE UNIDADE"}),u.jsx("p",{className:"text-[24px] font-serif italic text-white tracking-tighter",children:e==="CREATE"?"Nova Unidade VANTA":"Alterar Protocolos"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Natureza da Unidade"}),u.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{key:"BOATE",label:"Local Fixo",desc:"Boate / Rooftop",icon:""},{key:"PRODUTORA",label:"Marca Itinerante",desc:"Labels / Protocolo",icon:""}].map(N=>u.jsxs("button",{onClick:()=>n({...t,type:N.key}),className:`p-6 rounded-[2.5rem] border flex flex-col items-center text-center gap-3 transition-all ${t.type===N.key?"bg-white text-black border-white shadow-2xl scale-[1.02]":"bg-zinc-900/40 text-zinc-500 border-white/5 hover:border-white/10"}`,children:[u.jsx("span",{className:"text-3xl",children:N.icon}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:N.label}),u.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] opacity-40",children:N.desc})]})]},N.key))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Identidade Visual (Logo)"}),u.jsxs("div",{onClick:()=>{var N;return(N=o.current)==null?void 0:N.click()},className:"aspect-square w-full max-w-[180px] mx-auto bg-zinc-900 border border-dashed border-white/10 rounded-[3rem] overflow-hidden flex flex-col items-center justify-center text-center cursor-pointer group hover:border-[#d4af37]/40 transition-all",children:[t.logo_url?u.jsx("img",{src:t.logo_url,className:"w-full h-full object-cover",alt:"Logo"}):u.jsxs("div",{className:"p-8 opacity-20 group-hover:opacity-100 transition-opacity",children:[u.jsx(Ge.Plus,{className:"w-6 h-6 mx-auto mb-2"}),u.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest block",children:"Upload Logo"})]}),u.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:N=>g(N,"logo"),className:"hidden"})]})]}),u.jsxs("div",{className:"space-y-4 flex-1",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Foto de Capa (Banner)"}),u.jsxs("div",{onClick:()=>{var N;return(N=d.current)==null?void 0:N.click()},className:"aspect-[16/9] w-full bg-zinc-900 border border-dashed border-white/10 rounded-[2.5rem] overflow-hidden flex flex-col items-center justify-center text-center cursor-pointer group hover:border-[#d4af37]/40 transition-all",children:[t.image_url?u.jsx("img",{src:t.image_url,className:"w-full h-full object-cover",alt:"Cover"}):u.jsxs("div",{className:"p-8 opacity-20 group-hover:opacity-100 transition-opacity",children:[u.jsx(Ge.Explore,{className:"w-8 h-8 mx-auto mb-2"}),u.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest block",children:"Carregar Foto de Capa"})]}),u.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:N=>g(N,"cover"),className:"hidden"})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Nome da Unidade"}),u.jsx("input",{type:"text",value:t.name,onChange:N=>n({...t,name:N.target.value}),placeholder:"EX: BOSQUE BAR / PRIVATE LABEL",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Responsvel pela Unidade (Dono)"}),u.jsx(eu,{onSelect:N=>n(k=>({...k,owner_id:N.id,owner_name:N.full_name||""})),placeholder:e==="CREATE"?"BUSCAR MEMBRO PARA ATRIBUIR COMO DONO...":"BUSCAR NOVO DONO..."}),t.owner_id&&u.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 bg-emerald-500/5 border border-emerald-500/20 rounded-2xl animate-in fade-in",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),u.jsxs("span",{className:"text-[9px] text-zinc-300 font-black uppercase tracking-widest",children:["Responsvel: ",u.jsx("span",{className:"text-white",children:t.owner_name||t.owner_id})]}),e==="CREATE"&&u.jsx("button",{onClick:()=>n(N=>({...N,owner_id:"",owner_name:""})),className:"ml-auto text-red-500 text-[8px] font-black uppercase tracking-widest",children:"Remover"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Bio / Descrio Curta"}),u.jsx("textarea",{value:t.description,onChange:N=>n({...t,description:N.target.value}),placeholder:"DESCREVA A ESSNCIA DESTA UNIDADE...",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20 h-24 resize-none"})]}),t.type==="BOATE"&&u.jsxs("div",{className:"space-y-2 animate-in fade-in duration-500",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Endereo Inteligente (Radar Integration)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative flex-[2]",children:[u.jsx("input",{type:"text",value:t.address,onChange:N=>n({...t,address:N.target.value}),onBlur:r,placeholder:"RUA, NMERO, BAIRRO...",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 pr-10 text-[10px] text-white uppercase outline-none focus:border-white/20"}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center",children:x&&u.jsx("div",{className:"w-4 h-4 border border-white/10 border-t-[#d4af37] rounded-full animate-spin"})})]}),u.jsxs("button",{onClick:()=>E(!0),className:`flex-1 rounded-2xl border flex flex-col items-center justify-center gap-1 transition-all ${t.latitude?"bg-emerald-500/10 border-emerald-500/30 text-emerald-500":"bg-zinc-900 border-white/5 text-zinc-500 hover:text-white"}`,children:[u.jsx(Ge.MapPin,{className:"w-4 h-4"}),u.jsx("span",{className:"text-[6px] font-black uppercase tracking-widest",children:t.latitude?"GPS OK":"NO MAPA"})]})]})]})]}),u.jsx("button",{onClick:i,disabled:p,className:`w-full py-6 text-black text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all ${e==="CREATE"?"bg-[#d4af37]":"bg-white"}`,children:p?e==="CREATE"?"Protocolando Unidade...":"Atualizando...":e==="CREATE"?"Finalizar Cadastro":"Atualizar Unidade"}),u.jsx(k3,{isOpen:_,onClose:()=>E(!1),onConfirm:(N,k)=>{n({...t,latitude:N,longitude:k}),E(!1)},initialLat:t.latitude,initialLng:t.longitude,city:t.city})]})},Dh=({communityId:e,eventId:t,category:n,title:i})=>{const[r,o]=V.useState([]),[d,g]=V.useState(!0),[x,p]=V.useState(n||"ALL");V.useEffect(()=>{_()},[e,t,x]);const _=async()=>{g(!0);const N=await pI({communityId:e,eventId:t,category:x==="ALL"?void 0:x,limit:50});o(N),g(!1)},E=N=>{switch(N){case"FINANCE":return"";case"STAFF":return"";case"LIST":return"";case"ETHICS":return"";default:return""}};return u.jsxs("div",{className:"space-y-6 bg-black border border-white/5 rounded-[2.5rem] p-8 shadow-inner overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600 italic",children:"CAIXA DE AUDITORIA"}),u.jsx("p",{className:"text-xl font-serif italic text-white uppercase tracking-tighter",children:i||"Fluxo de Atividade"})]}),u.jsx("button",{onClick:_,className:"p-3 bg-white/5 border border-white/10 rounded-full text-zinc-500 hover:text-white transition-all",children:u.jsx("svg",{viewBox:"0 0 24 24",className:`w-4 h-4 fill-current ${d?"animate-spin":""}`,children:u.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})})]}),!n&&u.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:["ALL","GENERAL","FINANCE","STAFF","LIST"].map(N=>u.jsx("button",{onClick:()=>p(N),className:`px-4 py-2 rounded-full text-[7px] font-black uppercase tracking-widest border transition-all whitespace-nowrap ${x===N?"bg-white text-black border-white":"bg-zinc-900 text-zinc-600 border-white/5"}`,children:N},N))}),u.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto no-scrollbar pr-2",children:d?u.jsx("div",{className:"py-12 flex justify-center",children:u.jsx("div",{className:"w-4 h-4 border border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):r.length>0?r.map(N=>u.jsxs("div",{className:"p-4 bg-zinc-900/40 border border-white/5 rounded-2xl flex gap-4 items-start group hover:border-white/10 transition-all",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-white/5 flex items-center justify-center shrink-0 text-[10px]",children:E(N.category)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:N.performed_by_name}),u.jsx("span",{className:"text-[6px] text-zinc-800 font-black",children:new Date(N.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-[9px] text-zinc-300 font-black uppercase tracking-wider",children:N.action.replace(/_/g," ")}),N.details&&Object.keys(N.details).length>0&&u.jsx("p",{className:"text-[7px] text-zinc-500 mt-1 italic line-clamp-1",children:JSON.stringify(N.details)})]})]},N.id)):u.jsx("div",{className:"py-12 text-center opacity-20 italic",children:u.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"Nenhuma atividade protocolada nesta seo."})})})]})};class FI{constructor(){On(this,"listeners",[]);On(this,"friendships",{});On(this,"currentUserId",null);On(this,"channel",null);this.init()}async init(){if(!Q)return;const{data:{session:t}}=await Q.auth.getSession();t!=null&&t.user&&(this.currentUserId=t.user.id,await this.loadFromSupabase(),this.subscribeToRealtime()),Q.auth.onAuthStateChange(async(n,i)=>{i!=null&&i.user?(this.currentUserId=i.user.id,await this.loadFromSupabase(),this.subscribeToRealtime()):(this.currentUserId=null,this.friendships={},this.channel&&(Q.removeChannel(this.channel),this.channel=null),this.notify())})}subscribeToRealtime(){!Q||!this.currentUserId||(this.channel&&Q.removeChannel(this.channel),this.channel=Q.channel("vanta_social_sync").on("postgres_changes",{event:"*",schema:"public",table:"friendships",filter:`user_id=eq.${this.currentUserId}`},()=>this.loadFromSupabase()).on("postgres_changes",{event:"*",schema:"public",table:"friendships",filter:`friend_id=eq.${this.currentUserId}`},()=>this.loadFromSupabase()).subscribe())}async loadFromSupabase(){if(!(!Q||!this.currentUserId))try{const{data:t,error:n}=await Q.from("friendships").select("*").or(`user_id.eq.${this.currentUserId},friend_id.eq.${this.currentUserId}`);if(n)throw n;const i={};t.forEach(r=>{const o=r.user_id===this.currentUserId?r.friend_id:r.user_id;r.status==="friends"?i[o]="friends":i[o]=r.user_id===this.currentUserId?"outgoing":"incoming"}),this.friendships=i,this.notify()}catch(t){console.error("[VANTA SOCIAL] Erro ao carregar amizades:",t)}}getStatus(t){return this.friendships[t]||"none"}getAll(){return{...this.friendships}}async setStatus(t,n){if(!(!Q||!this.currentUserId)){try{if(n==="none")await Q.from("friendships").delete().or(`and(user_id.eq.${this.currentUserId},friend_id.eq.${t}),and(user_id.eq.${t},friend_id.eq.${this.currentUserId})`),delete this.friendships[t];else if(n==="outgoing"){const{error:i}=await Q.from("friendships").insert([{user_id:this.currentUserId,friend_id:t,status:"pending"}]);i||(this.friendships[t]="outgoing",await Ji.addNotification("friend_request",t,"Um membro"))}else if(n==="friends"){const{error:i}=await Q.from("friendships").update({status:"friends"}).match({user_id:t,friend_id:this.currentUserId});i||(this.friendships[t]="friends",await Ji.addNotification("friend_accepted",t,"Um membro"))}}catch(i){console.error("[VANTA SOCIAL] Erro na operao de rede:",i)}this.notify()}}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notify(){this.listeners.forEach(t=>t())}}const Ir=new FI,eg=({member:e,onBack:t,onMessage:n})=>{const[i,r]=V.useState(Ir.getStatus(e.id)),[o,d]=V.useState(!1),g=V.useRef(null);V.useEffect(()=>{g.current&&(g.current.scrollTop=0)},[e.id]),V.useEffect(()=>{(async()=>{if(!Q)return;const{data:k,error:O}=await Q.from("event_rsvps").select("event_id, events(start_at, end_at)").eq("user_id",e.id).eq("status","going");if(!O&&k){const L=k.find(P=>{const H=new Date(P.events.start_at),B=P.events.end_at?new Date(P.events.end_at):new Date(H.getTime()+480*60*1e3),j=new Date;return j>=H&&j<=B});d(!!L)}})();const N=Ir.subscribe(()=>{r(Ir.getStatus(e.id))});return()=>N()},[e.id]);const x=E=>{Ir.setStatus(e.id,E)},p=()=>{var E;Fe.confirm({title:"Desfazer Conexo",message:`Deseja encerrar o vnculo social com ${(E=e.full_name)==null?void 0:E.split(" ")[0]}?`,confirmLabel:"Confirmar Remoo",isDestructive:!0,onConfirm:()=>x("none")})},_=i==="friends";return u.jsxs("div",{ref:g,className:"absolute inset-0 z-[300] bg-black overflow-y-auto no-scrollbar animate-in slide-in-from-right duration-500 pb-32",children:[u.jsxs("div",{className:"sticky top-0 z-[310] p-6 flex items-center justify-between safe-top bg-black/50 backdrop-blur-xl",children:[u.jsx("button",{onClick:t,className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white active:scale-90 transition-all",children:u.jsx(Ge.ArrowLeft,{className:"w-5 h-5"})}),u.jsx("div",{className:"px-4 py-2 bg-white/5 border border-white/10 rounded-full",children:u.jsx("span",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-[0.3em]",children:"Perfil do Membro"})}),u.jsx("div",{className:"w-12"})]}),u.jsxs("div",{className:"flex flex-col items-center px-8 pt-12 space-y-8",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-40 h-40 rounded-full border p-1.5 overflow-hidden bg-zinc-900 transition-all duration-700 ${o?"border-[#d4af37] shadow-[0_0_40px_rgba(212,175,55,0.3)]":"border-white/10"}`,children:u.jsx(Kn,{src:e.avatar_url,gender:e.gender,alt:e.full_name||"Membro"})}),o&&u.jsx("div",{className:"absolute -top-1 -right-1 w-10 h-10 bg-[#d4af37] rounded-full border-4 border-black flex items-center justify-center animate-pulse shadow-xl",children:u.jsx("span",{className:"text-[12px] font-serif italic text-black font-black",children:"V"})}),_&&!o&&u.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-zinc-900 rounded-full border-4 border-black flex items-center justify-center",children:u.jsx(Ge.Star,{className:"w-3 h-3 text-[#d4af37]"})})]}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h2",{className:"text-4xl font-serif italic text-white tracking-tighter uppercase leading-none",children:e.full_name||"Membro"}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsxs("p",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-[0.4em]",children:["@",e.instagram_handle||"vanta_member"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[#d4af37] text-[8px] font-black uppercase tracking-[0.3em] italic",children:_?"Amigo Verificado":"Membro VANTA"}),o&&u.jsx("span",{className:"px-2 py-0.5 bg-[#d4af37]/10 border border-[#d4af37]/20 rounded-full text-[6px] text-[#d4af37] font-black uppercase tracking-widest",children:"Ativo na Noite"})]})]})]}),u.jsxs("div",{className:"w-full max-w-xs space-y-3",children:[_&&u.jsx("button",{onClick:()=>n==null?void 0:n(e.id),className:"w-full py-5 bg-[#d4af37] text-black text-[10px] font-black uppercase rounded-full shadow-2xl mb-4",children:"Enviar Mensagem"}),i==="none"&&u.jsx("button",{onClick:()=>x("outgoing"),className:"w-full py-5 bg-white text-black text-[10px] font-black uppercase rounded-full",children:"Adicionar Amizade"}),i==="outgoing"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"flex-[2] py-5 bg-zinc-900 text-zinc-500 border border-white/5 text-[10px] font-black uppercase rounded-full",children:"Solicitado"}),u.jsx("button",{onClick:()=>x("none"),className:"flex-1 py-5 border border-red-900/20 text-red-500 text-[10px] font-black uppercase rounded-full",children:"Cancelar"})]}),i==="incoming"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>x("friends"),className:"flex-[2] py-5 bg-emerald-500 text-black text-[10px] font-black uppercase rounded-full",children:"Aceitar Amizade"}),u.jsx("button",{onClick:()=>x("none"),className:"flex-1 py-5 border border-white/5 text-zinc-500 text-[10px] font-black uppercase rounded-full",children:"Ignorar"})]}),_&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-full py-5 bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 text-[10px] font-black uppercase rounded-full text-center",children:"Conexo Estabelecida"}),u.jsx("button",{onClick:p,className:"w-full py-3 text-red-900/40 text-[8px] font-black uppercase tracking-widest",children:"Desfazer Amizade"})]})]})]})]})},zI=({filled:e,className:t})=>u.jsx("svg",{viewBox:"0 0 24 24",fill:e?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:t,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})}),VI=[{id:"user-1",username:null,full_name:"Ana Souza",instagram_handle:"anasouza",avatar_url:"",gender:"female",city:"Rio de Janeiro",state:"RJ",curated_level:[]},{id:"user-2",username:null,full_name:"Carlos Lima",instagram_handle:"carlos.lima",avatar_url:"",gender:"male",city:"So Paulo",state:"SP",curated_level:[]},{id:"user-3",username:null,full_name:"Beatriz Reis",instagram_handle:"bia.reis",avatar_url:"",gender:"female",city:"Belo Horizonte",state:"MG",curated_level:[]},{id:"user-4",username:null,full_name:"Joo Pedro",instagram_handle:"jp_oficial",avatar_url:"",gender:"male",city:"Rio de Janeiro",state:"RJ",curated_level:[]},{id:"user-5",username:null,full_name:"Fernanda Costa",instagram_handle:"nanda.costa",avatar_url:"",gender:"female",city:"So Paulo",state:"SP",curated_level:[]}],tg=({community:e,events:t,onCreateEvent:n,currentUser:i,onSelectEvent:r,onEditEvent:o,customRoles:d=[]})=>{var ue,X;const[g,x]=V.useState("OVERVIEW"),[p,_]=V.useState(!1),[E,N]=V.useState(!1),[k,O]=V.useState(!1),[L,P]=V.useState(""),[H,B]=V.useState(null),j=((ue=i==null?void 0:i.role)==null?void 0:ue.toLowerCase())||"guest",Y=((X=i==null?void 0:i.email)==null?void 0:X.toLowerCase())==="vanta.master.app@gmail.com"||["admin","master","vanta_master","vanta_prod","produtor"].includes(j),W=t.filter(K=>{if(!(K.communityId===e.id))return!1;const oe=Uc(K);return p&&!oe||!p&&oe?!1:Y?!0:(K.staff||[]).some(fe=>fe.id===(i==null?void 0:i.id))}),te=W.reduce((K,J)=>K+(J.rsvps||0),0),ne=W.reduce((K,J)=>K+(J.rsvps||0)*150,0),ie=V.useMemo(()=>{if(!i)return new Set;const K=Ir.getAll(),J=Object.keys(K).filter(oe=>K[oe]==="friends");return new Set(J)},[i]),_e=V.useMemo(()=>{let K=[...VI];if(E&&i){const J={id:i.id,username:i.username,full_name:i.fullName,instagram_handle:i.instagram,avatar_url:i.avatar,gender:i.gender,city:"Rio de Janeiro",state:"RJ",curated_level:i.curatedLevel};K.find(oe=>oe.id===i.id)||(K=[J,...K])}else!E&&i&&(K=K.filter(J=>J.id!==i.id));return K},[E,i]),Ee=V.useMemo(()=>{const K=_e.length;if(K===0)return"Seja o primeiro a curtir";const J=_e.filter(oe=>ie.has(oe.id)&&oe.id!==(i==null?void 0:i.id));return E?K===1?"Curtido por voc":J.length>0?`Curtido por voc, @${J[0].instagram_handle} e outros ${K-2>0?K-2:""}`.replace(/ e outros $/,""):`Curtido por voc e outros ${K-1}`:J.length>0?J.length===1?`Curtido por @${J[0].instagram_handle} e outros ${K-1}`:`Curtido por @${J[0].instagram_handle}, @${J[1].instagram_handle} e outros ${K-2}`:K===1?`Curtido por @${_e[0].instagram_handle}`:`Curtido por @${_e[0].instagram_handle} e outros ${K-1}`},[E,_e,ie,i]),pe=()=>{if(!i){Fe.toast("info","Acesso Restrito","Faa login para interagir com comunidades.");return}N(!E)},Ne=V.useMemo(()=>{let K=_e;if(L.trim()){const J=L.toLowerCase();K=K.filter(oe=>{var fe,Se;return(((fe=oe.full_name)==null?void 0:fe.toLowerCase())||"").includes(J)||(((Se=oe.instagram_handle)==null?void 0:Se.toLowerCase())||"").includes(J)})}return K.sort((J,oe)=>{const fe=ie.has(J.id)?1:0,Se=ie.has(oe.id)?1:0,ee=J.id===(i==null?void 0:i.id)?2:0;return(oe.id===(i==null?void 0:i.id)?2:0)+Se-(ee+fe)})},[_e,L,ie,i]);return H?u.jsx(eg,{member:H,onBack:()=>B(null)}):u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-32",children:[u.jsxs("div",{className:"flex items-center gap-6 p-8 bg-zinc-950 border border-white/5 rounded-[3rem] shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#d4af37]/5 rounded-full -mr-16 -mt-16 blur-2xl"}),u.jsx("div",{className:"w-20 h-20 rounded-2xl border-2 border-[#d4af37]/20 p-1 bg-black overflow-hidden shrink-0 z-10",children:e.image_url?u.jsx("img",{src:e.image_url,alt:"",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-zinc-900"})}),u.jsxs("div",{className:"flex-1 min-w-0 z-10",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.4em] block",children:e.type}),u.jsx("div",{className:"w-1 h-1 rounded-full bg-zinc-800"}),u.jsx("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest truncate max-w-[100px]",children:e.city||"GLOBAL"})]}),u.jsx("button",{onClick:pe,className:`p-2 rounded-full border transition-all active:scale-90 ${E?"bg-red-600/10 border-red-600/30 text-red-500":"bg-zinc-900 border-white/5 text-zinc-600 hover:text-white"}`,children:u.jsx(zI,{filled:E,className:"w-5 h-5"})})]}),u.jsx("h2",{className:"text-3xl font-serif italic text-white tracking-tighter uppercase truncate",children:e.name}),u.jsxs("button",{onClick:()=>O(!0),className:"mt-2 flex items-center gap-2 text-[8px] font-black uppercase tracking-widest text-zinc-400 hover:text-[#d4af37] transition-colors",children:[_e.length>0&&u.jsx("div",{className:"flex -space-x-1.5",children:_e.slice(0,3).map((K,J)=>u.jsx("div",{className:"w-4 h-4 rounded-full border border-black overflow-hidden",children:u.jsx("img",{src:K.avatar_url||"",className:"w-full h-full object-cover"})},J))}),u.jsx("span",{children:Ee})]}),Y&&u.jsx("div",{className:"mt-4 flex gap-2",children:u.jsxs("button",{onClick:()=>{var K;return(K=window.__VANTA_NAV_TO__)==null?void 0:K.call(window,"UNIT_STAFF_MGMT")},className:"flex items-center gap-2 text-[8px] font-black uppercase tracking-widest text-[#d4af37] bg-[#d4af37]/5 px-3 py-1.5 rounded-full border border-[#d4af37]/20 active:scale-95 transition-all",children:[u.jsx(Ge.User,{className:"w-3 h-3"})," Minha Equipe"]})})]})]}),Y&&u.jsx("div",{className:"flex gap-6 border-b border-white/5 px-4 overflow-x-auto no-scrollbar",children:[{id:"OVERVIEW",label:"Agenda"},{id:"FINANCE",label:"Faturamento"},{id:"LOGS",label:"Auditoria Local"}].map(K=>u.jsxs("button",{onClick:()=>x(K.id),className:`pb-4 text-[9px] font-black uppercase tracking-[0.3em] relative transition-all ${g===K.id?"text-white":"text-zinc-600"}`,children:[K.label,g===K.id&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]},K.id))}),g==="OVERVIEW"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center px-4",children:[u.jsx("h3",{className:"text-[10px] font-black text-[#d4af37] uppercase tracking-[0.4em] italic",children:p?"ARQUIVO DE SESSES":"SESSES DA UNIDADE"}),u.jsx("button",{onClick:()=>_(!p),className:`px-4 py-2 rounded-full text-[7px] font-black uppercase tracking-widest border transition-all ${p?"bg-[#d4af37] text-black border-[#d4af37]":"bg-zinc-900 text-zinc-500 border-white/5"}`,children:p?"Ver Ativos":"Ver Arquivo"})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:W.map(K=>u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] flex items-center justify-between group active:scale-[0.98] transition-all",children:[u.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[u.jsxs("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border border-white/10 shrink-0 relative",children:[u.jsx("img",{src:K.image,className:"w-full h-full object-cover",alt:""}),p&&u.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:u.jsx("span",{className:"text-[6px] font-black text-white",children:"HISTRICO"})})]}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:"text-[11px] font-black text-white uppercase tracking-widest truncate",children:K.title}),u.jsxs("p",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest mt-1",children:[K.startDate,"  ",K.startTime]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[Y&&!p&&u.jsx("button",{onClick:J=>{J.stopPropagation(),o==null||o(K.id)},className:"p-3 bg-zinc-900 border border-white/5 rounded-full text-zinc-500 hover:text-white transition-colors",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:u.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),u.jsx("button",{onClick:()=>r==null?void 0:r(K.id),className:"px-6 py-3 bg-white text-black text-[8px] font-black uppercase rounded-full shadow-lg active:scale-90 transition-all shrink-0",children:p?"Ver Dossi":"Mission Control"})]})]},K.id))}),Y&&!p&&u.jsx("div",{className:"pt-6",children:u.jsxs("div",{className:"p-10 bg-zinc-900/40 border border-[#d4af37]/10 rounded-[3rem] flex flex-col items-center text-center space-y-6",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-[#d4af37]/5 border border-[#d4af37]/20 flex items-center justify-center",children:u.jsx(Ge.Plus,{className:"w-6 h-6 text-[#d4af37]"})}),u.jsx("button",{onClick:n,className:"w-full py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-90 transition-all",children:"Criar nova sesso"})]})})]}),g==="FINANCE"&&Y&&u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[u.jsxs("div",{className:"p-8 bg-zinc-900/60 border border-white/5 rounded-[3rem] space-y-8 shadow-xl",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"INTELIGNCIA FINANCEIRA"}),u.jsx("p",{className:"text-xl font-serif italic text-white",children:"Consolidado da Unidade"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Tickets Totais"}),u.jsx("p",{className:"text-2xl font-serif italic text-white",children:te.toLocaleString("pt-BR")})]}),u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Estimativa de Receita"}),u.jsx("p",{className:"text-2xl font-serif italic text-[#d4af37]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(ne)})]})]})]}),u.jsx(Dh,{communityId:e.id,category:"FINANCE",title:"Logs Financeiros da Unidade"})]}),g==="LOGS"&&Y&&u.jsx(Dh,{communityId:e.id,title:`Black Box de ${e.name}`}),k&&u.jsxs("div",{className:"fixed inset-0 z-[6000] bg-black/95 backdrop-blur-3xl flex flex-col animate-in slide-in-from-bottom duration-300",children:[u.jsxs("header",{className:"p-8 border-b border-white/5 flex items-center justify-between bg-black/50",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"ENGAJAMENTO"}),u.jsx("h3",{className:"text-xl font-serif italic text-white uppercase tracking-tighter",children:"Curtidas"})]}),u.jsx("button",{onClick:()=>O(!1),className:"p-3 bg-zinc-900 rounded-full border border-white/10 active:scale-90 transition-all",children:u.jsx("span",{className:"text-zinc-500 text-[10px] font-black",children:"X"})})]}),u.jsx("div",{className:"p-6 border-b border-white/5",children:u.jsxs("div",{className:"relative",children:[u.jsx(Ge.Search,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),u.jsx("input",{type:"text",value:L,onChange:K=>P(K.target.value),placeholder:"BUSCAR POR NOME OU @",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 pl-12 pr-6 text-[9px] text-white uppercase tracking-widest outline-none focus:border-[#d4af37]/30"})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4",children:Ne.map(K=>u.jsxs("button",{onClick:()=>B(K),className:"w-full flex items-center gap-4 p-4 bg-zinc-900/40 border border-white/5 rounded-[2rem] hover:bg-white/5 transition-all active:scale-95 text-left",children:[u.jsx("div",{className:`w-12 h-12 rounded-full border p-0.5 bg-black overflow-hidden shrink-0 ${ie.has(K.id)||K.id===(i==null?void 0:i.id)?"border-[#d4af37]":"border-white/10"}`,children:u.jsx(Kn,{src:K.avatar_url,gender:K.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"text-[10px] font-black text-white uppercase truncate",children:K.full_name}),K.id===(i==null?void 0:i.id)&&u.jsx("span",{className:"text-[5px] bg-[#d4af37] text-black px-1.5 py-0.5 rounded-full font-black",children:"VOC"})]}),u.jsxs("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest",children:["@",K.instagram_handle]})]}),u.jsx("div",{className:"text-zinc-600",children:u.jsx(Ge.ArrowLeft,{className:"w-3 h-3 rotate-180"})})]},K.id))})]})]})},GI=({community:e,events:t,onCreateEvent:n,currentUser:i,onEditEvent:r})=>u.jsx("div",{className:"animate-in fade-in duration-500",children:u.jsx(tg,{community:e,events:t,onCreateEvent:n,currentUser:i,onEditEvent:r})}),HI=({community:e,events:t,onCreateEvent:n,currentUser:i,onEditEvent:r})=>u.jsx("div",{className:"animate-in fade-in duration-500",children:u.jsx(tg,{community:e,events:t,onCreateEvent:n,currentUser:i,onEditEvent:r})}),qI=({view:e,communities:t,isLoadingCommunities:n,isMaster:i,setActiveView:r,setSelectedCommunityId:o,selectedCommunityId:d,communityForm:g,setCommunityForm:x,handleCreateCommunity:p,handleUpdateCommunity:_,handleAddressSearch:E,logoInputRef:N,coverInputRef:k,handleFileSelect:O,isGeocoding:L,isProcessing:P,currentUser:H,events:B,setEventForm:j,unitStaff:F=[]})=>{const Y=e==="LIST"||e==="COMUNIDADES",W=e==="CREATE"||e==="CREATE_UNIDADE",ne=W||(e==="EDIT"||e==="EDIT_UNIDADE"),ie=e==="MANAGE"||e==="MANAGE_UNIDADE",_e=Ee=>{const pe=B.find(Ne=>Ne.id===Ee);pe&&(j({id:pe.id,title:pe.title,description:pe.description,startDate:pe.startDate,startTime:pe.startTime,endTime:pe.endTime,location:pe.location,city:pe.city,state:pe.state,image:pe.image,isVipOnly:pe.isVipOnly,isTransferEnabled:pe.isTransferEnabled,capacity:pe.capacity,latitude:pe.latitude,longitude:pe.longitude,batches:pe.batches||[],staff:pe.staff||[],guestListRules:pe.guestListRules||[],isListEnabled:pe.guestListRules&&pe.guestListRules.length>0||pe.isListEnabled,vibeTags:pe.vibeTags||[],lineup:pe.lineup||"",dressCode:pe.dressCode||"",entryTips:pe.entryTips||""}),r("EDIT_EVENTO"))};if(Y)return u.jsx(PI,{communities:t,isLoading:n,isMaster:i,onCreate:()=>r("CREATE_UNIDADE"),onEdit:Ee=>{o(Ee),r("EDIT_UNIDADE")},onSelect:Ee=>{o(Ee),r("MANAGE_UNIDADE")}});if(ne){const Ee=W?"CREATE":"EDIT";return u.jsx(UI,{view:Ee,communityForm:g,setCommunityForm:x,onSubmit:W?async()=>{await p()&&r("COMUNIDADES")}:_,onAddressBlur:E,logoInputRef:N,coverInputRef:k,onFileSelect:O,isGeocoding:L,isProcessing:P})}if(ie){const Ee=t.find(ue=>ue.id===d);if(!Ee)return null;const pe=()=>{var K;const ue=(F||[]).map(J=>({id:J.id,email:J.email||J.instagram_handle||"membro@vanta.com",role:J.role||"VANTA_STAFF",status:"PENDING"})),X={title:"",description:"",startDate:"",startTime:"22:00",endTime:"06:00",location:Ee.address||"",city:Ee.city||"",state:Ee.state||"",image:"",isVipOnly:!1,capacity:(K=Ee.stats)!=null&&K.totalRsvps?Math.max(Ee.stats.totalRsvps,200):200,latitude:Ee.latitude||null,longitude:Ee.longitude||null,batches:[],staff:ue,guestListRules:[],isListEnabled:!0,vibeTags:[],lineup:"",dressCode:"",entryTips:""};j(X),r("CREATE_EVENTO")},Ne=ue=>{var X;(X=window.__VANTA_EVENT_REDIREC__)==null||X.call(window,ue)};return(Ee.name||"").toUpperCase().includes("BOSQUE")?u.jsx(GI,{community:Ee,events:B,onCreateEvent:pe,currentUser:H,onEditEvent:_e}):(Ee.name||"").toUpperCase().includes("VITRINNI")?u.jsx(HI,{community:Ee,events:B,onCreateEvent:pe,currentUser:H,onEditEvent:_e}):u.jsx(tg,{community:Ee,events:B,onCreateEvent:pe,currentUser:H,onSelectEvent:Ne,onEditEvent:_e})}return null},YI=e=>{const t=e.benefit.toUpperCase(),n=e.gender==="M"?"MASCULINO":e.gender==="F"?"FEMININO":"UNISEX",i=e.area.toUpperCase(),r=e.timingType==="ALL_NIGHT"?"NOITE TODA":`AT ${e.deadline}`,o=e.value>0?`R$ ${e.value}`:"";return`${t} ${n} (${i}) ${r} ${o}`.trim()},XI=e=>({area:e.area,gender:e.gender,type:e.benefit==="VIP"?"VIP":e.benefit==="CONSUMAO"?"CONSUMPTION":"DISCOUNT",value:e.value,deadline:e.timingType==="DEADLINE"?e.deadline:null}),WI=({isEnabled:e,onToggle:t,rules:n,onAddRule:i,onRemoveRule:r,readOnly:o=!1})=>{const[d,g]=V.useState({benefit:"VIP",gender:"F",timingType:"DEADLINE",deadline:"22:00",area:"Pista",value:0}),[x,p]=V.useState(""),[_,E]=V.useState(""),N=["VIP","DESCONTO","CONSUMAO"],k=[{id:"M",label:"Masc"},{id:"F",label:"Fem"},{id:"U",label:"Uni"}],O=["Pista","VIP","Camarote","Backstage"],L=()=>{const P={...XI(d),id:Math.random().toString(36).substr(2,9)};i(P)};return u.jsxs("div",{className:`space-y-8 p-8 bg-zinc-950 border border-white/5 rounded-[3rem] shadow-inner transition-opacity ${o?"opacity-70":""}`,children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"PROTOCOLOS DE LISTA"}),u.jsx("p",{className:"text-lg font-serif italic text-white",children:"Lego de Acesso"})]}),!o&&u.jsx("button",{onClick:()=>t(!e),className:`w-12 h-6 rounded-full transition-all relative ${e?"bg-[#d4af37]":"bg-zinc-800"}`,children:u.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${e?"left-7":"left-1"}`})})]}),e&&u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[!o&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Benefcio"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.map(P=>u.jsx("button",{onClick:()=>g({...d,benefit:P}),className:`px-4 py-2 rounded-full text-[8px] font-black uppercase tracking-widest border transition-all ${d.benefit===P?"bg-white text-black border-white":"bg-zinc-900 text-zinc-600 border-white/5"}`,children:P},P)),u.jsx("input",{placeholder:"OUTRO...",className:"bg-zinc-900 border border-white/5 rounded-full px-4 py-2 text-[8px] text-white uppercase outline-none w-24 focus:border-[#d4af37]/30",onChange:P=>g({...d,benefit:P.target.value})})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Gnero"}),u.jsx("div",{className:"flex gap-2",children:k.map(P=>u.jsx("button",{onClick:()=>g({...d,gender:P.id}),className:`flex-1 py-3 rounded-2xl text-[8px] font-black uppercase tracking-widest border transition-all ${d.gender===P.id?"bg-[#d4af37] text-black border-[#d4af37]":"bg-zinc-900 text-zinc-600 border-white/5"}`,children:P.label},P.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Gatilho Temporal"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>g({...d,timingType:"ALL_NIGHT"}),className:`flex-1 py-3 rounded-2xl text-[8px] font-black uppercase tracking-widest border transition-all ${d.timingType==="ALL_NIGHT"?"bg-white text-black border-white":"bg-zinc-900 text-zinc-600 border-white/5"}`,children:"Noite Toda"}),u.jsxs("div",{className:`flex-[1.5] flex items-center gap-2 p-1 rounded-2xl border ${d.timingType==="DEADLINE"?"bg-zinc-900 border-[#d4af37]/30":"bg-zinc-950 border-white/5"}`,children:[u.jsx("button",{onClick:()=>g({...d,timingType:"DEADLINE"}),className:`px-4 py-2 rounded-xl text-[8px] font-black uppercase tracking-widest transition-all ${d.timingType==="DEADLINE"?"bg-[#d4af37] text-black":"text-zinc-700"}`,children:"At as"}),u.jsx("input",{type:"time",value:d.deadline,onChange:P=>g({...d,timingType:"DEADLINE",deadline:P.target.value}),className:"bg-transparent text-white text-[10px] font-black outline-none w-16"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"rea"}),u.jsx("select",{value:d.area,onChange:P=>g({...d,area:P.target.value}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none",children:O.map(P=>u.jsx("option",{value:P,children:P},P))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Valor R$"}),u.jsx("input",{type:"number",value:d.value,onChange:P=>g({...d,value:Number(P.target.value)}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[10px] text-white outline-none"})]})]})]}),!o&&u.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-4",children:[u.jsxs("div",{className:"p-5 bg-[#d4af37]/5 border border-[#d4af37]/20 rounded-3xl text-center",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-[0.3em] block mb-2",children:"Rtulo Gerado Automtico"}),u.jsx("p",{className:"text-xs font-serif italic text-[#d4af37] uppercase tracking-tighter",children:YI(d)})]}),u.jsx("button",{onClick:L,className:"w-full py-4 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Adicionar Combinao"})]}),u.jsx("div",{className:"space-y-3",children:n.length>0?n.map(P=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900/40 border border-white/5 rounded-2xl group animate-in slide-in-from-right duration-300",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("span",{className:"text-[8px] font-black text-white uppercase tracking-widest",children:[P.type," ",P.gender," (",P.area,")"]}),u.jsxs("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-widest",children:[P.deadline?`AT AS ${P.deadline}`:"NOITE TODA","  R$ ",P.value]})]}),!o&&u.jsx("button",{onClick:()=>r(P.id),className:"p-2 text-red-900/40 hover:text-red-500 transition-colors",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]},P.id)):u.jsx("div",{className:"py-4 text-center opacity-30",children:u.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"Nenhuma regra definida."})})})]})]})},KI=({eventForm:e,setEventForm:t,eventImageInputRef:n,handleFileSelect:i,canEditDetails:r,handleRestrictedAction:o})=>{const[d,g]=V.useState(""),[x,p]=V.useState(!1);V.useEffect(()=>{e.vibeTags&&Array.isArray(e.vibeTags)},[e.vibeTags]);const _=()=>{if(!d.trim())return;const N=d.split(",").map(L=>L.trim()).filter(Boolean),k=e.vibeTags||[],O=Array.from(new Set([...k,...N]));t({...e,vibeTags:O}),g("")},E=N=>{const k=e.vibeTags||[];t({...e,vibeTags:k.filter(O=>O!==N)})};return u.jsxs("div",{className:`space-y-8 p-8 bg-zinc-950 border border-white/5 rounded-[3rem] shadow-inner transition-opacity ${r?"":"opacity-60"}`,children:[u.jsx("h3",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-[#d4af37]",children:"01. IDENTIDADE DO EVENTO"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Ttulo & Descrio"}),u.jsx("input",{type:"text",value:e.title,onChange:N=>t({...e,title:N.target.value}),placeholder:"NOME DA SESSO",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20",readOnly:!r}),u.jsx("textarea",{value:e.description,onChange:N=>t({...e,description:N.target.value}),placeholder:"DESCRIO BREVE...",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20 h-24 resize-none",readOnly:!r})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Data"}),u.jsx("input",{type:"date",value:e.startDate,onChange:N=>t({...e,startDate:N.target.value}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none",readOnly:!r})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Incio"}),u.jsx("input",{type:"time",value:e.startTime,onChange:N=>t({...e,startTime:N.target.value}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none text-center",readOnly:!r})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Fim"}),u.jsx("input",{type:"time",value:e.endTime,onChange:N=>t({...e,endTime:N.target.value}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none text-center",readOnly:!r})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Localizao & Mapa"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:e.location,onChange:N=>t({...e,location:N.target.value}),placeholder:"ENDEREO / NOME DO LOCAL",className:"flex-[2] bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20",readOnly:!r}),u.jsxs("button",{onClick:()=>o(()=>p(!0)),className:`flex-1 rounded-2xl border flex flex-col items-center justify-center gap-1 transition-all ${e.latitude?"bg-emerald-500/10 border-emerald-500/30 text-emerald-500":"bg-zinc-900 border-white/5 text-zinc-500 hover:text-white"}`,children:[u.jsx(Ge.MapPin,{className:"w-4 h-4"}),u.jsx("span",{className:"text-[6px] font-black uppercase tracking-widest",children:e.latitude?"GPS OK":"NO MAPA"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:e.city,onChange:N=>t({...e,city:N.target.value}),placeholder:"CIDADE",className:"flex-1 bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none",readOnly:!r}),u.jsx("input",{type:"text",value:e.state,onChange:N=>t({...e,state:N.target.value}),placeholder:"UF",className:"w-20 bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none",readOnly:!r})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Protocolo Operacional (Clarity Pack)"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("input",{type:"text",value:e.dressCode||"",onChange:N=>t({...e,dressCode:N.target.value}),placeholder:"DRESS CODE (EX: ESPORTE FINO)",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/20",readOnly:!r}),u.jsx("input",{type:"text",value:e.lineup||"",onChange:N=>t({...e,lineup:N.target.value}),placeholder:"LINE-UP (ARTISTAS)",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/20",readOnly:!r})]}),u.jsx("textarea",{value:e.entryTips||"",onChange:N=>t({...e,entryTips:N.target.value}),placeholder:"DICAS DE CHEGADA / PORTARIA (EX: ENTRADA PELA RUA LATERAL)",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/20 h-20 resize-none",readOnly:!r})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Vibe Tags (Filtros)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:d,onChange:N=>g(N.target.value),placeholder:"ADICIONAR TAGS (EX: FUNK, ROOFTOP, HOUSE)...",className:"flex-1 bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/20",onKeyDown:N=>N.key==="Enter"&&_(),readOnly:!r}),u.jsx("button",{onClick:_,className:"px-6 bg-zinc-800 rounded-2xl text-white text-xl font-light hover:bg-zinc-700 transition-colors",disabled:!r,children:"+"})]}),e.vibeTags&&e.vibeTags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 p-2",children:e.vibeTags.map((N,k)=>u.jsxs("span",{className:"px-3 py-1.5 bg-[#d4af37]/10 border border-[#d4af37]/20 rounded-full text-[8px] font-black uppercase text-[#d4af37] flex items-center gap-2",children:[N,r&&u.jsx("button",{onClick:()=>E(N),className:"hover:text-white transition-colors",children:""})]},k))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Banner do Evento *"}),u.jsxs("div",{onClick:()=>o(()=>{var N;return(N=n.current)==null?void 0:N.click()}),className:`aspect-video w-full bg-zinc-900 border border-dashed rounded-[2.5rem] overflow-hidden flex flex-col items-center justify-center text-center group transition-all cursor-pointer ${e.image?"border-[#d4af37]/40":"border-white/10 hover:border-white/30"}`,children:[e.image?u.jsx("img",{src:e.image,className:"w-full h-full object-cover",alt:"Banner"}):u.jsx(Ge.Plus,{className:"w-8 h-8 text-[#d4af37] opacity-20"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:N=>i(N,"event_image"),className:"hidden"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900 border border-white/5 rounded-2xl",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-[9px] font-black text-white uppercase tracking-widest",children:"Transferncia Permitida"}),u.jsx("p",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest",children:"Gift Protocol P2P Habilitado"})]}),u.jsx("button",{onClick:()=>o(()=>t(N=>({...N,isTransferEnabled:!N.isTransferEnabled}))),className:`w-12 h-7 rounded-full relative transition-all ${e.isTransferEnabled?"bg-[#d4af37]":"bg-zinc-800"}`,children:u.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white transition-all ${e.isTransferEnabled?"left-6":"left-1"}`})})]}),u.jsx(k3,{isOpen:x,onClose:()=>p(!1),onConfirm:(N,k)=>{t({...e,latitude:N,longitude:k}),p(!1)},initialLat:e.latitude,initialLng:e.longitude,city:e.city})]})},$I=({unitStaff:e,eventForm:t,setEventForm:n,handleRestrictedAction:i})=>{const r=(d,g)=>{n(x=>({...x,staff:x.staff.map(p=>p.id===d?{...p,vipQuota:g}:p)}))},o=d=>{if((t.staff||[]).some(x=>x.id===d.id))n(x=>({...x,staff:(x.staff||[]).filter(p=>p.id!==d.id)}));else{const x={id:d.id,email:d.email||d.instagram_handle||"membro@vanta.com",role:d.role||"VANTA_STAFF",status:"PENDING",vipQuota:0};n(p=>({...p,staff:[...p.staff||[],x]}))}};return u.jsxs("div",{className:"space-y-8 p-8 bg-zinc-950 border border-white/5 rounded-[3rem] shadow-inner",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-[#d4af37]",children:"03. STAFF DA COMUNIDADE"}),u.jsx("span",{className:"px-2 py-0.5 bg-[#d4af37]/10 text-[#d4af37] text-[5px] font-black uppercase rounded-full border border-[#d4af37]/20",children:"Auto-Protocolo Ativo"})]}),u.jsx("p",{className:"text-lg font-serif italic text-white",children:"Equipe da Casa"})]}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.length>0?e.map(d=>{const g=(t.staff||[]).find(_=>_.id===d.id),x=!!g,p=(g==null?void 0:g.status)==="CONFIRMED";return u.jsxs("div",{className:`p-4 rounded-2xl border transition-all flex flex-col gap-4 ${x?"bg-white/5 border-[#d4af37]/30":"bg-black border-white/5 opacity-40 grayscale"}`,children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full border border-white/10 p-0.5 overflow-hidden",children:u.jsx(Kn,{src:d.avatar_url,gender:d.gender})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-black text-white uppercase tracking-widest",children:d.full_name}),u.jsx("span",{className:"text-[5px] text-[#d4af37] font-black uppercase",children:"Escala Fixa"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[6px] text-zinc-500 uppercase font-black",children:d.role}),x&&u.jsx("span",{className:`text-[5px] font-black px-1.5 py-0.5 rounded-full ${p?"bg-emerald-500 text-black":"bg-zinc-800 text-zinc-500"}`,children:p?"CONFIRMADO":"NOTIFICAO PENDENTE"})]})]})]}),u.jsx("button",{onClick:()=>i(()=>o(d)),className:`w-10 h-6 rounded-full relative transition-all ${x?"bg-[#d4af37]":"bg-zinc-800"}`,children:u.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${x?"left-5":"left-1"}`})})]}),x&&u.jsxs("div",{className:"pt-2 border-t border-white/5 flex items-center justify-between",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Cota Cortesia (VIP)"}),u.jsx("input",{type:"number",value:g.vipQuota||0,onChange:_=>r(d.id,parseInt(_.target.value)||0),className:"w-16 bg-black border border-white/10 rounded-lg p-2 text-[10px] text-center text-white outline-none focus:border-[#d4af37]/40",min:"0"})]})]},d.id)}):u.jsx("div",{className:"py-8 text-center opacity-20 border border-dashed border-white/5 rounded-2xl",children:u.jsx("p",{className:"text-[8px] font-black uppercase",children:"Nenhuma equipe fixa encontrada."})})})]})},JI=({eventForm:e,setEventForm:t,showBatchEditor:n,setShowBatchEditor:i,tempBatch:r,setTempBatch:o,tempVariation:d,setTempVariation:g,addVariationToBatch:x,confirmBatch:p})=>{const _=E=>{t({...e,batches:e.batches.filter(N=>N.id!==E)})};return u.jsxs("div",{className:"space-y-8 p-8 bg-zinc-950 border border-white/5 rounded-[3rem] shadow-inner",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-[#d4af37]",children:"02. LOTES & INGRESSOS"}),u.jsx("p",{className:"text-lg font-serif italic text-white",children:"Inventrio de Vendas"})]}),u.jsx("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Criar Lote"})]}),u.jsx("div",{className:"space-y-4",children:e.batches&&e.batches.length>0?e.batches.map(E=>u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-3xl space-y-4 relative group",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:E.name}),u.jsxs("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest",children:["Vlido at: ",E.validUntil,"  ",E.validUntilTime]})]}),u.jsx("button",{onClick:()=>_(E.id),className:"text-red-900/40 hover:text-red-500 transition-colors p-2",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:E.variations.map(N=>u.jsxs("div",{className:"flex justify-between items-center p-3 bg-black/40 rounded-xl border border-white/5",children:[u.jsxs("span",{className:"text-[8px] font-black text-zinc-300 uppercase",children:[N.area,"  ",N.gender]}),u.jsxs("span",{className:"text-[8px] font-black text-[#d4af37]",children:["R$ ",N.price]})]},N.id))})]},E.id)):u.jsx("div",{className:"py-8 text-center opacity-20 border border-dashed border-white/5 rounded-2xl",children:u.jsx("p",{className:"text-[8px] font-black uppercase",children:"Nenhum lote configurado."})})}),n&&u.jsx("div",{className:"fixed inset-0 z-[5000] bg-black/95 backdrop-blur-xl flex items-center justify-center p-6 animate-in zoom-in-95",children:u.jsxs("div",{className:"w-full max-w-md bg-zinc-950 border border-white/10 rounded-[3rem] p-8 space-y-6 shadow-2xl overflow-y-auto max-h-[90vh] no-scrollbar",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"CONFIGURAO DE LOTE"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase",children:"Novo Inventrio"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"text",value:r.name,onChange:E=>o({...r,name:E.target.value}),placeholder:"NOME DO LOTE (EX: PR-VENDA)",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"date",value:r.validUntil,onChange:E=>o({...r,validUntil:E.target.value}),className:"flex-1 bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none"}),u.jsx("input",{type:"time",value:r.validUntilTime,onChange:E=>o({...r,validUntilTime:E.target.value}),className:"w-24 bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none text-center"})]})]}),u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-3xl space-y-4",children:[u.jsx("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest block text-center",children:"ADICIONAR VARIAO"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("select",{value:d.area,onChange:E=>g({...d,area:E.target.value}),className:"bg-black border border-white/5 rounded-xl p-3 text-[8px] text-white uppercase outline-none",children:["Pista","VIP","Camarote","Backstage"].map(E=>u.jsx("option",{value:E,children:E.toUpperCase()},E))}),u.jsx("select",{value:d.gender,onChange:E=>g({...d,gender:E.target.value}),className:"bg-black border border-white/5 rounded-xl p-3 text-[8px] text-white uppercase outline-none",children:["Unisex","Masculino","Feminino"].map(E=>u.jsx("option",{value:E,children:E.toUpperCase()},E))}),u.jsx("input",{type:"number",placeholder:"PREO R$",value:d.price||"",onChange:E=>g({...d,price:parseFloat(E.target.value)}),className:"bg-black border border-white/5 rounded-xl p-3 text-[8px] text-white uppercase outline-none"}),u.jsx("input",{type:"number",placeholder:"QTD LIMIT",value:d.limit||"",onChange:E=>g({...d,limit:parseInt(E.target.value)}),className:"bg-black border border-white/5 rounded-xl p-3 text-[8px] text-white uppercase outline-none"})]}),u.jsx("button",{onClick:x,className:"w-full py-3 bg-white text-black text-[8px] font-black uppercase rounded-full",children:"Adicionar Variao"}),u.jsx("div",{className:"space-y-2",children:(r.variations||[]).map((E,N)=>u.jsxs("div",{className:"flex justify-between items-center text-[8px] text-zinc-400 border-b border-white/5 pb-1",children:[u.jsxs("span",{children:[E.area," / ",E.gender]}),u.jsxs("span",{children:["R$ ",E.price," (",E.limit," un)"]})]},N))})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:p,className:"flex-1 py-5 bg-[#d4af37] text-black text-[10px] font-black uppercase rounded-full shadow-xl active:scale-95",children:"Confirmar Lote"}),u.jsx("button",{onClick:()=>i(!1),className:"px-8 py-5 border border-white/10 text-zinc-500 text-[10px] font-black uppercase rounded-full",children:"Cancelar"})]})]})})]})},$v=({currentUser:e,selectedCommunityId:t,communities:n,events:i=[],eventForm:r,setEventForm:o,handleCreateEvent:d,eventImageInputRef:g,handleFileSelect:x,isProcessing:p,showBatchEditor:_,setShowBatchEditor:E,tempBatch:N,setTempBatch:k,tempVariation:O,setTempVariation:L,addVariationToBatch:P,confirmBatch:H,handleAddLegoRule:B,handleRemoveLegoRule:j,unitStaff:F=[],isEditing:Y,handleUpdateEvent:W})=>{const te=n.find(Ne=>Ne.id===t);if(!te)return null;const ne=e.role.toLowerCase(),ie=te.owner_id===e.id||(te.co_owners||[]).includes(e.id),_e=["admin","master","vanta_master","vanta_prod","produtor"].includes(ne)||ie,Ee=Ne=>{if(!_e){Fe.toast("error","Jurisdio Negada","Voc no possui permisso administrativa de nvel 1.");return}Ne()},pe=()=>{Fe.confirm({title:Y?"Editar Sesso":"Protocolar Sesso",message:Y?"Salvar alteraes?":`Confirmar a criao do evento ${r.title} em ${te.name}?`,confirmLabel:Y?"Salvar":"Publicar",onConfirm:()=>{Ee(Y&&W?W:d)}})};return u.jsxs("div",{className:"space-y-12 animate-in slide-in-from-bottom duration-500 pb-40",children:[u.jsx(KI,{eventForm:r,setEventForm:o,eventImageInputRef:g,handleFileSelect:x,canEditDetails:_e,handleRestrictedAction:Ee}),u.jsx(JI,{eventForm:r,setEventForm:o,showBatchEditor:_,setShowBatchEditor:E,tempBatch:N,setTempBatch:k,tempVariation:O,setTempVariation:L,addVariationToBatch:P,confirmBatch:H}),u.jsx(WI,{isEnabled:r.isListEnabled,onToggle:Ne=>o({...r,isListEnabled:Ne}),rules:r.guestListRules,onAddRule:B,onRemoveRule:j,readOnly:!_e}),u.jsx($I,{unitStaff:F,eventForm:r,setEventForm:o,handleRestrictedAction:Ee}),u.jsx("button",{onClick:pe,disabled:p,className:"w-full py-6 bg-[#d4af37] text-black text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all",children:p?Y?"Salvando Alteraes...":"Protocolando Misso...":Y?"Salvar Alteraes":"Publicar e Notificar Escala"})]})},ZI=()=>{const[e,t]=V.useState([]),[n,i]=V.useState([]),[r,o]=V.useState(!0),[d,g]=V.useState(""),[x,p]=V.useState("TODOS"),[_,E]=V.useState("name"),[N,k]=V.useState(null),[O,L]=V.useState(new Set);V.useEffect(()=>{P()},[]);const P=async()=>{if(Q){o(!0);try{const B=await Zm();i(B);const{data:j,error:F}=await Q.from("profiles").select("*").or("approved_at.not.is.null,is_globally_restricted.eq.true");if(F)throw F;t(j||[]);const{data:Y}=await Q.from("event_rsvps").select("user_id, events(start_at, end_at)").eq("status","going");if(Y){const W=new Date,te=Y.filter(ne=>{const ie=new Date(ne.events.start_at),_e=ne.events.end_at?new Date(ne.events.end_at):new Date(ie.getTime()+480*60*1e3);return W>=ie&&W<=_e}).map(ne=>ne.user_id);L(new Set(te))}}catch(B){console.error("[VANTA ADMIN] Erro ao carregar inteligncia de rede:",B)}finally{o(!1)}}},H=V.useMemo(()=>{let B=[...e];if(x==="RESTRITOS")B=B.filter(j=>j.is_globally_restricted);else if(x!=="TODOS"){const j=x.toLowerCase();B=B.filter(F=>F.curated_level&&F.curated_level.some(Y=>Y.toLowerCase()===j))}if(d){const j=d.toLowerCase();B=B.filter(F=>{var Y,W;return((Y=F.full_name)==null?void 0:Y.toLowerCase().includes(j))||((W=F.instagram_handle)==null?void 0:W.toLowerCase().includes(j))})}return B.sort((j,F)=>_==="name"?(j.full_name||"").localeCompare(F.full_name||""):_==="influence"?(F.followers_count||0)-(j.followers_count||0):_==="newest"?new Date(F.approved_at||0).getTime()-new Date(j.approved_at||0).getTime():0),B},[e,x,d,_]);return r?u.jsx("div",{className:"flex-1 flex items-center justify-center h-64",children:u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):u.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom duration-700 pb-32",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Ge.Search,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),u.jsx("input",{type:"text",value:d,onChange:B=>g(B.target.value),placeholder:"ESCANEAR NOME OU @INSTAGRAM...",className:"w-full bg-zinc-900/50 border border-white/5 rounded-full py-6 pl-14 pr-6 text-[10px] text-white uppercase tracking-[0.2em] outline-none focus:border-[#d4af37]/30 transition-all"})]}),u.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2 px-2",children:["TODOS",...n.map(B=>B.name.toUpperCase()),"RESTRITOS"].map(B=>u.jsx("button",{onClick:()=>p(B),className:`px-6 py-3 rounded-full text-[8px] font-black uppercase tracking-widest border transition-all shrink-0 ${x===B?"bg-white text-black border-white shadow-xl scale-105":"bg-zinc-900/40 text-zinc-600 border-white/5"}`,children:B},B))}),u.jsxs("div",{className:"flex justify-end gap-3 px-4",children:[u.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase self-center tracking-widest",children:"ORDEM:"}),[{id:"name",label:"A-Z"},{id:"influence",label:"INFLUNCIA"},{id:"newest",label:"RECENTES"}].map(B=>u.jsx("button",{onClick:()=>E(B.id),className:`text-[8px] font-black uppercase tracking-widest ${_===B.id?"text-[#d4af37]":"text-zinc-500"}`,children:B.label},B.id))]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:H.map(B=>{const j=O.has(B.id);return u.jsxs("div",{onClick:()=>k(B),className:"p-6 bg-zinc-900/20 border border-white/5 rounded-[2.5rem] flex items-center gap-6 group hover:bg-zinc-800/30 transition-all cursor-pointer active:scale-[0.98]",children:[u.jsxs("div",{className:`w-16 h-16 rounded-full border p-1 bg-black overflow-hidden shrink-0 relative transition-all ${j?"border-[#d4af37] shadow-[0_0_15px_rgba(212,175,55,0.3)]":"border-white/10"}`,children:[u.jsx(Kn,{src:B.avatar_url,gender:B.gender}),j&&u.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 bg-[#d4af37] border-2 border-black rounded-full animate-pulse shadow-lg"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-[12px] font-black text-white uppercase tracking-widest truncate",children:B.full_name||"Sem Nome"}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsxs("p",{className:"text-zinc-600 text-[9px] font-black uppercase",children:["@",B.instagram_handle]}),u.jsx("div",{className:"w-1 h-1 rounded-full bg-zinc-800"}),u.jsxs("span",{className:"text-[8px] text-[#d4af37] font-black uppercase",children:[(B.followers_count||0)/1e3>=1?`${((B.followers_count||0)/1e3).toFixed(1)}k`:B.followers_count," Reach"]})]})]}),u.jsx(Ge.ArrowLeft,{className:"w-4 h-4 text-zinc-800 rotate-180 group-hover:text-white transition-colors"})]},B.id)})}),N&&u.jsx("div",{className:"fixed inset-0 z-[11000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-4 animate-in fade-in duration-300 overflow-hidden",children:u.jsxs("div",{className:"w-full max-w-lg bg-zinc-950 border border-white/10 rounded-[3.5rem] overflow-hidden shadow-2xl flex flex-col max-h-[95vh]",children:[u.jsxs("header",{className:"px-10 pt-10 pb-6 flex justify-between items-center shrink-0",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.5em] mb-1",children:"AUDITORIA DE ELITE"}),u.jsx("h3",{className:"text-xl font-serif italic text-white uppercase tracking-tighter",children:"Ficha do Membro"})]}),u.jsx("button",{onClick:()=>k(null),className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-zinc-500 active:scale-90",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current rotate-45",children:u.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar px-10 pb-10 space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-40 h-40 rounded-full border p-1.5 bg-zinc-900 overflow-hidden shadow-[0_0_80px_rgba(212,175,55,0.15)] ${O.has(N.id)?"border-[#d4af37]":"border-white/10"}`,children:u.jsx(Kn,{src:N.avatar_url,gender:N.gender})}),u.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:N.curated_level.map(B=>u.jsx("div",{className:"bg-[#d4af37] text-black px-3 py-0.5 rounded-full text-[6px] font-black uppercase tracking-widest whitespace-nowrap shadow-xl",children:B},B))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h2",{className:"text-4xl font-serif italic text-white tracking-tighter uppercase leading-none",children:N.full_name}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsxs("p",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-[0.4em]",children:["@",N.instagram_handle]}),u.jsxs("p",{className:"text-[#d4af37] text-[8px] font-black uppercase tracking-[0.2em]",children:["Membro desde ",new Date(N.approved_at||0).toLocaleDateString("pt-BR")]})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"p-8 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] text-center",children:u.jsxs("p",{className:"text-zinc-400 text-[11px] leading-relaxed uppercase tracking-wider italic",children:['"',N.bio||"SEM BIOGRAFIA DEFINIDA PELO USURIO.",'"']})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl text-center space-y-1",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Reach Bruto"}),u.jsxs("p",{className:"text-xl font-serif italic text-white",children:[(N.followers_count||0).toLocaleString()," ",u.jsx("span",{className:"text-[10px] text-zinc-500 not-italic",children:"followers"})]})]}),u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl text-center space-y-1",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Cidade/Base"}),u.jsx("p",{className:"text-xl font-serif italic text-white truncate",children:N.city||"RIO"})]})]})]}),N.gallery&&Array.isArray(N.gallery)&&N.gallery.filter(Boolean).length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-[8px] text-zinc-700 font-black uppercase tracking-[0.4em] text-center italic",children:"Escaneamento Visual"}),u.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar",children:N.gallery.filter(Boolean).map((B,j)=>u.jsx("div",{className:"w-48 aspect-[3/4] shrink-0 rounded-[2.5rem] overflow-hidden border border-white/10 shadow-lg",children:u.jsx("img",{src:B,className:"w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-700",alt:""})},j))})]}),u.jsxs("div",{className:"space-y-4 pt-6 border-t border-white/5",children:[u.jsx("h4",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest text-center mb-6 italic",children:"Painel de Comandos SOBERANOS"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{className:"flex flex-col items-center justify-center p-6 bg-white text-black rounded-[2.5rem] gap-2 active:scale-95 transition-all",children:[u.jsx(Ge.Star,{className:"w-5 h-5"}),u.jsx("span",{className:"text-[8px] font-black uppercase",children:"Convite VIP"})]}),u.jsxs("button",{className:"flex flex-col items-center justify-center p-6 bg-zinc-900 border border-white/10 text-white rounded-[2.5rem] gap-2 active:scale-95 transition-all",children:[u.jsx(Ge.Message,{className:"w-5 h-5"}),u.jsx("span",{className:"text-[8px] font-black uppercase",children:"Broadcaster"})]})]}),u.jsx("button",{className:"w-full py-6 bg-red-600/10 border border-red-600/30 text-red-500 text-[10px] font-black uppercase rounded-[2.5rem] active:scale-95 transition-all mt-4",children:"Abrir Tribunal de tica"})]})]}),u.jsx("footer",{className:"p-8 bg-black/80 backdrop-blur-md border-t border-white/5 text-center shrink-0",children:u.jsx("p",{className:"text-[7px] text-zinc-800 font-black uppercase tracking-[0.4em] italic leading-loose",children:"CONFIDENCIAL: TODO O HISTRICO DE VISUALIZAO DE PERFIL EST SENDO AUDITADO."})})]})})]})};async function QI(e){if(!Q)return null;const{data:t,error:n}=await Q.from("event_guests").insert([{event_id:e.eventId,rule_id:e.ruleId,name:e.name.toUpperCase(),user_id:e.userId,added_by_email:e.addedByEmail,checked_in:!1,notify_on_arrival:e.notifyOnArrival||!1}]).select().single();return n?(console.error("[VANTA GUESTLIST] Erro ao adicionar convidado:",n),null):{id:t.id,eventId:t.event_id,name:t.name,userId:t.user_id,ruleId:t.rule_id,addedByEmail:t.added_by_email,checkedIn:t.checked_in,notifyOnArrival:t.notify_on_arrival}}async function e5(e,t){if(!Q)return!1;const{error:n}=await Q.from("event_guests").update({notify_on_arrival:!t}).eq("id",e);return!n}async function O3(e){if(!Q)return[];const{data:t,error:n}=await Q.from("event_guests").select("*").eq("event_id",e);return n||!t?[]:t.map(i=>({id:i.id,eventId:i.event_id,name:i.name,userId:i.user_id,ruleId:i.rule_id,addedByEmail:i.added_by_email,checkedIn:i.checked_in,checkInTime:i.checked_in_at?new Date(i.checked_in_at).getTime():void 0,notifyOnArrival:i.notify_on_arrival}))}async function t5(e,t,n){if(!Q)return!1;const{error:i}=await Q.from("event_guests").update({checked_in:!0,checked_in_at:new Date().toISOString(),checked_in_by_email:n}).eq("id",e).eq("event_id",t);return!i}const um=e=>{if(!e)return 1440;const[t,n]=e.split(":").map(Number);return t*60+n},dm=(e,t=new Date)=>{if(!e.deadline)return"ACTIVE";const n=t.getHours()*60+t.getMinutes(),i=um(e.deadline);return n>=i?"EXPIRED":"ACTIVE"},n5=e=>{const t=new Date;return[...e].sort((n,i)=>{const r=dm(n,t),o=dm(i,t);return r==="ACTIVE"&&o==="EXPIRED"?-1:r==="EXPIRED"&&o==="ACTIVE"?1:um(n.deadline)-um(i.deadline)})},i5=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.value||0),s5=(e,t)=>{const[n,i]=V.useState(new Date),[r,o]=V.useState("ALL"),[d,g]=V.useState([]),[x,p]=V.useState(""),[_,E]=V.useState(!1),[N,k]=V.useState(""),[O,L]=V.useState(""),P=t.role.toLowerCase(),H=["vanta_socio","socio"].includes(P),B=["vanta_portaria","portaria"].includes(P),j=["vanta_promoter","promoter"].includes(P),F=["vanta_prod","produtor"].includes(P),Y=["admin","master","vanta_master"].includes(P),W=B||Y;V.useEffect(()=>{const ue=setInterval(()=>i(new Date),6e4);return()=>clearInterval(ue)},[]);const te=async()=>{if(e){E(!0);try{const ue=await O3(e.id);g(j?ue.filter(X=>X.addedByEmail===t.email):ue)}catch(ue){console.error("[VANTA PORTARIA] Erro ao sincronizar convidados:",ue)}finally{E(!1)}}};V.useEffect(()=>{e&&te()},[e==null?void 0:e.id]);const ne=async ue=>{if(!e||!W)return;await t5(ue.id,e.id,t.email)&&(g(K=>K.map(J=>J.id===ue.id?{...J,checkedIn:!0,checkInTime:Date.now()}:J)),Fe.toast("success","Check-in Realizado",`${ue.name} est na casa.`))},ie=async()=>{var X;if(!e||!O||!N.trim())return;const ue=N.split(`
`).map(K=>K.trim()).filter(K=>K.length>2);if(ue.length!==0){if(j){const K=(e.staff||[]).find(Se=>Se.id===t.id),J=(X=K==null?void 0:K.promoterLimits)==null?void 0:X.find(Se=>Se.ruleId===O),oe=d.filter(Se=>Se.ruleId===O&&Se.addedByEmail===t.email).length,fe=((J==null?void 0:J.limit)||0)-oe;if(ue.length>fe){Fe.toast("warning","Limite Insuficiente",`Sua cota permite apenas mais ${fe} nomes.`);return}}E(!0);try{for(const K of ue)await QI({eventId:e.id,ruleId:O,name:K,addedByEmail:t.email});k(""),await te(),Fe.toast("success","Lista Protocolada",`${ue.length} nomes inseridos com sucesso.`)}catch{Fe.toast("error","Falha no Protocolo","Erro ao processar lista em lote.")}finally{E(!1)}}},_e=V.useMemo(()=>{if(!e||d.length===0)return null;const ue=d.length,X=d.filter(fe=>fe.checkedIn).length,K=ue>0?X/ue*100:0,J=(e.guestListRules||[]).map(fe=>{const Se=d.filter(ee=>ee.ruleId===fe.id);return{id:fe.id,label:`${fe.type} ${fe.gender} (${fe.area})`,total:Se.length,entries:Se.filter(ee=>ee.checkedIn).length}}).filter(fe=>fe.total>0),oe=[...new Set(d.map(fe=>fe.addedByEmail).filter(Boolean))].map(fe=>{const Se=d.filter(ae=>ae.addedByEmail===fe),ee=Se.filter(ae=>ae.checkedIn).length;return{email:fe.split("@")[0].toUpperCase(),fullEmail:fe,total:Se.length,entries:ee,conversion:Se.length>0?ee/Se.length*100:0}}).sort((fe,Se)=>Se.entries-fe.entries);return{totalGuests:ue,checkedInCount:X,occupancy:K,ruleStats:J,promoterRanking:oe}},[d,e]),Ee=V.useMemo(()=>n5((e==null?void 0:e.guestListRules)||[]),[e==null?void 0:e.guestListRules]),pe=V.useMemo(()=>Ee.filter(ue=>r==="ALL"?!0:ue.gender.toString().charAt(0).toUpperCase()===r),[Ee,r]),Ne=V.useMemo(()=>d.filter(ue=>{const X=ue.name.toLowerCase().includes(x.toLowerCase()),K=!j||ue.addedByEmail===t.email;return X&&K}),[d,x,j,t.email]);return{now:n,genderFilter:r,setGenderFilter:o,guests:d,searchQuery:x,setSearchQuery:p,isSyncing:_,loadGuests:te,handleCheckIn:ne,reportData:_e,filteredTimeline:pe,filteredGuests:Ne,isSocio:H,isPortaria:B,isPromoter:j,isProd:F,isMaster:Y,canCheckIn:W,bulkText:N,setBulkText:k,selectedRuleId:O,setSelectedRuleId:L,handleBulkAddGuests:ie}},r5=({filteredTimeline:e,genderFilter:t,setGenderFilter:n,now:i})=>u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex bg-zinc-950 rounded-full p-1 border border-white/5",children:[{id:"ALL",label:"TODOS"},{id:"M",label:"MASCULINO"},{id:"F",label:"FEMININO"}].map(r=>u.jsx("button",{onClick:()=>n(r.id),className:`flex-1 py-3 text-[8px] font-black uppercase tracking-widest rounded-full transition-all ${t===r.id?"bg-white text-black":"text-zinc-600"}`,children:r.label},r.id))}),u.jsx("div",{className:"space-y-4",children:e.map((r,o)=>{const g=dm(r,i)==="ACTIVE";return u.jsxs("div",{className:`p-6 rounded-[2.5rem] border transition-all duration-500 relative overflow-hidden flex items-center justify-between ${g?"bg-zinc-900 border-[#d4af37]/30 shadow-[0_0_30px_rgba(212,175,55,0.1)] scale-[1.02]":"bg-zinc-950 border-white/5 opacity-40 grayscale"}`,children:[g&&u.jsx("div",{className:"absolute left-0 top-0 w-1.5 h-full bg-[#d4af37]"}),u.jsxs("div",{className:"space-y-2 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`text-[7px] font-black uppercase tracking-[0.2em] px-2 py-0.5 rounded-full ${r.gender.toString().startsWith("F")?"bg-pink-500/20 text-pink-400":"bg-blue-500/20 text-blue-400"}`,children:r.gender}),u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:r.area})]}),u.jsxs("h4",{className:`text-xl font-serif italic uppercase tracking-tighter ${g?"text-white":"text-zinc-600"}`,children:[r.type," ",i5(r)]}),r.deadline&&u.jsx("span",{className:`text-[8px] font-black uppercase tracking-[0.3em] ${g?"text-[#d4af37]":"text-zinc-700"}`,children:g?`VLIDO AT ${r.deadline}`:`EXPIRADO S ${r.deadline}`})]})]},r.id||o)})})]}),a5=({searchQuery:e,setSearchQuery:t,filteredGuests:n,isPromoter:i,isSocio:r,canCheckIn:o,handleCheckIn:d,bulkText:g,setBulkText:x,selectedRuleId:p,setSelectedRuleId:_,handleBulkAddGuests:E,availableRules:N=[]})=>{const[k,O]=V.useState(!1),[L,P]=V.useState([]),H=n.map(j=>{const F=L.find(Y=>Y.id===j.id);return F?{...j,notifyOnArrival:F.notifyOnArrival}:j}),B=async(j,F)=>{if(j.stopPropagation(),await e5(F.id,!!F.notifyOnArrival)){const W={...F,notifyOnArrival:!F.notifyOnArrival};P(te=>[...te.filter(ie=>ie.id!==F.id),W])}};return u.jsxs("div",{className:"space-y-6",children:[i&&u.jsxs("div",{className:"p-6 bg-zinc-950 border border-[#d4af37]/20 rounded-[2.5rem] space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center px-2",children:[u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("h3",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"MINHA LISTA NOMINAL"}),u.jsx("p",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Adicione nomes separando por Enter"})]}),u.jsx("button",{onClick:()=>O(!k),className:"p-3 bg-white/5 border border-white/10 rounded-full text-[#d4af37] active:scale-90 transition-all",children:u.jsx(Ge.Plus,{className:`w-4 h-4 transition-transform ${k?"rotate-45":""}`})})]}),k&&u.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top duration-300 pt-2 border-t border-white/5",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Categoria de Acesso"}),u.jsxs("select",{value:p,onChange:j=>_==null?void 0:_(j.target.value),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[9px] text-white uppercase outline-none",children:[u.jsx("option",{value:"",children:"SELECIONE A REGRA..."}),N.map(j=>u.jsxs("option",{value:j.id,children:[j.type," ",j.gender," (",j.area,")"]},j.id))]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Nomes da Lista"}),u.jsx("textarea",{value:g,onChange:j=>x==null?void 0:x(j.target.value),placeholder:`NOME COMPLETO 1
NOME COMPLETO 2...`,className:"w-full bg-zinc-900 border border-white/5 rounded-[2rem] p-6 text-[10px] text-white uppercase outline-none h-40 resize-none"})]}),u.jsx("button",{onClick:E,disabled:!p||!(g!=null&&g.trim()),className:"w-full py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all",children:"Protocolar Nomes"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Ge.Search,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),u.jsx("input",{type:"text",value:e,onChange:j=>t(j.target.value),placeholder:i?"BUSCAR EM MEUS CONVIDADOS...":"BUSCAR NOME NA LISTA GERAL...",className:"w-full bg-zinc-900/50 border border-white/5 rounded-full py-5 pl-14 pr-6 text-[10px] text-white uppercase outline-none"})]}),u.jsx("div",{className:"space-y-3",children:H.length>0?H.map(j=>u.jsxs("div",{className:`p-5 rounded-3xl border flex items-center justify-between transition-all ${j.checkedIn?"bg-emerald-500/5 border-emerald-500/20 opacity-60":"bg-zinc-900 border-white/5"}`,children:[u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-4",children:[u.jsx("button",{onClick:F=>B(F,j),className:`transition-all active:scale-75 ${j.notifyOnArrival?"text-[#d4af37] drop-shadow-[0_0_8px_rgba(212,175,55,0.4)]":"text-zinc-800"}`,title:j.notifyOnArrival?"Aviso de chegada ativado":"Ativar aviso de chegada",children:u.jsx(Ge.Bell,{className:`w-4 h-4 ${j.notifyOnArrival?"fill-current":"stroke-current"}`})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:`text-[11px] font-black uppercase tracking-widest truncate ${j.checkedIn?"text-emerald-500":"text-white"}`,children:j.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[!i&&u.jsxs("span",{className:"text-[7px] text-zinc-600 font-black uppercase",children:["POR: ",j.addedByEmail.split("@")[0]]}),j.checkedIn&&u.jsxs("span",{className:"text-[6px] text-emerald-500/60 font-black uppercase",children:["ENTRADA: ",new Date(j.checkInTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]})]}),j.checkedIn?u.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-black",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:u.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}):o?u.jsx("button",{onClick:()=>d(j),className:"px-6 py-3 bg-white text-black text-[8px] font-black uppercase rounded-full shadow-xl",children:"Confirmar"}):u.jsx("div",{className:"px-4 py-2 border border-white/5 rounded-xl opacity-30",children:u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-widest italic",children:"Aguardando"})})]},j.id)):u.jsx("div",{className:"py-20 text-center opacity-20 border border-dashed border-white/10 rounded-[3rem]",children:u.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhum nome encontrado."})})})]})},o5=({reportData:e,isPromoter:t,currentUser:n})=>e?u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-20",children:[u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-8 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#d4af37]/5 rounded-full -mr-16 -mt-16 blur-3xl"}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"BALANO FINAL PROTOCOLADO"}),u.jsx("p",{className:"text-xl font-serif italic text-white",children:"Performance da Sesso"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Aproveitamento"}),u.jsxs("p",{className:"text-3xl font-serif italic text-[#d4af37]",children:[e.occupancy.toFixed(1),"%"]}),u.jsx("span",{className:"text-[6px] text-zinc-500 font-black uppercase tracking-widest block",children:"Taxa de Converso"})]}),u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Presenas"}),u.jsx("p",{className:"text-3xl font-serif italic text-white",children:e.checkedInCount}),u.jsxs("span",{className:"text-[6px] text-zinc-500 font-black uppercase tracking-widest block",children:["de ",e.totalGuests," nomes"]})]})]})]}),!t&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h4",{className:"text-[9px] text-zinc-600 font-black uppercase tracking-[0.4em] px-2 italic",children:"Distribuio por Categorias"}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.ruleStats.map(i=>u.jsxs("div",{className:"p-5 bg-zinc-900/40 border border-white/5 rounded-3xl flex items-center justify-between group hover:border-[#d4af37]/20 transition-all",children:[u.jsx("span",{className:"text-[9px] font-black text-white uppercase tracking-widest truncate max-w-[200px]",children:i.label}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-[10px] text-[#d4af37] font-black",children:[i.entries," IN"]}),u.jsxs("span",{className:"text-[6px] text-zinc-600 font-black",children:["DE ",i.total]})]}),u.jsx("div",{className:"w-12 h-1 bg-zinc-800 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#d4af37]",style:{width:`${i.entries/i.total*100}%`}})})]})]},i.id))})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h4",{className:"text-[9px] text-zinc-600 font-black uppercase tracking-[0.4em] px-2 italic",children:t?"Meu Histrico de Converso":"Ranking de Performance"}),u.jsxs("div",{className:"space-y-3",children:[e.promoterRanking.filter(i=>!t||i.fullEmail.toLowerCase()===n.email.toLowerCase()).map((i,r)=>u.jsxs("div",{className:`p-5 rounded-3xl flex items-center gap-5 transition-all ${i.fullEmail===n.email?"bg-zinc-900/60 border border-[#d4af37]/30 shadow-lg":"bg-black border border-white/5 opacity-80"}`,children:[!t&&u.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-900 border border-white/10 flex items-center justify-center shrink-0",children:u.jsx("span",{className:"text-[10px] font-black text-zinc-500",children:r+1})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h5",{className:"text-[10px] font-black text-white uppercase tracking-widest truncate",children:i.email}),u.jsxs("p",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest mt-0.5",children:[i.entries," Entradas efetivadas"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:`text-[11px] font-black ${i.conversion>=70?"text-emerald-500":i.conversion>=40?"text-[#d4af37]":"text-red-500"}`,children:[i.conversion.toFixed(0),"%"]}),u.jsx("p",{className:"text-[6px] text-zinc-700 font-black uppercase",children:"Eficincia"})]})]},i.fullEmail)),t&&e.promoterRanking.filter(i=>i.fullEmail.toLowerCase()===n.email.toLowerCase()).length===0&&u.jsx("div",{className:"py-10 text-center opacity-30",children:u.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"Nenhuma atividade registrada na sua lista."})})]})]})]}):null;var Ye;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var Jv=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Zv;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Zv||(Zv={}));function l5(e){return Object.values(Ye).includes(e)}var Lh;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Lh||(Lh={}));var c5=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Lh.SCAN_TYPE_CAMERA,Lh.SCAN_TYPE_FILE],e})(),M3=(function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Jv.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Jv.get(t))},e})(),Qv=(function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),fm;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(fm||(fm={}));var u5=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:fm.UNKWOWN_ERROR}},e})(),d5=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function Sa(e){return typeof e>"u"||e===null}var Cc=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),D3=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var r=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(r),d=Object.keys(t),g=0,x=d;g<x.length;g++){var p=x[g];if(o.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e})(),pd={exports:{}},f5=pd.exports,eb;function h5(){return eb||(eb=1,(function(e,t){(function(n,i){i(t)})(f5,(function(n){function i(U){return U==null}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,a){U.__proto__=a}||function(U,a){for(var c in a)a.hasOwnProperty(c)&&(U[c]=a[c])};function o(U,a){r(U,a);function c(){this.constructor=U}U.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}function d(U,a){var c=Object.setPrototypeOf;c?c(U,a):U.__proto__=a}function g(U,a){a===void 0&&(a=U.constructor);var c=Error.captureStackTrace;c&&c(U,a)}var x=(function(U){o(a,U);function a(c){var f=this.constructor,m=U.call(this,c)||this;return Object.defineProperty(m,"name",{value:f.name,enumerable:!1}),d(m,f.prototype),g(m),m}return a})(Error);class p extends x{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}p.kind="Exception";class _ extends p{}_.kind="ArgumentException";class E extends p{}E.kind="IllegalArgumentException";class N{constructor(a){if(this.binarizer=a,a===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,c){return this.binarizer.getBlackRow(a,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,c,f,m){const y=this.binarizer.getLuminanceSource().crop(a,c,f,m);return new N(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends p{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class O{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(a,c,f,m,y){for(;y--;)f[m++]=a[c++]}static currentTimeMillis(){return Date.now()}}class P extends p{}P.kind="IndexOutOfBoundsException";class H extends P{constructor(a=void 0,c=void 0){super(c),this.index=a,this.message=c}}H.kind="ArrayIndexOutOfBoundsException";class B{static fill(a,c){for(let f=0,m=a.length;f<m;f++)a[f]=c}static fillWithin(a,c,f,m){B.rangeCheck(a.length,c,f);for(let y=c;y<f;y++)a[y]=m}static rangeCheck(a,c,f){if(c>f)throw new E("fromIndex("+c+") > toIndex("+f+")");if(c<0)throw new H(c);if(f>a)throw new H(f)}static asList(...a){return a}static create(a,c,f){return Array.from({length:a}).map(y=>Array.from({length:c}).fill(f))}static createInt32Array(a,c,f){return Array.from({length:a}).map(y=>Int32Array.from({length:c}).fill(f))}static equals(a,c){if(!a||!c||!a.length||!c.length||a.length!==c.length)return!1;for(let f=0,m=a.length;f<m;f++)if(a[f]!==c[f])return!1;return!0}static hashCode(a){if(a===null)return 0;let c=1;for(const f of a)c=31*c+f;return c}static fillUint8Array(a,c){for(let f=0;f!==a.length;f++)a[f]=c}static copyOf(a,c){return a.slice(0,c)}static copyOfUint8Array(a,c){if(a.length<=c){const f=new Uint8Array(c);return f.set(a),f}return a.slice(0,c)}static copyOfRange(a,c,f){const m=f-c,y=new Int32Array(m);return L.arraycopy(a,c,y,0,m),y}static binarySearch(a,c,f){f===void 0&&(f=B.numberComparator);let m=0,y=a.length-1;for(;m<=y;){const b=y+m>>1,A=f(c,a[b]);if(A>0)m=b+1;else if(A<0)y=b-1;else return b}return-m-1}static numberComparator(a,c){return a-c}}class j{static numberOfTrailingZeros(a){let c;if(a===0)return 32;let f=31;return c=a<<16,c!==0&&(f-=16,a=c),c=a<<8,c!==0&&(f-=8,a=c),c=a<<4,c!==0&&(f-=4,a=c),c=a<<2,c!==0&&(f-=2,a=c),f-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let c=1;return a>>>16||(c+=16,a<<=16),a>>>24||(c+=8,a<<=8),a>>>28||(c+=4,a<<=4),a>>>30||(c+=2,a<<=2),c-=a>>>31,c}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,c){return Math.trunc(a/c)}static parseInt(a,c=void 0){return parseInt(a,c)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class F{constructor(a,c){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,c==null?this.bits=F.makeArray(a):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const c=F.makeArray(a);L.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const c=this.size;if(a>=c)return c;const f=this.bits;let m=Math.floor(a/32),y=f[m];y&=~((1<<(a&31))-1);const b=f.length;for(;y===0;){if(++m===b)return c;y=f[m]}const A=m*32+j.numberOfTrailingZeros(y);return A>c?c:A}getNextUnset(a){const c=this.size;if(a>=c)return c;const f=this.bits;let m=Math.floor(a/32),y=~f[m];y&=~((1<<(a&31))-1);const b=f.length;for(;y===0;){if(++m===b)return c;y=~f[m]}const A=m*32+j.numberOfTrailingZeros(y);return A>c?c:A}setBulk(a,c){this.bits[Math.floor(a/32)]=c}setRange(a,c){if(c<a||a<0||c>this.size)throw new E;if(c===a)return;c--;const f=Math.floor(a/32),m=Math.floor(c/32),y=this.bits;for(let b=f;b<=m;b++){const A=b>f?0:a&31,R=(2<<(b<m?31:c&31))-(1<<A);y[b]|=R}}clear(){const a=this.bits.length,c=this.bits;for(let f=0;f<a;f++)c[f]=0}isRange(a,c,f){if(c<a||a<0||c>this.size)throw new E;if(c===a)return!0;c--;const m=Math.floor(a/32),y=Math.floor(c/32),b=this.bits;for(let A=m;A<=y;A++){const T=A>m?0:a&31,M=(2<<(A<y?31:c&31))-(1<<T)&4294967295;if((b[A]&M)!==(f?M:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,c){if(c<0||c>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let f=c;f>0;f--)this.appendBit((a>>f-1&1)===1)}appendBitArray(a){const c=a.size;this.ensureCapacity(this.size+c);for(let f=0;f<c;f++)this.appendBit(a.get(f))}xor(a){if(this.size!==a.size)throw new E("Sizes don't match");const c=this.bits;for(let f=0,m=c.length;f<m;f++)c[f]^=a.bits[f]}toBytes(a,c,f,m){for(let y=0;y<m;y++){let b=0;for(let A=0;A<8;A++)this.get(a)&&(b|=1<<7-A),a++;c[f+y]=b}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),f=c+1,m=this.bits;for(let y=0;y<f;y++){let b=m[y];b=b>>1&1431655765|(b&1431655765)<<1,b=b>>2&858993459|(b&858993459)<<2,b=b>>4&252645135|(b&252645135)<<4,b=b>>8&16711935|(b&16711935)<<8,b=b>>16&65535|(b&65535)<<16,a[c-y]=b}if(this.size!==f*32){const y=f*32-this.size;let b=a[0]>>>y;for(let A=1;A<f;A++){const T=a[A];b|=T<<32-y,a[A-1]=b,b=T>>>y}a[f-1]=b}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof F))return!1;const c=a;return this.size===c.size&&B.equals(this.bits,c.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let a="";for(let c=0,f=this.size;c<f;c++)(c&7)===0&&(a+=" "),a+=this.get(c)?"X":".";return a}clone(){return new F(this.size,this.bits.slice())}}var Y;(function(U){U[U.OTHER=0]="OTHER",U[U.PURE_BARCODE=1]="PURE_BARCODE",U[U.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",U[U.TRY_HARDER=3]="TRY_HARDER",U[U.CHARACTER_SET=4]="CHARACTER_SET",U[U.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",U[U.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",U[U.ASSUME_GS1=7]="ASSUME_GS1",U[U.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",U[U.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",U[U.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var W=Y;class te extends p{static getFormatInstance(){return new te}}te.kind="FormatException";var ne;(function(U){U[U.Cp437=0]="Cp437",U[U.ISO8859_1=1]="ISO8859_1",U[U.ISO8859_2=2]="ISO8859_2",U[U.ISO8859_3=3]="ISO8859_3",U[U.ISO8859_4=4]="ISO8859_4",U[U.ISO8859_5=5]="ISO8859_5",U[U.ISO8859_6=6]="ISO8859_6",U[U.ISO8859_7=7]="ISO8859_7",U[U.ISO8859_8=8]="ISO8859_8",U[U.ISO8859_9=9]="ISO8859_9",U[U.ISO8859_10=10]="ISO8859_10",U[U.ISO8859_11=11]="ISO8859_11",U[U.ISO8859_13=12]="ISO8859_13",U[U.ISO8859_14=13]="ISO8859_14",U[U.ISO8859_15=14]="ISO8859_15",U[U.ISO8859_16=15]="ISO8859_16",U[U.SJIS=16]="SJIS",U[U.Cp1250=17]="Cp1250",U[U.Cp1251=18]="Cp1251",U[U.Cp1252=19]="Cp1252",U[U.Cp1256=20]="Cp1256",U[U.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",U[U.UTF8=22]="UTF8",U[U.ASCII=23]="ASCII",U[U.Big5=24]="Big5",U[U.GB18030=25]="GB18030",U[U.EUC_KR=26]="EUC_KR"})(ne||(ne={}));class ie{constructor(a,c,f,...m){this.valueIdentifier=a,this.name=f,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=m,ie.VALUE_IDENTIFIER_TO_ECI.set(a,this),ie.NAME_TO_ECI.set(f,this);const y=this.values;for(let b=0,A=y.length;b!==A;b++){const T=y[b];ie.VALUES_TO_ECI.set(T,this)}for(const b of m)ie.NAME_TO_ECI.set(b,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new te("incorect value");const c=ie.VALUES_TO_ECI.get(a);if(c===void 0)throw new te("incorect value");return c}static getCharacterSetECIByName(a){const c=ie.NAME_TO_ECI.get(a);if(c===void 0)throw new te("incorect value");return c}equals(a){if(!(a instanceof ie))return!1;const c=a;return this.getName()===c.getName()}}ie.VALUE_IDENTIFIER_TO_ECI=new Map,ie.VALUES_TO_ECI=new Map,ie.NAME_TO_ECI=new Map,ie.Cp437=new ie(ne.Cp437,Int32Array.from([0,2]),"Cp437"),ie.ISO8859_1=new ie(ne.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ie.ISO8859_2=new ie(ne.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ie.ISO8859_3=new ie(ne.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ie.ISO8859_4=new ie(ne.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ie.ISO8859_5=new ie(ne.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ie.ISO8859_6=new ie(ne.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ie.ISO8859_7=new ie(ne.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ie.ISO8859_8=new ie(ne.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ie.ISO8859_9=new ie(ne.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ie.ISO8859_10=new ie(ne.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ie.ISO8859_11=new ie(ne.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ie.ISO8859_13=new ie(ne.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ie.ISO8859_14=new ie(ne.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ie.ISO8859_15=new ie(ne.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ie.ISO8859_16=new ie(ne.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ie.SJIS=new ie(ne.SJIS,20,"SJIS","Shift_JIS"),ie.Cp1250=new ie(ne.Cp1250,21,"Cp1250","windows-1250"),ie.Cp1251=new ie(ne.Cp1251,22,"Cp1251","windows-1251"),ie.Cp1252=new ie(ne.Cp1252,23,"Cp1252","windows-1252"),ie.Cp1256=new ie(ne.Cp1256,24,"Cp1256","windows-1256"),ie.UnicodeBigUnmarked=new ie(ne.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ie.UTF8=new ie(ne.UTF8,26,"UTF8","UTF-8"),ie.ASCII=new ie(ne.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ie.Big5=new ie(ne.Big5,28,"Big5"),ie.GB18030=new ie(ne.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ie.EUC_KR=new ie(ne.EUC_KR,30,"EUC_KR","EUC-KR");class _e extends p{}_e.kind="UnsupportedOperationException";class Ee{static decode(a,c){const f=this.encodingName(c);return this.customDecoder?this.customDecoder(a,f):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(f)?this.decodeFallback(a,f):new TextDecoder(f).decode(a)}static shouldDecodeOnFallback(a){return!Ee.isBrowser()&&a==="ISO-8859-1"}static encode(a,c){const f=this.encodingName(c);return this.customEncoder?this.customEncoder(a,f):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof ie?a:ie.getCharacterSetECIByName(a)}static decodeFallback(a,c){const f=this.encodingCharacterSet(c);if(Ee.isDecodeFallbackSupported(f)){let m="";for(let y=0,b=a.length;y<b;y++){let A=a[y].toString(16);A.length<2&&(A="0"+A),m+="%"+A}return decodeURIComponent(m)}if(f.equals(ie.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new _e(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(ie.UTF8)||a.equals(ie.ISO8859_1)||a.equals(ie.ASCII)}static encodeFallback(a){const f=btoa(unescape(encodeURIComponent(a))).split(""),m=[];for(let y=0;y<f.length;y++)m.push(f[y].charCodeAt(0));return new Uint8Array(m)}}class pe{static castAsNonUtf8Char(a,c=null){const f=c?c.getName():this.ISO88591;return Ee.decode(new Uint8Array([a]),f)}static guessEncoding(a,c){if(c!=null&&c.get(W.CHARACTER_SET)!==void 0)return c.get(W.CHARACTER_SET).toString();const f=a.length;let m=!0,y=!0,b=!0,A=0,T=0,R=0,M=0,z=0,G=0,Z=0,re=0,le=0,he=0,be=0;const je=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Le=0;Le<f&&(m||y||b);Le++){const Me=a[Le]&255;b&&(A>0?(Me&128)===0?b=!1:A--:(Me&128)!==0&&((Me&64)===0?b=!1:(A++,(Me&32)===0?T++:(A++,(Me&16)===0?R++:(A++,(Me&8)===0?M++:b=!1))))),m&&(Me>127&&Me<160?m=!1:Me>159&&(Me<192||Me===215||Me===247)&&be++),y&&(z>0?Me<64||Me===127||Me>252?y=!1:z--:Me===128||Me===160||Me>239?y=!1:Me>160&&Me<224?(G++,re=0,Z++,Z>le&&(le=Z)):Me>127?(z++,Z=0,re++,re>he&&(he=re)):(Z=0,re=0))}return b&&A>0&&(b=!1),y&&z>0&&(y=!1),b&&(je||T+R+M>0)?pe.UTF8:y&&(pe.ASSUME_SHIFT_JIS||le>=3||he>=3)?pe.SHIFT_JIS:m&&y?le===2&&G===2||be*10>=f?pe.SHIFT_JIS:pe.ISO88591:m?pe.ISO88591:y?pe.SHIFT_JIS:b?pe.UTF8:pe.PLATFORM_DEFAULT_ENCODING}static format(a,...c){let f=-1;function m(b,A,T,R,M,z){if(b==="%%")return"%";if(c[++f]===void 0)return;b=R?parseInt(R.substr(1)):void 0;let G=M?parseInt(M.substr(1)):void 0,Z;switch(z){case"s":Z=c[f];break;case"c":Z=c[f][0];break;case"f":Z=parseFloat(c[f]).toFixed(b);break;case"p":Z=parseFloat(c[f]).toPrecision(b);break;case"e":Z=parseFloat(c[f]).toExponential(b);break;case"x":Z=parseInt(c[f]).toString(G||16);break;case"d":Z=parseFloat(parseInt(c[f],G||10).toPrecision(b)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(G);let re=parseInt(T),le=T&&T[0]+""=="0"?"0":" ";for(;Z.length<re;)Z=A!==void 0?Z+le:le+Z;return Z}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(y,m)}static getBytes(a,c){return Ee.encode(a,c)}static getCharCode(a,c=0){return a.charCodeAt(c)}static getCharAt(a){return String.fromCharCode(a)}}pe.SHIFT_JIS=ie.SJIS.getName(),pe.GB2312="GB2312",pe.ISO88591=ie.ISO8859_1.getName(),pe.EUC_JP="EUC_JP",pe.UTF8=ie.UTF8.getName(),pe.PLATFORM_DEFAULT_ENCODING=pe.UTF8,pe.ASSUME_SHIFT_JIS=!1;class Ne{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=pe.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,c,f){for(let m=c;c<c+f;m++)this.append(a[m]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,c){this.value=this.value.substr(0,a)+c+this.value.substr(a+1)}substring(a,c){return this.value.substring(a,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,c){this.value=this.value.substr(0,a)+c+this.value.substr(a+c.length)}}class ue{constructor(a,c,f,m){if(this.width=a,this.height=c,this.rowSize=f,this.bits=m,c==null&&(c=a),this.height=c,a<1||c<1)throw new E("Both dimensions must be greater than 0");f==null&&(f=Math.floor((a+31)/32)),this.rowSize=f,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const c=a.length,f=a[0].length,m=new ue(f,c);for(let y=0;y<c;y++){const b=a[y];for(let A=0;A<f;A++)b[A]&&m.set(A,y)}return m}static parseFromString(a,c,f){if(a===null)throw new E("stringRepresentation cannot be null");const m=new Array(a.length);let y=0,b=0,A=-1,T=0,R=0;for(;R<a.length;)if(a.charAt(R)===`
`||a.charAt(R)==="\r"){if(y>b){if(A===-1)A=y-b;else if(y-b!==A)throw new E("row lengths do not match");b=y,T++}R++}else if(a.substring(R,R+c.length)===c)R+=c.length,m[y]=!0,y++;else if(a.substring(R,R+f.length)===f)R+=f.length,m[y]=!1,y++;else throw new E("illegal character encountered: "+a.substring(R));if(y>b){if(A===-1)A=y-b;else if(y-b!==A)throw new E("row lengths do not match");T++}const M=new ue(A,T);for(let z=0;z<y;z++)m[z]&&M.set(Math.floor(z%A),Math.floor(z/A));return M}get(a,c){const f=c*this.rowSize+Math.floor(a/32);return(this.bits[f]>>>(a&31)&1)!==0}set(a,c){const f=c*this.rowSize+Math.floor(a/32);this.bits[f]|=1<<(a&31)&4294967295}unset(a,c){const f=c*this.rowSize+Math.floor(a/32);this.bits[f]&=~(1<<(a&31)&4294967295)}flip(a,c){const f=c*this.rowSize+Math.floor(a/32);this.bits[f]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new E("input matrix dimensions do not match");const c=new F(Math.floor(this.width/32)+1),f=this.rowSize,m=this.bits;for(let y=0,b=this.height;y<b;y++){const A=y*f,T=a.getRow(y,c).getBitArray();for(let R=0;R<f;R++)m[A+R]^=T[R]}}clear(){const a=this.bits,c=a.length;for(let f=0;f<c;f++)a[f]=0}setRegion(a,c,f,m){if(c<0||a<0)throw new E("Left and top must be nonnegative");if(m<1||f<1)throw new E("Height and width must be at least 1");const y=a+f,b=c+m;if(b>this.height||y>this.width)throw new E("The region must fit inside the matrix");const A=this.rowSize,T=this.bits;for(let R=c;R<b;R++){const M=R*A;for(let z=a;z<y;z++)T[M+Math.floor(z/32)]|=1<<(z&31)&4294967295}}getRow(a,c){c==null||c.getSize()<this.width?c=new F(this.width):c.clear();const f=this.rowSize,m=this.bits,y=a*f;for(let b=0;b<f;b++)c.setBulk(b*32,m[y+b]);return c}setRow(a,c){L.arraycopy(c.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),c=this.getHeight();let f=new F(a),m=new F(a);for(let y=0,b=Math.floor((c+1)/2);y<b;y++)f=this.getRow(y,f),m=this.getRow(c-1-y,m),f.reverse(),m.reverse(),this.setRow(y,m),this.setRow(c-1-y,f)}getEnclosingRectangle(){const a=this.width,c=this.height,f=this.rowSize,m=this.bits;let y=a,b=c,A=-1,T=-1;for(let R=0;R<c;R++)for(let M=0;M<f;M++){const z=m[R*f+M];if(z!==0){if(R<b&&(b=R),R>T&&(T=R),M*32<y){let G=0;for(;(z<<31-G&4294967295)===0;)G++;M*32+G<y&&(y=M*32+G)}if(M*32+31>A){let G=31;for(;!(z>>>G);)G--;M*32+G>A&&(A=M*32+G)}}}return A<y||T<b?null:Int32Array.from([y,b,A-y+1,T-b+1])}getTopLeftOnBit(){const a=this.rowSize,c=this.bits;let f=0;for(;f<c.length&&c[f]===0;)f++;if(f===c.length)return null;const m=f/a;let y=f%a*32;const b=c[f];let A=0;for(;(b<<31-A&4294967295)===0;)A++;return y+=A,Int32Array.from([y,m])}getBottomRightOnBit(){const a=this.rowSize,c=this.bits;let f=c.length-1;for(;f>=0&&c[f]===0;)f--;if(f<0)return null;const m=Math.floor(f/a);let y=Math.floor(f%a)*32;const b=c[f];let A=31;for(;!(b>>>A);)A--;return y+=A,Int32Array.from([y,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof ue))return!1;const c=a;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&B.equals(this.bits,c.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+B.hashCode(this.bits),a}toString(a="X ",c="  ",f=`
`){return this.buildToString(a,c,f)}buildToString(a,c,f){let m=new Ne;for(let y=0,b=this.height;y<b;y++){for(let A=0,T=this.width;A<T;A++)m.append(this.get(A,y)?a:c);m.append(f)}return m.toString()}clone(){return new ue(this.width,this.height,this.rowSize,this.bits.slice())}}class X extends p{static getNotFoundInstance(){return new X}}X.kind="NotFoundException";class K extends O{constructor(a){super(a),this.luminances=K.EMPTY,this.buckets=new Int32Array(K.LUMINANCE_BUCKETS)}getBlackRow(a,c){const f=this.getLuminanceSource(),m=f.getWidth();c==null||c.getSize()<m?c=new F(m):c.clear(),this.initArrays(m);const y=f.getRow(a,this.luminances),b=this.buckets;for(let T=0;T<m;T++)b[(y[T]&255)>>K.LUMINANCE_SHIFT]++;const A=K.estimateBlackPoint(b);if(m<3)for(let T=0;T<m;T++)(y[T]&255)<A&&c.set(T);else{let T=y[0]&255,R=y[1]&255;for(let M=1;M<m-1;M++){const z=y[M+1]&255;(R*4-T-z)/2<A&&c.set(M),T=R,R=z}}return c}getBlackMatrix(){const a=this.getLuminanceSource(),c=a.getWidth(),f=a.getHeight(),m=new ue(c,f);this.initArrays(c);const y=this.buckets;for(let T=1;T<5;T++){const R=Math.floor(f*T/5),M=a.getRow(R,this.luminances),z=Math.floor(c*4/5);for(let G=Math.floor(c/5);G<z;G++){const Z=M[G]&255;y[Z>>K.LUMINANCE_SHIFT]++}}const b=K.estimateBlackPoint(y),A=a.getMatrix();for(let T=0;T<f;T++){const R=T*c;for(let M=0;M<c;M++)(A[R+M]&255)<b&&m.set(M,T)}return m}createBinarizer(a){return new K(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const c=this.buckets;for(let f=0;f<K.LUMINANCE_BUCKETS;f++)c[f]=0}static estimateBlackPoint(a){const c=a.length;let f=0,m=0,y=0;for(let M=0;M<c;M++)a[M]>y&&(m=M,y=a[M]),a[M]>f&&(f=a[M]);let b=0,A=0;for(let M=0;M<c;M++){const z=M-m,G=a[M]*z*z;G>A&&(b=M,A=G)}if(m>b){const M=m;m=b,b=M}if(b-m<=c/16)throw new X;let T=b-1,R=-1;for(let M=b-1;M>m;M--){const z=M-m,G=z*z*(b-M)*(f-a[M]);G>R&&(T=M,R=G)}return T<<K.LUMINANCE_SHIFT}}K.LUMINANCE_BITS=5,K.LUMINANCE_SHIFT=8-K.LUMINANCE_BITS,K.LUMINANCE_BUCKETS=1<<K.LUMINANCE_BITS,K.EMPTY=Uint8ClampedArray.from([0]);class J extends K{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),c=a.getWidth(),f=a.getHeight();if(c>=J.MINIMUM_DIMENSION&&f>=J.MINIMUM_DIMENSION){const m=a.getMatrix();let y=c>>J.BLOCK_SIZE_POWER;(c&J.BLOCK_SIZE_MASK)!==0&&y++;let b=f>>J.BLOCK_SIZE_POWER;(f&J.BLOCK_SIZE_MASK)!==0&&b++;const A=J.calculateBlackPoints(m,y,b,c,f),T=new ue(c,f);J.calculateThresholdForBlock(m,y,b,c,f,A,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new J(a)}static calculateThresholdForBlock(a,c,f,m,y,b,A){const T=y-J.BLOCK_SIZE,R=m-J.BLOCK_SIZE;for(let M=0;M<f;M++){let z=M<<J.BLOCK_SIZE_POWER;z>T&&(z=T);const G=J.cap(M,2,f-3);for(let Z=0;Z<c;Z++){let re=Z<<J.BLOCK_SIZE_POWER;re>R&&(re=R);const le=J.cap(Z,2,c-3);let he=0;for(let je=-2;je<=2;je++){const Le=b[G+je];he+=Le[le-2]+Le[le-1]+Le[le]+Le[le+1]+Le[le+2]}const be=he/25;J.thresholdBlock(a,re,z,be,m,A)}}}static cap(a,c,f){return a<c?c:a>f?f:a}static thresholdBlock(a,c,f,m,y,b){for(let A=0,T=f*y+c;A<J.BLOCK_SIZE;A++,T+=y)for(let R=0;R<J.BLOCK_SIZE;R++)(a[T+R]&255)<=m&&b.set(c+R,f+A)}static calculateBlackPoints(a,c,f,m,y){const b=y-J.BLOCK_SIZE,A=m-J.BLOCK_SIZE,T=new Array(f);for(let R=0;R<f;R++){T[R]=new Int32Array(c);let M=R<<J.BLOCK_SIZE_POWER;M>b&&(M=b);for(let z=0;z<c;z++){let G=z<<J.BLOCK_SIZE_POWER;G>A&&(G=A);let Z=0,re=255,le=0;for(let be=0,je=M*m+G;be<J.BLOCK_SIZE;be++,je+=m){for(let Le=0;Le<J.BLOCK_SIZE;Le++){const Me=a[je+Le]&255;Z+=Me,Me<re&&(re=Me),Me>le&&(le=Me)}if(le-re>J.MIN_DYNAMIC_RANGE)for(be++,je+=m;be<J.BLOCK_SIZE;be++,je+=m)for(let Le=0;Le<J.BLOCK_SIZE;Le++)Z+=a[je+Le]&255}let he=Z>>J.BLOCK_SIZE_POWER*2;if(le-re<=J.MIN_DYNAMIC_RANGE&&(he=re/2,R>0&&z>0)){const be=(T[R-1][z]+2*T[R][z-1]+T[R-1][z-1])/4;re<be&&(he=be)}T[R][z]=he}}return T}}J.BLOCK_SIZE_POWER=3,J.BLOCK_SIZE=1<<J.BLOCK_SIZE_POWER,J.BLOCK_SIZE_MASK=J.BLOCK_SIZE-1,J.MINIMUM_DIMENSION=J.BLOCK_SIZE*5,J.MIN_DYNAMIC_RANGE=24;class oe{constructor(a,c){this.width=a,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,c,f,m){throw new _e("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new _e("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new _e("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let c=new Ne;for(let f=0;f<this.height;f++){const m=this.getRow(f,a);for(let y=0;y<this.width;y++){const b=m[y]&255;let A;b<64?A="#":b<128?A="+":b<192?A=".":A=" ",c.append(A)}c.append(`
`)}return c.toString()}}class fe extends oe{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,c){const f=this.delegate.getRow(a,c),m=this.getWidth();for(let y=0;y<m;y++)f[y]=255-(f[y]&255);return f}getMatrix(){const a=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),f=new Uint8ClampedArray(c);for(let m=0;m<c;m++)f[m]=255-(a[m]&255);return f}isCropSupported(){return this.delegate.isCropSupported()}crop(a,c,f,m){return new fe(this.delegate.crop(a,c,f,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new fe(this.delegate.rotateCounterClockwise45())}}class Se extends oe{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=Se.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const c=a.getContext("2d").getImageData(0,0,a.width,a.height);return Se.toGrayscaleBuffer(c.data,a.width,a.height)}static toGrayscaleBuffer(a,c,f){const m=new Uint8ClampedArray(c*f);for(let y=0,b=0,A=a.length;y<A;y+=4,b++){let T;if(a[y+3]===0)T=255;else{const M=a[y],z=a[y+1],G=a[y+2];T=306*M+601*z+117*G+512>>10}m[b]=T}return m}getRow(a,c){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const f=this.getWidth(),m=a*f;return c===null?c=this.buffer.slice(m,m+f):(c.length<f&&(c=new Uint8ClampedArray(f)),c.set(this.buffer.slice(m,m+f))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,c,f,m){return super.crop(a,c,f,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const c=this.getTempCanvasElement(),f=c.getContext("2d"),m=a*Se.DEGREE_TO_RADIANS,y=this.canvas.width,b=this.canvas.height,A=Math.ceil(Math.abs(Math.cos(m))*y+Math.abs(Math.sin(m))*b),T=Math.ceil(Math.abs(Math.sin(m))*y+Math.abs(Math.cos(m))*b);return c.width=A,c.height=T,f.translate(A/2,T/2),f.rotate(m),f.drawImage(this.canvas,y/-2,b/-2),this.buffer=Se.makeBufferFromCanvasImageData(c),this}invert(){return new fe(this)}}Se.DEGREE_TO_RADIANS=Math.PI/180;class ee{constructor(a,c,f){this.deviceId=a,this.label=c,this.kind="videoinput",this.groupId=f||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||lh||self||window||void 0)&&(globalThis||lh||self||window||void 0).__awaiter||function(U,a,c,f){function m(y){return y instanceof c?y:new c(function(b){b(y)})}return new(c||(c=Promise))(function(y,b){function A(M){try{R(f.next(M))}catch(z){b(z)}}function T(M){try{R(f.throw(M))}catch(z){b(z)}}function R(M){M.done?y(M.value):m(M.value).then(A,T)}R((f=f.apply(U,a||[])).next())})};class ve{constructor(a,c=500,f){this.reader=a,this.timeBetweenScansMillis=c,this._hints=f,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const f of a){const m=f.kind==="video"?"videoinput":f.kind;if(m!=="videoinput")continue;const y=f.deviceId||f.id,b=f.label||`Video device ${c.length+1}`,A=f.groupId,T={deviceId:y,label:b,kind:m,groupId:A};c.push(T)}return c})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new ee(c.deviceId,c.label))})}findDeviceById(a){return ae(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(f=>f.deviceId===a):null})}decodeFromInputVideoDevice(a,c){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,c)})}decodeOnceFromVideoDevice(a,c){return ae(this,void 0,void 0,function*(){this.reset();let f;a?f={deviceId:{exact:a}}:f={facingMode:"environment"};const m={video:f};return yield this.decodeOnceFromConstraints(m,c)})}decodeOnceFromConstraints(a,c){return ae(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(f,c)})}decodeOnceFromStream(a,c){return ae(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(a,c);return yield this.decodeOnce(f)})}decodeFromInputVideoDeviceContinuously(a,c,f){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,c,f)})}decodeFromVideoDevice(a,c,f){return ae(this,void 0,void 0,function*(){let m;a?m={deviceId:{exact:a}}:m={facingMode:"environment"};const y={video:m};return yield this.decodeFromConstraints(y,c,f)})}decodeFromConstraints(a,c,f){return ae(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(m,c,f)})}decodeFromStream(a,c,f){return ae(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(a,c);return yield this.decodeContinuously(m,f)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,c){return ae(this,void 0,void 0,function*(){const f=this.prepareVideoElement(c);return this.addVideoSource(f,a),this.videoElement=f,this.stream=a,yield this.playVideoOnLoadAsync(f),f})}playVideoOnLoadAsync(a){return new Promise((c,f)=>this.playVideoOnLoad(a,()=>c()))}playVideoOnLoad(a,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",c),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,c){const f=document.getElementById(a);if(!f)throw new _(`element with id '${a}' not found`);if(f.nodeName.toLowerCase()!==c.toLowerCase())throw new _(`element with id '${a}' must be an ${c} element`);return f}decodeFromImage(a,c){if(!a&&!c)throw new _("either imageElement with a src set or an url must be provided");return c&&!a?this.decodeFromImageUrl(c):this.decodeFromImageElement(a)}decodeFromVideo(a,c){if(!a&&!c)throw new _("Either an element with a src set or an URL must be provided");return c&&!a?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,c,f){if(a===void 0&&c===void 0)throw new _("Either an element with a src set or an URL must be provided");return c&&!a?this.decodeFromVideoUrlContinuously(c,f):this.decodeFromVideoElementContinuously(a,f)}decodeFromImageElement(a){if(!a)throw new _("An image element must be provided.");this.reset();const c=this.prepareImageElement(a);this.imageElement=c;let f;return this.isImageLoaded(c)?f=this.decodeOnce(c,!1,!0):f=this._decodeOnLoadImage(c),f}decodeFromVideoElement(a){const c=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(a,c){const f=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(f,c)}_decodeFromVideoElementSetup(a){if(!a)throw new _("A video element must be provided.");this.reset();const c=this.prepareVideoElement(a);return this.videoElement=c,c}decodeFromImageUrl(a){if(!a)throw new _("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const f=this._decodeOnLoadImage(c);return c.src=a,f}decodeFromVideoUrl(a){if(!a)throw new _("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElement(c);return c.src=a,f}decodeFromVideoUrlContinuously(a,c){if(!a)throw new _("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(f,c);return f.src=a,m}_decodeOnLoadImage(a){return new Promise((c,f)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(c,f),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,c){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,c)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let c;return typeof a>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof a=="string"&&(c=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(c=a),c}prepareVideoElement(a){let c;return!a&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof a=="string"&&(c=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(c=a),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(a,c=!0,f=!0){this._stopAsyncDecode=!1;const m=(y,b)=>{if(this._stopAsyncDecode){b(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const A=this.decode(a);y(A)}catch(A){const T=c&&A instanceof X,M=(A instanceof k||A instanceof te)&&f;if(T||M)return setTimeout(m,this._timeBetweenDecodingAttempts,y,b);b(A)}};return new Promise((y,b)=>m(y,b))}decodeContinuously(a,c){this._stopContinuousDecode=!1;const f=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(a);c(m,null),setTimeout(f,this.timeBetweenScansMillis)}catch(m){c(null,m);const y=m instanceof k||m instanceof te,b=m instanceof X;(y||b)&&setTimeout(f,this._timeBetweenDecodingAttempts)}};f()}decode(a){const c=this.createBinaryBitmap(a);return this.decodeBitmap(c)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,c,f){c||(c={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),f||(f=this.captureCanvasContext),f.drawImage(a,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(a,c,f=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),f||(f=this.captureCanvasContext),f.drawImage(a,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const c=this.getCaptureCanvas(a),f=new Se(c),m=new J(f);return new N(m)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const f=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=f}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const c=this.createCaptureCanvas(a);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let f,m;return typeof a<"u"&&(a instanceof HTMLVideoElement?(f=a.videoWidth,m=a.videoHeight):a instanceof HTMLImageElement&&(f=a.naturalWidth||a.width,m=a.naturalHeight||a.height)),c.style.width=f+"px",c.style.height=m+"px",c.width=f,c.height=m,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,c){try{a.srcObject=c}catch{a.src=URL.createObjectURL(c)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class Ie{constructor(a,c,f=c==null?0:8*c.length,m,y,b=L.currentTimeMillis()){this.text=a,this.rawBytes=c,this.numBits=f,this.resultPoints=m,this.format=y,this.timestamp=b,this.text=a,this.rawBytes=c,f==null?this.numBits=c==null?0:8*c.length:this.numBits=f,this.resultPoints=m,this.format=y,this.resultMetadata=null,b==null?this.timestamp=L.currentTimeMillis():this.timestamp=b}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,c)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const c=this.resultPoints;if(c===null)this.resultPoints=a;else if(a!==null&&a.length>0){const f=new Array(c.length+a.length);L.arraycopy(c,0,f,0,c.length),L.arraycopy(a,0,f,c.length,a.length),this.resultPoints=f}}getTimestamp(){return this.timestamp}toString(){return this.text}}var qe;(function(U){U[U.AZTEC=0]="AZTEC",U[U.CODABAR=1]="CODABAR",U[U.CODE_39=2]="CODE_39",U[U.CODE_93=3]="CODE_93",U[U.CODE_128=4]="CODE_128",U[U.DATA_MATRIX=5]="DATA_MATRIX",U[U.EAN_8=6]="EAN_8",U[U.EAN_13=7]="EAN_13",U[U.ITF=8]="ITF",U[U.MAXICODE=9]="MAXICODE",U[U.PDF_417=10]="PDF_417",U[U.QR_CODE=11]="QR_CODE",U[U.RSS_14=12]="RSS_14",U[U.RSS_EXPANDED=13]="RSS_EXPANDED",U[U.UPC_A=14]="UPC_A",U[U.UPC_E=15]="UPC_E",U[U.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qe||(qe={}));var Oe=qe,xt;(function(U){U[U.OTHER=0]="OTHER",U[U.ORIENTATION=1]="ORIENTATION",U[U.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",U[U.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",U[U.ISSUE_NUMBER=4]="ISSUE_NUMBER",U[U.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",U[U.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",U[U.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",U[U.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",U[U.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",U[U.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(xt||(xt={}));var mt=xt;class Ft{constructor(a,c,f,m,y=-1,b=-1){this.rawBytes=a,this.text=c,this.byteSegments=f,this.ecLevel=m,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=b,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class In{exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}static addOrSubtract(a,c){return a^c}}class En{constructor(a,c){if(c.length===0)throw new E;this.field=a;const f=c.length;if(f>1&&c[0]===0){let m=1;for(;m<f&&c[m]===0;)m++;m===f?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(f-m),L.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const c=this.coefficients;let f;if(a===1){f=0;for(let b=0,A=c.length;b!==A;b++){const T=c[b];f=In.addOrSubtract(f,T)}return f}f=c[0];const m=c.length,y=this.field;for(let b=1;b<m;b++)f=In.addOrSubtract(y.multiply(a,f),c[b]);return f}addOrSubtract(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let c=this.coefficients,f=a.coefficients;if(c.length>f.length){const b=c;c=f,f=b}let m=new Int32Array(f.length);const y=f.length-c.length;L.arraycopy(f,0,m,0,y);for(let b=y;b<f.length;b++)m[b]=In.addOrSubtract(c[b-y],f[b]);return new En(this.field,m)}multiply(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const c=this.coefficients,f=c.length,m=a.coefficients,y=m.length,b=new Int32Array(f+y-1),A=this.field;for(let T=0;T<f;T++){const R=c[T];for(let M=0;M<y;M++)b[T+M]=In.addOrSubtract(b[T+M],A.multiply(R,m[M]))}return new En(A,b)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const c=this.coefficients.length,f=this.field,m=new Int32Array(c),y=this.coefficients;for(let b=0;b<c;b++)m[b]=f.multiply(y[b],a);return new En(f,m)}multiplyByMonomial(a,c){if(a<0)throw new E;if(c===0)return this.field.getZero();const f=this.coefficients,m=f.length,y=new Int32Array(m+a),b=this.field;for(let A=0;A<m;A++)y[A]=b.multiply(f[A],c);return new En(b,y)}divide(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new E("Divide by 0");const c=this.field;let f=c.getZero(),m=this;const y=a.getCoefficient(a.getDegree()),b=c.inverse(y);for(;m.getDegree()>=a.getDegree()&&!m.isZero();){const A=m.getDegree()-a.getDegree(),T=c.multiply(m.getCoefficient(m.getDegree()),b),R=a.multiplyByMonomial(A,T),M=c.buildMonomial(A,T);f=f.addOrSubtract(M),m=m.addOrSubtract(R)}return[f,m]}toString(){let a="";for(let c=this.getDegree();c>=0;c--){let f=this.getCoefficient(c);if(f!==0){if(f<0?(a+=" - ",f=-f):a.length>0&&(a+=" + "),c===0||f!==1){const m=this.field.log(f);m===0?a+="1":m===1?a+="a":(a+="a^",a+=m)}c!==0&&(c===1?a+="x":(a+="x^",a+=c))}}return a}}class oi extends p{}oi.kind="ArithmeticException";class At extends In{constructor(a,c,f){super(),this.primitive=a,this.size=c,this.generatorBase=f;const m=new Int32Array(c);let y=1;for(let A=0;A<c;A++)m[A]=y,y*=2,y>=c&&(y^=a,y&=c-1);this.expTable=m;const b=new Int32Array(c);for(let A=0;A<c-1;A++)b[m[A]]=A;this.logTable=b,this.zero=new En(this,Int32Array.from([0])),this.one=new En(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,c){if(a<0)throw new E;if(c===0)return this.zero;const f=new Int32Array(a+1);return f[0]=c,new En(this,f)}inverse(a){if(a===0)throw new oi;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,c){return a===0||c===0?0:this.expTable[(this.logTable[a]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}At.AZTEC_DATA_12=new At(4201,4096,1),At.AZTEC_DATA_10=new At(1033,1024,1),At.AZTEC_DATA_6=new At(67,64,1),At.AZTEC_PARAM=new At(19,16,1),At.QR_CODE_FIELD_256=new At(285,256,0),At.DATA_MATRIX_FIELD_256=new At(301,256,1),At.AZTEC_DATA_8=At.DATA_MATRIX_FIELD_256,At.MAXICODE_FIELD_64=At.AZTEC_DATA_6;class bn extends p{}bn.kind="ReedSolomonException";class Jn extends p{}Jn.kind="IllegalStateException";class mn{constructor(a){this.field=a}decode(a,c){const f=this.field,m=new En(f,a),y=new Int32Array(c);let b=!0;for(let Z=0;Z<c;Z++){const re=m.evaluateAt(f.exp(Z+f.getGeneratorBase()));y[y.length-1-Z]=re,re!==0&&(b=!1)}if(b)return;const A=new En(f,y),T=this.runEuclideanAlgorithm(f.buildMonomial(c,1),A,c),R=T[0],M=T[1],z=this.findErrorLocations(R),G=this.findErrorMagnitudes(M,z);for(let Z=0;Z<z.length;Z++){const re=a.length-1-f.log(z[Z]);if(re<0)throw new bn("Bad error location");a[re]=At.addOrSubtract(a[re],G[Z])}}runEuclideanAlgorithm(a,c,f){if(a.getDegree()<c.getDegree()){const Z=a;a=c,c=Z}const m=this.field;let y=a,b=c,A=m.getZero(),T=m.getOne();for(;b.getDegree()>=(f/2|0);){let Z=y,re=A;if(y=b,A=T,y.isZero())throw new bn("r_{i-1} was zero");b=Z;let le=m.getZero();const he=y.getCoefficient(y.getDegree()),be=m.inverse(he);for(;b.getDegree()>=y.getDegree()&&!b.isZero();){const je=b.getDegree()-y.getDegree(),Le=m.multiply(b.getCoefficient(b.getDegree()),be);le=le.addOrSubtract(m.buildMonomial(je,Le)),b=b.addOrSubtract(y.multiplyByMonomial(je,Le))}if(T=le.multiply(A).addOrSubtract(re),b.getDegree()>=y.getDegree())throw new Jn("Division algorithm failed to reduce polynomial?")}const R=T.getCoefficient(0);if(R===0)throw new bn("sigmaTilde(0) was zero");const M=m.inverse(R),z=T.multiplyScalar(M),G=b.multiplyScalar(M);return[z,G]}findErrorLocations(a){const c=a.getDegree();if(c===1)return Int32Array.from([a.getCoefficient(1)]);const f=new Int32Array(c);let m=0;const y=this.field;for(let b=1;b<y.getSize()&&m<c;b++)a.evaluateAt(b)===0&&(f[m]=y.inverse(b),m++);if(m!==c)throw new bn("Error locator degree does not match number of roots");return f}findErrorMagnitudes(a,c){const f=c.length,m=new Int32Array(f),y=this.field;for(let b=0;b<f;b++){const A=y.inverse(c[b]);let T=1;for(let R=0;R<f;R++)if(b!==R){const M=y.multiply(c[R],A),z=(M&1)===0?M|1:M&-2;T=y.multiply(T,z)}m[b]=y.multiply(a.evaluateAt(A),y.inverse(T)),y.getGeneratorBase()!==0&&(m[b]=y.multiply(m[b],A))}return m}}var en;(function(U){U[U.UPPER=0]="UPPER",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.DIGIT=3]="DIGIT",U[U.PUNCT=4]="PUNCT",U[U.BINARY=5]="BINARY"})(en||(en={}));class zt{decode(a){this.ddata=a;let c=a.getBits(),f=this.extractBits(c),m=this.correctBits(f),y=zt.convertBoolArrayToByteArray(m),b=zt.getEncodedData(m),A=new Ft(y,b,null,null);return A.setNumBits(m.length),A}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let c=a.length,f=en.UPPER,m=en.UPPER,y="",b=0;for(;b<c;)if(m===en.BINARY){if(c-b<5)break;let A=zt.readCode(a,b,5);if(b+=5,A===0){if(c-b<11)break;A=zt.readCode(a,b,11)+31,b+=11}for(let T=0;T<A;T++){if(c-b<8){b=c;break}const R=zt.readCode(a,b,8);y+=pe.castAsNonUtf8Char(R),b+=8}m=f}else{let A=m===en.DIGIT?4:5;if(c-b<A)break;let T=zt.readCode(a,b,A);b+=A;let R=zt.getCharacter(m,T);R.startsWith("CTRL_")?(f=m,m=zt.getTable(R.charAt(5)),R.charAt(6)==="L"&&(f=m)):(y+=R,m=f)}return y}static getTable(a){switch(a){case"L":return en.LOWER;case"P":return en.PUNCT;case"M":return en.MIXED;case"D":return en.DIGIT;case"B":return en.BINARY;case"U":default:return en.UPPER}}static getCharacter(a,c){switch(a){case en.UPPER:return zt.UPPER_TABLE[c];case en.LOWER:return zt.LOWER_TABLE[c];case en.MIXED:return zt.MIXED_TABLE[c];case en.PUNCT:return zt.PUNCT_TABLE[c];case en.DIGIT:return zt.DIGIT_TABLE[c];default:throw new Jn("Bad table")}}correctBits(a){let c,f;this.ddata.getNbLayers()<=2?(f=6,c=At.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(f=8,c=At.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(f=10,c=At.AZTEC_DATA_10):(f=12,c=At.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),y=a.length/f;if(y<m)throw new te;let b=a.length%f,A=new Int32Array(y);for(let G=0;G<y;G++,b+=f)A[G]=zt.readCode(a,b,f);try{new mn(c).decode(A,y-m)}catch(G){throw new te(G)}let T=(1<<f)-1,R=0;for(let G=0;G<m;G++){let Z=A[G];if(Z===0||Z===T)throw new te;(Z===1||Z===T-1)&&R++}let M=new Array(m*f-R),z=0;for(let G=0;G<m;G++){let Z=A[G];if(Z===1||Z===T-1)M.fill(Z>1,z,z+f-1),z+=f-1;else for(let re=f-1;re>=0;--re)M[z++]=(Z&1<<re)!==0}return M}extractBits(a){let c=this.ddata.isCompact(),f=this.ddata.getNbLayers(),m=(c?11:14)+f*4,y=new Int32Array(m),b=new Array(this.totalBitsInLayer(f,c));if(c)for(let A=0;A<y.length;A++)y[A]=A;else{let A=m+1+2*j.truncDivision(j.truncDivision(m,2)-1,15),T=m/2,R=j.truncDivision(A,2);for(let M=0;M<T;M++){let z=M+j.truncDivision(M,15);y[T-M-1]=R-z-1,y[T+M]=R+z+1}}for(let A=0,T=0;A<f;A++){let R=(f-A)*4+(c?9:12),M=A*2,z=m-1-M;for(let G=0;G<R;G++){let Z=G*2;for(let re=0;re<2;re++)b[T+Z+re]=a.get(y[M+re],y[M+G]),b[T+2*R+Z+re]=a.get(y[M+G],y[z-re]),b[T+4*R+Z+re]=a.get(y[z-re],y[z-G]),b[T+6*R+Z+re]=a.get(y[z-G],y[M+re])}T+=R*8}return b}static readCode(a,c,f){let m=0;for(let y=c;y<c+f;y++)m<<=1,a[y]&&(m|=1);return m}static readByte(a,c){let f=a.length-c;return f>=8?zt.readCode(a,c,8):zt.readCode(a,c,f)<<8-f}static convertBoolArrayToByteArray(a){let c=new Uint8Array((a.length+7)/8);for(let f=0;f<c.length;f++)c[f]=zt.readByte(a,8*f);return c}totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ze{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,c,f,m){const y=a-f,b=c-m;return Math.sqrt(y*y+b*b)}static sum(a){let c=0;for(let f=0,m=a.length;f!==m;f++){const y=a[f];c+=y}return c}}class ft{static floatToIntBits(a){return a}}ft.MAX_VALUE=Number.MAX_SAFE_INTEGER;class De{constructor(a,c){this.x=a,this.y=c}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof De){const c=a;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*ft.floatToIntBits(this.x)+ft.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const c=this.distance(a[0],a[1]),f=this.distance(a[1],a[2]),m=this.distance(a[0],a[2]);let y,b,A;if(f>=c&&f>=m?(b=a[0],y=a[1],A=a[2]):m>=f&&m>=c?(b=a[1],y=a[0],A=a[2]):(b=a[2],y=a[0],A=a[1]),this.crossProductZ(y,b,A)<0){const T=y;y=A,A=T}a[0]=y,a[1]=b,a[2]=A}static distance(a,c){return ze.distance(a.x,a.y,c.x,c.y)}static crossProductZ(a,c,f){const m=c.x,y=c.y;return(f.x-m)*(a.y-y)-(f.y-y)*(a.x-m)}}class wt{constructor(a,c){this.bits=a,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Un extends wt{constructor(a,c,f,m,y){super(a,c),this.compact=f,this.nbDatablocks=m,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Nt{constructor(a,c,f,m){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),c==null&&(c=Nt.INIT_SIZE),f==null&&(f=a.getWidth()/2|0),m==null&&(m=a.getHeight()/2|0);const y=c/2|0;if(this.leftInit=f-y,this.rightInit=f+y,this.upInit=m-y,this.downInit=m+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let a=this.leftInit,c=this.rightInit,f=this.upInit,m=this.downInit,y=!1,b=!0,A=!1,T=!1,R=!1,M=!1,z=!1;const G=this.width,Z=this.height;for(;b;){b=!1;let re=!0;for(;(re||!T)&&c<G;)re=this.containsBlackPoint(f,m,c,!1),re?(c++,b=!0,T=!0):T||c++;if(c>=G){y=!0;break}let le=!0;for(;(le||!R)&&m<Z;)le=this.containsBlackPoint(a,c,m,!0),le?(m++,b=!0,R=!0):R||m++;if(m>=Z){y=!0;break}let he=!0;for(;(he||!M)&&a>=0;)he=this.containsBlackPoint(f,m,a,!1),he?(a--,b=!0,M=!0):M||a--;if(a<0){y=!0;break}let be=!0;for(;(be||!z)&&f>=0;)be=this.containsBlackPoint(a,c,f,!0),be?(f--,b=!0,z=!0):z||f--;if(f<0){y=!0;break}b&&(A=!0)}if(!y&&A){const re=c-a;let le=null;for(let Le=1;le===null&&Le<re;Le++)le=this.getBlackPointOnSegment(a,m-Le,a+Le,m);if(le==null)throw new X;let he=null;for(let Le=1;he===null&&Le<re;Le++)he=this.getBlackPointOnSegment(a,f+Le,a+Le,f);if(he==null)throw new X;let be=null;for(let Le=1;be===null&&Le<re;Le++)be=this.getBlackPointOnSegment(c,f+Le,c-Le,f);if(be==null)throw new X;let je=null;for(let Le=1;je===null&&Le<re;Le++)je=this.getBlackPointOnSegment(c,m-Le,c-Le,m);if(je==null)throw new X;return this.centerEdges(je,le,be,he)}else throw new X}getBlackPointOnSegment(a,c,f,m){const y=ze.round(ze.distance(a,c,f,m)),b=(f-a)/y,A=(m-c)/y,T=this.image;for(let R=0;R<y;R++){const M=ze.round(a+R*b),z=ze.round(c+R*A);if(T.get(M,z))return new De(M,z)}return null}centerEdges(a,c,f,m){const y=a.getX(),b=a.getY(),A=c.getX(),T=c.getY(),R=f.getX(),M=f.getY(),z=m.getX(),G=m.getY(),Z=Nt.CORR;return y<this.width/2?[new De(z-Z,G+Z),new De(A+Z,T+Z),new De(R-Z,M-Z),new De(y+Z,b-Z)]:[new De(z+Z,G+Z),new De(A+Z,T-Z),new De(R-Z,M+Z),new De(y-Z,b-Z)]}containsBlackPoint(a,c,f,m){const y=this.image;if(m){for(let b=a;b<=c;b++)if(y.get(b,f))return!0}else for(let b=a;b<=c;b++)if(y.get(f,b))return!0;return!1}}Nt.INIT_SIZE=10,Nt.CORR=1;class ls{static checkAndNudgePoints(a,c){const f=a.getWidth(),m=a.getHeight();let y=!0;for(let b=0;b<c.length&&y;b+=2){const A=Math.floor(c[b]),T=Math.floor(c[b+1]);if(A<-1||A>f||T<-1||T>m)throw new X;y=!1,A===-1?(c[b]=0,y=!0):A===f&&(c[b]=f-1,y=!0),T===-1?(c[b+1]=0,y=!0):T===m&&(c[b+1]=m-1,y=!0)}y=!0;for(let b=c.length-2;b>=0&&y;b-=2){const A=Math.floor(c[b]),T=Math.floor(c[b+1]);if(A<-1||A>f||T<-1||T>m)throw new X;y=!1,A===-1?(c[b]=0,y=!0):A===f&&(c[b]=f-1,y=!0),T===-1?(c[b+1]=0,y=!0):T===m&&(c[b+1]=m-1,y=!0)}}}class Zn{constructor(a,c,f,m,y,b,A,T,R){this.a11=a,this.a21=c,this.a31=f,this.a12=m,this.a22=y,this.a32=b,this.a13=A,this.a23=T,this.a33=R}static quadrilateralToQuadrilateral(a,c,f,m,y,b,A,T,R,M,z,G,Z,re,le,he){const be=Zn.quadrilateralToSquare(a,c,f,m,y,b,A,T);return Zn.squareToQuadrilateral(R,M,z,G,Z,re,le,he).times(be)}transformPoints(a){const c=a.length,f=this.a11,m=this.a12,y=this.a13,b=this.a21,A=this.a22,T=this.a23,R=this.a31,M=this.a32,z=this.a33;for(let G=0;G<c;G+=2){const Z=a[G],re=a[G+1],le=y*Z+T*re+z;a[G]=(f*Z+b*re+R)/le,a[G+1]=(m*Z+A*re+M)/le}}transformPointsWithValues(a,c){const f=this.a11,m=this.a12,y=this.a13,b=this.a21,A=this.a22,T=this.a23,R=this.a31,M=this.a32,z=this.a33,G=a.length;for(let Z=0;Z<G;Z++){const re=a[Z],le=c[Z],he=y*re+T*le+z;a[Z]=(f*re+b*le+R)/he,c[Z]=(m*re+A*le+M)/he}}static squareToQuadrilateral(a,c,f,m,y,b,A,T){const R=a-f+y-A,M=c-m+b-T;if(R===0&&M===0)return new Zn(f-a,y-f,a,m-c,b-m,c,0,0,1);{const z=f-y,G=A-y,Z=m-b,re=T-b,le=z*re-G*Z,he=(R*re-G*M)/le,be=(z*M-R*Z)/le;return new Zn(f-a+he*f,A-a+be*A,a,m-c+he*m,T-c+be*T,c,he,be,1)}}static quadrilateralToSquare(a,c,f,m,y,b,A,T){return Zn.squareToQuadrilateral(a,c,f,m,y,b,A,T).buildAdjoint()}buildAdjoint(){return new Zn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new Zn(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class jr extends ls{sampleGrid(a,c,f,m,y,b,A,T,R,M,z,G,Z,re,le,he,be,je,Le){const Me=Zn.quadrilateralToQuadrilateral(m,y,b,A,T,R,M,z,G,Z,re,le,he,be,je,Le);return this.sampleGridWithTransform(a,c,f,Me)}sampleGridWithTransform(a,c,f,m){if(c<=0||f<=0)throw new X;const y=new ue(c,f),b=new Float32Array(2*c);for(let A=0;A<f;A++){const T=b.length,R=A+.5;for(let M=0;M<T;M+=2)b[M]=M/2+.5,b[M+1]=R;m.transformPoints(b),ls.checkAndNudgePoints(a,b);try{for(let M=0;M<T;M+=2)a.get(Math.floor(b[M]),Math.floor(b[M+1]))&&y.set(M/2,A)}catch{throw new X}}return y}}class Qi{static setGridSampler(a){Qi.gridSampler=a}static getInstance(){return Qi.gridSampler}}Qi.gridSampler=new jr;class vi{constructor(a,c){this.x=a,this.y=c}toResultPoint(){return new De(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Lo{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let c=this.getMatrixCenter(),f=this.getBullsEyeCorners(c);if(a){let b=f[0];f[0]=f[2],f[2]=b}this.extractParameters(f);let m=this.sampleGrid(this.image,f[this.shift%4],f[(this.shift+1)%4],f[(this.shift+2)%4],f[(this.shift+3)%4]),y=this.getMatrixCornerPoints(f);return new Un(m,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new X;let c=2*this.nbCenterLayers,f=new Int32Array([this.sampleLine(a[0],a[1],c),this.sampleLine(a[1],a[2],c),this.sampleLine(a[2],a[3],c),this.sampleLine(a[3],a[0],c)]);this.shift=this.getRotation(f,c);let m=0;for(let b=0;b<4;b++){let A=f[(this.shift+b)%4];this.compact?(m<<=7,m+=A>>1&127):(m<<=10,m+=(A>>2&992)+(A>>1&31))}let y=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(a,c){let f=0;a.forEach((m,y,b)=>{let A=(m>>c-2<<1)+(m&1);f=(f<<3)+A}),f=((f&1)<<11)+(f>>1);for(let m=0;m<4;m++)if(j.bitCount(f^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new X}getCorrectedParameterData(a,c){let f,m;c?(f=7,m=2):(f=10,m=4);let y=f-m,b=new Int32Array(f);for(let T=f-1;T>=0;--T)b[T]=a&15,a>>=4;try{new mn(At.AZTEC_PARAM).decode(b,y)}catch{throw new X}let A=0;for(let T=0;T<m;T++)A=(A<<4)+b[T];return A}getBullsEyeCorners(a){let c=a,f=a,m=a,y=a,b=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let z=this.getFirstDifferent(c,b,1,-1),G=this.getFirstDifferent(f,b,1,1),Z=this.getFirstDifferent(m,b,-1,1),re=this.getFirstDifferent(y,b,-1,-1);if(this.nbCenterLayers>2){let le=this.distancePoint(re,z)*this.nbCenterLayers/(this.distancePoint(y,c)*(this.nbCenterLayers+2));if(le<.75||le>1.25||!this.isWhiteOrBlackRectangle(z,G,Z,re))break}c=z,f=G,m=Z,y=re,b=!b}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let A=new De(c.getX()+.5,c.getY()-.5),T=new De(f.getX()+.5,f.getY()+.5),R=new De(m.getX()-.5,m.getY()+.5),M=new De(y.getX()-.5,y.getY()-.5);return this.expandSquare([A,T,R,M],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,c,f,m;try{let A=new Nt(this.image).detect();a=A[0],c=A[1],f=A[2],m=A[3]}catch{let T=this.image.getWidth()/2,R=this.image.getHeight()/2;a=this.getFirstDifferent(new vi(T+7,R-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new vi(T+7,R+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new vi(T-7,R+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new vi(T-7,R-7),!1,-1,-1).toResultPoint()}let y=ze.round((a.getX()+m.getX()+c.getX()+f.getX())/4),b=ze.round((a.getY()+m.getY()+c.getY()+f.getY())/4);try{let A=new Nt(this.image,15,y,b).detect();a=A[0],c=A[1],f=A[2],m=A[3]}catch{a=this.getFirstDifferent(new vi(y+7,b-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new vi(y+7,b+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new vi(y-7,b+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new vi(y-7,b-7),!1,-1,-1).toResultPoint()}return y=ze.round((a.getX()+m.getX()+c.getX()+f.getX())/4),b=ze.round((a.getY()+m.getY()+c.getY()+f.getY())/4),new vi(y,b)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,c,f,m,y){let b=Qi.getInstance(),A=this.getDimension(),T=A/2-this.nbCenterLayers,R=A/2+this.nbCenterLayers;return b.sampleGrid(a,A,A,T,T,R,T,R,R,T,R,c.getX(),c.getY(),f.getX(),f.getY(),m.getX(),m.getY(),y.getX(),y.getY())}sampleLine(a,c,f){let m=0,y=this.distanceResultPoint(a,c),b=y/f,A=a.getX(),T=a.getY(),R=b*(c.getX()-a.getX())/y,M=b*(c.getY()-a.getY())/y;for(let z=0;z<f;z++)this.image.get(ze.round(A+z*R),ze.round(T+z*M))&&(m|=1<<f-z-1);return m}isWhiteOrBlackRectangle(a,c,f,m){let y=3;a=new vi(a.getX()-y,a.getY()+y),c=new vi(c.getX()-y,c.getY()-y),f=new vi(f.getX()+y,f.getY()-y),m=new vi(m.getX()+y,m.getY()+y);let b=this.getColor(m,a);if(b===0)return!1;let A=this.getColor(a,c);return A!==b||(A=this.getColor(c,f),A!==b)?!1:(A=this.getColor(f,m),A===b)}getColor(a,c){let f=this.distancePoint(a,c),m=(c.getX()-a.getX())/f,y=(c.getY()-a.getY())/f,b=0,A=a.getX(),T=a.getY(),R=this.image.get(a.getX(),a.getY()),M=Math.ceil(f);for(let G=0;G<M;G++)A+=m,T+=y,this.image.get(ze.round(A),ze.round(T))!==R&&b++;let z=b/f;return z>.1&&z<.9?0:z<=.1===R?1:-1}getFirstDifferent(a,c,f,m){let y=a.getX()+f,b=a.getY()+m;for(;this.isValid(y,b)&&this.image.get(y,b)===c;)y+=f,b+=m;for(y-=f,b-=m;this.isValid(y,b)&&this.image.get(y,b)===c;)y+=f;for(y-=f;this.isValid(y,b)&&this.image.get(y,b)===c;)b+=m;return b-=m,new vi(y,b)}expandSquare(a,c,f){let m=f/(2*c),y=a[0].getX()-a[2].getX(),b=a[0].getY()-a[2].getY(),A=(a[0].getX()+a[2].getX())/2,T=(a[0].getY()+a[2].getY())/2,R=new De(A+m*y,T+m*b),M=new De(A-m*y,T-m*b);y=a[1].getX()-a[3].getX(),b=a[1].getY()-a[3].getY(),A=(a[1].getX()+a[3].getX())/2,T=(a[1].getY()+a[3].getY())/2;let z=new De(A+m*y,T+m*b),G=new De(A-m*y,T-m*b);return[R,z,M,G]}isValid(a,c){return a>=0&&a<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(a){let c=ze.round(a.getX()),f=ze.round(a.getY());return this.isValid(c,f)}distancePoint(a,c){return ze.distance(a.getX(),a.getY(),c.getX(),c.getY())}distanceResultPoint(a,c){return ze.distance(a.getX(),a.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class ja{decode(a,c=null){let f=null,m=new Lo(a.getBlackMatrix()),y=null,b=null;try{let M=m.detectMirror(!1);y=M.getPoints(),this.reportFoundResultPoints(c,y),b=new zt().decode(M)}catch(M){f=M}if(b==null)try{let M=m.detectMirror(!0);y=M.getPoints(),this.reportFoundResultPoints(c,y),b=new zt().decode(M)}catch(M){throw f??M}let A=new Ie(b.getText(),b.getRawBytes(),b.getNumBits(),y,Oe.AZTEC,L.currentTimeMillis()),T=b.getByteSegments();T!=null&&A.putMetadata(mt.BYTE_SEGMENTS,T);let R=b.getECLevel();return R!=null&&A.putMetadata(mt.ERROR_CORRECTION_LEVEL,R),A}reportFoundResultPoints(a,c){if(a!=null){let f=a.get(W.NEED_RESULT_POINT_CALLBACK);f!=null&&c.forEach((m,y,b)=>{f.foundPossibleResultPoint(m)})}}reset(){}}class gu extends ve{constructor(a=500){super(new ja,a)}}class un{decode(a,c){try{return this.doDecode(a,c)}catch{if(c&&c.get(W.TRY_HARDER)===!0&&a.isRotateSupported()){const y=a.rotateCounterClockwise(),b=this.doDecode(y,c),A=b.getResultMetadata();let T=270;A!==null&&A.get(mt.ORIENTATION)===!0&&(T=T+A.get(mt.ORIENTATION)%360),b.putMetadata(mt.ORIENTATION,T);const R=b.getResultPoints();if(R!==null){const M=y.getHeight();for(let z=0;z<R.length;z++)R[z]=new De(M-R[z].getY()-1,R[z].getX())}return b}else throw new X}}reset(){}doDecode(a,c){const f=a.getWidth(),m=a.getHeight();let y=new F(f);const b=c&&c.get(W.TRY_HARDER)===!0,A=Math.max(1,m>>(b?8:5));let T;b?T=m:T=15;const R=Math.trunc(m/2);for(let M=0;M<T;M++){const z=Math.trunc((M+1)/2),G=(M&1)===0,Z=R+A*(G?z:-z);if(Z<0||Z>=m)break;try{y=a.getBlackRow(Z,y)}catch{continue}for(let re=0;re<2;re++){if(re===1&&(y.reverse(),c&&c.get(W.NEED_RESULT_POINT_CALLBACK)===!0)){const le=new Map;c.forEach((he,be)=>le.set(be,he)),le.delete(W.NEED_RESULT_POINT_CALLBACK),c=le}try{const le=this.decodeRow(Z,y,c);if(re===1){le.putMetadata(mt.ORIENTATION,180);const he=le.getResultPoints();he!==null&&(he[0]=new De(f-he[0].getX()-1,he[0].getY()),he[1]=new De(f-he[1].getX()-1,he[1].getY()))}return le}catch{}}}throw new X}static recordPattern(a,c,f){const m=f.length;for(let R=0;R<m;R++)f[R]=0;const y=a.getSize();if(c>=y)throw new X;let b=!a.get(c),A=0,T=c;for(;T<y;){if(a.get(T)!==b)f[A]++;else{if(++A===m)break;f[A]=1,b=!b}T++}if(!(A===m||A===m-1&&T===y))throw new X}static recordPatternInReverse(a,c,f){let m=f.length,y=a.get(c);for(;c>0&&m>=0;)a.get(--c)!==y&&(m--,y=!y);if(m>=0)throw new X;un.recordPattern(a,c+1,f)}static patternMatchVariance(a,c,f){const m=a.length;let y=0,b=0;for(let R=0;R<m;R++)y+=a[R],b+=c[R];if(y<b)return Number.POSITIVE_INFINITY;const A=y/b;f*=A;let T=0;for(let R=0;R<m;R++){const M=a[R],z=c[R]*A,G=M>z?M-z:z-M;if(G>f)return Number.POSITIVE_INFINITY;T+=G}return T/y}}class Pe extends un{static findStartPattern(a){const c=a.getSize(),f=a.getNextSet(0);let m=0,y=Int32Array.from([0,0,0,0,0,0]),b=f,A=!1;const T=6;for(let R=f;R<c;R++)if(a.get(R)!==A)y[m]++;else{if(m===T-1){let M=Pe.MAX_AVG_VARIANCE,z=-1;for(let G=Pe.CODE_START_A;G<=Pe.CODE_START_C;G++){const Z=un.patternMatchVariance(y,Pe.CODE_PATTERNS[G],Pe.MAX_INDIVIDUAL_VARIANCE);Z<M&&(M=Z,z=G)}if(z>=0&&a.isRange(Math.max(0,b-(R-b)/2),b,!1))return Int32Array.from([b,R,z]);b+=y[0]+y[1],y=y.slice(2,y.length-1),y[m-1]=0,y[m]=0,m--}else m++;y[m]=1,A=!A}throw new X}static decodeCode(a,c,f){un.recordPattern(a,f,c);let m=Pe.MAX_AVG_VARIANCE,y=-1;for(let b=0;b<Pe.CODE_PATTERNS.length;b++){const A=Pe.CODE_PATTERNS[b],T=this.patternMatchVariance(c,A,Pe.MAX_INDIVIDUAL_VARIANCE);T<m&&(m=T,y=b)}if(y>=0)return y;throw new X}decodeRow(a,c,f){const m=f&&f.get(W.ASSUME_GS1)===!0,y=Pe.findStartPattern(c),b=y[2];let A=0;const T=new Uint8Array(20);T[A++]=b;let R;switch(b){case Pe.CODE_START_A:R=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:R=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:R=Pe.CODE_CODE_C;break;default:throw new te}let M=!1,z=!1,G="",Z=y[0],re=y[1];const le=Int32Array.from([0,0,0,0,0,0]);let he=0,be=0,je=b,Le=0,Me=!0,St=!1,ht=!1;for(;!M;){const la=z;switch(z=!1,he=be,be=Pe.decodeCode(c,le,re),T[A++]=be,be!==Pe.CODE_STOP&&(Me=!0),be!==Pe.CODE_STOP&&(Le++,je+=Le*be),Z=re,re+=le.reduce((rf,Nu)=>rf+Nu,0),be){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new te}switch(R){case Pe.CODE_CODE_A:if(be<64)ht===St?G+=String.fromCharCode(32+be):G+=String.fromCharCode(32+be+128),ht=!1;else if(be<96)ht===St?G+=String.fromCharCode(be-64):G+=String.fromCharCode(be+64),ht=!1;else switch(be!==Pe.CODE_STOP&&(Me=!1),be){case Pe.CODE_FNC_1:m&&(G.length===0?G+="]C1":G+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!St&&ht?(St=!0,ht=!1):St&&ht?(St=!1,ht=!1):ht=!0;break;case Pe.CODE_SHIFT:z=!0,R=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:R=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:R=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:M=!0;break}break;case Pe.CODE_CODE_B:if(be<96)ht===St?G+=String.fromCharCode(32+be):G+=String.fromCharCode(32+be+128),ht=!1;else switch(be!==Pe.CODE_STOP&&(Me=!1),be){case Pe.CODE_FNC_1:m&&(G.length===0?G+="]C1":G+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!St&&ht?(St=!0,ht=!1):St&&ht?(St=!1,ht=!1):ht=!0;break;case Pe.CODE_SHIFT:z=!0,R=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:R=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:R=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:M=!0;break}break;case Pe.CODE_CODE_C:if(be<100)be<10&&(G+="0"),G+=be;else switch(be!==Pe.CODE_STOP&&(Me=!1),be){case Pe.CODE_FNC_1:m&&(G.length===0?G+="]C1":G+="");break;case Pe.CODE_CODE_A:R=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:R=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:M=!0;break}break}la&&(R=R===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const Vn=re-Z;if(re=c.getNextUnset(re),!c.isRange(re,Math.min(c.getSize(),re+(re-Z)/2),!1))throw new X;if(je-=Le*he,je%103!==he)throw new k;const fs=G.length;if(fs===0)throw new X;fs>0&&Me&&(R===Pe.CODE_CODE_C?G=G.substring(0,fs-2):G=G.substring(0,fs-1));const Bi=(y[1]+y[0])/2,rn=Z+Vn/2,_i=T.length,is=new Uint8Array(_i);for(let la=0;la<_i;la++)is[la]=T[la];const Qa=[new De(Bi,a),new De(rn,a)];return new Ie(G,is,0,Qa,Oe.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class on extends un{constructor(a=!1,c=!1){super(),this.usingCheckDigit=a,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,c,f){let m=this.counters;m.fill(0),this.decodeRowResult="";let y=on.findAsteriskPattern(c,m),b=c.getNextSet(y[1]),A=c.getSize(),T,R;do{on.recordPattern(c,b,m);let le=on.toNarrowWidePattern(m);if(le<0)throw new X;T=on.patternToChar(le),this.decodeRowResult+=T,R=b;for(let he of m)b+=he;b=c.getNextSet(b)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let M=0;for(let le of m)M+=le;let z=b-R-M;if(b!==A&&z*2<M)throw new X;if(this.usingCheckDigit){let le=this.decodeRowResult.length-1,he=0;for(let be=0;be<le;be++)he+=on.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(be));if(this.decodeRowResult.charAt(le)!==on.ALPHABET_STRING.charAt(he%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,le)}if(this.decodeRowResult.length===0)throw new X;let G;this.extendedMode?G=on.decodeExtended(this.decodeRowResult):G=this.decodeRowResult;let Z=(y[1]+y[0])/2,re=R+M/2;return new Ie(G,null,0,[new De(Z,a),new De(re,a)],Oe.CODE_39,new Date().getTime())}static findAsteriskPattern(a,c){let f=a.getSize(),m=a.getNextSet(0),y=0,b=m,A=!1,T=c.length;for(let R=m;R<f;R++)if(a.get(R)!==A)c[y]++;else{if(y===T-1){if(this.toNarrowWidePattern(c)===on.ASTERISK_ENCODING&&a.isRange(Math.max(0,b-Math.floor((R-b)/2)),b,!1))return[b,R];b+=c[0]+c[1],c.copyWithin(0,2,2+y-1),c[y-1]=0,c[y]=0,y--}else y++;c[y]=1,A=!A}throw new X}static toNarrowWidePattern(a){let c=a.length,f=0,m;do{let y=2147483647;for(let T of a)T<y&&T>f&&(y=T);f=y,m=0;let b=0,A=0;for(let T=0;T<c;T++){let R=a[T];R>f&&(A|=1<<c-1-T,m++,b+=R)}if(m===3){for(let T=0;T<c&&m>0;T++){let R=a[T];if(R>f&&(m--,R*2>=b))return-1}return A}}while(m>3);return-1}static patternToChar(a){for(let c=0;c<on.CHARACTER_ENCODINGS.length;c++)if(on.CHARACTER_ENCODINGS[c]===a)return on.ALPHABET_STRING.charAt(c);if(a===on.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(a){let c=a.length,f="";for(let m=0;m<c;m++){let y=a.charAt(m);if(y==="+"||y==="$"||y==="%"||y==="/"){let b=a.charAt(m+1),A="\0";switch(y){case"+":if(b>="A"&&b<="Z")A=String.fromCharCode(b.charCodeAt(0)+32);else throw new te;break;case"$":if(b>="A"&&b<="Z")A=String.fromCharCode(b.charCodeAt(0)-64);else throw new te;break;case"%":if(b>="A"&&b<="E")A=String.fromCharCode(b.charCodeAt(0)-38);else if(b>="F"&&b<="J")A=String.fromCharCode(b.charCodeAt(0)-11);else if(b>="K"&&b<="O")A=String.fromCharCode(b.charCodeAt(0)+16);else if(b>="P"&&b<="T")A=String.fromCharCode(b.charCodeAt(0)+43);else if(b==="U")A="\0";else if(b==="V")A="@";else if(b==="W")A="`";else if(b==="X"||b==="Y"||b==="Z")A="";else throw new te;break;case"/":if(b>="A"&&b<="O")A=String.fromCharCode(b.charCodeAt(0)-32);else if(b==="Z")A=":";else throw new te;break}f+=A,m++}else f+=y}return f}}on.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",on.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],on.ASTERISK_ENCODING=148;class yt extends un{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,c,f){let m=this.decodeStart(c),y=this.decodeEnd(c),b=new Ne;yt.decodeMiddle(c,m[1],y[0],b);let A=b.toString(),T=null;f!=null&&(T=f.get(W.ALLOWED_LENGTHS)),T==null&&(T=yt.DEFAULT_ALLOWED_LENGTHS);let R=A.length,M=!1,z=0;for(let re of T){if(R===re){M=!0;break}re>z&&(z=re)}if(!M&&R>z&&(M=!0),!M)throw new te;const G=[new De(m[1],a),new De(y[0],a)];return new Ie(A,null,0,G,Oe.ITF,new Date().getTime())}static decodeMiddle(a,c,f,m){let y=new Int32Array(10),b=new Int32Array(5),A=new Int32Array(5);for(y.fill(0),b.fill(0),A.fill(0);c<f;){un.recordPattern(a,c,y);for(let R=0;R<5;R++){let M=2*R;b[R]=y[M],A[R]=y[M+1]}let T=yt.decodeDigit(b);m.append(T.toString()),T=this.decodeDigit(A),m.append(T.toString()),y.forEach(function(R){c+=R})}}decodeStart(a){let c=yt.skipWhiteSpace(a),f=yt.findGuardPattern(a,c,yt.START_PATTERN);return this.narrowLineWidth=(f[1]-f[0])/4,this.validateQuietZone(a,f[0]),f}validateQuietZone(a,c){let f=this.narrowLineWidth*10;f=f<c?f:c;for(let m=c-1;f>0&&m>=0&&!a.get(m);m--)f--;if(f!==0)throw new X}static skipWhiteSpace(a){const c=a.getSize(),f=a.getNextSet(0);if(f===c)throw new X;return f}decodeEnd(a){a.reverse();try{let c=yt.skipWhiteSpace(a),f;try{f=yt.findGuardPattern(a,c,yt.END_PATTERN_REVERSED[0])}catch(y){y instanceof X&&(f=yt.findGuardPattern(a,c,yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,f[0]);let m=f[0];return f[0]=a.getSize()-f[1],f[1]=a.getSize()-m,f}finally{a.reverse()}}static findGuardPattern(a,c,f){let m=f.length,y=new Int32Array(m),b=a.getSize(),A=!1,T=0,R=c;y.fill(0);for(let M=c;M<b;M++)if(a.get(M)!==A)y[T]++;else{if(T===m-1){if(un.patternMatchVariance(y,f,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return[R,M];R+=y[0]+y[1],L.arraycopy(y,2,y,0,T-1),y[T-1]=0,y[T]=0,T--}else T++;y[T]=1,A=!A}throw new X}static decodeDigit(a){let c=yt.MAX_AVG_VARIANCE,f=-1,m=yt.PATTERNS.length;for(let y=0;y<m;y++){let b=yt.PATTERNS[y],A=un.patternMatchVariance(a,b,yt.MAX_INDIVIDUAL_VARIANCE);A<c?(c=A,f=y):A===c&&(f=-1)}if(f>=0)return f%10;throw new X}}yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yt.MAX_AVG_VARIANCE=.38,yt.MAX_INDIVIDUAL_VARIANCE=.5,yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yt.START_PATTERN=Int32Array.from([1,1,1,1]),yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class An extends un{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let c=!1,f,m=0,y=Int32Array.from([0,0,0]);for(;!c;){y=Int32Array.from([0,0,0]),f=An.findGuardPattern(a,m,!1,this.START_END_PATTERN,y);let b=f[0];m=f[1];let A=b-(m-b);A>=0&&(c=a.isRange(A,b,!1))}return f}static checkChecksum(a){return An.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let c=a.length;if(c===0)return!1;let f=parseInt(a.charAt(c-1),10);return An.getStandardUPCEANChecksum(a.substring(0,c-1))===f}static getStandardUPCEANChecksum(a){let c=a.length,f=0;for(let m=c-1;m>=0;m-=2){let y=a.charAt(m).charCodeAt(0)-48;if(y<0||y>9)throw new te;f+=y}f*=3;for(let m=c-2;m>=0;m-=2){let y=a.charAt(m).charCodeAt(0)-48;if(y<0||y>9)throw new te;f+=y}return(1e3-f)%10}static decodeEnd(a,c){return An.findGuardPattern(a,c,!1,An.START_END_PATTERN,new Int32Array(An.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,c,f,m){return this.findGuardPattern(a,c,f,m,new Int32Array(m.length))}static findGuardPattern(a,c,f,m,y){let b=a.getSize();c=f?a.getNextUnset(c):a.getNextSet(c);let A=0,T=c,R=m.length,M=f;for(let z=c;z<b;z++)if(a.get(z)!==M)y[A]++;else{if(A===R-1){if(un.patternMatchVariance(y,m,An.MAX_INDIVIDUAL_VARIANCE)<An.MAX_AVG_VARIANCE)return Int32Array.from([T,z]);T+=y[0]+y[1];let G=y.slice(2,y.length-1);for(let Z=0;Z<A-1;Z++)y[Z]=G[Z];y[A-1]=0,y[A]=0,A--}else A++;y[A]=1,M=!M}throw new X}static decodeDigit(a,c,f,m){this.recordPattern(a,f,c);let y=this.MAX_AVG_VARIANCE,b=-1,A=m.length;for(let T=0;T<A;T++){let R=m[T],M=un.patternMatchVariance(c,R,An.MAX_INDIVIDUAL_VARIANCE);M<y&&(y=M,b=T)}if(b>=0)return b;throw new X}}An.MAX_AVG_VARIANCE=.48,An.MAX_INDIVIDUAL_VARIANCE=.7,An.START_END_PATTERN=Int32Array.from([1,1,1]),An.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),An.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),An.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ba{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,c,f){let m=this.decodeRowStringBuffer,y=this.decodeMiddle(c,f,m),b=m.toString(),A=Ba.parseExtensionString(b),T=[new De((f[0]+f[1])/2,a),new De(y,a)],R=new Ie(b,null,0,T,Oe.UPC_EAN_EXTENSION,new Date().getTime());return A!=null&&R.putAllMetadata(A),R}decodeMiddle(a,c,f){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=a.getSize(),b=c[1],A=0;for(let R=0;R<5&&b<y;R++){let M=An.decodeDigit(a,m,b,An.L_AND_G_PATTERNS);f+=String.fromCharCode(48+M%10);for(let z of m)b+=z;M>=10&&(A|=1<<4-R),R!==4&&(b=a.getNextSet(b),b=a.getNextUnset(b))}if(f.length!==5)throw new X;let T=this.determineCheckDigit(A);if(Ba.extensionChecksum(f.toString())!==T)throw new X;return b}static extensionChecksum(a){let c=a.length,f=0;for(let m=c-2;m>=0;m-=2)f+=a.charAt(m).charCodeAt(0)-48;f*=3;for(let m=c-1;m>=0;m-=2)f+=a.charAt(m).charCodeAt(0)-48;return f*=3,f%10}determineCheckDigit(a){for(let c=0;c<10;c++)if(a===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new X}static parseExtensionString(a){if(a.length!==5)return null;let c=Ba.parseExtension5String(a);return c==null?null:new Map([[mt.SUGGESTED_PRICE,c]])}static parseExtension5String(a){let c;switch(a.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let f=parseInt(a.substring(1)),m=(f/100).toString(),y=f%100,b=y<10?"0"+y:y.toString();return c+m+"."+b}}class kl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,c,f){let m=this.decodeRowStringBuffer,y=this.decodeMiddle(c,f,m),b=m.toString(),A=kl.parseExtensionString(b),T=[new De((f[0]+f[1])/2,a),new De(y,a)],R=new Ie(b,null,0,T,Oe.UPC_EAN_EXTENSION,new Date().getTime());return A!=null&&R.putAllMetadata(A),R}decodeMiddle(a,c,f){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=a.getSize(),b=c[1],A=0;for(let T=0;T<2&&b<y;T++){let R=An.decodeDigit(a,m,b,An.L_AND_G_PATTERNS);f+=String.fromCharCode(48+R%10);for(let M of m)b+=M;R>=10&&(A|=1<<1-T),T!==1&&(b=a.getNextSet(b),b=a.getNextUnset(b))}if(f.length!==2)throw new X;if(parseInt(f.toString())%4!==A)throw new X;return b}static parseExtensionString(a){return a.length!==2?null:new Map([[mt.ISSUE_NUMBER,parseInt(a)]])}}class Ua{static decodeRow(a,c,f){let m=An.findGuardPattern(c,f,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ba().decodeRow(a,c,m)}catch{return new kl().decodeRow(a,c,m)}}}Ua.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends An{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let c=Tt.L_PATTERNS[a-10],f=new Int32Array(c.length);for(let m=0;m<c.length;m++)f[m]=c[c.length-m-1];Tt.L_AND_G_PATTERNS[a]=f}}decodeRow(a,c,f){let m=Tt.findStartGuardPattern(c),y=f==null?null:f.get(W.NEED_RESULT_POINT_CALLBACK);if(y!=null){const Me=new De((m[0]+m[1])/2,a);y.foundPossibleResultPoint(Me)}let b=this.decodeMiddle(c,m,this.decodeRowStringBuffer),A=b.rowOffset,T=b.resultString;if(y!=null){const Me=new De(A,a);y.foundPossibleResultPoint(Me)}let R=this.decodeEnd(c,A);if(y!=null){const Me=new De((R[0]+R[1])/2,a);y.foundPossibleResultPoint(Me)}let M=R[1],z=M+(M-R[0]);if(z>=c.getSize()||!c.isRange(M,z,!1))throw new X;let G=T.toString();if(G.length<8)throw new te;if(!Tt.checkChecksum(G))throw new k;let Z=(m[1]+m[0])/2,re=(R[1]+R[0])/2,le=this.getBarcodeFormat(),he=[new De(Z,a),new De(re,a)],be=new Ie(G,null,0,he,le,new Date().getTime()),je=0;try{let Me=Ua.decodeRow(a,c,R[1]);be.putMetadata(mt.UPC_EAN_EXTENSION,Me.getText()),be.putAllMetadata(Me.getResultMetadata()),be.addResultPoints(Me.getResultPoints()),je=Me.getText().length}catch{}let Le=f==null?null:f.get(W.ALLOWED_EAN_EXTENSIONS);if(Le!=null){let Me=!1;for(let St in Le)if(je.toString()===St){Me=!0;break}if(!Me)throw new X}return be}decodeEnd(a,c){return Tt.findGuardPattern(a,c,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return Tt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let c=a.length;if(c===0)return!1;let f=parseInt(a.charAt(c-1),10);return Tt.getStandardUPCEANChecksum(a.substring(0,c-1))===f}static getStandardUPCEANChecksum(a){let c=a.length,f=0;for(let m=c-1;m>=0;m-=2){let y=a.charAt(m).charCodeAt(0)-48;if(y<0||y>9)throw new te;f+=y}f*=3;for(let m=c-2;m>=0;m-=2){let y=a.charAt(m).charCodeAt(0)-48;if(y<0||y>9)throw new te;f+=y}return(1e3-f)%10}}class bs extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,f){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=a.getSize(),b=c[1],A=0;for(let R=0;R<6&&b<y;R++){let M=Tt.decodeDigit(a,m,b,Tt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+M%10);for(let z of m)b+=z;M>=10&&(A|=1<<5-R)}f=bs.determineFirstDigit(f,A),b=Tt.findGuardPattern(a,b,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<6&&b<y;R++){let M=Tt.decodeDigit(a,m,b,Tt.L_PATTERNS);f+=String.fromCharCode(48+M);for(let z of m)b+=z}return{rowOffset:b,resultString:f}}getBarcodeFormat(){return Oe.EAN_13}static determineFirstDigit(a,c){for(let f=0;f<10;f++)if(c===this.FIRST_DIGIT_ENCODINGS[f])return a=String.fromCharCode(48+f)+a,a;throw new X}}bs.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mr extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,f){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=a.getSize(),b=c[1];for(let T=0;T<4&&b<y;T++){let R=Tt.decodeDigit(a,m,b,Tt.L_PATTERNS);f+=String.fromCharCode(48+R);for(let M of m)b+=M}b=Tt.findGuardPattern(a,b,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&b<y;T++){let R=Tt.decodeDigit(a,m,b,Tt.L_PATTERNS);f+=String.fromCharCode(48+R);for(let M of m)b+=M}return{rowOffset:b,resultString:f}}getBarcodeFormat(){return Oe.EAN_8}}class Fa extends Tt{constructor(){super(...arguments),this.ean13Reader=new bs}getBarcodeFormat(){return Oe.UPC_A}decode(a,c){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,c,f){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,c,f))}decodeMiddle(a,c,f){return this.ean13Reader.decodeMiddle(a,c,f)}maybeReturnResult(a){let c=a.getText();if(c.charAt(0)==="0"){let f=new Ie(c.substring(1),null,null,a.getResultPoints(),Oe.UPC_A);return a.getResultMetadata()!=null&&f.putAllMetadata(a.getResultMetadata()),f}else throw new X}reset(){this.ean13Reader.reset()}}class Ti extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,c,f){const m=this.decodeMiddleCounters.map(R=>R);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const y=a.getSize();let b=c[1],A=0;for(let R=0;R<6&&b<y;R++){const M=Ti.decodeDigit(a,m,b,Ti.L_AND_G_PATTERNS);f+=String.fromCharCode(48+M%10);for(let z of m)b+=z;M>=10&&(A|=1<<5-R)}let T=Ti.determineNumSysAndCheckDigit(f,A);return{rowOffset:b,resultString:T}}decodeEnd(a,c){return Ti.findGuardPatternWithoutCounters(a,c,!0,Ti.MIDDLE_END_PATTERN)}checkChecksum(a){return Tt.checkChecksum(Ti.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,c){for(let f=0;f<=1;f++)for(let m=0;m<10;m++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[f][m]){let y=String.fromCharCode(48+f),b=String.fromCharCode(48+m);return y+a+b}throw X.getNotFoundInstance()}getBarcodeFormat(){return Oe.UPC_E}static convertUPCEtoUPCA(a){const c=a.slice(1,7).split("").map(y=>y.charCodeAt(0)),f=new Ne;f.append(a.charAt(0));let m=c[5];switch(m){case 0:case 1:case 2:f.appendChars(c,0,2),f.append(m),f.append("0000"),f.appendChars(c,2,3);break;case 3:f.appendChars(c,0,3),f.append("00000"),f.appendChars(c,3,2);break;case 4:f.appendChars(c,0,4),f.append("00000"),f.append(c[4]);break;default:f.appendChars(c,0,5),f.append("0000"),f.append(m);break}return a.length>=8&&f.append(a.charAt(7)),f.toString()}}Ti.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ti.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ue extends un{constructor(a){super();let c=a==null?null:a.get(W.POSSIBLE_FORMATS),f=[];i(c)?(f.push(new bs),f.push(new Fa),f.push(new mr),f.push(new Ti)):(c.indexOf(Oe.EAN_13)>-1&&f.push(new bs),c.indexOf(Oe.UPC_A)>-1&&f.push(new Fa),c.indexOf(Oe.EAN_8)>-1&&f.push(new mr),c.indexOf(Oe.UPC_E)>-1&&f.push(new Ti)),this.readers=f}decodeRow(a,c,f){for(let m of this.readers)try{const y=m.decodeRow(a,c,f),b=y.getBarcodeFormat()===Oe.EAN_13&&y.getText().charAt(0)==="0",A=f==null?null:f.get(W.POSSIBLE_FORMATS),T=A==null||A.includes(Oe.UPC_A);if(b&&T){const R=y.getRawBytes(),M=new Ie(y.getText().substring(1),R,R?R.length:null,y.getResultPoints(),Oe.UPC_A);return M.putAllMetadata(y.getResultMetadata()),M}return y}catch{}throw new X}reset(){for(let a of this.readers)a.reset()}}class Be extends un{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,c){for(let f=0;f<c.length;f++)if(un.patternMatchVariance(a,c[f],Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return f;throw new X}static count(a){return ze.sum(new Int32Array(a))}static increment(a,c){let f=0,m=c[0];for(let y=1;y<a.length;y++)c[y]>m&&(m=c[y],f=y);a[f]++}static decrement(a,c){let f=0,m=c[0];for(let y=1;y<a.length;y++)c[y]<m&&(m=c[y],f=y);a[f]--}static isFinderPattern(a){let c=a[0]+a[1],f=c+a[2]+a[3],m=c/f;if(m>=Be.MIN_FINDER_PATTERN_RATIO&&m<=Be.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;for(let A of a)A>b&&(b=A),A<y&&(y=A);return b<10*y}return!1}}Be.MAX_AVG_VARIANCE=.2,Be.MAX_INDIVIDUAL_VARIANCE=.45,Be.MIN_FINDER_PATTERN_RATIO=9.5/12,Be.MAX_FINDER_PATTERN_RATIO=12.5/14;class vt{constructor(a,c){this.value=a,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof vt))return!1;const c=a;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Mt{constructor(a,c,f,m,y){this.value=a,this.startEnd=c,this.value=a,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new De(f,y)),this.resultPoints.push(new De(m,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Mt))return!1;const c=a;return this.value===c.value}hashCode(){return this.value}}class tn{constructor(){}static getRSSvalue(a,c,f){let m=0;for(let T of a)m+=T;let y=0,b=0,A=a.length;for(let T=0;T<A-1;T++){let R;for(R=1,b|=1<<T;R<a[T];R++,b&=~(1<<T)){let M=tn.combins(m-R-1,A-T-2);if(f&&b===0&&m-R-(A-T-1)>=A-T-1&&(M-=tn.combins(m-R-(A-T),A-T-2)),A-T-1>1){let z=0;for(let G=m-R-(A-T-2);G>c;G--)z+=tn.combins(m-R-G-1,A-T-3);M-=z*(A-1-T)}else m-R>c&&M--;y+=M}m-=R}return y}static combins(a,c){let f,m;a-c>c?(m=c,f=a-c):(m=a-c,f=c);let y=1,b=1;for(let A=a;A>f;A--)y*=A,b<=m&&(y/=b,b++);for(;b<=m;)y/=b,b++;return y}}class Qn{static buildBitArray(a){let c=a.length*2-1;a[a.length-1].getRightChar()==null&&(c-=1);let f=12*c,m=new F(f),y=0,A=a[0].getRightChar().getValue();for(let T=11;T>=0;--T)(A&1<<T)!=0&&m.set(y),y++;for(let T=1;T<a.length;++T){let R=a[T],M=R.getLeftChar().getValue();for(let z=11;z>=0;--z)(M&1<<z)!=0&&m.set(y),y++;if(R.getRightChar()!=null){let z=R.getRightChar().getValue();for(let G=11;G>=0;--G)(z&1<<G)!=0&&m.set(y),y++}}return m}}class Pi{constructor(a,c){c?this.decodedInformation=null:(this.finished=a,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class gr{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class li extends gr{constructor(a,c){super(a),this.value=c}getValue(){return this.value}isFNC1(){return this.value===li.FNC1}}li.FNC1="$";class ws extends gr{constructor(a,c,f){super(a),f?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ii extends gr{constructor(a,c,f){if(super(a),c<0||c>10||f<0||f>10)throw new te;this.firstDigit=c,this.secondDigit=f}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ii.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ii.FNC1}isAnyFNC1(){return this.firstDigit===Ii.FNC1||this.secondDigit===Ii.FNC1}}Ii.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new X;let c=a.substring(0,2);for(let y of He.TWO_DIGIT_DATA_LENGTH)if(y[0]===c)return y[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,y[2],a):He.processFixedAI(2,y[1],a);if(a.length<3)throw new X;let f=a.substring(0,3);for(let y of He.THREE_DIGIT_DATA_LENGTH)if(y[0]===f)return y[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,y[2],a):He.processFixedAI(3,y[1],a);for(let y of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===f)return y[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,y[2],a):He.processFixedAI(4,y[1],a);if(a.length<4)throw new X;let m=a.substring(0,4);for(let y of He.FOUR_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,y[2],a):He.processFixedAI(4,y[1],a);throw new X}static processFixedAI(a,c,f){if(f.length<a)throw new X;let m=f.substring(0,a);if(f.length<a+c)throw new X;let y=f.substring(a,a+c),b=f.substring(a+c),A="("+m+")"+y,T=He.parseFieldsInGeneralPurpose(b);return T==null?A:A+T}static processVariableAI(a,c,f){let m=f.substring(0,a),y;f.length<a+c?y=f.length:y=a+c;let b=f.substring(a,y),A=f.substring(y),T="("+m+")"+b,R=He.parseFieldsInGeneralPurpose(A);return R==null?T:T+R}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class ji{constructor(a){this.buffer=new Ne,this.information=a}decodeAllCodes(a,c){let f=c,m=null;do{let y=this.decodeGeneralPurposeField(f,m),b=He.parseFieldsInGeneralPurpose(y.getNewString());if(b!=null&&a.append(b),y.isRemaining()?m=""+y.getRemainingValue():m=null,f===y.getNewPosition())break;f=y.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let c=a;c<a+3;++c)if(this.information.get(c))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(a,4);return y===0?new Ii(this.information.getSize(),Ii.FNC1,Ii.FNC1):new Ii(this.information.getSize(),y-1,Ii.FNC1)}let c=this.extractNumericValueFromBitArray(a,7),f=(c-8)/11,m=(c-8)%11;return new Ii(a+7,f,m)}extractNumericValueFromBitArray(a,c){return ji.extractNumericValueFromBitArray(this.information,a,c)}static extractNumericValueFromBitArray(a,c,f){let m=0;for(let y=0;y<f;++y)a.get(c+y)&&(m|=1<<f-y-1);return m}decodeGeneralPurposeField(a,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(a);let f=this.parseBlocks();return f!=null&&f.isRemaining()?new ws(this.current.getPosition(),this.buffer.toString(),f.getRemainingValue()):new ws(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,c;do{let f=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),a=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),a=c.isFinished()):(c=this.parseNumericBlock(),a=c.isFinished()),!(f!==this.current.getPosition())&&!a)break}while(!a);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let c;return a.isSecondDigitFNC1()?c=new ws(this.current.getPosition(),this.buffer.toString()):c=new ws(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new Pi(!0,c)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let c=new ws(this.current.getPosition(),this.buffer.toString());return new Pi(!0,c)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Pi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let c=new ws(this.current.getPosition(),this.buffer.toString());return new Pi(!0,c)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Pi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let c=new ws(this.current.getPosition(),this.buffer.toString());return new Pi(!0,c)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Pi(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,5);if(c>=5&&c<16)return!0;if(a+7>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(a,7);if(f>=64&&f<116)return!0;if(a+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(a,8);return m>=232&&m<253}decodeIsoIec646(a){let c=this.extractNumericValueFromBitArray(a,5);if(c===15)return new li(a+5,li.FNC1);if(c>=5&&c<15)return new li(a+5,"0"+(c-5));let f=this.extractNumericValueFromBitArray(a,7);if(f>=64&&f<90)return new li(a+7,""+(f+1));if(f>=90&&f<116)return new li(a+7,""+(f+7));let m=this.extractNumericValueFromBitArray(a,8),y;switch(m){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new te}return new li(a+8,y)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,5);if(c>=5&&c<16)return!0;if(a+6>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(a,6);return f>=16&&f<63}decodeAlphanumeric(a){let c=this.extractNumericValueFromBitArray(a,5);if(c===15)return new li(a+5,li.FNC1);if(c>=5&&c<15)return new li(a+5,"0"+(c-5));let f=this.extractNumericValueFromBitArray(a,6);if(f>=32&&f<58)return new li(a+6,""+(f+33));let m;switch(f){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new Jn("Decoding invalid alphanumeric value: "+f)}return new li(a+6,m)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let c=0;c<5&&c+a<this.information.getSize();++c)if(c===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+c))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let c=a;c<a+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let c=0;c<4&&c+a<this.information.getSize();++c)if(this.information.get(a+c))return!1;return!0}}class Ht{constructor(a){this.information=a,this.generalDecoder=new ji(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class at extends Ht{constructor(a){super(a)}encodeCompressedGtin(a,c){a.append("(01)");let f=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,c,f)}encodeCompressedGtinWithoutAI(a,c,f){for(let m=0;m<4;++m){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*m,10);y/100===0&&a.append("0"),y/10===0&&a.append("0"),a.append(y)}at.appendCheckDigit(a,f)}static appendCheckDigit(a,c){let f=0;for(let m=0;m<13;m++){let y=a.charAt(m+c).charCodeAt(0)-48;f+=(m&1)===0?3*y:y}f=10-f%10,f===10&&(f=0),a.append(f)}}at.GTIN_SIZE=40;class Yi extends at{constructor(a){super(a)}parseInformation(){let a=new Ne;a.append("(01)");let c=a.length(),f=this.getGeneralDecoder().extractNumericValueFromBitArray(Yi.HEADER_SIZE,4);return a.append(f),this.encodeCompressedGtinWithoutAI(a,Yi.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(a,Yi.HEADER_SIZE+44)}}Yi.HEADER_SIZE=4;class xr extends Ht{constructor(a){super(a)}parseInformation(){let a=new Ne;return this.getGeneralDecoder().decodeAllCodes(a,xr.HEADER_SIZE)}}xr.HEADER_SIZE=5;class ta extends at{constructor(a){super(a)}encodeCompressedWeight(a,c,f){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(c,f);this.addWeightCode(a,m);let y=this.checkWeight(m),b=1e5;for(let A=0;A<5;++A)y/b===0&&a.append("0"),b/=10;a.append(y)}}class Js extends ta{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Js.HEADER_SIZE+ta.GTIN_SIZE+Js.WEIGHT_SIZE)throw new X;let a=new Ne;return this.encodeCompressedGtin(a,Js.HEADER_SIZE),this.encodeCompressedWeight(a,Js.HEADER_SIZE+ta.GTIN_SIZE,Js.WEIGHT_SIZE),a.toString()}}Js.HEADER_SIZE=5,Js.WEIGHT_SIZE=15;class qd extends Js{constructor(a){super(a)}addWeightCode(a,c){a.append("(3103)")}checkWeight(a){return a}}class Po extends Js{constructor(a){super(a)}addWeightCode(a,c){c<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class cs extends at{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<cs.HEADER_SIZE+at.GTIN_SIZE)throw new X;let a=new Ne;this.encodeCompressedGtin(a,cs.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(cs.HEADER_SIZE+at.GTIN_SIZE,cs.LAST_DIGIT_SIZE);a.append("(392"),a.append(c),a.append(")");let f=this.getGeneralDecoder().decodeGeneralPurposeField(cs.HEADER_SIZE+at.GTIN_SIZE+cs.LAST_DIGIT_SIZE,null);return a.append(f.getNewString()),a.toString()}}cs.HEADER_SIZE=8,cs.LAST_DIGIT_SIZE=2;class Fn extends at{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Fn.HEADER_SIZE+at.GTIN_SIZE)throw new X;let a=new Ne;this.encodeCompressedGtin(a,Fn.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Fn.HEADER_SIZE+at.GTIN_SIZE,Fn.LAST_DIGIT_SIZE);a.append("(393"),a.append(c),a.append(")");let f=this.getGeneralDecoder().extractNumericValueFromBitArray(Fn.HEADER_SIZE+at.GTIN_SIZE+Fn.LAST_DIGIT_SIZE,Fn.FIRST_THREE_DIGITS_SIZE);f/100==0&&a.append("0"),f/10==0&&a.append("0"),a.append(f);let m=this.getGeneralDecoder().decodeGeneralPurposeField(Fn.HEADER_SIZE+at.GTIN_SIZE+Fn.LAST_DIGIT_SIZE+Fn.FIRST_THREE_DIGITS_SIZE,null);return a.append(m.getNewString()),a.toString()}}Fn.HEADER_SIZE=8,Fn.LAST_DIGIT_SIZE=2,Fn.FIRST_THREE_DIGITS_SIZE=10;class $t extends ta{constructor(a,c,f){super(a),this.dateCode=f,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE+$t.DATE_SIZE)throw new X;let a=new Ne;return this.encodeCompressedGtin(a,$t.HEADER_SIZE),this.encodeCompressedWeight(a,$t.HEADER_SIZE+$t.GTIN_SIZE,$t.WEIGHT_SIZE),this.encodeCompressedDate(a,$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(c,$t.DATE_SIZE);if(f==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let m=f%32;f/=32;let y=f%12+1;f/=12;let b=f;b/10==0&&a.append("0"),a.append(b),y/10==0&&a.append("0"),a.append(y),m/10==0&&a.append("0"),a.append(m)}addWeightCode(a,c){a.append("("),a.append(this.firstAIdigits),a.append(c/1e5),a.append(")")}checkWeight(a){return a%1e5}}$t.HEADER_SIZE=8,$t.WEIGHT_SIZE=20,$t.DATE_SIZE=16;function za(U){try{if(U.get(1))return new Yi(U);if(!U.get(2))return new xr(U);switch(ji.extractNumericValueFromBitArray(U,1,4)){case 4:return new qd(U);case 5:return new Po(U)}switch(ji.extractNumericValueFromBitArray(U,1,5)){case 12:return new cs(U);case 13:return new Fn(U)}switch(ji.extractNumericValueFromBitArray(U,1,7)){case 56:return new $t(U,"310","11");case 57:return new $t(U,"320","11");case 58:return new $t(U,"310","13");case 59:return new $t(U,"320","13");case 60:return new $t(U,"310","15");case 61:return new $t(U,"320","15");case 62:return new $t(U,"310","17");case 63:return new $t(U,"320","17")}}catch(a){throw console.log(a),new Jn("unknown decoder: "+U)}}class es{constructor(a,c,f,m){this.leftchar=a,this.rightchar=c,this.finderpattern=f,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,c){return a instanceof es?es.equalsOrNull(a.leftchar,c.leftchar)&&es.equalsOrNull(a.rightchar,c.rightchar)&&es.equalsOrNull(a.finderpattern,c.finderpattern):!1}static equalsOrNull(a,c){return a===null?c===null:es.equals(a,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class zn{constructor(a,c,f){this.pairs=a,this.rowNumber=c,this.wasReversed=f}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,c){return a instanceof zn?this.checkEqualitity(a,c)&&a.wasReversed===c.wasReversed:!1}checkEqualitity(a,c){if(!a||!c)return;let f;return a.forEach((m,y)=>{c.forEach(b=>{m.getLeftChar().getValue()===b.getLeftChar().getValue()&&m.getRightChar().getValue()===b.getRightChar().getValue()&&m.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(f=!0)})}),f}}class ke extends Be{constructor(a){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,c,f){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(a,c))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(a,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,c){let f=!1;for(;!f;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,a))}catch(y){if(y instanceof X){if(!this.pairs.length)throw new X;f=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(a,!1),m){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new X}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(f){this.verbose&&console.log(f)}return a&&(this.rows=this.rows.reverse()),c}checkRows(a,c){for(let f=c;f<this.rows.length;f++){let m=this.rows[f];this.pairs.length=0;for(let b of a)this.pairs.push(b.getPairs());if(this.pairs.push(m.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(a);y.push(m);try{return this.checkRows(y,f+1)}catch(b){this.verbose&&console.log(b)}}throw new X}static isValidSequence(a){for(let c of ke.FINDER_PATTERN_SEQUENCES){if(a.length>c.length)continue;let f=!0;for(let m=0;m<a.length;m++)if(a[m].getFinderPattern().getValue()!=c[m]){f=!1;break}if(f)return!0}return!1}storeRow(a,c){let f=0,m=!1,y=!1;for(;f<this.rows.length;){let b=this.rows[f];if(b.getRowNumber()>a){y=b.isEquivalent(this.pairs);break}m=b.isEquivalent(this.pairs),f++}y||m||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(f,new zn(this.pairs,a,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,c){for(let f of c)if(f.getPairs().length!==a.length){for(let m of f.getPairs())for(let y of a)if(es.equals(m,y))break}}static isPartialRow(a,c){for(let f of c){let m=!0;for(let y of a){let b=!1;for(let A of f.getPairs())if(y.equals(A)){b=!0;break}if(!b){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(a){let c=Qn.buildBitArray(a),m=za(c).parseInformation(),y=a[0].getFinderPattern().getResultPoints(),b=a[a.length-1].getFinderPattern().getResultPoints(),A=[y[0],y[1],b[0],b[1]];return new Ie(m,null,null,A,Oe.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),c=a.getLeftChar(),f=a.getRightChar();if(f==null)return!1;let m=f.getChecksumPortion(),y=2;for(let A=1;A<this.pairs.size();++A){let T=this.pairs.get(A);m+=T.getLeftChar().getChecksumPortion(),y++;let R=T.getRightChar();R!=null&&(m+=R.getChecksumPortion(),y++)}return m%=211,211*(y-4)+m==c.getValue()}static getNextSecondBar(a,c){let f;return a.get(c)?(f=a.getNextUnset(c),f=a.getNextSet(f)):(f=a.getNextSet(c),f=a.getNextUnset(f)),f}retrieveNextPair(a,c,f){let m=c.length%2==0;this.startFromEven&&(m=!m);let y,b=!0,A=-1;do this.findNextPair(a,c,A),y=this.parseFoundFinderPattern(a,f,m),y==null?A=ke.getNextSecondBar(a,this.startEnd[0]):b=!1;while(b);let T=this.decodeDataCharacter(a,y,m,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new X;let R;try{R=this.decodeDataCharacter(a,y,m,!1)}catch(M){R=null,this.verbose&&console.log(M)}return new es(T,R,y,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,c,f){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=a.getSize(),b;f>=0?b=f:this.isEmptyPair(c)?b=0:b=c[c.length-1].getFinderPattern().getStartEnd()[1];let A=c.length%2!=0;this.startFromEven&&(A=!A);let T=!1;for(;b<y&&(T=!a.get(b),!!T);)b++;let R=0,M=b;for(let z=b;z<y;z++)if(a.get(z)!=T)m[R]++;else{if(R==3){if(A&&ke.reverseCounters(m),ke.isFinderPattern(m)){this.startEnd[0]=M,this.startEnd[1]=z;return}A&&ke.reverseCounters(m),M+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,R--}else R++;m[R]=1,T=!T}throw new X}static reverseCounters(a){let c=a.length;for(let f=0;f<c/2;++f){let m=a[f];a[f]=a[c-f-1],a[c-f-1]=m}}parseFoundFinderPattern(a,c,f){let m,y,b;if(f){let R=this.startEnd[0]-1;for(;R>=0&&!a.get(R);)R--;R++,m=this.startEnd[0]-R,y=R,b=this.startEnd[1]}else y=this.startEnd[0],b=a.getNextUnset(this.startEnd[1]+1),m=b-this.startEnd[1];let A=this.getDecodeFinderCounters();L.arraycopy(A,0,A,1,A.length-1),A[0]=m;let T;try{T=this.parseFinderValue(A,ke.FINDER_PATTERNS)}catch{return null}return new Mt(T,[y,b],y,b,c)}decodeDataCharacter(a,c,f,m){let y=this.getDataCharacterCounters();for(let rn=0;rn<y.length;rn++)y[rn]=0;if(m)ke.recordPatternInReverse(a,c.getStartEnd()[0],y);else{ke.recordPattern(a,c.getStartEnd()[1],y);for(let rn=0,_i=y.length-1;rn<_i;rn++,_i--){let is=y[rn];y[rn]=y[_i],y[_i]=is}}let b=17,A=ze.sum(new Int32Array(y))/b,T=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(A-T)/T>.3)throw new X;let R=this.getOddCounts(),M=this.getEvenCounts(),z=this.getOddRoundingErrors(),G=this.getEvenRoundingErrors();for(let rn=0;rn<y.length;rn++){let _i=1*y[rn]/A,is=_i+.5;if(is<1){if(_i<.3)throw new X;is=1}else if(is>8){if(_i>8.7)throw new X;is=8}let Qa=rn/2;(rn&1)==0?(R[Qa]=is,z[Qa]=_i-is):(M[Qa]=is,G[Qa]=_i-is)}this.adjustOddEvenCounts(b);let Z=4*c.getValue()+(f?0:2)+(m?0:1)-1,re=0,le=0;for(let rn=R.length-1;rn>=0;rn--){if(ke.isNotA1left(c,f,m)){let _i=ke.WEIGHTS[Z][2*rn];le+=R[rn]*_i}re+=R[rn]}let he=0;for(let rn=M.length-1;rn>=0;rn--)if(ke.isNotA1left(c,f,m)){let _i=ke.WEIGHTS[Z][2*rn+1];he+=M[rn]*_i}let be=le+he;if((re&1)!=0||re>13||re<4)throw new X;let je=(13-re)/2,Le=ke.SYMBOL_WIDEST[je],Me=9-Le,St=tn.getRSSvalue(R,Le,!0),ht=tn.getRSSvalue(M,Me,!1),Vn=ke.EVEN_TOTAL_SUBSET[je],fs=ke.GSUM[je],Bi=St*Vn+ht+fs;return new vt(Bi,be)}static isNotA1left(a,c,f){return!(a.getValue()==0&&c&&f)}adjustOddEvenCounts(a){let c=ze.sum(new Int32Array(this.getOddCounts())),f=ze.sum(new Int32Array(this.getEvenCounts())),m=!1,y=!1;c>13?y=!0:c<4&&(m=!0);let b=!1,A=!1;f>13?A=!0:f<4&&(b=!0);let T=c+f-a,R=(c&1)==1,M=(f&1)==0;if(T==1)if(R){if(M)throw new X;y=!0}else{if(!M)throw new X;A=!0}else if(T==-1)if(R){if(M)throw new X;m=!0}else{if(!M)throw new X;b=!0}else if(T==0){if(R){if(!M)throw new X;c<f?(m=!0,A=!0):(y=!0,b=!0)}else if(M)throw new X}else throw new X;if(m){if(y)throw new X;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(A)throw new X;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class Yd extends vt{constructor(a,c,f){super(a,c),this.count=0,this.finderPattern=f}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nn extends Be{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,c,f){const m=this.decodePair(c,!1,a,f);nn.addOrTally(this.possibleLeftPairs,m),c.reverse();let y=this.decodePair(c,!0,a,f);nn.addOrTally(this.possibleRightPairs,y),c.reverse();for(let b of this.possibleLeftPairs)if(b.getCount()>1){for(let A of this.possibleRightPairs)if(A.getCount()>1&&nn.checkChecksum(b,A))return nn.constructResult(b,A)}throw new X}static addOrTally(a,c){if(c==null)return;let f=!1;for(let m of a)if(m.getValue()===c.getValue()){m.incrementCount(),f=!0;break}f||a.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,c){let f=4537077*a.getValue()+c.getValue(),m=new String(f).toString(),y=new Ne;for(let R=13-m.length;R>0;R--)y.append("0");y.append(m);let b=0;for(let R=0;R<13;R++){let M=y.charAt(R).charCodeAt(0)-48;b+=(R&1)===0?3*M:M}b=10-b%10,b===10&&(b=0),y.append(b.toString());let A=a.getFinderPattern().getResultPoints(),T=c.getFinderPattern().getResultPoints();return new Ie(y.toString(),null,0,[A[0],A[1],T[0],T[1]],Oe.RSS_14,new Date().getTime())}static checkChecksum(a,c){let f=(a.getChecksumPortion()+16*c.getChecksumPortion())%79,m=9*a.getFinderPattern().getValue()+c.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,f===m}decodePair(a,c,f,m){try{let y=this.findFinderPattern(a,c),b=this.parseFoundFinderPattern(a,f,c,y),A=m==null?null:m.get(W.NEED_RESULT_POINT_CALLBACK);if(A!=null){let M=(y[0]+y[1])/2;c&&(M=a.getSize()-1-M),A.foundPossibleResultPoint(new De(M,f))}let T=this.decodeDataCharacter(a,b,!0),R=this.decodeDataCharacter(a,b,!1);return new Yd(1597*T.getValue()+R.getValue(),T.getChecksumPortion()+4*R.getChecksumPortion(),b)}catch{return null}}decodeDataCharacter(a,c,f){let m=this.getDataCharacterCounters();for(let he=0;he<m.length;he++)m[he]=0;if(f)un.recordPatternInReverse(a,c.getStartEnd()[0],m);else{un.recordPattern(a,c.getStartEnd()[1]+1,m);for(let he=0,be=m.length-1;he<be;he++,be--){let je=m[he];m[he]=m[be],m[be]=je}}let y=f?16:15,b=ze.sum(new Int32Array(m))/y,A=this.getOddCounts(),T=this.getEvenCounts(),R=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let he=0;he<m.length;he++){let be=m[he]/b,je=Math.floor(be+.5);je<1?je=1:je>8&&(je=8);let Le=Math.floor(he/2);(he&1)===0?(A[Le]=je,R[Le]=be-je):(T[Le]=je,M[Le]=be-je)}this.adjustOddEvenCounts(f,y);let z=0,G=0;for(let he=A.length-1;he>=0;he--)G*=9,G+=A[he],z+=A[he];let Z=0,re=0;for(let he=T.length-1;he>=0;he--)Z*=9,Z+=T[he],re+=T[he];let le=G+3*Z;if(f){if((z&1)!==0||z>12||z<4)throw new X;let he=(12-z)/2,be=nn.OUTSIDE_ODD_WIDEST[he],je=9-be,Le=tn.getRSSvalue(A,be,!1),Me=tn.getRSSvalue(T,je,!0),St=nn.OUTSIDE_EVEN_TOTAL_SUBSET[he],ht=nn.OUTSIDE_GSUM[he];return new vt(Le*St+Me+ht,le)}else{if((re&1)!==0||re>10||re<4)throw new X;let he=(10-re)/2,be=nn.INSIDE_ODD_WIDEST[he],je=9-be,Le=tn.getRSSvalue(A,be,!0),Me=tn.getRSSvalue(T,je,!1),St=nn.INSIDE_ODD_TOTAL_SUBSET[he],ht=nn.INSIDE_GSUM[he];return new vt(Me*St+Le+ht,le)}}findFinderPattern(a,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=a.getSize(),y=!1,b=0;for(;b<m&&(y=!a.get(b),c!==y);)b++;let A=0,T=b;for(let R=b;R<m;R++)if(a.get(R)!==y)f[A]++;else{if(A===3){if(Be.isFinderPattern(f))return[T,R];T+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,A--}else A++;f[A]=1,y=!y}throw new X}parseFoundFinderPattern(a,c,f,m){let y=a.get(m[0]),b=m[0]-1;for(;b>=0&&y!==a.get(b);)b--;b++;const A=m[0]-b,T=this.getDecodeFinderCounters(),R=new Int32Array(T.length);L.arraycopy(T,0,R,1,T.length-1),R[0]=A;const M=this.parseFinderValue(R,nn.FINDER_PATTERNS);let z=b,G=m[1];return f&&(z=a.getSize()-1-z,G=a.getSize()-1-G),new Mt(M,[b,m[1]],z,G,c)}adjustOddEvenCounts(a,c){let f=ze.sum(new Int32Array(this.getOddCounts())),m=ze.sum(new Int32Array(this.getEvenCounts())),y=!1,b=!1,A=!1,T=!1;a?(f>12?b=!0:f<4&&(y=!0),m>12?T=!0:m<4&&(A=!0)):(f>11?b=!0:f<5&&(y=!0),m>10?T=!0:m<4&&(A=!0));let R=f+m-c,M=(f&1)===(a?1:0),z=(m&1)===1;if(R===1)if(M){if(z)throw new X;b=!0}else{if(!z)throw new X;T=!0}else if(R===-1)if(M){if(z)throw new X;y=!0}else{if(!z)throw new X;A=!0}else if(R===0){if(M){if(!z)throw new X;f<m?(y=!0,T=!0):(b=!0,A=!0)}else if(z)throw new X}else throw new X;if(y){if(b)throw new X;Be.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Be.decrement(this.getOddCounts(),this.getOddRoundingErrors()),A){if(T)throw new X;Be.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Be.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nn.OUTSIDE_GSUM=[0,161,961,2015,2715],nn.INSIDE_GSUM=[0,336,1036,1516],nn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nn.INSIDE_ODD_WIDEST=[2,4,6,8],nn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class _s extends un{constructor(a,c){super(),this.readers=[],this.verbose=c===!0;const f=a?a.get(W.POSSIBLE_FORMATS):null,m=a&&a.get(W.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;f?((f.includes(Oe.EAN_13)||f.includes(Oe.UPC_A)||f.includes(Oe.EAN_8)||f.includes(Oe.UPC_E))&&this.readers.push(new Ue(a)),f.includes(Oe.CODE_39)&&this.readers.push(new on(m)),f.includes(Oe.CODE_128)&&this.readers.push(new Pe),f.includes(Oe.ITF)&&this.readers.push(new yt),f.includes(Oe.RSS_14)&&this.readers.push(new nn),f.includes(Oe.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new Ue(a)),this.readers.push(new on),this.readers.push(new Ue(a)),this.readers.push(new Pe),this.readers.push(new yt),this.readers.push(new nn),this.readers.push(new ke(this.verbose)))}decodeRow(a,c,f){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(a,c,f)}catch{}throw new X}reset(){this.readers.forEach(a=>a.reset())}}class O0 extends ve{constructor(a=500,c){super(new _s(c),a,c)}}class Vt{constructor(a,c,f){this.ecCodewords=a,this.ecBlocks=[c],f&&this.ecBlocks.push(f)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Bt{constructor(a,c){this.count=a,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class It{constructor(a,c,f,m,y,b){this.versionNumber=a,this.symbolSizeRows=c,this.symbolSizeColumns=f,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=y,this.ecBlocks=b;let A=0;const T=b.getECCodewords(),R=b.getECBlocks();for(let M of R)A+=M.getCount()*(M.getDataCodewords()+T);this.totalCodewords=A}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,c){if((a&1)!==0||(c&1)!==0)throw new te;for(let f of It.VERSIONS)if(f.symbolSizeRows===a&&f.symbolSizeColumns===c)return f;throw new te}toString(){return""+this.versionNumber}static buildVersions(){return[new It(1,10,10,8,8,new Vt(5,new Bt(1,3))),new It(2,12,12,10,10,new Vt(7,new Bt(1,5))),new It(3,14,14,12,12,new Vt(10,new Bt(1,8))),new It(4,16,16,14,14,new Vt(12,new Bt(1,12))),new It(5,18,18,16,16,new Vt(14,new Bt(1,18))),new It(6,20,20,18,18,new Vt(18,new Bt(1,22))),new It(7,22,22,20,20,new Vt(20,new Bt(1,30))),new It(8,24,24,22,22,new Vt(24,new Bt(1,36))),new It(9,26,26,24,24,new Vt(28,new Bt(1,44))),new It(10,32,32,14,14,new Vt(36,new Bt(1,62))),new It(11,36,36,16,16,new Vt(42,new Bt(1,86))),new It(12,40,40,18,18,new Vt(48,new Bt(1,114))),new It(13,44,44,20,20,new Vt(56,new Bt(1,144))),new It(14,48,48,22,22,new Vt(68,new Bt(1,174))),new It(15,52,52,24,24,new Vt(42,new Bt(2,102))),new It(16,64,64,14,14,new Vt(56,new Bt(2,140))),new It(17,72,72,16,16,new Vt(36,new Bt(4,92))),new It(18,80,80,18,18,new Vt(48,new Bt(4,114))),new It(19,88,88,20,20,new Vt(56,new Bt(4,144))),new It(20,96,96,22,22,new Vt(68,new Bt(4,174))),new It(21,104,104,24,24,new Vt(56,new Bt(6,136))),new It(22,120,120,18,18,new Vt(68,new Bt(6,175))),new It(23,132,132,20,20,new Vt(62,new Bt(8,163))),new It(24,144,144,22,22,new Vt(62,new Bt(8,156),new Bt(2,155))),new It(25,8,18,6,16,new Vt(7,new Bt(1,5))),new It(26,8,32,6,14,new Vt(11,new Bt(1,10))),new It(27,12,26,10,24,new Vt(14,new Bt(1,16))),new It(28,12,36,10,16,new Vt(18,new Bt(1,22))),new It(29,16,36,14,16,new Vt(24,new Bt(1,32))),new It(30,16,48,14,22,new Vt(28,new Bt(1,49)))]}}It.VERSIONS=It.buildVersions();class Va{constructor(a){const c=a.getHeight();if(c<8||c>144||(c&1)!==0)throw new te;this.version=Va.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new ue(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const c=a.getHeight(),f=a.getWidth();return It.getVersionForDimensions(c,f)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let c=0,f=4,m=0;const y=this.mappingBitMatrix.getHeight(),b=this.mappingBitMatrix.getWidth();let A=!1,T=!1,R=!1,M=!1;do if(f===y&&m===0&&!A)a[c++]=this.readCorner1(y,b)&255,f-=2,m+=2,A=!0;else if(f===y-2&&m===0&&(b&3)!==0&&!T)a[c++]=this.readCorner2(y,b)&255,f-=2,m+=2,T=!0;else if(f===y+4&&m===2&&(b&7)===0&&!R)a[c++]=this.readCorner3(y,b)&255,f-=2,m+=2,R=!0;else if(f===y-2&&m===0&&(b&7)===4&&!M)a[c++]=this.readCorner4(y,b)&255,f-=2,m+=2,M=!0;else{do f<y&&m>=0&&!this.readMappingMatrix.get(m,f)&&(a[c++]=this.readUtah(f,m,y,b)&255),f-=2,m+=2;while(f>=0&&m<b);f+=1,m+=3;do f>=0&&m<b&&!this.readMappingMatrix.get(m,f)&&(a[c++]=this.readUtah(f,m,y,b)&255),f+=2,m-=2;while(f<y&&m>=0);f+=3,m+=1}while(f<y||m<b);if(c!==this.version.getTotalCodewords())throw new te;return a}readModule(a,c,f,m){return a<0&&(a+=f,c+=4-(f+4&7)),c<0&&(c+=m,a+=4-(m+4&7)),this.readMappingMatrix.set(c,a),this.mappingBitMatrix.get(c,a)}readUtah(a,c,f,m){let y=0;return this.readModule(a-2,c-2,f,m)&&(y|=1),y<<=1,this.readModule(a-2,c-1,f,m)&&(y|=1),y<<=1,this.readModule(a-1,c-2,f,m)&&(y|=1),y<<=1,this.readModule(a-1,c-1,f,m)&&(y|=1),y<<=1,this.readModule(a-1,c,f,m)&&(y|=1),y<<=1,this.readModule(a,c-2,f,m)&&(y|=1),y<<=1,this.readModule(a,c-1,f,m)&&(y|=1),y<<=1,this.readModule(a,c,f,m)&&(y|=1),y}readCorner1(a,c){let f=0;return this.readModule(a-1,0,a,c)&&(f|=1),f<<=1,this.readModule(a-1,1,a,c)&&(f|=1),f<<=1,this.readModule(a-1,2,a,c)&&(f|=1),f<<=1,this.readModule(0,c-2,a,c)&&(f|=1),f<<=1,this.readModule(0,c-1,a,c)&&(f|=1),f<<=1,this.readModule(1,c-1,a,c)&&(f|=1),f<<=1,this.readModule(2,c-1,a,c)&&(f|=1),f<<=1,this.readModule(3,c-1,a,c)&&(f|=1),f}readCorner2(a,c){let f=0;return this.readModule(a-3,0,a,c)&&(f|=1),f<<=1,this.readModule(a-2,0,a,c)&&(f|=1),f<<=1,this.readModule(a-1,0,a,c)&&(f|=1),f<<=1,this.readModule(0,c-4,a,c)&&(f|=1),f<<=1,this.readModule(0,c-3,a,c)&&(f|=1),f<<=1,this.readModule(0,c-2,a,c)&&(f|=1),f<<=1,this.readModule(0,c-1,a,c)&&(f|=1),f<<=1,this.readModule(1,c-1,a,c)&&(f|=1),f}readCorner3(a,c){let f=0;return this.readModule(a-1,0,a,c)&&(f|=1),f<<=1,this.readModule(a-1,c-1,a,c)&&(f|=1),f<<=1,this.readModule(0,c-3,a,c)&&(f|=1),f<<=1,this.readModule(0,c-2,a,c)&&(f|=1),f<<=1,this.readModule(0,c-1,a,c)&&(f|=1),f<<=1,this.readModule(1,c-3,a,c)&&(f|=1),f<<=1,this.readModule(1,c-2,a,c)&&(f|=1),f<<=1,this.readModule(1,c-1,a,c)&&(f|=1),f}readCorner4(a,c){let f=0;return this.readModule(a-3,0,a,c)&&(f|=1),f<<=1,this.readModule(a-2,0,a,c)&&(f|=1),f<<=1,this.readModule(a-1,0,a,c)&&(f|=1),f<<=1,this.readModule(0,c-2,a,c)&&(f|=1),f<<=1,this.readModule(0,c-1,a,c)&&(f|=1),f<<=1,this.readModule(1,c-1,a,c)&&(f|=1),f<<=1,this.readModule(2,c-1,a,c)&&(f|=1),f<<=1,this.readModule(3,c-1,a,c)&&(f|=1),f}extractDataRegion(a){const c=this.version.getSymbolSizeRows(),f=this.version.getSymbolSizeColumns();if(a.getHeight()!==c)throw new E("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),b=c/m|0,A=f/y|0,T=b*m,R=A*y,M=new ue(R,T);for(let z=0;z<b;++z){const G=z*m;for(let Z=0;Z<A;++Z){const re=Z*y;for(let le=0;le<m;++le){const he=z*(m+2)+1+le,be=G+le;for(let je=0;je<y;++je){const Le=Z*(y+2)+1+je;if(a.get(Le,he)){const Me=re+je;M.set(Me,be)}}}}}return M}}class Ga{constructor(a,c){this.numDataCodewords=a,this.codewords=c}static getDataBlocks(a,c){const f=c.getECBlocks();let m=0;const y=f.getECBlocks();for(let le of y)m+=le.getCount();const b=new Array(m);let A=0;for(let le of y)for(let he=0;he<le.getCount();he++){const be=le.getDataCodewords(),je=f.getECCodewords()+be;b[A++]=new Ga(be,new Uint8Array(je))}const R=b[0].codewords.length-f.getECCodewords(),M=R-1;let z=0;for(let le=0;le<M;le++)for(let he=0;he<A;he++)b[he].codewords[le]=a[z++];const G=c.getVersionNumber()===24,Z=G?8:A;for(let le=0;le<Z;le++)b[le].codewords[R-1]=a[z++];const re=b[0].codewords.length;for(let le=R;le<re;le++)for(let he=0;he<A;he++){const be=G?(he+8)%A:he,je=G&&be>7?le-1:le;b[be].codewords[je]=a[z++]}if(z!==a.length)throw new E;return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Es{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new E(""+a);let c=0,f=this.bitOffset,m=this.byteOffset;const y=this.bytes;if(f>0){const b=8-f,A=a<b?a:b,T=b-A,R=255>>8-A<<T;c=(y[m]&R)>>T,a-=A,f+=A,f===8&&(f=0,m++)}if(a>0){for(;a>=8;)c=c<<8|y[m]&255,m++,a-=8;if(a>0){const b=8-a,A=255>>b<<b;c=c<<a|(y[m]&A)>>b,f+=a}}return this.bitOffset=f,this.byteOffset=m,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(U){U[U.PAD_ENCODE=0]="PAD_ENCODE",U[U.ASCII_ENCODE=1]="ASCII_ENCODE",U[U.C40_ENCODE=2]="C40_ENCODE",U[U.TEXT_ENCODE=3]="TEXT_ENCODE",U[U.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",U[U.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",U[U.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class yr{static decode(a){const c=new Es(a),f=new Ne,m=new Ne,y=new Array;let b=qt.ASCII_ENCODE;do if(b===qt.ASCII_ENCODE)b=this.decodeAsciiSegment(c,f,m);else{switch(b){case qt.C40_ENCODE:this.decodeC40Segment(c,f);break;case qt.TEXT_ENCODE:this.decodeTextSegment(c,f);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,f);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(c,f);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(c,f,y);break;default:throw new te}b=qt.ASCII_ENCODE}while(b!==qt.PAD_ENCODE&&c.available()>0);return m.length()>0&&f.append(m.toString()),new Ft(a,f.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(a,c,f){let m=!1;do{let y=a.readBits(8);if(y===0)throw new te;if(y<=128)return m&&(y+=128),c.append(String.fromCharCode(y-1)),qt.ASCII_ENCODE;if(y===129)return qt.PAD_ENCODE;if(y<=229){const b=y-130;b<10&&c.append("0"),c.append(""+b)}else switch(y){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:c.append("[)>05"),f.insert(0,"");break;case 237:c.append("[)>06"),f.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(y!==254||a.available()!==0)throw new te;break}}while(a.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(a,c){let f=!1;const m=[];let y=0;do{if(a.available()===8)return;const b=a.readBits(8);if(b===254)return;this.parseTwoBytes(b,a.readBits(8),m);for(let A=0;A<3;A++){const T=m[A];switch(y){case 0:if(T<3)y=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const R=this.C40_BASIC_SET_CHARS[T];f?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):c.append(R)}else throw new te;break;case 1:f?(c.append(String.fromCharCode(T+128)),f=!1):c.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const R=this.C40_SHIFT2_SET_CHARS[T];f?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):c.append(R)}else switch(T){case 27:c.append("");break;case 30:f=!0;break;default:throw new te}y=0;break;case 3:f?(c.append(String.fromCharCode(T+224)),f=!1):c.append(String.fromCharCode(T+96)),y=0;break;default:throw new te}}}while(a.available()>0)}static decodeTextSegment(a,c){let f=!1,m=[],y=0;do{if(a.available()===8)return;const b=a.readBits(8);if(b===254)return;this.parseTwoBytes(b,a.readBits(8),m);for(let A=0;A<3;A++){const T=m[A];switch(y){case 0:if(T<3)y=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const R=this.TEXT_BASIC_SET_CHARS[T];f?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):c.append(R)}else throw new te;break;case 1:f?(c.append(String.fromCharCode(T+128)),f=!1):c.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const R=this.TEXT_SHIFT2_SET_CHARS[T];f?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):c.append(R)}else switch(T){case 27:c.append("");break;case 30:f=!0;break;default:throw new te}y=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const R=this.TEXT_SHIFT3_SET_CHARS[T];f?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):c.append(R),y=0}else throw new te;break;default:throw new te}}}while(a.available()>0)}static decodeAnsiX12Segment(a,c){const f=[];do{if(a.available()===8)return;const m=a.readBits(8);if(m===254)return;this.parseTwoBytes(m,a.readBits(8),f);for(let y=0;y<3;y++){const b=f[y];switch(b){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(b<14)c.append(String.fromCharCode(b+44));else if(b<40)c.append(String.fromCharCode(b+51));else throw new te;break}}}while(a.available()>0)}static parseTwoBytes(a,c,f){let m=(a<<8)+c-1,y=Math.floor(m/1600);f[0]=y,m-=y*1600,y=Math.floor(m/40),f[1]=y,f[2]=m-y*40}static decodeEdifactSegment(a,c){do{if(a.available()<=16)return;for(let f=0;f<4;f++){let m=a.readBits(6);if(m===31){const y=8-a.getBitOffset();y!==8&&a.readBits(y);return}(m&32)===0&&(m|=64),c.append(String.fromCharCode(m))}}while(a.available()>0)}static decodeBase256Segment(a,c,f){let m=1+a.getByteOffset();const y=this.unrandomize255State(a.readBits(8),m++);let b;if(y===0?b=a.available()/8|0:y<250?b=y:b=250*(y-249)+this.unrandomize255State(a.readBits(8),m++),b<0)throw new te;const A=new Uint8Array(b);for(let T=0;T<b;T++){if(a.available()<8)throw new te;A[T]=this.unrandomize255State(a.readBits(8),m++)}f.push(A);try{c.append(Ee.decode(A,pe.ISO88591))}catch(T){throw new Jn("Platform does not support required encoding: "+T.message)}}static unrandomize255State(a,c){const f=149*c%255+1,m=a-f;return m>=0?m:m+256}}yr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yr.TEXT_SHIFT2_SET_CHARS=yr.C40_SHIFT2_SET_CHARS,yr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class M0{constructor(){this.rsDecoder=new mn(At.DATA_MATRIX_FIELD_256)}decode(a){const c=new Va(a),f=c.getVersion(),m=c.readCodewords(),y=Ga.getDataBlocks(m,f);let b=0;for(let R of y)b+=R.getNumDataCodewords();const A=new Uint8Array(b),T=y.length;for(let R=0;R<T;R++){const M=y[R],z=M.getCodewords(),G=M.getNumDataCodewords();this.correctErrors(z,G);for(let Z=0;Z<G;Z++)A[Z*T+R]=z[Z]}return yr.decode(A)}correctErrors(a,c){const f=new Int32Array(a);try{this.rsDecoder.decode(f,a.length-c)}catch{throw new k}for(let m=0;m<c;m++)a[m]=f[m]}}class Sn{constructor(a){this.image=a,this.rectangleDetector=new Nt(this.image)}detect(){const a=this.rectangleDetector.detect();let c=this.detectSolid1(a);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new X;c=this.shiftToModuleCenter(c);const f=c[0],m=c[1],y=c[2],b=c[3];let A=this.transitionsBetween(f,b)+1,T=this.transitionsBetween(y,b)+1;(A&1)===1&&(A+=1),(T&1)===1&&(T+=1),4*A<7*T&&4*T<7*A&&(A=T=Math.max(A,T));let R=Sn.sampleGrid(this.image,f,m,y,b,A,T);return new wt(R,[f,m,y,b])}static shiftPoint(a,c,f){let m=(c.getX()-a.getX())/(f+1),y=(c.getY()-a.getY())/(f+1);return new De(a.getX()+m,a.getY()+y)}static moveAway(a,c,f){let m=a.getX(),y=a.getY();return m<c?m-=1:m+=1,y<f?y-=1:y+=1,new De(m,y)}detectSolid1(a){let c=a[0],f=a[1],m=a[3],y=a[2],b=this.transitionsBetween(c,f),A=this.transitionsBetween(f,m),T=this.transitionsBetween(m,y),R=this.transitionsBetween(y,c),M=b,z=[y,c,f,m];return M>A&&(M=A,z[0]=c,z[1]=f,z[2]=m,z[3]=y),M>T&&(M=T,z[0]=f,z[1]=m,z[2]=y,z[3]=c),M>R&&(z[0]=m,z[1]=y,z[2]=c,z[3]=f),z}detectSolid2(a){let c=a[0],f=a[1],m=a[2],y=a[3],b=this.transitionsBetween(c,y),A=Sn.shiftPoint(f,m,(b+1)*4),T=Sn.shiftPoint(m,f,(b+1)*4),R=this.transitionsBetween(A,c),M=this.transitionsBetween(T,y);return R<M?(a[0]=c,a[1]=f,a[2]=m,a[3]=y):(a[0]=f,a[1]=m,a[2]=y,a[3]=c),a}correctTopRight(a){let c=a[0],f=a[1],m=a[2],y=a[3],b=this.transitionsBetween(c,y),A=this.transitionsBetween(f,y),T=Sn.shiftPoint(c,f,(A+1)*4),R=Sn.shiftPoint(m,f,(b+1)*4);b=this.transitionsBetween(T,y),A=this.transitionsBetween(R,y);let M=new De(y.getX()+(m.getX()-f.getX())/(b+1),y.getY()+(m.getY()-f.getY())/(b+1)),z=new De(y.getX()+(c.getX()-f.getX())/(A+1),y.getY()+(c.getY()-f.getY())/(A+1));if(!this.isValid(M))return this.isValid(z)?z:null;if(!this.isValid(z))return M;let G=this.transitionsBetween(T,M)+this.transitionsBetween(R,M),Z=this.transitionsBetween(T,z)+this.transitionsBetween(R,z);return G>Z?M:z}shiftToModuleCenter(a){let c=a[0],f=a[1],m=a[2],y=a[3],b=this.transitionsBetween(c,y)+1,A=this.transitionsBetween(m,y)+1,T=Sn.shiftPoint(c,f,A*4),R=Sn.shiftPoint(m,f,b*4);b=this.transitionsBetween(T,y)+1,A=this.transitionsBetween(R,y)+1,(b&1)===1&&(b+=1),(A&1)===1&&(A+=1);let M=(c.getX()+f.getX()+m.getX()+y.getX())/4,z=(c.getY()+f.getY()+m.getY()+y.getY())/4;c=Sn.moveAway(c,M,z),f=Sn.moveAway(f,M,z),m=Sn.moveAway(m,M,z),y=Sn.moveAway(y,M,z);let G,Z;return T=Sn.shiftPoint(c,f,A*4),T=Sn.shiftPoint(T,y,b*4),G=Sn.shiftPoint(f,c,A*4),G=Sn.shiftPoint(G,m,b*4),R=Sn.shiftPoint(m,y,A*4),R=Sn.shiftPoint(R,f,b*4),Z=Sn.shiftPoint(y,m,A*4),Z=Sn.shiftPoint(Z,c,b*4),[T,G,R,Z]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,c,f,m,y,b,A){return Qi.getInstance().sampleGrid(a,b,A,.5,.5,b-.5,.5,b-.5,A-.5,.5,A-.5,c.getX(),c.getY(),y.getX(),y.getY(),m.getX(),m.getY(),f.getX(),f.getY())}transitionsBetween(a,c){let f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),y=Math.trunc(c.getX()),b=Math.trunc(c.getY()),A=Math.abs(b-m)>Math.abs(y-f);if(A){let le=f;f=m,m=le,le=y,y=b,b=le}let T=Math.abs(y-f),R=Math.abs(b-m),M=-T/2,z=m<b?1:-1,G=f<y?1:-1,Z=0,re=this.image.get(A?m:f,A?f:m);for(let le=f,he=m;le!==y;le+=G){let be=this.image.get(A?he:le,A?le:he);if(be!==re&&(Z++,re=be),M+=R,M>0){if(he===b)break;he+=z,M-=T}}return Z}}class vr{constructor(){this.decoder=new M0}decode(a,c=null){let f,m;if(c!=null&&c.has(W.PURE_BARCODE)){const R=vr.extractPureBits(a.getBlackMatrix());f=this.decoder.decode(R),m=vr.NO_POINTS}else{const R=new Sn(a.getBlackMatrix()).detect();f=this.decoder.decode(R.getBits()),m=R.getPoints()}const y=f.getRawBytes(),b=new Ie(f.getText(),y,8*y.length,m,Oe.DATA_MATRIX,L.currentTimeMillis()),A=f.getByteSegments();A!=null&&b.putMetadata(mt.BYTE_SEGMENTS,A);const T=f.getECLevel();return T!=null&&b.putMetadata(mt.ERROR_CORRECTION_LEVEL,T),b}reset(){}static extractPureBits(a){const c=a.getTopLeftOnBit(),f=a.getBottomRightOnBit();if(c==null||f==null)throw new X;const m=this.moduleSize(c,a);let y=c[1];const b=f[1];let A=c[0];const R=(f[0]-A+1)/m,M=(b-y+1)/m;if(R<=0||M<=0)throw new X;const z=m/2;y+=z,A+=z;const G=new ue(R,M);for(let Z=0;Z<M;Z++){const re=y+Z*m;for(let le=0;le<R;le++)a.get(A+le*m,re)&&G.set(le,Z)}return G}static moduleSize(a,c){const f=c.getWidth();let m=a[0];const y=a[1];for(;m<f&&c.get(m,y);)m++;if(m===f)throw new X;const b=m-a[0];if(b===0)throw new X;return b}}vr.NO_POINTS=[];class Ol extends ve{constructor(a=500){super(new vr,a)}}var Ha;(function(U){U[U.L=0]="L",U[U.M=1]="M",U[U.Q=2]="Q",U[U.H=3]="H"})(Ha||(Ha={}));class Ct{constructor(a,c,f){this.value=a,this.stringValue=c,this.bits=f,Ct.FOR_BITS.set(f,this),Ct.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Ct.L;case"M":return Ct.M;case"Q":return Ct.Q;case"H":return Ct.H;default:throw new _(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Ct))return!1;const c=a;return this.value===c.value}static forBits(a){if(a<0||a>=Ct.FOR_BITS.size)throw new E;return Ct.FOR_BITS.get(a)}}Ct.FOR_BITS=new Map,Ct.FOR_VALUE=new Map,Ct.L=new Ct(Ha.L,"L",1),Ct.M=new Ct(Ha.M,"M",0),Ct.Q=new Ct(Ha.Q,"Q",3),Ct.H=new Ct(Ha.H,"H",2);class ci{constructor(a){this.errorCorrectionLevel=Ct.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,c){return j.bitCount(a^c)}static decodeFormatInformation(a,c){const f=ci.doDecodeFormatInformation(a,c);return f!==null?f:ci.doDecodeFormatInformation(a^ci.FORMAT_INFO_MASK_QR,c^ci.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,c){let f=Number.MAX_SAFE_INTEGER,m=0;for(const y of ci.FORMAT_INFO_DECODE_LOOKUP){const b=y[0];if(b===a||b===c)return new ci(y[1]);let A=ci.numBitsDiffering(a,b);A<f&&(m=y[1],f=A),a!==c&&(A=ci.numBitsDiffering(c,b),A<f&&(m=y[1],f=A))}return f<=3?new ci(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof ci))return!1;const c=a;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}ci.FORMAT_INFO_MASK_QR=21522,ci.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class me{constructor(a,...c){this.ecCodewordsPerBlock=a,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const c=this.ecBlocks;for(const f of c)a+=f.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ${constructor(a,c){this.count=a,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ke{constructor(a,c,...f){this.versionNumber=a,this.alignmentPatternCenters=c,this.ecBlocks=f;let m=0;const y=f[0].getECCodewordsPerBlock(),b=f[0].getECBlocks();for(const A of b)m+=A.getCount()*(A.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new te;try{return this.getVersionForNumber((a-17)/4)}catch{throw new te}}static getVersionForNumber(a){if(a<1||a>40)throw new E;return Ke.VERSIONS[a-1]}static decodeVersionInformation(a){let c=Number.MAX_SAFE_INTEGER,f=0;for(let m=0;m<Ke.VERSION_DECODE_INFO.length;m++){const y=Ke.VERSION_DECODE_INFO[m];if(y===a)return Ke.getVersionForNumber(m+7);const b=ci.numBitsDiffering(a,y);b<c&&(f=m+7,c=b)}return c<=3?Ke.getVersionForNumber(f):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),c=new ue(a);c.setRegion(0,0,9,9),c.setRegion(a-8,0,8,9),c.setRegion(0,a-8,9,8);const f=this.alignmentPatternCenters.length;for(let m=0;m<f;m++){const y=this.alignmentPatternCenters[m]-2;for(let b=0;b<f;b++)m===0&&(b===0||b===f-1)||m===f-1&&b===0||c.setRegion(this.alignmentPatternCenters[b]-2,y,5,5)}return c.setRegion(6,9,1,a-17),c.setRegion(9,6,a-17,1),this.versionNumber>6&&(c.setRegion(a-11,0,3,6),c.setRegion(0,a-11,6,3)),c}toString(){return""+this.versionNumber}}Ke.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ke.VERSIONS=[new Ke(1,new Int32Array(0),new me(7,new $(1,19)),new me(10,new $(1,16)),new me(13,new $(1,13)),new me(17,new $(1,9))),new Ke(2,Int32Array.from([6,18]),new me(10,new $(1,34)),new me(16,new $(1,28)),new me(22,new $(1,22)),new me(28,new $(1,16))),new Ke(3,Int32Array.from([6,22]),new me(15,new $(1,55)),new me(26,new $(1,44)),new me(18,new $(2,17)),new me(22,new $(2,13))),new Ke(4,Int32Array.from([6,26]),new me(20,new $(1,80)),new me(18,new $(2,32)),new me(26,new $(2,24)),new me(16,new $(4,9))),new Ke(5,Int32Array.from([6,30]),new me(26,new $(1,108)),new me(24,new $(2,43)),new me(18,new $(2,15),new $(2,16)),new me(22,new $(2,11),new $(2,12))),new Ke(6,Int32Array.from([6,34]),new me(18,new $(2,68)),new me(16,new $(4,27)),new me(24,new $(4,19)),new me(28,new $(4,15))),new Ke(7,Int32Array.from([6,22,38]),new me(20,new $(2,78)),new me(18,new $(4,31)),new me(18,new $(2,14),new $(4,15)),new me(26,new $(4,13),new $(1,14))),new Ke(8,Int32Array.from([6,24,42]),new me(24,new $(2,97)),new me(22,new $(2,38),new $(2,39)),new me(22,new $(4,18),new $(2,19)),new me(26,new $(4,14),new $(2,15))),new Ke(9,Int32Array.from([6,26,46]),new me(30,new $(2,116)),new me(22,new $(3,36),new $(2,37)),new me(20,new $(4,16),new $(4,17)),new me(24,new $(4,12),new $(4,13))),new Ke(10,Int32Array.from([6,28,50]),new me(18,new $(2,68),new $(2,69)),new me(26,new $(4,43),new $(1,44)),new me(24,new $(6,19),new $(2,20)),new me(28,new $(6,15),new $(2,16))),new Ke(11,Int32Array.from([6,30,54]),new me(20,new $(4,81)),new me(30,new $(1,50),new $(4,51)),new me(28,new $(4,22),new $(4,23)),new me(24,new $(3,12),new $(8,13))),new Ke(12,Int32Array.from([6,32,58]),new me(24,new $(2,92),new $(2,93)),new me(22,new $(6,36),new $(2,37)),new me(26,new $(4,20),new $(6,21)),new me(28,new $(7,14),new $(4,15))),new Ke(13,Int32Array.from([6,34,62]),new me(26,new $(4,107)),new me(22,new $(8,37),new $(1,38)),new me(24,new $(8,20),new $(4,21)),new me(22,new $(12,11),new $(4,12))),new Ke(14,Int32Array.from([6,26,46,66]),new me(30,new $(3,115),new $(1,116)),new me(24,new $(4,40),new $(5,41)),new me(20,new $(11,16),new $(5,17)),new me(24,new $(11,12),new $(5,13))),new Ke(15,Int32Array.from([6,26,48,70]),new me(22,new $(5,87),new $(1,88)),new me(24,new $(5,41),new $(5,42)),new me(30,new $(5,24),new $(7,25)),new me(24,new $(11,12),new $(7,13))),new Ke(16,Int32Array.from([6,26,50,74]),new me(24,new $(5,98),new $(1,99)),new me(28,new $(7,45),new $(3,46)),new me(24,new $(15,19),new $(2,20)),new me(30,new $(3,15),new $(13,16))),new Ke(17,Int32Array.from([6,30,54,78]),new me(28,new $(1,107),new $(5,108)),new me(28,new $(10,46),new $(1,47)),new me(28,new $(1,22),new $(15,23)),new me(28,new $(2,14),new $(17,15))),new Ke(18,Int32Array.from([6,30,56,82]),new me(30,new $(5,120),new $(1,121)),new me(26,new $(9,43),new $(4,44)),new me(28,new $(17,22),new $(1,23)),new me(28,new $(2,14),new $(19,15))),new Ke(19,Int32Array.from([6,30,58,86]),new me(28,new $(3,113),new $(4,114)),new me(26,new $(3,44),new $(11,45)),new me(26,new $(17,21),new $(4,22)),new me(26,new $(9,13),new $(16,14))),new Ke(20,Int32Array.from([6,34,62,90]),new me(28,new $(3,107),new $(5,108)),new me(26,new $(3,41),new $(13,42)),new me(30,new $(15,24),new $(5,25)),new me(28,new $(15,15),new $(10,16))),new Ke(21,Int32Array.from([6,28,50,72,94]),new me(28,new $(4,116),new $(4,117)),new me(26,new $(17,42)),new me(28,new $(17,22),new $(6,23)),new me(30,new $(19,16),new $(6,17))),new Ke(22,Int32Array.from([6,26,50,74,98]),new me(28,new $(2,111),new $(7,112)),new me(28,new $(17,46)),new me(30,new $(7,24),new $(16,25)),new me(24,new $(34,13))),new Ke(23,Int32Array.from([6,30,54,78,102]),new me(30,new $(4,121),new $(5,122)),new me(28,new $(4,47),new $(14,48)),new me(30,new $(11,24),new $(14,25)),new me(30,new $(16,15),new $(14,16))),new Ke(24,Int32Array.from([6,28,54,80,106]),new me(30,new $(6,117),new $(4,118)),new me(28,new $(6,45),new $(14,46)),new me(30,new $(11,24),new $(16,25)),new me(30,new $(30,16),new $(2,17))),new Ke(25,Int32Array.from([6,32,58,84,110]),new me(26,new $(8,106),new $(4,107)),new me(28,new $(8,47),new $(13,48)),new me(30,new $(7,24),new $(22,25)),new me(30,new $(22,15),new $(13,16))),new Ke(26,Int32Array.from([6,30,58,86,114]),new me(28,new $(10,114),new $(2,115)),new me(28,new $(19,46),new $(4,47)),new me(28,new $(28,22),new $(6,23)),new me(30,new $(33,16),new $(4,17))),new Ke(27,Int32Array.from([6,34,62,90,118]),new me(30,new $(8,122),new $(4,123)),new me(28,new $(22,45),new $(3,46)),new me(30,new $(8,23),new $(26,24)),new me(30,new $(12,15),new $(28,16))),new Ke(28,Int32Array.from([6,26,50,74,98,122]),new me(30,new $(3,117),new $(10,118)),new me(28,new $(3,45),new $(23,46)),new me(30,new $(4,24),new $(31,25)),new me(30,new $(11,15),new $(31,16))),new Ke(29,Int32Array.from([6,30,54,78,102,126]),new me(30,new $(7,116),new $(7,117)),new me(28,new $(21,45),new $(7,46)),new me(30,new $(1,23),new $(37,24)),new me(30,new $(19,15),new $(26,16))),new Ke(30,Int32Array.from([6,26,52,78,104,130]),new me(30,new $(5,115),new $(10,116)),new me(28,new $(19,47),new $(10,48)),new me(30,new $(15,24),new $(25,25)),new me(30,new $(23,15),new $(25,16))),new Ke(31,Int32Array.from([6,30,56,82,108,134]),new me(30,new $(13,115),new $(3,116)),new me(28,new $(2,46),new $(29,47)),new me(30,new $(42,24),new $(1,25)),new me(30,new $(23,15),new $(28,16))),new Ke(32,Int32Array.from([6,34,60,86,112,138]),new me(30,new $(17,115)),new me(28,new $(10,46),new $(23,47)),new me(30,new $(10,24),new $(35,25)),new me(30,new $(19,15),new $(35,16))),new Ke(33,Int32Array.from([6,30,58,86,114,142]),new me(30,new $(17,115),new $(1,116)),new me(28,new $(14,46),new $(21,47)),new me(30,new $(29,24),new $(19,25)),new me(30,new $(11,15),new $(46,16))),new Ke(34,Int32Array.from([6,34,62,90,118,146]),new me(30,new $(13,115),new $(6,116)),new me(28,new $(14,46),new $(23,47)),new me(30,new $(44,24),new $(7,25)),new me(30,new $(59,16),new $(1,17))),new Ke(35,Int32Array.from([6,30,54,78,102,126,150]),new me(30,new $(12,121),new $(7,122)),new me(28,new $(12,47),new $(26,48)),new me(30,new $(39,24),new $(14,25)),new me(30,new $(22,15),new $(41,16))),new Ke(36,Int32Array.from([6,24,50,76,102,128,154]),new me(30,new $(6,121),new $(14,122)),new me(28,new $(6,47),new $(34,48)),new me(30,new $(46,24),new $(10,25)),new me(30,new $(2,15),new $(64,16))),new Ke(37,Int32Array.from([6,28,54,80,106,132,158]),new me(30,new $(17,122),new $(4,123)),new me(28,new $(29,46),new $(14,47)),new me(30,new $(49,24),new $(10,25)),new me(30,new $(24,15),new $(46,16))),new Ke(38,Int32Array.from([6,32,58,84,110,136,162]),new me(30,new $(4,122),new $(18,123)),new me(28,new $(13,46),new $(32,47)),new me(30,new $(48,24),new $(14,25)),new me(30,new $(42,15),new $(32,16))),new Ke(39,Int32Array.from([6,26,54,82,110,138,166]),new me(30,new $(20,117),new $(4,118)),new me(28,new $(40,47),new $(7,48)),new me(30,new $(43,24),new $(22,25)),new me(30,new $(10,15),new $(67,16))),new Ke(40,Int32Array.from([6,30,58,86,114,142,170]),new me(30,new $(19,118),new $(6,119)),new me(28,new $(18,47),new $(31,48)),new me(30,new $(34,24),new $(34,25)),new me(30,new $(20,15),new $(61,16)))];var ei;(function(U){U[U.DATA_MASK_000=0]="DATA_MASK_000",U[U.DATA_MASK_001=1]="DATA_MASK_001",U[U.DATA_MASK_010=2]="DATA_MASK_010",U[U.DATA_MASK_011=3]="DATA_MASK_011",U[U.DATA_MASK_100=4]="DATA_MASK_100",U[U.DATA_MASK_101=5]="DATA_MASK_101",U[U.DATA_MASK_110=6]="DATA_MASK_110",U[U.DATA_MASK_111=7]="DATA_MASK_111"})(ei||(ei={}));class ts{constructor(a,c){this.value=a,this.isMasked=c}unmaskBitMatrix(a,c){for(let f=0;f<c;f++)for(let m=0;m<c;m++)this.isMasked(f,m)&&a.flip(m,f)}}ts.values=new Map([[ei.DATA_MASK_000,new ts(ei.DATA_MASK_000,(U,a)=>(U+a&1)===0)],[ei.DATA_MASK_001,new ts(ei.DATA_MASK_001,(U,a)=>(U&1)===0)],[ei.DATA_MASK_010,new ts(ei.DATA_MASK_010,(U,a)=>a%3===0)],[ei.DATA_MASK_011,new ts(ei.DATA_MASK_011,(U,a)=>(U+a)%3===0)],[ei.DATA_MASK_100,new ts(ei.DATA_MASK_100,(U,a)=>(Math.floor(U/2)+Math.floor(a/3)&1)===0)],[ei.DATA_MASK_101,new ts(ei.DATA_MASK_101,(U,a)=>U*a%6===0)],[ei.DATA_MASK_110,new ts(ei.DATA_MASK_110,(U,a)=>U*a%6<3)],[ei.DATA_MASK_111,new ts(ei.DATA_MASK_111,(U,a)=>(U+a+U*a%3&1)===0)]]);class qa{constructor(a){const c=a.getHeight();if(c<21||(c&3)!==1)throw new te;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let y=0;y<6;y++)a=this.copyBit(y,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let y=5;y>=0;y--)a=this.copyBit(8,y,a);const c=this.bitMatrix.getHeight();let f=0;const m=c-7;for(let y=c-1;y>=m;y--)f=this.copyBit(8,y,f);for(let y=c-8;y<c;y++)f=this.copyBit(y,8,f);if(this.parsedFormatInfo=ci.decodeFormatInformation(a,f),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new te}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),c=Math.floor((a-17)/4);if(c<=6)return Ke.getVersionForNumber(c);let f=0;const m=a-11;for(let b=5;b>=0;b--)for(let A=a-9;A>=m;A--)f=this.copyBit(A,b,f);let y=Ke.decodeVersionInformation(f);if(y!==null&&y.getDimensionForVersion()===a)return this.parsedVersion=y,y;f=0;for(let b=5;b>=0;b--)for(let A=a-9;A>=m;A--)f=this.copyBit(b,A,f);if(y=Ke.decodeVersionInformation(f),y!==null&&y.getDimensionForVersion()===a)return this.parsedVersion=y,y;throw new te}copyBit(a,c,f){return(this.isMirror?this.bitMatrix.get(c,a):this.bitMatrix.get(a,c))?f<<1|1:f<<1}readCodewords(){const a=this.readFormatInformation(),c=this.readVersion(),f=ts.values.get(a.getDataMask()),m=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,m);const y=c.buildFunctionPattern();let b=!0;const A=new Uint8Array(c.getTotalCodewords());let T=0,R=0,M=0;for(let z=m-1;z>0;z-=2){z===6&&z--;for(let G=0;G<m;G++){const Z=b?m-1-G:G;for(let re=0;re<2;re++)y.get(z-re,Z)||(M++,R<<=1,this.bitMatrix.get(z-re,Z)&&(R|=1),M===8&&(A[T++]=R,M=0,R=0))}b=!b}if(T!==c.getTotalCodewords())throw new te;return A}remask(){if(this.parsedFormatInfo===null)return;const a=ts.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let c=0,f=a.getWidth();c<f;c++)for(let m=c+1,y=a.getHeight();m<y;m++)a.get(c,m)!==a.get(m,c)&&(a.flip(m,c),a.flip(c,m))}}class xu{constructor(a,c){this.numDataCodewords=a,this.codewords=c}static getDataBlocks(a,c,f){if(a.length!==c.getTotalCodewords())throw new E;const m=c.getECBlocksForLevel(f);let y=0;const b=m.getECBlocks();for(const re of b)y+=re.getCount();const A=new Array(y);let T=0;for(const re of b)for(let le=0;le<re.getCount();le++){const he=re.getDataCodewords(),be=m.getECCodewordsPerBlock()+he;A[T++]=new xu(he,new Uint8Array(be))}const R=A[0].codewords.length;let M=A.length-1;for(;M>=0&&A[M].codewords.length!==R;)M--;M++;const z=R-m.getECCodewordsPerBlock();let G=0;for(let re=0;re<z;re++)for(let le=0;le<T;le++)A[le].codewords[re]=a[G++];for(let re=M;re<T;re++)A[re].codewords[z]=a[G++];const Z=A[0].codewords.length;for(let re=z;re<Z;re++)for(let le=0;le<T;le++){const he=le<M?re:re+1;A[le].codewords[he]=a[G++]}return A}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ns;(function(U){U[U.TERMINATOR=0]="TERMINATOR",U[U.NUMERIC=1]="NUMERIC",U[U.ALPHANUMERIC=2]="ALPHANUMERIC",U[U.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",U[U.BYTE=4]="BYTE",U[U.ECI=5]="ECI",U[U.KANJI=6]="KANJI",U[U.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",U[U.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",U[U.HANZI=9]="HANZI"})(ns||(ns={}));class tt{constructor(a,c,f,m){this.value=a,this.stringValue=c,this.characterCountBitsForVersions=f,this.bits=m,tt.FOR_BITS.set(m,this),tt.FOR_VALUE.set(a,this)}static forBits(a){const c=tt.FOR_BITS.get(a);if(c===void 0)throw new E;return c}getCharacterCountBits(a){const c=a.getVersionNumber();let f;return c<=9?f=0:c<=26?f=1:f=2,this.characterCountBitsForVersions[f]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof tt))return!1;const c=a;return this.value===c.value}toString(){return this.stringValue}}tt.FOR_BITS=new Map,tt.FOR_VALUE=new Map,tt.TERMINATOR=new tt(ns.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),tt.NUMERIC=new tt(ns.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),tt.ALPHANUMERIC=new tt(ns.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),tt.STRUCTURED_APPEND=new tt(ns.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),tt.BYTE=new tt(ns.BYTE,"BYTE",Int32Array.from([8,16,16]),4),tt.ECI=new tt(ns.ECI,"ECI",Int32Array.from([0,0,0]),7),tt.KANJI=new tt(ns.KANJI,"KANJI",Int32Array.from([8,10,12]),8),tt.FNC1_FIRST_POSITION=new tt(ns.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),tt.FNC1_SECOND_POSITION=new tt(ns.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),tt.HANZI=new tt(ns.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class gn{static decode(a,c,f,m){const y=new Es(a);let b=new Ne;const A=new Array;let T=-1,R=-1;try{let M=null,z=!1,G;do{if(y.available()<4)G=tt.TERMINATOR;else{const Z=y.readBits(4);G=tt.forBits(Z)}switch(G){case tt.TERMINATOR:break;case tt.FNC1_FIRST_POSITION:case tt.FNC1_SECOND_POSITION:z=!0;break;case tt.STRUCTURED_APPEND:if(y.available()<16)throw new te;T=y.readBits(8),R=y.readBits(8);break;case tt.ECI:const Z=gn.parseECIValue(y);if(M=ie.getCharacterSetECIByValue(Z),M===null)throw new te;break;case tt.HANZI:const re=y.readBits(4),le=y.readBits(G.getCharacterCountBits(c));re===gn.GB2312_SUBSET&&gn.decodeHanziSegment(y,b,le);break;default:const he=y.readBits(G.getCharacterCountBits(c));switch(G){case tt.NUMERIC:gn.decodeNumericSegment(y,b,he);break;case tt.ALPHANUMERIC:gn.decodeAlphanumericSegment(y,b,he,z);break;case tt.BYTE:gn.decodeByteSegment(y,b,he,M,A,m);break;case tt.KANJI:gn.decodeKanjiSegment(y,b,he);break;default:throw new te}break}}while(G!==tt.TERMINATOR)}catch{throw new te}return new Ft(a,b.toString(),A.length===0?null:A,f===null?null:f.toString(),T,R)}static decodeHanziSegment(a,c,f){if(f*13>a.available())throw new te;const m=new Uint8Array(2*f);let y=0;for(;f>0;){const b=a.readBits(13);let A=b/96<<8&4294967295|b%96;A<959?A+=41377:A+=42657,m[y]=A>>8&255,m[y+1]=A&255,y+=2,f--}try{c.append(Ee.decode(m,pe.GB2312))}catch(b){throw new te(b)}}static decodeKanjiSegment(a,c,f){if(f*13>a.available())throw new te;const m=new Uint8Array(2*f);let y=0;for(;f>0;){const b=a.readBits(13);let A=b/192<<8&4294967295|b%192;A<7936?A+=33088:A+=49472,m[y]=A>>8,m[y+1]=A,y+=2,f--}try{c.append(Ee.decode(m,pe.SHIFT_JIS))}catch(b){throw new te(b)}}static decodeByteSegment(a,c,f,m,y,b){if(8*f>a.available())throw new te;const A=new Uint8Array(f);for(let R=0;R<f;R++)A[R]=a.readBits(8);let T;m===null?T=pe.guessEncoding(A,b):T=m.getName();try{c.append(Ee.decode(A,T))}catch(R){throw new te(R)}y.push(A)}static toAlphaNumericChar(a){if(a>=gn.ALPHANUMERIC_CHARS.length)throw new te;return gn.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,c,f,m){const y=c.length();for(;f>1;){if(a.available()<11)throw new te;const b=a.readBits(11);c.append(gn.toAlphaNumericChar(Math.floor(b/45))),c.append(gn.toAlphaNumericChar(b%45)),f-=2}if(f===1){if(a.available()<6)throw new te;c.append(gn.toAlphaNumericChar(a.readBits(6)))}if(m)for(let b=y;b<c.length();b++)c.charAt(b)==="%"&&(b<c.length()-1&&c.charAt(b+1)==="%"?c.deleteCharAt(b+1):c.setCharAt(b,""))}static decodeNumericSegment(a,c,f){for(;f>=3;){if(a.available()<10)throw new te;const m=a.readBits(10);if(m>=1e3)throw new te;c.append(gn.toAlphaNumericChar(Math.floor(m/100))),c.append(gn.toAlphaNumericChar(Math.floor(m/10)%10)),c.append(gn.toAlphaNumericChar(m%10)),f-=3}if(f===2){if(a.available()<7)throw new te;const m=a.readBits(7);if(m>=100)throw new te;c.append(gn.toAlphaNumericChar(Math.floor(m/10))),c.append(gn.toAlphaNumericChar(m%10))}else if(f===1){if(a.available()<4)throw new te;const m=a.readBits(4);if(m>=10)throw new te;c.append(gn.toAlphaNumericChar(m))}}static parseECIValue(a){const c=a.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const f=a.readBits(8);return(c&63)<<8&4294967295|f}if((c&224)===192){const f=a.readBits(16);return(c&31)<<16&4294967295|f}throw new te}}gn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",gn.GB2312_SUBSET=1;class Xd{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const c=a[0];a[0]=a[2],a[2]=c}}class D0{constructor(){this.rsDecoder=new mn(At.QR_CODE_FIELD_256)}decodeBooleanArray(a,c){return this.decodeBitMatrix(ue.parseFromBooleanArray(a),c)}decodeBitMatrix(a,c){const f=new qa(a);let m=null;try{return this.decodeBitMatrixParser(f,c)}catch(y){m=y}try{f.remask(),f.setMirror(!0),f.readVersion(),f.readFormatInformation(),f.mirror();const y=this.decodeBitMatrixParser(f,c);return y.setOther(new Xd(!0)),y}catch(y){throw m!==null?m:y}}decodeBitMatrixParser(a,c){const f=a.readVersion(),m=a.readFormatInformation().getErrorCorrectionLevel(),y=a.readCodewords(),b=xu.getDataBlocks(y,f,m);let A=0;for(const M of b)A+=M.getNumDataCodewords();const T=new Uint8Array(A);let R=0;for(const M of b){const z=M.getCodewords(),G=M.getNumDataCodewords();this.correctErrors(z,G);for(let Z=0;Z<G;Z++)T[R++]=z[Z]}return gn.decode(T,f,m,c)}correctErrors(a,c){const f=new Int32Array(a);try{this.rsDecoder.decode(f,a.length-c)}catch{throw new k}for(let m=0;m<c;m++)a[m]=f[m]}}class Ya extends De{constructor(a,c,f){super(a,c),this.estimatedModuleSize=f}aboutEquals(a,c,f){if(Math.abs(c-this.getY())<=a&&Math.abs(f-this.getX())<=a){const m=Math.abs(a-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(a,c,f){const m=(this.getX()+c)/2,y=(this.getY()+a)/2,b=(this.estimatedModuleSize+f)/2;return new Ya(m,y,b)}}class us{constructor(a,c,f,m,y,b,A){this.image=a,this.startX=c,this.startY=f,this.width=m,this.height=y,this.moduleSize=b,this.resultPointCallback=A,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,c=this.height,f=this.width,m=a+f,y=this.startY+c/2,b=new Int32Array(3),A=this.image;for(let T=0;T<c;T++){const R=y+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));b[0]=0,b[1]=0,b[2]=0;let M=a;for(;M<m&&!A.get(M,R);)M++;let z=0;for(;M<m;){if(A.get(M,R))if(z===1)b[1]++;else if(z===2){if(this.foundPatternCross(b)){const G=this.handlePossibleCenter(b,R,M);if(G!==null)return G}b[0]=b[2],b[1]=1,b[2]=0,z=1}else b[++z]++;else z===1&&z++,b[z]++;M++}if(this.foundPatternCross(b)){const G=this.handlePossibleCenter(b,R,m);if(G!==null)return G}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(a,c){return c-a[2]-a[1]/2}foundPatternCross(a){const c=this.moduleSize,f=c/2;for(let m=0;m<3;m++)if(Math.abs(c-a[m])>=f)return!1;return!0}crossCheckVertical(a,c,f,m){const y=this.image,b=y.getHeight(),A=this.crossCheckStateCount;A[0]=0,A[1]=0,A[2]=0;let T=a;for(;T>=0&&y.get(c,T)&&A[1]<=f;)A[1]++,T--;if(T<0||A[1]>f)return NaN;for(;T>=0&&!y.get(c,T)&&A[0]<=f;)A[0]++,T--;if(A[0]>f)return NaN;for(T=a+1;T<b&&y.get(c,T)&&A[1]<=f;)A[1]++,T++;if(T===b||A[1]>f)return NaN;for(;T<b&&!y.get(c,T)&&A[2]<=f;)A[2]++,T++;if(A[2]>f)return NaN;const R=A[0]+A[1]+A[2];return 5*Math.abs(R-m)>=2*m?NaN:this.foundPatternCross(A)?us.centerFromEnd(A,T):NaN}handlePossibleCenter(a,c,f){const m=a[0]+a[1]+a[2],y=us.centerFromEnd(a,f),b=this.crossCheckVertical(c,y,2*a[1],m);if(!isNaN(b)){const A=(a[0]+a[1]+a[2])/3;for(const R of this.possibleCenters)if(R.aboutEquals(A,b,y))return R.combineEstimate(b,y,A);const T=new Ya(y,b,A);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class jo extends De{constructor(a,c,f,m){super(a,c),this.estimatedModuleSize=f,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,c,f){if(Math.abs(c-this.getY())<=a&&Math.abs(f-this.getX())<=a){const m=Math.abs(a-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(a,c,f){const m=this.count+1,y=(this.count*this.getX()+c)/m,b=(this.count*this.getY()+a)/m,A=(this.count*this.estimatedModuleSize+f)/m;return new jo(y,b,A,m)}}class yu{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nn{constructor(a,c){this.image=a,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const c=a!=null&&a.get(W.TRY_HARDER)!==void 0,f=a!=null&&a.get(W.PURE_BARCODE)!==void 0,m=this.image,y=m.getHeight(),b=m.getWidth();let A=Math.floor(3*y/(4*Nn.MAX_MODULES));(A<Nn.MIN_SKIP||c)&&(A=Nn.MIN_SKIP);let T=!1;const R=new Int32Array(5);for(let z=A-1;z<y&&!T;z+=A){R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0;let G=0;for(let Z=0;Z<b;Z++)if(m.get(Z,z))(G&1)===1&&G++,R[G]++;else if((G&1)===0)if(G===4)if(Nn.foundPatternCross(R)){if(this.handlePossibleCenter(R,z,Z,f)===!0)if(A=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const le=this.findRowSkip();le>R[2]&&(z+=le-R[2]-A,Z=b-1)}else{R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,G=3;continue}G=0,R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0}else R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,G=3;else R[++G]++;else R[G]++;Nn.foundPatternCross(R)&&this.handlePossibleCenter(R,z,b,f)===!0&&(A=R[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const M=this.selectBestPatterns();return De.orderBestPatterns(M),new yu(M)}static centerFromEnd(a,c){return c-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let c=0;for(let y=0;y<5;y++){const b=a[y];if(b===0)return!1;c+=b}if(c<7)return!1;const f=c/7,m=f/2;return Math.abs(f-a[0])<m&&Math.abs(f-a[1])<m&&Math.abs(3*f-a[2])<3*m&&Math.abs(f-a[3])<m&&Math.abs(f-a[4])<m}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,c,f,m){const y=this.getCrossCheckStateCount();let b=0;const A=this.image;for(;a>=b&&c>=b&&A.get(c-b,a-b);)y[2]++,b++;if(a<b||c<b)return!1;for(;a>=b&&c>=b&&!A.get(c-b,a-b)&&y[1]<=f;)y[1]++,b++;if(a<b||c<b||y[1]>f)return!1;for(;a>=b&&c>=b&&A.get(c-b,a-b)&&y[0]<=f;)y[0]++,b++;if(y[0]>f)return!1;const T=A.getHeight(),R=A.getWidth();for(b=1;a+b<T&&c+b<R&&A.get(c+b,a+b);)y[2]++,b++;if(a+b>=T||c+b>=R)return!1;for(;a+b<T&&c+b<R&&!A.get(c+b,a+b)&&y[3]<f;)y[3]++,b++;if(a+b>=T||c+b>=R||y[3]>=f)return!1;for(;a+b<T&&c+b<R&&A.get(c+b,a+b)&&y[4]<f;)y[4]++,b++;if(y[4]>=f)return!1;const M=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(M-m)<2*m&&Nn.foundPatternCross(y)}crossCheckVertical(a,c,f,m){const y=this.image,b=y.getHeight(),A=this.getCrossCheckStateCount();let T=a;for(;T>=0&&y.get(c,T);)A[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(c,T)&&A[1]<=f;)A[1]++,T--;if(T<0||A[1]>f)return NaN;for(;T>=0&&y.get(c,T)&&A[0]<=f;)A[0]++,T--;if(A[0]>f)return NaN;for(T=a+1;T<b&&y.get(c,T);)A[2]++,T++;if(T===b)return NaN;for(;T<b&&!y.get(c,T)&&A[3]<f;)A[3]++,T++;if(T===b||A[3]>=f)return NaN;for(;T<b&&y.get(c,T)&&A[4]<f;)A[4]++,T++;if(A[4]>=f)return NaN;const R=A[0]+A[1]+A[2]+A[3]+A[4];return 5*Math.abs(R-m)>=2*m?NaN:Nn.foundPatternCross(A)?Nn.centerFromEnd(A,T):NaN}crossCheckHorizontal(a,c,f,m){const y=this.image,b=y.getWidth(),A=this.getCrossCheckStateCount();let T=a;for(;T>=0&&y.get(T,c);)A[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(T,c)&&A[1]<=f;)A[1]++,T--;if(T<0||A[1]>f)return NaN;for(;T>=0&&y.get(T,c)&&A[0]<=f;)A[0]++,T--;if(A[0]>f)return NaN;for(T=a+1;T<b&&y.get(T,c);)A[2]++,T++;if(T===b)return NaN;for(;T<b&&!y.get(T,c)&&A[3]<f;)A[3]++,T++;if(T===b||A[3]>=f)return NaN;for(;T<b&&y.get(T,c)&&A[4]<f;)A[4]++,T++;if(A[4]>=f)return NaN;const R=A[0]+A[1]+A[2]+A[3]+A[4];return 5*Math.abs(R-m)>=m?NaN:Nn.foundPatternCross(A)?Nn.centerFromEnd(A,T):NaN}handlePossibleCenter(a,c,f,m){const y=a[0]+a[1]+a[2]+a[3]+a[4];let b=Nn.centerFromEnd(a,f),A=this.crossCheckVertical(c,Math.floor(b),a[2],y);if(!isNaN(A)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(A),a[2],y),!isNaN(b)&&(!m||this.crossCheckDiagonal(Math.floor(A),Math.floor(b),a[2],y)))){const T=y/7;let R=!1;const M=this.possibleCenters;for(let z=0,G=M.length;z<G;z++){const Z=M[z];if(Z.aboutEquals(T,A,b)){M[z]=Z.combineEstimate(A,b,T),R=!0;break}}if(!R){const z=new jo(b,A,T);M.push(z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const f of this.possibleCenters)if(f.getCount()>=Nn.CENTER_QUORUM)if(c==null)c=f;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-f.getX())-Math.abs(c.getY()-f.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,c=0;const f=this.possibleCenters.length;for(const b of this.possibleCenters)b.getCount()>=Nn.CENTER_QUORUM&&(a++,c+=b.getEstimatedModuleSize());if(a<3)return!1;const m=c/f;let y=0;for(const b of this.possibleCenters)y+=Math.abs(b.getEstimatedModuleSize()-m);return y<=.05*c}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new X;const c=this.possibleCenters;let f;if(a>3){let m=0,y=0;for(const T of this.possibleCenters){const R=T.getEstimatedModuleSize();m+=R,y+=R*R}f=m/a;let b=Math.sqrt(y/a-f*f);c.sort((T,R)=>{const M=Math.abs(R.getEstimatedModuleSize()-f),z=Math.abs(T.getEstimatedModuleSize()-f);return M<z?-1:M>z?1:0});const A=Math.max(.2*f,b);for(let T=0;T<c.length&&c.length>3;T++){const R=c[T];Math.abs(R.getEstimatedModuleSize()-f)>A&&(c.splice(T,1),T--)}}if(c.length>3){let m=0;for(const y of c)m+=y.getEstimatedModuleSize();f=m/c.length,c.sort((y,b)=>{if(b.getCount()===y.getCount()){const A=Math.abs(b.getEstimatedModuleSize()-f),T=Math.abs(y.getEstimatedModuleSize()-f);return A<T?1:A>T?-1:0}else return b.getCount()-y.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}Nn.CENTER_QUORUM=2,Nn.MIN_SKIP=3,Nn.MAX_MODULES=57;class Zs{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(W.NEED_RESULT_POINT_CALLBACK);const f=new Nn(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(f)}processFinderPatternInfo(a){const c=a.getTopLeft(),f=a.getTopRight(),m=a.getBottomLeft(),y=this.calculateModuleSize(c,f,m);if(y<1)throw new X("No pattern found in proccess finder.");const b=Zs.computeDimension(c,f,m,y),A=Ke.getProvisionalVersionForDimension(b),T=A.getDimensionForVersion()-7;let R=null;if(A.getAlignmentPatternCenters().length>0){const Z=f.getX()-c.getX()+m.getX(),re=f.getY()-c.getY()+m.getY(),le=1-3/T,he=Math.floor(c.getX()+le*(Z-c.getX())),be=Math.floor(c.getY()+le*(re-c.getY()));for(let je=4;je<=16;je<<=1)try{R=this.findAlignmentInRegion(y,he,be,je);break}catch(Le){if(!(Le instanceof X))throw Le}}const M=Zs.createTransform(c,f,m,R,b),z=Zs.sampleGrid(this.image,M,b);let G;return R===null?G=[m,c,f]:G=[m,c,f,R],new wt(z,G)}static createTransform(a,c,f,m,y){const b=y-3.5;let A,T,R,M;return m!==null?(A=m.getX(),T=m.getY(),R=b-3,M=R):(A=c.getX()-a.getX()+f.getX(),T=c.getY()-a.getY()+f.getY(),R=b,M=b),Zn.quadrilateralToQuadrilateral(3.5,3.5,b,3.5,R,M,3.5,b,a.getX(),a.getY(),c.getX(),c.getY(),A,T,f.getX(),f.getY())}static sampleGrid(a,c,f){return Qi.getInstance().sampleGridWithTransform(a,f,f,c)}static computeDimension(a,c,f,m){const y=ze.round(De.distance(a,c)/m),b=ze.round(De.distance(a,f)/m);let A=Math.floor((y+b)/2)+7;switch(A&3){case 0:A++;break;case 2:A--;break;case 3:throw new X("Dimensions could be not found.")}return A}calculateModuleSize(a,c,f){return(this.calculateModuleSizeOneWay(a,c)+this.calculateModuleSizeOneWay(a,f))/2}calculateModuleSizeOneWay(a,c){const f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(c.getX()),Math.floor(c.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(f)?m/7:isNaN(m)?f/7:(f+m)/14}sizeOfBlackWhiteBlackRunBothWays(a,c,f,m){let y=this.sizeOfBlackWhiteBlackRun(a,c,f,m),b=1,A=a-(f-a);A<0?(b=a/(a-A),A=0):A>=this.image.getWidth()&&(b=(this.image.getWidth()-1-a)/(A-a),A=this.image.getWidth()-1);let T=Math.floor(c-(m-c)*b);return b=1,T<0?(b=c/(c-T),T=0):T>=this.image.getHeight()&&(b=(this.image.getHeight()-1-c)/(T-c),T=this.image.getHeight()-1),A=Math.floor(a+(A-a)*b),y+=this.sizeOfBlackWhiteBlackRun(a,c,A,T),y-1}sizeOfBlackWhiteBlackRun(a,c,f,m){const y=Math.abs(m-c)>Math.abs(f-a);if(y){let Z=a;a=c,c=Z,Z=f,f=m,m=Z}const b=Math.abs(f-a),A=Math.abs(m-c);let T=-b/2;const R=a<f?1:-1,M=c<m?1:-1;let z=0;const G=f+R;for(let Z=a,re=c;Z!==G;Z+=R){const le=y?re:Z,he=y?Z:re;if(z===1===this.image.get(le,he)){if(z===2)return ze.distance(Z,re,a,c);z++}if(T+=A,T>0){if(re===m)break;re+=M,T-=b}}return z===2?ze.distance(f+R,m,a,c):NaN}findAlignmentInRegion(a,c,f,m){const y=Math.floor(m*a),b=Math.max(0,c-y),A=Math.min(this.image.getWidth()-1,c+y);if(A-b<a*3)throw new X("Alignment top exceeds estimated module size.");const T=Math.max(0,f-y),R=Math.min(this.image.getHeight()-1,f+y);if(R-T<a*3)throw new X("Alignment bottom exceeds estimated module size.");return new us(this.image,b,T,A-b,R-T,a,this.resultPointCallback).find()}}class br{constructor(){this.decoder=new D0}getDecoder(){return this.decoder}decode(a,c){let f,m;if(c!=null&&c.get(W.PURE_BARCODE)!==void 0){const T=br.extractPureBits(a.getBlackMatrix());f=this.decoder.decodeBitMatrix(T,c),m=br.NO_POINTS}else{const T=new Zs(a.getBlackMatrix()).detect(c);f=this.decoder.decodeBitMatrix(T.getBits(),c),m=T.getPoints()}f.getOther()instanceof Xd&&f.getOther().applyMirroredCorrection(m);const y=new Ie(f.getText(),f.getRawBytes(),void 0,m,Oe.QR_CODE,void 0),b=f.getByteSegments();b!==null&&y.putMetadata(mt.BYTE_SEGMENTS,b);const A=f.getECLevel();return A!==null&&y.putMetadata(mt.ERROR_CORRECTION_LEVEL,A),f.hasStructuredAppend()&&(y.putMetadata(mt.STRUCTURED_APPEND_SEQUENCE,f.getStructuredAppendSequenceNumber()),y.putMetadata(mt.STRUCTURED_APPEND_PARITY,f.getStructuredAppendParity())),y}reset(){}static extractPureBits(a){const c=a.getTopLeftOnBit(),f=a.getBottomRightOnBit();if(c===null||f===null)throw new X;const m=this.moduleSize(c,a);let y=c[1],b=f[1],A=c[0],T=f[0];if(A>=T||y>=b)throw new X;if(b-y!==T-A&&(T=A+(b-y),T>=a.getWidth()))throw new X;const R=Math.round((T-A+1)/m),M=Math.round((b-y+1)/m);if(R<=0||M<=0)throw new X;if(M!==R)throw new X;const z=Math.floor(m/2);y+=z,A+=z;const G=A+Math.floor((R-1)*m)-T;if(G>0){if(G>z)throw new X;A-=G}const Z=y+Math.floor((M-1)*m)-b;if(Z>0){if(Z>z)throw new X;y-=Z}const re=new ue(R,M);for(let le=0;le<M;le++){const he=y+Math.floor(le*m);for(let be=0;be<R;be++)a.get(A+Math.floor(be*m),he)&&re.set(be,le)}return re}static moduleSize(a,c){const f=c.getHeight(),m=c.getWidth();let y=a[0],b=a[1],A=!0,T=0;for(;y<m&&b<f;){if(A!==c.get(y,b)){if(++T===5)break;A=!A}y++,b++}if(y===m||b===f)throw new X;return(y-a[0])/7}}br.NO_POINTS=new Array;class st{PDF417Common(){}static getBitCountSum(a){return ze.sum(a)}static toIntArray(a){if(a==null||!a.length)return st.EMPTY_INT_ARRAY;const c=new Int32Array(a.length);let f=0;for(const m of a)c[f++]=m;return c}static getCodeword(a){const c=B.binarySearch(st.SYMBOL_TABLE,a&262143);return c<0?-1:(st.CODEWORD_TABLE[c]-1)%st.NUMBER_OF_CODEWORDS}}st.NUMBER_OF_CODEWORDS=929,st.MAX_CODEWORDS_IN_BARCODE=st.NUMBER_OF_CODEWORDS-1,st.MIN_ROWS_IN_BARCODE=3,st.MAX_ROWS_IN_BARCODE=90,st.MODULES_IN_CODEWORD=17,st.MODULES_IN_STOP_PATTERN=18,st.BARS_IN_MODULE=8,st.EMPTY_INT_ARRAY=new Int32Array([]),st.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),st.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Wd{constructor(a,c){this.bits=a,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class dt{static detectMultiple(a,c,f){let m=a.getBlackMatrix(),y=dt.detect(f,m);return y.length||(m=m.clone(),m.rotate180(),y=dt.detect(f,m)),new Wd(m,y)}static detect(a,c){const f=new Array;let m=0,y=0,b=!1;for(;m<c.getHeight();){const A=dt.findVertices(c,m,y);if(A[0]==null&&A[3]==null){if(!b)break;b=!1,y=0;for(const T of f)T[1]!=null&&(m=Math.trunc(Math.max(m,T[1].getY()))),T[3]!=null&&(m=Math.max(m,Math.trunc(T[3].getY())));m+=dt.ROW_STEP;continue}if(b=!0,f.push(A),!a)break;A[2]!=null?(y=Math.trunc(A[2].getX()),m=Math.trunc(A[2].getY())):(y=Math.trunc(A[4].getX()),m=Math.trunc(A[4].getY()))}return f}static findVertices(a,c,f){const m=a.getHeight(),y=a.getWidth(),b=new Array(8);return dt.copyToResult(b,dt.findRowsWithPattern(a,m,y,c,f,dt.START_PATTERN),dt.INDEXES_START_PATTERN),b[4]!=null&&(f=Math.trunc(b[4].getX()),c=Math.trunc(b[4].getY())),dt.copyToResult(b,dt.findRowsWithPattern(a,m,y,c,f,dt.STOP_PATTERN),dt.INDEXES_STOP_PATTERN),b}static copyToResult(a,c,f){for(let m=0;m<f.length;m++)a[f[m]]=c[m]}static findRowsWithPattern(a,c,f,m,y,b){const A=new Array(4);let T=!1;const R=new Int32Array(b.length);for(;m<c;m+=dt.ROW_STEP){let z=dt.findGuardPattern(a,y,m,f,!1,b,R);if(z!=null){for(;m>0;){const G=dt.findGuardPattern(a,y,--m,f,!1,b,R);if(G!=null)z=G;else{m++;break}}A[0]=new De(z[0],m),A[1]=new De(z[1],m),T=!0;break}}let M=m+1;if(T){let z=0,G=Int32Array.from([Math.trunc(A[0].getX()),Math.trunc(A[1].getX())]);for(;M<c;M++){const Z=dt.findGuardPattern(a,G[0],M,f,!1,b,R);if(Z!=null&&Math.abs(G[0]-Z[0])<dt.MAX_PATTERN_DRIFT&&Math.abs(G[1]-Z[1])<dt.MAX_PATTERN_DRIFT)G=Z,z=0;else{if(z>dt.SKIPPED_ROW_COUNT_MAX)break;z++}}M-=z+1,A[2]=new De(G[0],M),A[3]=new De(G[1],M)}return M-m<dt.BARCODE_MIN_HEIGHT&&B.fill(A,null),A}static findGuardPattern(a,c,f,m,y,b,A){B.fillWithin(A,0,A.length,0);let T=c,R=0;for(;a.get(T,f)&&T>0&&R++<dt.MAX_PIXEL_DRIFT;)T--;let M=T,z=0,G=b.length;for(let Z=y;M<m;M++)if(a.get(M,f)!==Z)A[z]++;else{if(z===G-1){if(dt.patternMatchVariance(A,b,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return new Int32Array([T,M]);T+=A[0]+A[1],L.arraycopy(A,2,A,0,z-1),A[z-1]=0,A[z]=0,z--}else z++;A[z]=1,Z=!Z}return z===G-1&&dt.patternMatchVariance(A,b,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE?new Int32Array([T,M-1]):null}static patternMatchVariance(a,c,f){let m=a.length,y=0,b=0;for(let R=0;R<m;R++)y+=a[R],b+=c[R];if(y<b)return 1/0;let A=y/b;f*=A;let T=0;for(let R=0;R<m;R++){let M=a[R],z=c[R]*A,G=M>z?M-z:z-M;if(G>f)return 1/0;T+=G}return T/y}}dt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),dt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),dt.MAX_AVG_VARIANCE=.42,dt.MAX_INDIVIDUAL_VARIANCE=.8,dt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),dt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),dt.MAX_PIXEL_DRIFT=3,dt.MAX_PATTERN_DRIFT=5,dt.SKIPPED_ROW_COUNT_MAX=25,dt.ROW_STEP=5,dt.BARCODE_MIN_HEIGHT=10;class xn{constructor(a,c){if(c.length===0)throw new E;this.field=a;let f=c.length;if(f>1&&c[0]===0){let m=1;for(;m<f&&c[m]===0;)m++;m===f?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(f-m),L.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let m=0;for(let y of this.coefficients)m=this.field.add(m,y);return m}let c=this.coefficients[0],f=this.coefficients.length;for(let m=1;m<f;m++)c=this.field.add(this.field.multiply(a,c),this.coefficients[m]);return c}add(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let c=this.coefficients,f=a.coefficients;if(c.length>f.length){let b=c;c=f,f=b}let m=new Int32Array(f.length),y=f.length-c.length;L.arraycopy(f,0,m,0,y);for(let b=y;b<f.length;b++)m[b]=this.field.add(c[b-y],f[b]);return new xn(this.field,m)}subtract(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof xn?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new xn(this.field,new Int32Array([0]));let c=this.coefficients,f=c.length,m=a.coefficients,y=m.length,b=new Int32Array(f+y-1);for(let A=0;A<f;A++){let T=c[A];for(let R=0;R<y;R++)b[A+R]=this.field.add(b[A+R],this.field.multiply(T,m[R]))}return new xn(this.field,b)}negative(){let a=this.coefficients.length,c=new Int32Array(a);for(let f=0;f<a;f++)c[f]=this.field.subtract(0,this.coefficients[f]);return new xn(this.field,c)}multiplyScalar(a){if(a===0)return new xn(this.field,new Int32Array([0]));if(a===1)return this;let c=this.coefficients.length,f=new Int32Array(c);for(let m=0;m<c;m++)f[m]=this.field.multiply(this.coefficients[m],a);return new xn(this.field,f)}multiplyByMonomial(a,c){if(a<0)throw new E;if(c===0)return new xn(this.field,new Int32Array([0]));let f=this.coefficients.length,m=new Int32Array(f+a);for(let y=0;y<f;y++)m[y]=this.field.multiply(this.coefficients[y],c);return new xn(this.field,m)}toString(){let a=new Ne;for(let c=this.getDegree();c>=0;c--){let f=this.getCoefficient(c);f!==0&&(f<0?(a.append(" - "),f=-f):a.length()>0&&a.append(" + "),(c===0||f!==1)&&a.append(f),c!==0&&(c===1?a.append("x"):(a.append("x^"),a.append(c))))}return a.toString()}}class vu{add(a,c){return(a+c)%this.modulus}subtract(a,c){return(this.modulus+a-c)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}inverse(a){if(a===0)throw new oi;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,c){return a===0||c===0?0:this.expTable[(this.logTable[a]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class na extends vu{constructor(a,c){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let f=1;for(let m=0;m<a;m++)this.expTable[m]=f,f=f*c%a;for(let m=0;m<a-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new xn(this,new Int32Array([0])),this.one=new xn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,c){if(a<0)throw new E;if(c===0)return this.zero;let f=new Int32Array(a+1);return f[0]=c,new xn(this,f)}}na.PDF417_GF=new na(st.NUMBER_OF_CODEWORDS,3);class wr{constructor(){this.field=na.PDF417_GF}decode(a,c,f){let m=new xn(this.field,a),y=new Int32Array(c),b=!1;for(let re=c;re>0;re--){let le=m.evaluateAt(this.field.exp(re));y[c-re]=le,le!==0&&(b=!0)}if(!b)return 0;let A=this.field.getOne();if(f!=null)for(const re of f){let le=this.field.exp(a.length-1-re),he=new xn(this.field,new Int32Array([this.field.subtract(0,le),1]));A=A.multiply(he)}let T=new xn(this.field,y),R=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),T,c),M=R[0],z=R[1],G=this.findErrorLocations(M),Z=this.findErrorMagnitudes(z,M,G);for(let re=0;re<G.length;re++){let le=a.length-1-this.field.log(G[re]);if(le<0)throw k.getChecksumInstance();a[le]=this.field.subtract(a[le],Z[re])}return G.length}runEuclideanAlgorithm(a,c,f){if(a.getDegree()<c.getDegree()){let G=a;a=c,c=G}let m=a,y=c,b=this.field.getZero(),A=this.field.getOne();for(;y.getDegree()>=Math.round(f/2);){let G=m,Z=b;if(m=y,b=A,m.isZero())throw k.getChecksumInstance();y=G;let re=this.field.getZero(),le=m.getCoefficient(m.getDegree()),he=this.field.inverse(le);for(;y.getDegree()>=m.getDegree()&&!y.isZero();){let be=y.getDegree()-m.getDegree(),je=this.field.multiply(y.getCoefficient(y.getDegree()),he);re=re.add(this.field.buildMonomial(be,je)),y=y.subtract(m.multiplyByMonomial(be,je))}A=re.multiply(b).subtract(Z).negative()}let T=A.getCoefficient(0);if(T===0)throw k.getChecksumInstance();let R=this.field.inverse(T),M=A.multiply(R),z=y.multiply(R);return[M,z]}findErrorLocations(a){let c=a.getDegree(),f=new Int32Array(c),m=0;for(let y=1;y<this.field.getSize()&&m<c;y++)a.evaluateAt(y)===0&&(f[m]=this.field.inverse(y),m++);if(m!==c)throw k.getChecksumInstance();return f}findErrorMagnitudes(a,c,f){let m=c.getDegree(),y=new Int32Array(m);for(let R=1;R<=m;R++)y[m-R]=this.field.multiply(R,c.getCoefficient(R));let b=new xn(this.field,y),A=f.length,T=new Int32Array(A);for(let R=0;R<A;R++){let M=this.field.inverse(f[R]),z=this.field.subtract(0,a.evaluateAt(M)),G=this.field.inverse(b.evaluateAt(M));T[R]=this.field.multiply(z,G)}return T}}class _r{constructor(a,c,f,m,y){a instanceof _r?this.constructor_2(a):this.constructor_1(a,c,f,m,y)}constructor_1(a,c,f,m,y){const b=c==null||f==null,A=m==null||y==null;if(b&&A)throw new X;b?(c=new De(0,m.getY()),f=new De(0,y.getY())):A&&(m=new De(a.getWidth()-1,c.getY()),y=new De(a.getWidth()-1,f.getY())),this.image=a,this.topLeft=c,this.bottomLeft=f,this.topRight=m,this.bottomRight=y,this.minX=Math.trunc(Math.min(c.getX(),f.getX())),this.maxX=Math.trunc(Math.max(m.getX(),y.getX())),this.minY=Math.trunc(Math.min(c.getY(),m.getY())),this.maxY=Math.trunc(Math.max(f.getY(),y.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,c){return a==null?c:c==null?a:new _r(a.image,a.topLeft,a.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(a,c,f){let m=this.topLeft,y=this.bottomLeft,b=this.topRight,A=this.bottomRight;if(a>0){let T=f?this.topLeft:this.topRight,R=Math.trunc(T.getY()-a);R<0&&(R=0);let M=new De(T.getX(),R);f?m=M:b=M}if(c>0){let T=f?this.bottomLeft:this.bottomRight,R=Math.trunc(T.getY()+c);R>=this.image.getHeight()&&(R=this.image.getHeight()-1);let M=new De(T.getX(),R);f?y=M:A=M}return new _r(this.image,m,y,b,A)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ml{constructor(a,c,f,m){this.columnCount=a,this.errorCorrectionLevel=m,this.rowCountUpperPart=c,this.rowCountLowerPart=f,this.rowCount=c+f}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xa{constructor(){this.buffer=""}static form(a,c){let f=-1;function m(b,A,T,R,M,z){if(b==="%%")return"%";if(c[++f]===void 0)return;b=R?parseInt(R.substr(1)):void 0;let G=M?parseInt(M.substr(1)):void 0,Z;switch(z){case"s":Z=c[f];break;case"c":Z=c[f][0];break;case"f":Z=parseFloat(c[f]).toFixed(b);break;case"p":Z=parseFloat(c[f]).toPrecision(b);break;case"e":Z=parseFloat(c[f]).toExponential(b);break;case"x":Z=parseInt(c[f]).toString(G||16);break;case"d":Z=parseFloat(parseInt(c[f],G||10).toPrecision(b)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(G);let re=parseInt(T),le=T&&T[0]+""=="0"?"0":" ";for(;Z.length<re;)Z=A!==void 0?Z+le:le+Z;return Z}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(y,m)}format(a,...c){this.buffer+=Xa.form(a,c)}toString(){return this.buffer}}class Br{constructor(a){this.boundingBox=new _r(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let c=this.getCodeword(a);if(c!=null)return c;for(let f=1;f<Br.MAX_NEARBY_DISTANCE;f++){let m=this.imageRowToCodewordIndex(a)-f;if(m>=0&&(c=this.codewords[m],c!=null)||(m=this.imageRowToCodewordIndex(a)+f,m<this.codewords.length&&(c=this.codewords[m],c!=null)))return c}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,c){this.codewords[this.imageRowToCodewordIndex(a)]=c}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new Xa;let c=0;for(const f of this.codewords){if(f==null){a.format("%3d:    |   %n",c++);continue}a.format("%3d: %3d|%3d%n",c++,f.getRowNumber(),f.getValue())}return a.toString()}}Br.MAX_NEARBY_DISTANCE=5;class Ur{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let c=this.values.get(a);c==null&&(c=0),c++,this.values.set(a,c)}getValue(){let a=-1,c=new Array;for(const[f,m]of this.values.entries()){const y={getKey:()=>f,getValue:()=>m};y.getValue()>a?(a=y.getValue(),c=[],c.push(y.getKey())):y.getValue()===a&&c.push(y.getKey())}return st.toIntArray(c)}getConfidence(a){return this.values.get(a)}}class bu extends Br{constructor(a,c){super(a),this._isLeft=c}setRowNumbers(){for(let a of this.getCodewords())a!=null&&a.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,a);let f=this.getBoundingBox(),m=this._isLeft?f.getTopLeft():f.getTopRight(),y=this._isLeft?f.getBottomLeft():f.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(m.getY())),A=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=-1,R=1,M=0;for(let z=b;z<A;z++){if(c[z]==null)continue;let G=c[z],Z=G.getRowNumber()-T;if(Z===0)M++;else if(Z===1)R=Math.max(R,M),M=1,T=G.getRowNumber();else if(Z<0||G.getRowNumber()>=a.getRowCount()||Z>z)c[z]=null;else{let re;R>2?re=(R-2)*Z:re=Z;let le=re>=z;for(let he=1;he<=re&&!le;he++)le=c[z-he]!=null;le?c[z]=null:(T=G.getRowNumber(),M=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let c=new Int32Array(a.getRowCount());for(let f of this.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=c.length)continue;c[m]++}return c}adjustIncompleteIndicatorColumnRowNumbers(a){let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),b=this.imageRowToCodewordIndex(Math.trunc(m.getY())),A=this.getCodewords(),T=-1;for(let R=y;R<b;R++){if(A[R]==null)continue;let M=A[R];M.setRowNumberAsRowIndicatorColumn();let z=M.getRowNumber()-T;z===0||(z===1?T=M.getRowNumber():M.getRowNumber()>=a.getRowCount()?A[R]=null:T=M.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),c=new Ur,f=new Ur,m=new Ur,y=new Ur;for(let A of a){if(A==null)continue;A.setRowNumberAsRowIndicatorColumn();let T=A.getValue()%30,R=A.getRowNumber();switch(this._isLeft||(R+=2),R%3){case 0:f.setValue(T*3+1);break;case 1:y.setValue(T/3),m.setValue(T%3);break;case 2:c.setValue(T+1);break}}if(c.getValue().length===0||f.getValue().length===0||m.getValue().length===0||y.getValue().length===0||c.getValue()[0]<1||f.getValue()[0]+m.getValue()[0]<st.MIN_ROWS_IN_BARCODE||f.getValue()[0]+m.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;let b=new Ml(c.getValue()[0],f.getValue()[0],m.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(a,b),b}removeIncorrectCodewords(a,c){for(let f=0;f<a.length;f++){let m=a[f];if(a[f]==null)continue;let y=m.getValue()%30,b=m.getRowNumber();if(b>c.getRowCount()){a[f]=null;continue}switch(this._isLeft||(b+=2),b%3){case 0:y*3+1!==c.getRowCountUpperPart()&&(a[f]=null);break;case 1:(Math.trunc(y/3)!==c.getErrorCorrectionLevel()||y%3!==c.getRowCountLowerPart())&&(a[f]=null);break;case 2:y+1!==c.getColumnCount()&&(a[f]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ui{constructor(a,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=st.MAX_CODEWORDS_IN_BARCODE,c;do c=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a!=null&&a.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let f=this.detectionResultColumns[c].getCodewords();for(let m=0;m<f.length;m++)f[m]!=null&&(f[m].hasValidRowNumber()||this.adjustRowNumbers(c,m,f))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<a.length;f++)if(a[f]!=null&&c[f]!=null&&a[f].getRowNumber()===c[f].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let y=this.detectionResultColumns[m].getCodewords()[f];y!=null&&(y.setRowNumber(a[f].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[f]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<c.length;f++){if(c[f]==null)continue;let m=c[f].getRowNumber(),y=0;for(let b=this.barcodeColumnCount+1;b>0&&y<this.ADJUST_ROW_NUMBER_SKIP;b--){let A=this.detectionResultColumns[b].getCodewords()[f];A!=null&&(y=ui.adjustRowNumberIfValid(m,y,A),A.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,c=this.detectionResultColumns[0].getCodewords();for(let f=0;f<c.length;f++){if(c[f]==null)continue;let m=c[f].getRowNumber(),y=0;for(let b=1;b<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;b++){let A=this.detectionResultColumns[b].getCodewords()[f];A!=null&&(y=ui.adjustRowNumberIfValid(m,y,A),A.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,c,f){return f==null||f.hasValidRowNumber()||(f.isValidRowNumber(a)?(f.setRowNumber(a),c=0):++c),c}adjustRowNumbers(a,c,f){if(!this.detectionResultColumns[a-1])return;let m=f[c],y=this.detectionResultColumns[a-1].getCodewords(),b=y;this.detectionResultColumns[a+1]!=null&&(b=this.detectionResultColumns[a+1].getCodewords());let A=new Array(14);A[2]=y[c],A[3]=b[c],c>0&&(A[0]=f[c-1],A[4]=y[c-1],A[5]=b[c-1]),c>1&&(A[8]=f[c-2],A[10]=y[c-2],A[11]=b[c-2]),c<f.length-1&&(A[1]=f[c+1],A[6]=y[c+1],A[7]=b[c+1]),c<f.length-2&&(A[9]=f[c+2],A[12]=y[c+2],A[13]=b[c+2]);for(let T of A)if(ui.adjustRowNumber(m,T))return}static adjustRowNumber(a,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===a.getBucket()?(a.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,c){this.detectionResultColumns[a]=c}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Xa;for(let f=0;f<a.getCodewords().length;f++){c.format("CW %3d:",f);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){c.format("    |   ");continue}let y=this.detectionResultColumns[m].getCodewords()[f];if(y==null){c.format("    |   ");continue}c.format(" %3d|%3d",y.getRowNumber(),y.getValue())}c.format("%n")}return c.toString()}}class As{constructor(a,c,f,m){this.rowNumber=As.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(c),this.bucket=Math.trunc(f),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==As.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}As.BARCODE_ROW_UNKNOWN=-1;class bi{static initialize(){for(let a=0;a<st.SYMBOL_TABLE.length;a++){let c=st.SYMBOL_TABLE[a],f=c&1;for(let m=0;m<st.BARS_IN_MODULE;m++){let y=0;for(;(c&1)===f;)y+=1,c>>=1;f=c&1,bi.RATIOS_TABLE[a]||(bi.RATIOS_TABLE[a]=new Array(st.BARS_IN_MODULE)),bi.RATIOS_TABLE[a][st.BARS_IN_MODULE-m-1]=Math.fround(y/st.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let c=bi.getDecodedCodewordValue(bi.sampleBitCounts(a));return c!==-1?c:bi.getClosestDecodedValue(a)}static sampleBitCounts(a){let c=ze.sum(a),f=new Int32Array(st.BARS_IN_MODULE),m=0,y=0;for(let b=0;b<st.MODULES_IN_CODEWORD;b++){let A=c/(2*st.MODULES_IN_CODEWORD)+b*c/st.MODULES_IN_CODEWORD;y+a[m]<=A&&(y+=a[m],m++),f[m]++}return f}static getDecodedCodewordValue(a){let c=bi.getBitValue(a);return st.getCodeword(c)===-1?-1:c}static getBitValue(a){let c=0;for(let f=0;f<a.length;f++)for(let m=0;m<a[f];m++)c=c<<1|(f%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(a){let c=ze.sum(a),f=new Array(st.BARS_IN_MODULE);if(c>1)for(let b=0;b<f.length;b++)f[b]=Math.fround(a[b]/c);let m=ft.MAX_VALUE,y=-1;this.bSymbolTableReady||bi.initialize();for(let b=0;b<bi.RATIOS_TABLE.length;b++){let A=0,T=bi.RATIOS_TABLE[b];for(let R=0;R<st.BARS_IN_MODULE;R++){let M=Math.fround(T[R]-f[R]);if(A+=Math.fround(M*M),A>=m)break}A<m&&(m=A,y=st.SYMBOL_TABLE[b])}return y}}bi.bSymbolTableReady=!1,bi.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(U=>new Array(st.BARS_IN_MODULE));class Wa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class Kd{static parseLong(a,c=void 0){return parseInt(a,c)}}class Dl extends p{}Dl.kind="NullPointerException";class wu{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,c,f){if(a==null)throw new Dl;if(c<0||c>a.length||f<0||c+f>a.length||c+f<0)throw new P;if(f===0)return;for(let m=0;m<f;m++)this.write(a[c+m])}flush(){}close(){}}class Bo extends p{}class Ll extends wu{constructor(a=32){if(super(),this.count=0,a<0)throw new E("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let f=this.buf.length<<1;if(f-a<0&&(f=a),f<0){if(a<0)throw new Bo;f=j.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,f)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,c,f){if(c<0||c>a.length||f<0||c+f-a.length>0)throw new P;this.ensureCapacity(this.count+f),L.arraycopy(a,c,this.buf,this.count,f),this.count+=f}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Jt;(function(U){U[U.ALPHA=0]="ALPHA",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.PUNCT=3]="PUNCT",U[U.ALPHA_SHIFT=4]="ALPHA_SHIFT",U[U.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Jt||(Jt={}));function $d(){if(typeof window<"u")return window.BigInt||null;if(typeof lh<"u")return lh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Pl;function Fr(U){if(typeof Pl>"u"&&(Pl=$d()),Pl===null)throw new Error("BigInt is not supported!");return Pl(U)}function _u(){let U=[];U[0]=Fr(1);let a=Fr(900);U[1]=a;for(let c=2;c<16;c++)U[c]=U[c-1]*a;return U}class we{static decode(a,c){let f=new Ne(""),m=ie.ISO8859_1;f.enableDecoding(m);let y=1,b=a[y++],A=new Wa;for(;y<a[0];){switch(b){case we.TEXT_COMPACTION_MODE_LATCH:y=we.textCompaction(a,y,f);break;case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:y=we.byteCompaction(b,a,m,y,f);break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[y++]);break;case we.NUMERIC_COMPACTION_MODE_LATCH:y=we.numericCompaction(a,y,f);break;case we.ECI_CHARSET:ie.getCharacterSetECIByValue(a[y++]);break;case we.ECI_GENERAL_PURPOSE:y+=2;break;case we.ECI_USER_DEFINED:y++;break;case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=we.decodeMacroBlock(a,y,A);break;case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:throw new te;default:y--,y=we.textCompaction(a,y,f);break}if(y<a.length)b=a[y++];else throw te.getFormatInstance()}if(f.length()===0)throw te.getFormatInstance();let T=new Ft(null,f.toString(),null,c);return T.setOther(A),T}static decodeMacroBlock(a,c,f){if(c+we.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw te.getFormatInstance();let m=new Int32Array(we.NUMBER_OF_SEQUENCE_CODEWORDS);for(let A=0;A<we.NUMBER_OF_SEQUENCE_CODEWORDS;A++,c++)m[A]=a[c];f.setSegmentIndex(j.parseInt(we.decodeBase900toBase10(m,we.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new Ne;c=we.textCompaction(a,c,y),f.setFileId(y.toString());let b=-1;for(a[c]===we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(b=c+1);c<a[0];)switch(a[c]){case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,a[c]){case we.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let A=new Ne;c=we.textCompaction(a,c+1,A),f.setFileName(A.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new Ne;c=we.textCompaction(a,c+1,T),f.setSender(T.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let R=new Ne;c=we.textCompaction(a,c+1,R),f.setAddressee(R.toString());break;case we.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let M=new Ne;c=we.numericCompaction(a,c+1,M),f.setSegmentCount(j.parseInt(M.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let z=new Ne;c=we.numericCompaction(a,c+1,z),f.setTimestamp(Kd.parseLong(z.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let G=new Ne;c=we.numericCompaction(a,c+1,G),f.setChecksum(j.parseInt(G.toString()));break;case we.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new Ne;c=we.numericCompaction(a,c+1,Z),f.setFileSize(Kd.parseLong(Z.toString()));break;default:throw te.getFormatInstance()}break;case we.MACRO_PDF417_TERMINATOR:c++,f.setLastSegment(!0);break;default:throw te.getFormatInstance()}if(b!==-1){let A=c-b;f.isLastSegment()&&A--,f.setOptionalData(B.copyOfRange(a,b,b+A))}return c}static textCompaction(a,c,f){let m=new Int32Array((a[0]-c)*2),y=new Int32Array((a[0]-c)*2),b=0,A=!1;for(;c<a[0]&&!A;){let T=a[c++];if(T<we.TEXT_COMPACTION_MODE_LATCH)m[b]=T/30,m[b+1]=T%30,b+=2;else switch(T){case we.TEXT_COMPACTION_MODE_LATCH:m[b++]=we.TEXT_COMPACTION_MODE_LATCH;break;case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:c--,A=!0;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[b]=we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=a[c++],y[b]=T,b++;break}}return we.decodeTextCompaction(m,y,b,f),c}static decodeTextCompaction(a,c,f,m){let y=Jt.ALPHA,b=Jt.ALPHA,A=0;for(;A<f;){let T=a[A],R="";switch(y){case Jt.ALPHA:if(T<26)R=String.fromCharCode(65+T);else switch(T){case 26:R=" ";break;case we.LL:y=Jt.LOWER;break;case we.ML:y=Jt.MIXED;break;case we.PS:b=y,y=Jt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[A]);break;case we.TEXT_COMPACTION_MODE_LATCH:y=Jt.ALPHA;break}break;case Jt.LOWER:if(T<26)R=String.fromCharCode(97+T);else switch(T){case 26:R=" ";break;case we.AS:b=y,y=Jt.ALPHA_SHIFT;break;case we.ML:y=Jt.MIXED;break;case we.PS:b=y,y=Jt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[A]);break;case we.TEXT_COMPACTION_MODE_LATCH:y=Jt.ALPHA;break}break;case Jt.MIXED:if(T<we.PL)R=we.MIXED_CHARS[T];else switch(T){case we.PL:y=Jt.PUNCT;break;case 26:R=" ";break;case we.LL:y=Jt.LOWER;break;case we.AL:y=Jt.ALPHA;break;case we.PS:b=y,y=Jt.PUNCT_SHIFT;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[A]);break;case we.TEXT_COMPACTION_MODE_LATCH:y=Jt.ALPHA;break}break;case Jt.PUNCT:if(T<we.PAL)R=we.PUNCT_CHARS[T];else switch(T){case we.PAL:y=Jt.ALPHA;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[A]);break;case we.TEXT_COMPACTION_MODE_LATCH:y=Jt.ALPHA;break}break;case Jt.ALPHA_SHIFT:if(y=b,T<26)R=String.fromCharCode(65+T);else switch(T){case 26:R=" ";break;case we.TEXT_COMPACTION_MODE_LATCH:y=Jt.ALPHA;break}break;case Jt.PUNCT_SHIFT:if(y=b,T<we.PAL)R=we.PUNCT_CHARS[T];else switch(T){case we.PAL:y=Jt.ALPHA;break;case we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[A]);break;case we.TEXT_COMPACTION_MODE_LATCH:y=Jt.ALPHA;break}break}R!==""&&m.append(R),A++}}static byteCompaction(a,c,f,m,y){let b=new Ll,A=0,T=0,R=!1;switch(a){case we.BYTE_COMPACTION_MODE_LATCH:let M=new Int32Array(6),z=c[m++];for(;m<c[0]&&!R;)switch(M[A++]=z,T=900*T+z,z=c[m++],z){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:m--,R=!0;break;default:if(A%5===0&&A>0){for(let G=0;G<6;++G)b.write(Number(Fr(T)>>Fr(8*(5-G))));T=0,A=0}break}m===c[0]&&z<we.TEXT_COMPACTION_MODE_LATCH&&(M[A++]=z);for(let G=0;G<A;G++)b.write(M[G]);break;case we.BYTE_COMPACTION_MODE_LATCH_6:for(;m<c[0]&&!R;){let G=c[m++];if(G<we.TEXT_COMPACTION_MODE_LATCH)A++,T=900*T+G;else switch(G){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.NUMERIC_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:m--,R=!0;break}if(A%5===0&&A>0){for(let Z=0;Z<6;++Z)b.write(Number(Fr(T)>>Fr(8*(5-Z))));T=0,A=0}}break}return y.append(Ee.decode(b.toByteArray(),f)),m}static numericCompaction(a,c,f){let m=0,y=!1,b=new Int32Array(we.MAX_NUMERIC_CODEWORDS);for(;c<a[0]&&!y;){let A=a[c++];if(c===a[0]&&(y=!0),A<we.TEXT_COMPACTION_MODE_LATCH)b[m]=A,m++;else switch(A){case we.TEXT_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH:case we.BYTE_COMPACTION_MODE_LATCH_6:case we.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case we.MACRO_PDF417_TERMINATOR:c--,y=!0;break}(m%we.MAX_NUMERIC_CODEWORDS===0||A===we.NUMERIC_COMPACTION_MODE_LATCH||y)&&m>0&&(f.append(we.decodeBase900toBase10(b,m)),m=0)}return c}static decodeBase900toBase10(a,c){let f=Fr(0);for(let y=0;y<c;y++)f+=we.EXP900[c-y-1]*Fr(a[y]);let m=f.toString();if(m.charAt(0)!=="1")throw new te;return m.substring(1)}}we.TEXT_COMPACTION_MODE_LATCH=900,we.BYTE_COMPACTION_MODE_LATCH=901,we.NUMERIC_COMPACTION_MODE_LATCH=902,we.BYTE_COMPACTION_MODE_LATCH_6=924,we.ECI_USER_DEFINED=925,we.ECI_GENERAL_PURPOSE=926,we.ECI_CHARSET=927,we.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,we.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,we.MACRO_PDF417_TERMINATOR=922,we.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,we.MAX_NUMERIC_CODEWORDS=15,we.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,we.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,we.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,we.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,we.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,we.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,we.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,we.PL=25,we.LL=27,we.AS=27,we.ML=28,we.AL=28,we.PS=29,we.PAL=29,we.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,we.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",we.EXP900=$d()?_u():[],we.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(a,c,f,m,y,b,A){let T=new _r(a,c,f,m,y),R=null,M=null,z;for(let re=!0;;re=!1){if(c!=null&&(R=_t.getRowIndicatorColumn(a,T,c,!0,b,A)),m!=null&&(M=_t.getRowIndicatorColumn(a,T,m,!1,b,A)),z=_t.merge(R,M),z==null)throw X.getNotFoundInstance();let le=z.getBoundingBox();if(re&&le!=null&&(le.getMinY()<T.getMinY()||le.getMaxY()>T.getMaxY()))T=le;else break}z.setBoundingBox(T);let G=z.getBarcodeColumnCount()+1;z.setDetectionResultColumn(0,R),z.setDetectionResultColumn(G,M);let Z=R!=null;for(let re=1;re<=G;re++){let le=Z?re:G-re;if(z.getDetectionResultColumn(le)!==void 0)continue;let he;le===0||le===G?he=new bu(T,le===0):he=new Br(T),z.setDetectionResultColumn(le,he);let be=-1,je=be;for(let Le=T.getMinY();Le<=T.getMaxY();Le++){if(be=_t.getStartColumn(z,le,Le,Z),be<0||be>T.getMaxX()){if(je===-1)continue;be=je}let Me=_t.detectCodeword(a,T.getMinX(),T.getMaxX(),Z,be,Le,b,A);Me!=null&&(he.setCodeword(Le,Me),je=be,b=Math.min(b,Me.getWidth()),A=Math.max(A,Me.getWidth()))}}return _t.createDecoderResult(z)}static merge(a,c){if(a==null&&c==null)return null;let f=_t.getBarcodeMetadata(a,c);if(f==null)return null;let m=_r.merge(_t.adjustBoundingBox(a),_t.adjustBoundingBox(c));return new ui(f,m)}static adjustBoundingBox(a){if(a==null)return null;let c=a.getRowHeights();if(c==null)return null;let f=_t.getMax(c),m=0;for(let A of c)if(m+=f-A,A>0)break;let y=a.getCodewords();for(let A=0;m>0&&y[A]==null;A++)m--;let b=0;for(let A=c.length-1;A>=0&&(b+=f-c[A],!(c[A]>0));A--);for(let A=y.length-1;b>0&&y[A]==null;A--)b--;return a.getBoundingBox().addMissingRows(m,b,a.isLeft())}static getMax(a){let c=-1;for(let f of a)c=Math.max(c,f);return c}static getBarcodeMetadata(a,c){let f;if(a==null||(f=a.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let m;return c==null||(m=c.getBarcodeMetadata())==null?f:f.getColumnCount()!==m.getColumnCount()&&f.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&f.getRowCount()!==m.getRowCount()?null:f}static getRowIndicatorColumn(a,c,f,m,y,b){let A=new bu(c,m);for(let T=0;T<2;T++){let R=T===0?1:-1,M=Math.trunc(Math.trunc(f.getX()));for(let z=Math.trunc(Math.trunc(f.getY()));z<=c.getMaxY()&&z>=c.getMinY();z+=R){let G=_t.detectCodeword(a,0,a.getWidth(),m,M,z,y,b);G!=null&&(A.setCodeword(z,G),m?M=G.getStartX():M=G.getEndX())}}return A}static adjustCodewordCount(a,c){let f=c[0][1],m=f.getValue(),y=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-_t.getNumberOfECCodeWords(a.getBarcodeECLevel());if(m.length===0){if(y<1||y>st.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();f.setValue(y)}else m[0]!==y&&f.setValue(y)}static createDecoderResult(a){let c=_t.createBarcodeMatrix(a);_t.adjustCodewordCount(a,c);let f=new Array,m=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),y=[],b=new Array;for(let T=0;T<a.getBarcodeRowCount();T++)for(let R=0;R<a.getBarcodeColumnCount();R++){let M=c[T][R+1].getValue(),z=T*a.getBarcodeColumnCount()+R;M.length===0?f.push(z):M.length===1?m[z]=M[0]:(b.push(z),y.push(M))}let A=new Array(y.length);for(let T=0;T<A.length;T++)A[T]=y[T];return _t.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),m,st.toIntArray(f),st.toIntArray(b),A)}static createDecoderResultFromAmbiguousValues(a,c,f,m,y){let b=new Int32Array(m.length),A=100;for(;A-- >0;){for(let T=0;T<b.length;T++)c[m[T]]=y[T][b[T]];try{return _t.decodeCodewords(c,a,f)}catch(T){if(!(T instanceof k))throw T}if(b.length===0)throw k.getChecksumInstance();for(let T=0;T<b.length;T++)if(b[T]<y[T].length-1){b[T]++;break}else if(b[T]=0,T===b.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(a){let c=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let m=0;m<c.length;m++)for(let y=0;y<c[m].length;y++)c[m][y]=new Ur;let f=0;for(let m of a.getDetectionResultColumns()){if(m!=null){for(let y of m.getCodewords())if(y!=null){let b=y.getRowNumber();if(b>=0){if(b>=c.length)continue;c[b][f].setValue(y.getValue())}}}f++}return c}static isValidBarcodeColumn(a,c){return c>=0&&c<=a.getBarcodeColumnCount()+1}static getStartColumn(a,c,f,m){let y=m?1:-1,b=null;if(_t.isValidBarcodeColumn(a,c-y)&&(b=a.getDetectionResultColumn(c-y).getCodeword(f)),b!=null)return m?b.getEndX():b.getStartX();if(b=a.getDetectionResultColumn(c).getCodewordNearby(f),b!=null)return m?b.getStartX():b.getEndX();if(_t.isValidBarcodeColumn(a,c-y)&&(b=a.getDetectionResultColumn(c-y).getCodewordNearby(f)),b!=null)return m?b.getEndX():b.getStartX();let A=0;for(;_t.isValidBarcodeColumn(a,c-y);){c-=y;for(let T of a.getDetectionResultColumn(c).getCodewords())if(T!=null)return(m?T.getEndX():T.getStartX())+y*A*(T.getEndX()-T.getStartX());A++}return m?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,c,f,m,y,b,A,T){y=_t.adjustCodewordStartColumn(a,c,f,m,y,b);let R=_t.getModuleBitCount(a,c,f,m,y,b);if(R==null)return null;let M,z=ze.sum(R);if(m)M=y+z;else{for(let re=0;re<R.length/2;re++){let le=R[re];R[re]=R[R.length-1-re],R[R.length-1-re]=le}M=y,y=M-z}if(!_t.checkCodewordSkew(z,A,T))return null;let G=bi.getDecodedValue(R),Z=st.getCodeword(G);return Z===-1?null:new As(y,M,_t.getCodewordBucketNumber(G),Z)}static getModuleBitCount(a,c,f,m,y,b){let A=y,T=new Int32Array(8),R=0,M=m?1:-1,z=m;for(;(m?A<f:A>=c)&&R<T.length;)a.get(A,b)===z?(T[R]++,A+=M):(R++,z=!z);return R===T.length||A===(m?f:c)&&R===T.length-1?T:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,c,f,m,y,b){let A=y,T=m?-1:1;for(let R=0;R<2;R++){for(;(m?A>=c:A<f)&&m===a.get(A,b);){if(Math.abs(y-A)>_t.CODEWORD_SKEW_SIZE)return y;A+=T}T=-T,m=!m}return A}static checkCodewordSkew(a,c,f){return c-_t.CODEWORD_SKEW_SIZE<=a&&a<=f+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(a,c,f){if(a.length===0)throw te.getFormatInstance();let m=1<<c+1,y=_t.correctErrors(a,f,m);_t.verifyCodewordCount(a,m);let b=we.decode(a,""+c);return b.setErrorsCorrected(y),b.setErasures(f.length),b}static correctErrors(a,c,f){if(c!=null&&c.length>f/2+_t.MAX_ERRORS||f<0||f>_t.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return _t.errorCorrection.decode(a,f,c)}static verifyCodewordCount(a,c){if(a.length<4)throw te.getFormatInstance();let f=a[0];if(f>a.length)throw te.getFormatInstance();if(f===0)if(c<a.length)a[0]=a.length-c;else throw te.getFormatInstance()}static getBitCountForCodeword(a){let c=new Int32Array(8),f=0,m=c.length-1;for(;!((a&1)!==f&&(f=a&1,m--,m<0));)c[m]++,a>>=1;return c}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let c=new Xa;for(let f=0;f<a.length;f++){c.format("Row %2d: ",f);for(let m=0;m<a[f].length;m++){let y=a[f][m];y.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}c.format("%n")}return c.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new wr;class wi{decode(a,c=null){let f=wi.decode(a,c,!1);if(f==null||f.length===0||f[0]==null)throw X.getNotFoundInstance();return f[0]}decodeMultiple(a,c=null){try{return wi.decode(a,c,!0)}catch(f){throw f instanceof te||f instanceof k?X.getNotFoundInstance():f}}static decode(a,c,f){const m=new Array,y=dt.detectMultiple(a,c,f);for(const b of y.getPoints()){const A=_t.decode(y.getBits(),b[4],b[5],b[6],b[7],wi.getMinCodewordWidth(b),wi.getMaxCodewordWidth(b)),T=new Ie(A.getText(),A.getRawBytes(),void 0,b,Oe.PDF_417);T.putMetadata(mt.ERROR_CORRECTION_LEVEL,A.getECLevel());const R=A.getOther();R!=null&&T.putMetadata(mt.PDF417_EXTRA_METADATA,R),m.push(T)}return m.map(b=>b)}static getMaxWidth(a,c){return a==null||c==null?0:Math.trunc(Math.abs(a.getX()-c.getX()))}static getMinWidth(a,c){return a==null||c==null?j.MAX_VALUE:Math.trunc(Math.abs(a.getX()-c.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(wi.getMaxWidth(a[0],a[4]),wi.getMaxWidth(a[6],a[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(wi.getMaxWidth(a[1],a[5]),wi.getMaxWidth(a[7],a[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(wi.getMinWidth(a[0],a[4]),wi.getMinWidth(a[6],a[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(wi.getMinWidth(a[1],a[5]),wi.getMinWidth(a[7],a[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}reset(){}}class jl extends p{}jl.kind="ReaderException";class Jd{constructor(a,c){this.verbose=a===!0,c&&this.setHints(c)}decode(a,c){return c&&this.setHints(c),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const c=!i(a)&&a.get(W.TRY_HARDER)===!0,f=i(a)?null:a.get(W.POSSIBLE_FORMATS),m=new Array;if(!i(f)){const y=f.some(b=>b===Oe.UPC_A||b===Oe.UPC_E||b===Oe.EAN_13||b===Oe.EAN_8||b===Oe.CODABAR||b===Oe.CODE_39||b===Oe.CODE_93||b===Oe.CODE_128||b===Oe.ITF||b===Oe.RSS_14||b===Oe.RSS_EXPANDED);y&&!c&&m.push(new _s(a,this.verbose)),f.includes(Oe.QR_CODE)&&m.push(new br),f.includes(Oe.DATA_MATRIX)&&m.push(new vr),f.includes(Oe.AZTEC)&&m.push(new ja),f.includes(Oe.PDF_417)&&m.push(new wi),y&&c&&m.push(new _s(a,this.verbose))}m.length===0&&(c||m.push(new _s(a,this.verbose)),m.push(new br),m.push(new vr),m.push(new ja),m.push(new wi),c&&m.push(new _s(a,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new jl("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(a,this.hints)}catch(f){if(f instanceof jl)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class Zd extends ve{constructor(a=null,c=500){const f=new Jd;f.setHints(a),super(f,c)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class L0 extends ve{constructor(a=500){super(new wi,a)}}class P0 extends ve{constructor(a=500){super(new br,a)}}var Eu;(function(U){U[U.ERROR_CORRECTION=0]="ERROR_CORRECTION",U[U.CHARACTER_SET=1]="CHARACTER_SET",U[U.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",U[U.MIN_SIZE=3]="MIN_SIZE",U[U.MAX_SIZE=4]="MAX_SIZE",U[U.MARGIN=5]="MARGIN",U[U.PDF417_COMPACT=6]="PDF417_COMPACT",U[U.PDF417_COMPACTION=7]="PDF417_COMPACTION",U[U.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",U[U.AZTEC_LAYERS=9]="AZTEC_LAYERS",U[U.QR_VERSION=10]="QR_VERSION"})(Eu||(Eu={}));var ti=Eu;class Uo{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new En(a,Int32Array.from([1])))}buildGenerator(a){const c=this.cachedGenerators;if(a>=c.length){let f=c[c.length-1];const m=this.field;for(let y=c.length;y<=a;y++){const b=f.multiply(new En(m,Int32Array.from([1,m.exp(y-1+m.getGeneratorBase())])));c.push(b),f=b}}return c[a]}encode(a,c){if(c===0)throw new E("No error correction bytes");const f=a.length-c;if(f<=0)throw new E("No data bytes provided");const m=this.buildGenerator(c),y=new Int32Array(f);L.arraycopy(a,0,y,0,f);let b=new En(this.field,y);b=b.multiplyByMonomial(c,1);const T=b.divide(m)[1].getCoefficients(),R=c-T.length;for(let M=0;M<R;M++)a[f+M]=0;L.arraycopy(T,0,a,f+R,T.length)}}class Rn{constructor(){}static applyMaskPenaltyRule1(a){return Rn.applyMaskPenaltyRule1Internal(a,!0)+Rn.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let c=0;const f=a.getArray(),m=a.getWidth(),y=a.getHeight();for(let b=0;b<y-1;b++){const A=f[b];for(let T=0;T<m-1;T++){const R=A[T];R===A[T+1]&&R===f[b+1][T]&&R===f[b+1][T+1]&&c++}}return Rn.N2*c}static applyMaskPenaltyRule3(a){let c=0;const f=a.getArray(),m=a.getWidth(),y=a.getHeight();for(let b=0;b<y;b++)for(let A=0;A<m;A++){const T=f[b];A+6<m&&T[A]===1&&T[A+1]===0&&T[A+2]===1&&T[A+3]===1&&T[A+4]===1&&T[A+5]===0&&T[A+6]===1&&(Rn.isWhiteHorizontal(T,A-4,A)||Rn.isWhiteHorizontal(T,A+7,A+11))&&c++,b+6<y&&f[b][A]===1&&f[b+1][A]===0&&f[b+2][A]===1&&f[b+3][A]===1&&f[b+4][A]===1&&f[b+5][A]===0&&f[b+6][A]===1&&(Rn.isWhiteVertical(f,A,b-4,b)||Rn.isWhiteVertical(f,A,b+7,b+11))&&c++}return c*Rn.N3}static isWhiteHorizontal(a,c,f){c=Math.max(c,0),f=Math.min(f,a.length);for(let m=c;m<f;m++)if(a[m]===1)return!1;return!0}static isWhiteVertical(a,c,f,m){f=Math.max(f,0),m=Math.min(m,a.length);for(let y=f;y<m;y++)if(a[y][c]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let c=0;const f=a.getArray(),m=a.getWidth(),y=a.getHeight();for(let T=0;T<y;T++){const R=f[T];for(let M=0;M<m;M++)R[M]===1&&c++}const b=a.getHeight()*a.getWidth();return Math.floor(Math.abs(c*2-b)*10/b)*Rn.N4}static getDataMaskBit(a,c,f){let m,y;switch(a){case 0:m=f+c&1;break;case 1:m=f&1;break;case 2:m=c%3;break;case 3:m=(f+c)%3;break;case 4:m=Math.floor(f/2)+Math.floor(c/3)&1;break;case 5:y=f*c,m=(y&1)+y%3;break;case 6:y=f*c,m=(y&1)+y%3&1;break;case 7:y=f*c,m=y%3+(f+c&1)&1;break;default:throw new E("Invalid mask pattern: "+a)}return m===0}static applyMaskPenaltyRule1Internal(a,c){let f=0;const m=c?a.getHeight():a.getWidth(),y=c?a.getWidth():a.getHeight(),b=a.getArray();for(let A=0;A<m;A++){let T=0,R=-1;for(let M=0;M<y;M++){const z=c?b[A][M]:b[M][A];z===R?T++:(T>=5&&(f+=Rn.N1+(T-5)),T=1,R=z)}T>=5&&(f+=Rn.N1+(T-5))}return f}}Rn.N1=3,Rn.N2=3,Rn.N3=40,Rn.N4=10;class Bl{constructor(a,c){this.width=a,this.height=c;const f=new Array(c);for(let m=0;m!==c;m++)f[m]=new Uint8Array(a);this.bytes=f}getHeight(){return this.height}getWidth(){return this.width}get(a,c){return this.bytes[c][a]}getArray(){return this.bytes}setNumber(a,c,f){this.bytes[c][a]=f}setBoolean(a,c,f){this.bytes[c][a]=f?1:0}clear(a){for(const c of this.bytes)B.fill(c,a)}equals(a){if(!(a instanceof Bl))return!1;const c=a;if(this.width!==c.width||this.height!==c.height)return!1;for(let f=0,m=this.height;f<m;++f){const y=this.bytes[f],b=c.bytes[f];for(let A=0,T=this.width;A<T;++A)if(y[A]!==b[A])return!1}return!0}toString(){const a=new Ne;for(let c=0,f=this.height;c<f;++c){const m=this.bytes[c];for(let y=0,b=this.width;y<b;++y)switch(m[y]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class ia{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new Ne;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<ia.NUM_MASK_PATTERNS}}ia.NUM_MASK_PATTERNS=8;class sn extends p{}sn.kind="WriterException";class rt{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,c,f,m,y){rt.clearMatrix(y),rt.embedBasicPatterns(f,y),rt.embedTypeInfo(c,m,y),rt.maybeEmbedVersionInfo(f,y),rt.embedDataBits(a,m,y)}static embedBasicPatterns(a,c){rt.embedPositionDetectionPatternsAndSeparators(c),rt.embedDarkDotAtLeftBottomCorner(c),rt.maybeEmbedPositionAdjustmentPatterns(a,c),rt.embedTimingPatterns(c)}static embedTypeInfo(a,c,f){const m=new F;rt.makeTypeInfoBits(a,c,m);for(let y=0,b=m.getSize();y<b;++y){const A=m.get(m.getSize()-1-y),T=rt.TYPE_INFO_COORDINATES[y],R=T[0],M=T[1];if(f.setBoolean(R,M,A),y<8){const z=f.getWidth()-y-1;f.setBoolean(z,8,A)}else{const G=f.getHeight()-7+(y-8);f.setBoolean(8,G,A)}}}static maybeEmbedVersionInfo(a,c){if(a.getVersionNumber()<7)return;const f=new F;rt.makeVersionInfoBits(a,f);let m=17;for(let y=0;y<6;++y)for(let b=0;b<3;++b){const A=f.get(m);m--,c.setBoolean(y,c.getHeight()-11+b,A),c.setBoolean(c.getHeight()-11+b,y,A)}}static embedDataBits(a,c,f){let m=0,y=-1,b=f.getWidth()-1,A=f.getHeight()-1;for(;b>0;){for(b===6&&(b-=1);A>=0&&A<f.getHeight();){for(let T=0;T<2;++T){const R=b-T;if(!rt.isEmpty(f.get(R,A)))continue;let M;m<a.getSize()?(M=a.get(m),++m):M=!1,c!==255&&Rn.getDataMaskBit(c,R,A)&&(M=!M),f.setBoolean(R,A,M)}A+=y}y=-y,A+=y,b-=2}if(m!==a.getSize())throw new sn("Not all bits consumed: "+m+"/"+a.getSize())}static findMSBSet(a){return 32-j.numberOfLeadingZeros(a)}static calculateBCHCode(a,c){if(c===0)throw new E("0 polynomial");const f=rt.findMSBSet(c);for(a<<=f-1;rt.findMSBSet(a)>=f;)a^=c<<rt.findMSBSet(a)-f;return a}static makeTypeInfoBits(a,c,f){if(!ia.isValidMaskPattern(c))throw new sn("Invalid mask pattern");const m=a.getBits()<<3|c;f.appendBits(m,5);const y=rt.calculateBCHCode(m,rt.TYPE_INFO_POLY);f.appendBits(y,10);const b=new F;if(b.appendBits(rt.TYPE_INFO_MASK_PATTERN,15),f.xor(b),f.getSize()!==15)throw new sn("should not happen but we got: "+f.getSize())}static makeVersionInfoBits(a,c){c.appendBits(a.getVersionNumber(),6);const f=rt.calculateBCHCode(a.getVersionNumber(),rt.VERSION_INFO_POLY);if(c.appendBits(f,12),c.getSize()!==18)throw new sn("should not happen but we got: "+c.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let c=8;c<a.getWidth()-8;++c){const f=(c+1)%2;rt.isEmpty(a.get(c,6))&&a.setNumber(c,6,f),rt.isEmpty(a.get(6,c))&&a.setNumber(6,c,f)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new sn;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,c,f){for(let m=0;m<8;++m){if(!rt.isEmpty(f.get(a+m,c)))throw new sn;f.setNumber(a+m,c,0)}}static embedVerticalSeparationPattern(a,c,f){for(let m=0;m<7;++m){if(!rt.isEmpty(f.get(a,c+m)))throw new sn;f.setNumber(a,c+m,0)}}static embedPositionAdjustmentPattern(a,c,f){for(let m=0;m<5;++m){const y=rt.POSITION_ADJUSTMENT_PATTERN[m];for(let b=0;b<5;++b)f.setNumber(a+b,c+m,y[b])}}static embedPositionDetectionPattern(a,c,f){for(let m=0;m<7;++m){const y=rt.POSITION_DETECTION_PATTERN[m];for(let b=0;b<7;++b)f.setNumber(a+b,c+m,y[b])}}static embedPositionDetectionPatternsAndSeparators(a){const c=rt.POSITION_DETECTION_PATTERN[0].length;rt.embedPositionDetectionPattern(0,0,a),rt.embedPositionDetectionPattern(a.getWidth()-c,0,a),rt.embedPositionDetectionPattern(0,a.getWidth()-c,a);const f=8;rt.embedHorizontalSeparationPattern(0,f-1,a),rt.embedHorizontalSeparationPattern(a.getWidth()-f,f-1,a),rt.embedHorizontalSeparationPattern(0,a.getWidth()-f,a);const m=7;rt.embedVerticalSeparationPattern(m,0,a),rt.embedVerticalSeparationPattern(a.getHeight()-m-1,0,a),rt.embedVerticalSeparationPattern(m,a.getHeight()-m,a)}static maybeEmbedPositionAdjustmentPatterns(a,c){if(a.getVersionNumber()<2)return;const f=a.getVersionNumber()-1,m=rt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[f];for(let y=0,b=m.length;y!==b;y++){const A=m[y];if(A>=0)for(let T=0;T!==b;T++){const R=m[T];R>=0&&rt.isEmpty(c.get(R,A))&&rt.embedPositionAdjustmentPattern(R-2,A-2,c)}}}}rt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),rt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),rt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),rt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),rt.VERSION_INFO_POLY=7973,rt.TYPE_INFO_POLY=1335,rt.TYPE_INFO_MASK_PATTERN=21522;class j0{constructor(a,c){this.dataBytes=a,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class yn{constructor(){}static calculateMaskPenalty(a){return Rn.applyMaskPenaltyRule1(a)+Rn.applyMaskPenaltyRule2(a)+Rn.applyMaskPenaltyRule3(a)+Rn.applyMaskPenaltyRule4(a)}static encode(a,c,f=null){let m=yn.DEFAULT_BYTE_MODE_ENCODING;const y=f!==null&&f.get(ti.CHARACTER_SET)!==void 0;y&&(m=f.get(ti.CHARACTER_SET).toString());const b=this.chooseMode(a,m),A=new F;if(b===tt.BYTE&&(y||yn.DEFAULT_BYTE_MODE_ENCODING!==m)){const Le=ie.getCharacterSetECIByName(m);Le!==void 0&&this.appendECI(Le,A)}this.appendModeInfo(b,A);const T=new F;this.appendBytes(a,b,T,m);let R;if(f!==null&&f.get(ti.QR_VERSION)!==void 0){const Le=Number.parseInt(f.get(ti.QR_VERSION).toString(),10);R=Ke.getVersionForNumber(Le);const Me=this.calculateBitsNeeded(b,A,T,R);if(!this.willFit(Me,R,c))throw new sn("Data too big for requested version")}else R=this.recommendVersion(c,b,A,T);const M=new F;M.appendBitArray(A);const z=b===tt.BYTE?T.getSizeInBytes():a.length;this.appendLengthInfo(z,R,b,M),M.appendBitArray(T);const G=R.getECBlocksForLevel(c),Z=R.getTotalCodewords()-G.getTotalECCodewords();this.terminateBits(Z,M);const re=this.interleaveWithECBytes(M,R.getTotalCodewords(),Z,G.getNumBlocks()),le=new ia;le.setECLevel(c),le.setMode(b),le.setVersion(R);const he=R.getDimensionForVersion(),be=new Bl(he,he),je=this.chooseMaskPattern(re,c,R,be);return le.setMaskPattern(je),rt.buildMatrix(re,c,R,je,be),le.setMatrix(be),le}static recommendVersion(a,c,f,m){const y=this.calculateBitsNeeded(c,f,m,Ke.getVersionForNumber(1)),b=this.chooseVersion(y,a),A=this.calculateBitsNeeded(c,f,m,b);return this.chooseVersion(A,a)}static calculateBitsNeeded(a,c,f,m){return c.getSize()+a.getCharacterCountBits(m)+f.getSize()}static getAlphanumericCode(a){return a<yn.ALPHANUMERIC_TABLE.length?yn.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,c=null){if(ie.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(a))return tt.KANJI;let f=!1,m=!1;for(let y=0,b=a.length;y<b;++y){const A=a.charAt(y);if(yn.isDigit(A))f=!0;else if(this.getAlphanumericCode(A.charCodeAt(0))!==-1)m=!0;else return tt.BYTE}return m?tt.ALPHANUMERIC:f?tt.NUMERIC:tt.BYTE}static isOnlyDoubleByteKanji(a){let c;try{c=Ee.encode(a,ie.SJIS)}catch{return!1}const f=c.length;if(f%2!==0)return!1;for(let m=0;m<f;m+=2){const y=c[m]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(a,c,f,m){let y=Number.MAX_SAFE_INTEGER,b=-1;for(let A=0;A<ia.NUM_MASK_PATTERNS;A++){rt.buildMatrix(a,c,f,A,m);let T=this.calculateMaskPenalty(m);T<y&&(y=T,b=A)}return b}static chooseVersion(a,c){for(let f=1;f<=40;f++){const m=Ke.getVersionForNumber(f);if(yn.willFit(a,m,c))return m}throw new sn("Data too big")}static willFit(a,c,f){const m=c.getTotalCodewords(),b=c.getECBlocksForLevel(f).getTotalECCodewords(),A=m-b,T=(a+7)/8;return A>=T}static terminateBits(a,c){const f=a*8;if(c.getSize()>f)throw new sn("data bits cannot fit in the QR Code"+c.getSize()+" > "+f);for(let b=0;b<4&&c.getSize()<f;++b)c.appendBit(!1);const m=c.getSize()&7;if(m>0)for(let b=m;b<8;b++)c.appendBit(!1);const y=a-c.getSizeInBytes();for(let b=0;b<y;++b)c.appendBits((b&1)===0?236:17,8);if(c.getSize()!==f)throw new sn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,c,f,m,y,b){if(m>=f)throw new sn("Block ID too large");const A=a%f,T=f-A,R=Math.floor(a/f),M=R+1,z=Math.floor(c/f),G=z+1,Z=R-z,re=M-G;if(Z!==re)throw new sn("EC bytes mismatch");if(f!==T+A)throw new sn("RS blocks mismatch");if(a!==(z+Z)*T+(G+re)*A)throw new sn("Total bytes mismatch");m<T?(y[0]=z,b[0]=Z):(y[0]=G,b[0]=re)}static interleaveWithECBytes(a,c,f,m){if(a.getSizeInBytes()!==f)throw new sn("Number of bits and data bytes does not match");let y=0,b=0,A=0;const T=new Array;for(let M=0;M<m;++M){const z=new Int32Array(1),G=new Int32Array(1);yn.getNumDataBytesAndNumECBytesForBlockID(c,f,m,M,z,G);const Z=z[0],re=new Uint8Array(Z);a.toBytes(8*y,re,0,Z);const le=yn.generateECBytes(re,G[0]);T.push(new j0(re,le)),b=Math.max(b,Z),A=Math.max(A,le.length),y+=z[0]}if(f!==y)throw new sn("Data bytes does not match offset");const R=new F;for(let M=0;M<b;++M)for(const z of T){const G=z.getDataBytes();M<G.length&&R.appendBits(G[M],8)}for(let M=0;M<A;++M)for(const z of T){const G=z.getErrorCorrectionBytes();M<G.length&&R.appendBits(G[M],8)}if(c!==R.getSizeInBytes())throw new sn("Interleaving error: "+c+" and "+R.getSizeInBytes()+" differ.");return R}static generateECBytes(a,c){const f=a.length,m=new Int32Array(f+c);for(let b=0;b<f;b++)m[b]=a[b]&255;new Uo(At.QR_CODE_FIELD_256).encode(m,c);const y=new Uint8Array(c);for(let b=0;b<c;b++)y[b]=m[f+b];return y}static appendModeInfo(a,c){c.appendBits(a.getBits(),4)}static appendLengthInfo(a,c,f,m){const y=f.getCharacterCountBits(c);if(a>=1<<y)throw new sn(a+" is bigger than "+((1<<y)-1));m.appendBits(a,y)}static appendBytes(a,c,f,m){switch(c){case tt.NUMERIC:yn.appendNumericBytes(a,f);break;case tt.ALPHANUMERIC:yn.appendAlphanumericBytes(a,f);break;case tt.BYTE:yn.append8BitBytes(a,f,m);break;case tt.KANJI:yn.appendKanjiBytes(a,f);break;default:throw new sn("Invalid mode: "+c)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const c=yn.getDigit(a);return c>=0&&c<=9}static appendNumericBytes(a,c){const f=a.length;let m=0;for(;m<f;){const y=yn.getDigit(a.charAt(m));if(m+2<f){const b=yn.getDigit(a.charAt(m+1)),A=yn.getDigit(a.charAt(m+2));c.appendBits(y*100+b*10+A,10),m+=3}else if(m+1<f){const b=yn.getDigit(a.charAt(m+1));c.appendBits(y*10+b,7),m+=2}else c.appendBits(y,4),m++}}static appendAlphanumericBytes(a,c){const f=a.length;let m=0;for(;m<f;){const y=yn.getAlphanumericCode(a.charCodeAt(m));if(y===-1)throw new sn;if(m+1<f){const b=yn.getAlphanumericCode(a.charCodeAt(m+1));if(b===-1)throw new sn;c.appendBits(y*45+b,11),m+=2}else c.appendBits(y,6),m++}}static append8BitBytes(a,c,f){let m;try{m=Ee.encode(a,f)}catch(y){throw new sn(y)}for(let y=0,b=m.length;y!==b;y++){const A=m[y];c.appendBits(A,8)}}static appendKanjiBytes(a,c){let f;try{f=Ee.encode(a,ie.SJIS)}catch(y){throw new sn(y)}const m=f.length;for(let y=0;y<m;y+=2){const b=f[y]&255,A=f[y+1]&255,T=b<<8&4294967295|A;let R=-1;if(T>=33088&&T<=40956?R=T-33088:T>=57408&&T<=60351&&(R=T-49472),R===-1)throw new sn("Invalid byte sequence");const M=(R>>8)*192+(R&255);c.appendBits(M,13)}}static appendECI(a,c){c.appendBits(tt.ECI.getBits(),4),c.appendBits(a.getValue(),8)}}yn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),yn.DEFAULT_BYTE_MODE_ENCODING=ie.UTF8.getName();class sa{write(a,c,f,m=null){if(a.length===0)throw new E("Found empty contents");if(c<0||f<0)throw new E("Requested dimensions are too small: "+c+"x"+f);let y=Ct.L,b=sa.QUIET_ZONE_SIZE;m!==null&&(m.get(ti.ERROR_CORRECTION)!==void 0&&(y=Ct.fromString(m.get(ti.ERROR_CORRECTION).toString())),m.get(ti.MARGIN)!==void 0&&(b=Number.parseInt(m.get(ti.MARGIN).toString(),10)));const A=yn.encode(a,y,m);return this.renderResult(A,c,f,b)}writeToDom(a,c,f,m,y=null){typeof a=="string"&&(a=document.querySelector(a));const b=this.write(c,f,m,y);a&&a.appendChild(b)}renderResult(a,c,f,m){const y=a.getMatrix();if(y===null)throw new Jn;const b=y.getWidth(),A=y.getHeight(),T=b+m*2,R=A+m*2,M=Math.max(c,T),z=Math.max(f,R),G=Math.min(Math.floor(M/T),Math.floor(z/R)),Z=Math.floor((M-b*G)/2),re=Math.floor((z-A*G)/2),le=this.createSVGElement(M,z);for(let he=0,be=re;he<A;he++,be+=G)for(let je=0,Le=Z;je<b;je++,Le+=G)if(y.get(je,he)===1){const Me=this.createSvgRectElement(Le,be,G,G);le.appendChild(Me)}return le}createSVGElement(a,c){const f=document.createElementNS(sa.SVG_NS,"svg");return f.setAttributeNS(null,"height",a.toString()),f.setAttributeNS(null,"width",c.toString()),f}createSvgRectElement(a,c,f,m){const y=document.createElementNS(sa.SVG_NS,"rect");return y.setAttributeNS(null,"x",a.toString()),y.setAttributeNS(null,"y",c.toString()),y.setAttributeNS(null,"height",f.toString()),y.setAttributeNS(null,"width",m.toString()),y.setAttributeNS(null,"fill","#000000"),y}}sa.QUIET_ZONE_SIZE=4,sa.SVG_NS="http://www.w3.org/2000/svg";class Ka{encode(a,c,f,m,y){if(a.length===0)throw new E("Found empty contents");if(c!==Oe.QR_CODE)throw new E("Can only encode QR_CODE, but got "+c);if(f<0||m<0)throw new E(`Requested dimensions are too small: ${f}x${m}`);let b=Ct.L,A=Ka.QUIET_ZONE_SIZE;y!==null&&(y.get(ti.ERROR_CORRECTION)!==void 0&&(b=Ct.fromString(y.get(ti.ERROR_CORRECTION).toString())),y.get(ti.MARGIN)!==void 0&&(A=Number.parseInt(y.get(ti.MARGIN).toString(),10)));const T=yn.encode(a,b,y);return Ka.renderResult(T,f,m,A)}static renderResult(a,c,f,m){const y=a.getMatrix();if(y===null)throw new Jn;const b=y.getWidth(),A=y.getHeight(),T=b+m*2,R=A+m*2,M=Math.max(c,T),z=Math.max(f,R),G=Math.min(Math.floor(M/T),Math.floor(z/R)),Z=Math.floor((M-b*G)/2),re=Math.floor((z-A*G)/2),le=new ue(M,z);for(let he=0,be=re;he<A;he++,be+=G)for(let je=0,Le=Z;je<b;je++,Le+=G)y.get(je,he)===1&&le.setRegion(Le,be,G,G);return le}}Ka.QUIET_ZONE_SIZE=4;class B0{encode(a,c,f,m,y){let b;switch(c){case Oe.QR_CODE:b=new Ka;break;default:throw new E("No encoder available for format "+c)}return b.encode(a,c,f,m,y)}}class Qs extends oe{constructor(a,c,f,m,y,b,A,T){if(super(b,A),this.yuvData=a,this.dataWidth=c,this.dataHeight=f,this.left=m,this.top=y,m+b>c||y+A>f)throw new E("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(b,A)}getRow(a,c){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const f=this.getWidth();(c==null||c.length<f)&&(c=new Uint8ClampedArray(f));const m=(a+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,m,c,0,f),c}getMatrix(){const a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.yuvData;const f=a*c,m=new Uint8ClampedArray(f);let y=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return L.arraycopy(this.yuvData,y,m,0,f),m;for(let b=0;b<c;b++){const A=b*a;L.arraycopy(this.yuvData,y,m,A,a),y+=this.dataWidth}return m}isCropSupported(){return!0}crop(a,c,f,m){return new Qs(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+c,f,m,!1)}renderThumbnail(){const a=this.getWidth()/Qs.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/Qs.THUMBNAIL_SCALE_FACTOR,f=new Int32Array(a*c),m=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let b=0;b<c;b++){const A=b*a;for(let T=0;T<a;T++){const R=m[y+T*Qs.THUMBNAIL_SCALE_FACTOR]&255;f[A+T]=4278190080|R*65793}y+=this.dataWidth*Qs.THUMBNAIL_SCALE_FACTOR}return f}getThumbnailWidth(){return this.getWidth()/Qs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Qs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,c){const f=this.yuvData;for(let m=0,y=this.top*this.dataWidth+this.left;m<c;m++,y+=this.dataWidth){const b=y+a/2;for(let A=y,T=y+a-1;A<b;A++,T--){const R=f[A];f[A]=f[T],f[T]=R}}}invert(){return new fe(this)}}Qs.THUMBNAIL_SCALE_FACTOR=2;class Au extends oe{constructor(a,c,f,m,y,b,A){if(super(c,f),this.dataWidth=m,this.dataHeight=y,this.left=b,this.top=A,a.BYTES_PER_ELEMENT===4){const T=c*f,R=new Uint8ClampedArray(T);for(let M=0;M<T;M++){const z=a[M],G=z>>16&255,Z=z>>7&510,re=z&255;R[M]=(G+Z+re)/4&255}this.luminances=R}else this.luminances=a;if(m===void 0&&(this.dataWidth=c),y===void 0&&(this.dataHeight=f),b===void 0&&(this.left=0),A===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+f>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(a,c){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const f=this.getWidth();(c==null||c.length<f)&&(c=new Uint8ClampedArray(f));const m=(a+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,m,c,0,f),c}getMatrix(){const a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.luminances;const f=a*c,m=new Uint8ClampedArray(f);let y=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return L.arraycopy(this.luminances,y,m,0,f),m;for(let b=0;b<c;b++){const A=b*a;L.arraycopy(this.luminances,y,m,A,a),y+=this.dataWidth}return m}isCropSupported(){return!0}crop(a,c,f,m){return new Au(this.luminances,f,m,this.dataWidth,this.dataHeight,this.left+a,this.top+c)}invert(){return new fe(this)}}class Qd extends ie{static forName(a){return this.getCharacterSetECIByName(a)}}class Fo{}Fo.ISO_8859_1=ie.ISO8859_1;class $a{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class ef{static singletonList(a){return[a]}static min(a,c){return a.sort(c)[0]}}class tf{constructor(a){this.previous=a}getPrevious(){return this.previous}}class ra extends tf{constructor(a,c,f){super(a),this.value=c,this.bitCount=f}appendTo(a,c){a.appendBits(this.value,this.bitCount)}add(a,c){return new ra(this,a,c)}addBinaryShift(a,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ra(this,a,c)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+j.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class Ul extends ra{constructor(a,c,f){super(a,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=f}appendTo(a,c){for(let f=0;f<this.binaryShiftByteCount;f++)(f===0||f===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):f===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(c[this.binaryShiftStart+f],8)}addBinaryShift(a,c){return new Ul(this,a,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function nf(U,a,c){return new Ul(U,a,c)}function Ja(U,a,c){return new ra(U,a,c)}const Za=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],zr=0,Fl=1,ds=2,Su=3,Ss=4,zo=new ra(null,0,0),aa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function U0(U){for(let a of U)B.fill(a,-1);return U[zr][Ss]=0,U[Fl][Ss]=0,U[Fl][zr]=28,U[Su][Ss]=0,U[ds][Ss]=0,U[ds][zr]=15,U}const Vo=U0(B.createInt32Array(6,6));class Ns{constructor(a,c,f,m){this.token=a,this.mode=c,this.binaryShiftByteCount=f,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,c){let f=this.bitCount,m=this.token;if(a!==this.mode){let b=aa[this.mode][a];m=Ja(m,b&65535,b>>16),f+=b>>16}let y=a===ds?4:5;return m=Ja(m,c,y),new Ns(m,a,0,f+y)}shiftAndAppend(a,c){let f=this.token,m=this.mode===ds?4:5;return f=Ja(f,Vo[this.mode][a],m),f=Ja(f,c,5),new Ns(f,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(a){let c=this.token,f=this.mode,m=this.bitCount;if(this.mode===Ss||this.mode===ds){let A=aa[f][zr];c=Ja(c,A&65535,A>>16),m+=A>>16,f=zr}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,b=new Ns(c,f,this.binaryShiftByteCount+1,m+y);return b.binaryShiftByteCount===2078&&(b=b.endBinaryShift(a+1)),b}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=nf(c,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ns(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let c=this.bitCount+(aa[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?c+=Ns.calculateBinaryShiftCost(a)-Ns.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(c+=10),c<=a.bitCount}toBitArray(a){let c=[];for(let m=this.endBinaryShift(a.length).token;m!==null;m=m.getPrevious())c.unshift(m);let f=new F;for(const m of c)m.appendTo(f,a);return f}toString(){return pe.format("%s bits=%d bytes=%d",Za[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}Ns.INITIAL_STATE=new Ns(zo,zr,0,0);function sf(U){const a=pe.getCharCode(" "),c=pe.getCharCode("."),f=pe.getCharCode(",");U[zr][a]=1;const m=pe.getCharCode("Z"),y=pe.getCharCode("A");for(let G=y;G<=m;G++)U[zr][G]=G-y+2;U[Fl][a]=1;const b=pe.getCharCode("z"),A=pe.getCharCode("a");for(let G=A;G<=b;G++)U[Fl][G]=G-A+2;U[ds][a]=1;const T=pe.getCharCode("9"),R=pe.getCharCode("0");for(let G=R;G<=T;G++)U[ds][G]=G-R+2;U[ds][f]=12,U[ds][c]=13;const M=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let G=0;G<M.length;G++)U[Su][pe.getCharCode(M[G])]=G;const z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let G=0;G<z.length;G++)pe.getCharCode(z[G])>0&&(U[Ss][pe.getCharCode(z[G])]=G);return U}const Go=sf(B.createInt32Array(5,256));class oa{constructor(a){this.text=a}encode(){const a=pe.getCharCode(" "),c=pe.getCharCode(`
`);let f=ef.singletonList(Ns.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let b,A=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case pe.getCharCode("\r"):b=A===c?2:0;break;case pe.getCharCode("."):b=A===a?3:0;break;case pe.getCharCode(","):b=A===a?4:0;break;case pe.getCharCode(":"):b=A===a?5:0;break;default:b=0}b>0?(f=oa.updateStateListForPair(f,y,b),y++):f=this.updateStateListForChar(f,y)}return ef.min(f,(y,b)=>y.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,c){const f=[];for(let m of a)this.updateStateForChar(m,c,f);return oa.simplifyStates(f)}updateStateForChar(a,c,f){let m=this.text[c]&255,y=Go[a.getMode()][m]>0,b=null;for(let A=0;A<=Ss;A++){let T=Go[A][m];if(T>0){if(b==null&&(b=a.endBinaryShift(c)),!y||A===a.getMode()||A===ds){const R=b.latchAndAppend(A,T);f.push(R)}if(!y&&Vo[a.getMode()][A]>=0){const R=b.shiftAndAppend(A,T);f.push(R)}}}if(a.getBinaryShiftByteCount()>0||Go[a.getMode()][m]===0){let A=a.addBinaryShiftChar(c);f.push(A)}}static updateStateListForPair(a,c,f){const m=[];for(let y of a)this.updateStateForPair(y,c,f,m);return this.simplifyStates(m)}static updateStateForPair(a,c,f,m){let y=a.endBinaryShift(c);if(m.push(y.latchAndAppend(Ss,f)),a.getMode()!==Ss&&m.push(y.shiftAndAppend(Ss,f)),f===3||f===4){let b=y.latchAndAppend(ds,16-f).latchAndAppend(ds,1);m.push(b)}if(a.getBinaryShiftByteCount()>0){let b=a.addBinaryShiftChar(c).addBinaryShiftChar(c+1);m.push(b)}}static simplifyStates(a){let c=[];for(const f of a){let m=!0;for(const y of c){if(y.isBetterThanOrEqualTo(f)){m=!1;break}f.isBetterThanOrEqualTo(y)&&(c=c.filter(b=>b!==y))}m&&c.push(f)}return c}}class Dt{constructor(){}static encodeBytes(a){return Dt.encode(a,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(a,c,f){let m=new oa(a).encode(),y=j.truncDivision(m.getSize()*c,100)+11,b=m.getSize()+y,A,T,R,M,z;if(f!==Dt.DEFAULT_AZTEC_LAYERS){if(A=f<0,T=Math.abs(f),T>(A?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new E(pe.format("Illegal value %s for layers",f));R=Dt.totalBitsInLayer(T,A),M=Dt.WORD_SIZE[T];let Me=R-R%M;if(z=Dt.stuffBits(m,M),z.getSize()+y>Me)throw new E("Data to large for user specified layer");if(A&&z.getSize()>M*64)throw new E("Data to large for user specified layer")}else{M=0,z=null;for(let Me=0;;Me++){if(Me>Dt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(A=Me<=3,T=A?Me+1:Me,R=Dt.totalBitsInLayer(T,A),b>R)continue;(z==null||M!==Dt.WORD_SIZE[T])&&(M=Dt.WORD_SIZE[T],z=Dt.stuffBits(m,M));let St=R-R%M;if(!(A&&z.getSize()>M*64)&&z.getSize()+y<=St)break}}let G=Dt.generateCheckWords(z,R,M),Z=z.getSize()/M,re=Dt.generateModeMessage(A,T,Z),le=(A?11:14)+T*4,he=new Int32Array(le),be;if(A){be=le;for(let Me=0;Me<he.length;Me++)he[Me]=Me}else{be=le+1+2*j.truncDivision(j.truncDivision(le,2)-1,15);let Me=j.truncDivision(le,2),St=j.truncDivision(be,2);for(let ht=0;ht<Me;ht++){let Vn=ht+j.truncDivision(ht,15);he[Me-ht-1]=St-Vn-1,he[Me+ht]=St+Vn+1}}let je=new ue(be);for(let Me=0,St=0;Me<T;Me++){let ht=(T-Me)*4+(A?9:12);for(let Vn=0;Vn<ht;Vn++){let fs=Vn*2;for(let Bi=0;Bi<2;Bi++)G.get(St+fs+Bi)&&je.set(he[Me*2+Bi],he[Me*2+Vn]),G.get(St+ht*2+fs+Bi)&&je.set(he[Me*2+Vn],he[le-1-Me*2-Bi]),G.get(St+ht*4+fs+Bi)&&je.set(he[le-1-Me*2-Bi],he[le-1-Me*2-Vn]),G.get(St+ht*6+fs+Bi)&&je.set(he[le-1-Me*2-Vn],he[Me*2+Bi])}St+=ht*8}if(Dt.drawModeMessage(je,A,be,re),A)Dt.drawBullsEye(je,j.truncDivision(be,2),5);else{Dt.drawBullsEye(je,j.truncDivision(be,2),7);for(let Me=0,St=0;Me<j.truncDivision(le,2)-1;Me+=15,St+=16)for(let ht=j.truncDivision(be,2)&1;ht<be;ht+=2)je.set(j.truncDivision(be,2)-St,ht),je.set(j.truncDivision(be,2)+St,ht),je.set(ht,j.truncDivision(be,2)-St),je.set(ht,j.truncDivision(be,2)+St)}let Le=new $a;return Le.setCompact(A),Le.setSize(be),Le.setLayers(T),Le.setCodeWords(Z),Le.setMatrix(je),Le}static drawBullsEye(a,c,f){for(let m=0;m<f;m+=2)for(let y=c-m;y<=c+m;y++)a.set(y,c-m),a.set(y,c+m),a.set(c-m,y),a.set(c+m,y);a.set(c-f,c-f),a.set(c-f+1,c-f),a.set(c-f,c-f+1),a.set(c+f,c-f),a.set(c+f,c-f+1),a.set(c+f,c+f-1)}static generateModeMessage(a,c,f){let m=new F;return a?(m.appendBits(c-1,2),m.appendBits(f-1,6),m=Dt.generateCheckWords(m,28,4)):(m.appendBits(c-1,5),m.appendBits(f-1,11),m=Dt.generateCheckWords(m,40,4)),m}static drawModeMessage(a,c,f,m){let y=j.truncDivision(f,2);if(c)for(let b=0;b<7;b++){let A=y-3+b;m.get(b)&&a.set(A,y-5),m.get(b+7)&&a.set(y+5,A),m.get(20-b)&&a.set(A,y+5),m.get(27-b)&&a.set(y-5,A)}else for(let b=0;b<10;b++){let A=y-5+b+j.truncDivision(b,5);m.get(b)&&a.set(A,y-7),m.get(b+10)&&a.set(y+7,A),m.get(29-b)&&a.set(A,y+7),m.get(39-b)&&a.set(y-7,A)}}static generateCheckWords(a,c,f){let m=a.getSize()/f,y=new Uo(Dt.getGF(f)),b=j.truncDivision(c,f),A=Dt.bitsToWords(a,f,b);y.encode(A,b-m);let T=c%f,R=new F;R.appendBits(0,T);for(const M of Array.from(A))R.appendBits(M,f);return R}static bitsToWords(a,c,f){let m=new Int32Array(f),y,b;for(y=0,b=a.getSize()/c;y<b;y++){let A=0;for(let T=0;T<c;T++)A|=a.get(y*c+T)?1<<c-T-1:0;m[y]=A}return m}static getGF(a){switch(a){case 4:return At.AZTEC_PARAM;case 6:return At.AZTEC_DATA_6;case 8:return At.AZTEC_DATA_8;case 10:return At.AZTEC_DATA_10;case 12:return At.AZTEC_DATA_12;default:throw new E("Unsupported word size "+a)}}static stuffBits(a,c){let f=new F,m=a.getSize(),y=(1<<c)-2;for(let b=0;b<m;b+=c){let A=0;for(let T=0;T<c;T++)(b+T>=m||a.get(b+T))&&(A|=1<<c-1-T);(A&y)===y?(f.appendBits(A&y,c),b--):(A&y)===0?(f.appendBits(A|1,c),b--):f.appendBits(A,c)}return f}static totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ho{encode(a,c,f,m){return this.encodeWithHints(a,c,f,m,null)}encodeWithHints(a,c,f,m,y){let b=Fo.ISO_8859_1,A=Dt.DEFAULT_EC_PERCENT,T=Dt.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(ti.CHARACTER_SET)&&(b=Qd.forName(y.get(ti.CHARACTER_SET).toString())),y.has(ti.ERROR_CORRECTION)&&(A=j.parseInt(y.get(ti.ERROR_CORRECTION).toString())),y.has(ti.AZTEC_LAYERS)&&(T=j.parseInt(y.get(ti.AZTEC_LAYERS).toString()))),Ho.encodeLayers(a,c,f,m,b,A,T)}static encodeLayers(a,c,f,m,y,b,A){if(c!==Oe.AZTEC)throw new E("Can only encode AZTEC, but got "+c);let T=Dt.encode(pe.getBytes(a,y),b,A);return Ho.renderResult(T,f,m)}static renderResult(a,c,f){let m=a.getMatrix();if(m==null)throw new Jn;let y=m.getWidth(),b=m.getHeight(),A=Math.max(c,y),T=Math.max(f,b),R=Math.min(A/y,T/b),M=(A-y*R)/2,z=(T-b*R)/2,G=new ue(A,T);for(let Z=0,re=z;Z<b;Z++,re+=R)for(let le=0,he=M;le<y;le++,he+=R)m.get(le,Z)&&G.setRegion(he,re,R,R);return G}}n.AbstractExpandedDecoder=Ht,n.ArgumentException=_,n.ArithmeticException=oi,n.AztecCode=$a,n.AztecCodeReader=ja,n.AztecCodeWriter=Ho,n.AztecDecoder=zt,n.AztecDetector=Lo,n.AztecDetectorResult=Un,n.AztecEncoder=Dt,n.AztecHighLevelEncoder=oa,n.AztecPoint=vi,n.BarcodeFormat=Oe,n.Binarizer=O,n.BinaryBitmap=N,n.BitArray=F,n.BitMatrix=ue,n.BitSource=Es,n.BrowserAztecCodeReader=gu,n.BrowserBarcodeReader=O0,n.BrowserCodeReader=ve,n.BrowserDatamatrixCodeReader=Ol,n.BrowserMultiFormatReader=Zd,n.BrowserPDF417Reader=L0,n.BrowserQRCodeReader=P0,n.BrowserQRCodeSvgWriter=sa,n.CharacterSetECI=ie,n.ChecksumException=k,n.Code128Reader=Pe,n.Code39Reader=on,n.DataMatrixDecodedBitStreamParser=yr,n.DataMatrixReader=vr,n.DecodeHintType=W,n.DecoderResult=Ft,n.DefaultGridSampler=jr,n.DetectorResult=wt,n.EAN13Reader=bs,n.EncodeHintType=ti,n.Exception=p,n.FormatException=te,n.GenericGF=At,n.GenericGFPoly=En,n.GlobalHistogramBinarizer=K,n.GridSampler=ls,n.GridSamplerInstance=Qi,n.HTMLCanvasElementLuminanceSource=Se,n.HybridBinarizer=J,n.ITFReader=yt,n.IllegalArgumentException=E,n.IllegalStateException=Jn,n.InvertedLuminanceSource=fe,n.LuminanceSource=oe,n.MathUtils=ze,n.MultiFormatOneDReader=_s,n.MultiFormatReader=Jd,n.MultiFormatWriter=B0,n.NotFoundException=X,n.OneDReader=un,n.PDF417DecodedBitStreamParser=we,n.PDF417DecoderErrorCorrection=wr,n.PDF417Reader=wi,n.PDF417ResultMetadata=Wa,n.PerspectiveTransform=Zn,n.PlanarYUVLuminanceSource=Qs,n.QRCodeByteMatrix=Bl,n.QRCodeDataMask=ts,n.QRCodeDecodedBitStreamParser=gn,n.QRCodeDecoderErrorCorrectionLevel=Ct,n.QRCodeDecoderFormatInformation=ci,n.QRCodeEncoder=yn,n.QRCodeEncoderQRCode=ia,n.QRCodeMaskUtil=Rn,n.QRCodeMatrixUtil=rt,n.QRCodeMode=tt,n.QRCodeReader=br,n.QRCodeVersion=Ke,n.QRCodeWriter=Ka,n.RGBLuminanceSource=Au,n.RSS14Reader=nn,n.RSSExpandedReader=ke,n.ReaderException=jl,n.ReedSolomonDecoder=mn,n.ReedSolomonEncoder=Uo,n.ReedSolomonException=bn,n.Result=Ie,n.ResultMetadataType=mt,n.ResultPoint=De,n.StringUtils=pe,n.UnsupportedOperationException=_e,n.VideoInputDevice=ee,n.WhiteRectangleDetector=Nt,n.WriterException=sn,n.ZXingArrays=B,n.ZXingCharset=Qd,n.ZXingInteger=j,n.ZXingStandardCharsets=Fo,n.ZXingStringBuilder=Ne,n.ZXingStringEncoding=Ee,n.ZXingSystem=L,n.createAbstractExpandedDecoder=za,Object.defineProperty(n,"__esModule",{value:!0})}))})(pd,pd.exports)),pd.exports}var Pn=h5();const p5=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var tb=(function(){function e(t,n,i){if(this.formatMap=new Map([[Ye.QR_CODE,Pn.BarcodeFormat.QR_CODE],[Ye.AZTEC,Pn.BarcodeFormat.AZTEC],[Ye.CODABAR,Pn.BarcodeFormat.CODABAR],[Ye.CODE_39,Pn.BarcodeFormat.CODE_39],[Ye.CODE_93,Pn.BarcodeFormat.CODE_93],[Ye.CODE_128,Pn.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,Pn.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,Pn.BarcodeFormat.MAXICODE],[Ye.ITF,Pn.BarcodeFormat.ITF],[Ye.EAN_13,Pn.BarcodeFormat.EAN_13],[Ye.EAN_8,Pn.BarcodeFormat.EAN_8],[Ye.PDF_417,Pn.BarcodeFormat.PDF_417],[Ye.RSS_14,Pn.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,Pn.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,Pn.BarcodeFormat.UPC_A],[Ye.UPC_E,Pn.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,Pn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!p5)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var r=this.createZXingFormats(t),o=new Map;o.set(Pn.DecodeHintType.POSSIBLE_FORMATS,r),o.set(Pn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,r){try{i(n.decode(t))}catch(o){r(o)}})},e.prototype.decode=function(t){var n=new Pn.MultiFormatReader(this.verbose,this.hints),i=new Pn.HTMLCanvasElementLuminanceSource(t),r=new Pn.BinaryBitmap(new Pn.HybridBinarizer(i)),o=n.decode(r);return{text:o.text,format:M3.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,r){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),m5=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function g(_){try{p(i.next(_))}catch(E){d(E)}}function x(_){try{p(i.throw(_))}catch(E){d(E)}}function p(_){_.done?o(_.value):r(_.value).then(g,x)}p((i=i.apply(e,t||[])).next())})},g5=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(p){return function(_){return x([p,_])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(o=p[0]&2?r.return:p[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,p[1])).done)return o;switch(r=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(_){p=[6,_],r=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},nb=(function(){function e(t,n,i){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var r=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(r),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return m5(this,void 0,void 0,function(){var n,i;return g5(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=r.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:M3.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,r=0,o=t;r<o.length;r++){var d=o[r],g=d.boundingBox.width*d.boundingBox.height;g>i&&(i=g,n=d)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,r){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),ib=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function g(_){try{p(i.next(_))}catch(E){d(E)}}function x(_){try{p(i.throw(_))}catch(E){d(E)}}function p(_){_.done?o(_.value):r(_.value).then(g,x)}p((i=i.apply(e,t||[])).next())})},sb=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(p){return function(_){return x([p,_])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(o=p[0]&2?r.return:p[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,p[1])).done)return o;switch(r=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(_){p=[6,_],r=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},x5=(function(){function e(t,n,i,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&nb.isSupported()?(this.primaryDecoder=new nb(t,i,r),this.secondaryDecoder=new tb(t,i,r)):this.primaryDecoder=new tb(t,i,r)}return e.prototype.decodeAsync=function(t){return ib(this,void 0,void 0,function(){var n;return sb(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return ib(this,void 0,void 0,function(){var n,i;return sb(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,r.sent()];case 3:if(i=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var r=i[n];t+=r}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),ng=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),Ph=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function g(_){try{p(i.next(_))}catch(E){d(E)}}function x(_){try{p(i.throw(_))}catch(E){d(E)}}function p(_){_.done?o(_.value):r(_.value).then(g,x)}p((i=i.apply(e,t||[])).next())})},jh=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(p){return function(_){return x([p,_])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(o=p[0]&2?r.return:p[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,p[1])).done)return o;switch(r=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(_){p=[6,_],r=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},L3=(function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e})(),y5=(function(e){ng(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var r={advanced:[i]};return this.track.applyConstraints(r)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(L3),v5=(function(e){ng(t,e);function t(n){return e.call(this,"zoom",n)||this}return t})(y5),b5=(function(e){ng(t,e);function t(n){return e.call(this,"torch",n)||this}return t})(L3),w5=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new v5(this.track)},e.prototype.torchFeature=function(){return new b5(this.track)},e})(),_5=(function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,r=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,r),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,r){return Ph(this,void 0,void 0,function(){var o,d;return jh(this,function(g){switch(g.label){case 0:return o=new e(t,n,r),i.aspectRatio?(d={aspectRatio:i.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:g.sent(),g.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Ph(this,void 0,void 0,function(){return jh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var r=t.mediaStream.getVideoTracks(),o=r.length,d=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++d,d>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new w5(this.getFirstTrackOrFail())},e})(),E5=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return Ph(this,void 0,void 0,function(){return jh(this,function(r){return[2,_5.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return Ph(this,void 0,void 0,function(){var n,i;return jh(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=r.sent(),[2,new e(i)]}})})},e})(),rb=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function g(_){try{p(i.next(_))}catch(E){d(E)}}function x(_){try{p(i.throw(_))}catch(E){d(E)}}function p(_){_.done?o(_.value):r(_.value).then(g,x)}p((i=i.apply(e,t||[])).next())})},ab=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(p){return function(_){return x([p,_])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(o=p[0]&2?r.return:p[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,p[1])).done)return o;switch(r=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(_){p=[6,_],r=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},A5=(function(){function e(){}return e.failIfNotSupported=function(){return rb(this,void 0,void 0,function(){return ab(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return rb(this,void 0,void 0,function(){return ab(this,function(n){return[2,E5.create(t)]})})},e})(),S5=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function g(_){try{p(i.next(_))}catch(E){d(E)}}function x(_){try{p(i.throw(_))}catch(E){d(E)}}function p(_){_.done?o(_.value):r(_.value).then(g,x)}p((i=i.apply(e,t||[])).next())})},N5=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(p){return function(_){return x([p,_])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(o=p[0]&2?r.return:p[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,p[1])).done)return o;switch(r=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(_){p=[6,_],r=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},C5=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Cc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Cc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return S5(this,void 0,void 0,function(){var t,n,i,r,o,d,g;return N5(this,function(x){switch(x.label){case 0:return t=function(p){for(var _=p.getVideoTracks(),E=0,N=_;E<N.length;E++){var k=N[E];k.enabled=!1,k.stop(),p.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=x.sent(),r=[],o=0,d=i;o<d.length;o++)g=d[o],g.kind==="videoinput"&&r.push({id:g.deviceId,label:g.label});return t(n),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(o){for(var d=[],g=0,x=o;g<x.length;g++){var p=x[g];p.kind==="video"&&d.push({id:p.id,label:p.label})}t(d)},r=MediaStreamTrack;r.getSources(i)})},e})(),Xn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Xn||(Xn={}));var T5=(function(){function e(){this.state=Xn.NOT_STARTED,this.onGoingTransactionNewState=Xn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Xn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Xn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Xn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Xn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Xn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Xn.UNKNOWN:throw"Transition from unknown is not allowed";case Xn.NOT_STARTED:this.failIfNewStateIs(t,[Xn.PAUSED]);break;case Xn.SCANNING:break;case Xn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),I5=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Xn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Xn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Xn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Xn.PAUSED},e})(),R5=(function(){function e(){}return e.create=function(){return new I5(new T5)},e})(),k5=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),Us=(function(e){k5(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(c5),O5=(function(){function e(t,n){this.logger=n,this.fps=Us.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Us.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?D3.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Sa(this.qrbox)},e.create=function(t,n){return new e(t,n)},e})(),M5=(function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new d5(this.verbose),this.qrcode=new x5(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=R5.create()}return e.prototype.start=function(t,n,i,r){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;r?d=r:d=this.verbose?this.logger.log:function(){};var g=O5.create(n,this.logger);this.clearElement();var x=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=x,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:Us.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var E=this,N=this.stateManagerProxy.startTransition(Xn.SCANNING);return new Promise(function(k,O){var L=p?g.videoConstraints:E.createVideoConstraints(t);if(!L){N.cancel(),O("videoConstraints should be defined");return}var P={};(!p||g.aspectRatio)&&(P.aspectRatio=g.aspectRatio);var H={onRenderSurfaceReady:function(B,j){E.setupUi(B,j,g),E.isScanning=!0,E.foreverScan(g,i,d)}};A5.failIfNotSupported().then(function(B){B.create(L).then(function(j){return j.render(o.element,P,H).then(function(F){E.renderedCamera=F,N.execute(),k(null)}).catch(function(F){N.cancel(),O(F)})}).catch(function(j){N.cancel(),O(Cc.errorGettingUserMedia(j))})}).catch(function(B){N.cancel(),O(Cc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Xn.PAUSED),this.showPausedState(),(Sa(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Xn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Xn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var o=document.getElementById(Us.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},r=this;return this.renderedCamera.close().then(function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),i(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),n.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Sa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,o){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var g=d.width,x=d.height,p=document.getElementById(i.elementId),_=p.clientWidth?p.clientWidth:Us.DEFAULT_WIDTH,E=Math.max(p.clientHeight?p.clientHeight:x,Us.FILE_SCAN_MIN_HEIGHT),N=i.computeCanvasDrawConfig(g,x,_,E);if(n){var k=i.createCanvasElement(_,E,"qr-canvas-visible");k.style.display="inline-block",p.appendChild(k);var O=k.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=_,O.canvas.height=E,O.drawImage(d,0,0,g,x,N.x,N.y,N.width,N.height)}var L=Us.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(d.width,N.width),H=Math.max(d.height,N.height),B=P+2*L,j=H+2*L,F=i.createCanvasElement(B,j);p.appendChild(F);var Y=F.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=B,Y.canvas.height=j,Y.drawImage(d,0,0,g,x,L,L,P,H);try{i.qrcode.decodeRobustlyAsync(F).then(function(W){r(Qv.createFromQrcodeResult(W))}).catch(o)}catch(W){o("QR code parse error, error = ".concat(W))}},d.onerror=o,d.onabort=o,d.onstalled=o,d.onsuspend=o,d.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return C5.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!D3.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],r=0,o=t.formatsToSupport;r<o.length;r++){var d=o[r];l5(d)?i.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Sa(t))return!0;if(!Sa(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Sa(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Sa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var r=this,o=i.qrbox;this.validateQrboxConfig(o);var d=this.toQrdimensions(t,n,o),g=function(p){if(p<Us.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Us.MIN_QR_BOX_SIZE,"px.")},x=function(p){return p>t&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};g(d.width),g(d.height),d.width=x(d.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var r=Sa(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(r);var o=this.toQrdimensions(t,n,r);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=i.isShadedBoxEnabled()&&o.height<=n,g={x:0,y:0,width:t,height:n},x=d?this.getShadedRegionBounds(t,n,o):g,p=this.createCanvasElement(x.width,x.height),_={willReadFrequently:!0},E=p.getContext("2d",_);E.canvas.width=x.width,E.canvas.height=x.height,this.element.append(p),d&&this.possiblyInsertShadingElement(this.element,t,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=E,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Cc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(r){return t(r.text,Qv.createFromQrcodeResult(r)),i.possiblyUpdateShaders(!0),!0}).catch(function(r){i.possiblyUpdateShaders(!1);var o=Cc.codeParseError(r);return n(o,u5.createFrom(o)),!1})},e.prototype.foreverScan=function(t,n,i){var r=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),d=o.videoWidth/o.clientWidth,g=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*d,p=this.qrRegion.height*g,_=this.qrRegion.x*d,E=this.qrRegion.y*g;this.context.drawImage(o,_,E,x,p,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(t,n,i)},r.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(k){!k&&t.disableFlip!==!0?(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(n,i).finally(function(){N()})):N()}).catch(function(k){r.logger.logError("Error happend while scanning context",k),N()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",r={user:!0,environment:!0},o="exact",d=function(O){if(O in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var x=Object.keys(t)[0];if(x!==n&&x!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(x===n){var p=t.facingMode;if(typeof p=="string"){if(d(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(d(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var _=typeof p;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var N=typeof E;throw"Invalid type of 'deviceId' = ".concat(N)}}}var k=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},e.prototype.computeCanvasDrawConfig=function(t,n,i,r){if(t<=i&&n<=r){var o=(i-t)/2,d=(r-n)/2;return{x:o,y:d,width:t,height:n}}else{var g=t,x=n;return t>i&&(n=i/t*n,t=i),n>r&&(t=r/n*t,n=r),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(x)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,r)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Us.BORDER_SHADER_MATCH_COLOR:Us.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var r=t,o=n,d=document.createElement("canvas");return d.style.width="".concat(r,"px"),d.style.height="".concat(o,"px"),d.style.display="none",d.id=Sa(i)?"qr-canvas":i,d},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,r){if(!(n-r.width<1||i-r.height<1)){var o=document.createElement("div");o.style.position="absolute";var d=(n-r.width)/2,g=(i-r.height)/2;if(o.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Us.SHADED_REGION_ELEMENT_ID),n-r.width<11||i-r.height<11)this.hasBorderShaders=!1;else{var x=5,p=40;this.insertShaderBorders(o,p,x,-x,null,0,!0),this.insertShaderBorders(o,p,x,-x,null,0,!1),this.insertShaderBorders(o,p,x,null,-x,0,!0),this.insertShaderBorders(o,p,x,null,-x,0,!1),this.insertShaderBorders(o,x,p+x,-x,null,-x,!0),this.insertShaderBorders(o,x,p+x,null,-x,-x,!0),this.insertShaderBorders(o,x,p+x,-x,null,-x,!1),this.insertShaderBorders(o,x,p+x,null,-x,-x,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,n,i,r,o,d,g){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=Us.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(n,"px"),x.style.height="".concat(i,"px"),r!==null&&(x.style.top="".concat(r,"px")),o!==null&&(x.style.bottom="".concat(o,"px")),g?x.style.left="".concat(d,"px"):x.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),t.appendChild(x)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),ob;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ob||(ob={}));async function P3(e){if(!Q)return{};const{data:t,error:n}=await Q.from("user_tickets").select("variation_id").eq("event_id",e).neq("status","cancelled");if(n||!t)return{};const i={};return t.forEach(r=>{r.variation_id&&(i[r.variation_id]=(i[r.variation_id]||0)+1)}),i}async function j3(e,t){if(!Q)return 0;const{count:n}=await Q.from("user_tickets").select("id",{count:"exact",head:!0}).eq("event_id",e).eq("guest_cpf",t);return n||0}async function D5(e){if(!Q)return{success:!1,message:"Erro de conexo"};try{const{data:t,error:n}=await Q.from("user_tickets").select("event_id, source").eq("id",e.ticketId).single();if(n||!t)throw new Error("Ingresso no encontrado.");if(t.source==="complimentary"){const r=e.guestCpf.replace(/\D/g,"");if(await j3(t.event_id,r)>=2)return{success:!1,message:"Protocolo Negado: Limite de 2 cortesias por CPF atingido para este evento."}}const{error:i}=await Q.from("user_tickets").update({guest_name:e.guestName.toUpperCase(),guest_cpf:e.guestCpf.replace(/\D/g,"")}).eq("id",e.ticketId);if(i)throw i;return{success:!0,message:"Titularidade confirmada."}}catch(t){return console.error("[VANTA TICKET SECURITY] Erro na validao:",t),{success:!1,message:t.message||"Falha ao validar titularidade."}}}async function L5(e){var g;if(!Q)return{success:!1,message:"Erro de rede"};if(await j3(e.eventId,e.guestCpf)>=2)return{success:!1,message:"Protocolo Negado: Limite de convites por CPF atingido."};const{data:n}=await Q.from("events").select("staff").eq("id",e.eventId).single(),i=(g=n==null?void 0:n.staff)==null?void 0:g.find(x=>x.id===e.promoterId),{count:r}=await Q.from("user_tickets").select("id",{count:"exact",head:!0}).eq("event_id",e.eventId).eq("promoter_id",e.promoterId).eq("source","complimentary");if(i&&i.vipQuota!==void 0&&(r||0)>=i.vipQuota)return{success:!1,message:"Sua cota cortesia para este evento est esgotada."};const o=btoa(`VIP-${e.promoterId}-${Date.now()}`).substring(0,14).toUpperCase(),{error:d}=await Q.from("user_tickets").insert([{user_id:e.userId||null,event_id:e.eventId,promoter_id:e.promoterId,guest_name:e.guestName.toUpperCase(),guest_cpf:e.guestCpf,source:"complimentary",status:"active",hash:o}]);return d?{success:!1,message:"Falha ao gerar protocolo cortesia."}:{success:!0,message:"Convite Cortesia Ativado com Sucesso."}}async function P5(e){var x,p;if(!Q)return{success:!1,message:"Erro de rede"};const{data:t}=await Q.from("events").select("staff, title").eq("id",e.eventId).single(),n=(x=t==null?void 0:t.staff)==null?void 0:x.find(_=>_.id===e.promoterId),{count:i}=await Q.from("user_tickets").select("id",{count:"exact",head:!0}).eq("event_id",e.eventId).eq("promoter_id",e.promoterId).eq("source","complimentary");if(n&&n.vipQuota!==void 0&&(i||0)>=n.vipQuota)return{success:!1,message:"Sua cota cortesia para este evento est esgotada."};const r=btoa(`VIP-${e.promoterId}-${Date.now()}`).substring(0,14).toUpperCase(),{error:o}=await Q.from("user_tickets").insert([{user_id:e.targetUserId,event_id:e.eventId,promoter_id:e.promoterId,guest_name:null,guest_cpf:null,source:"complimentary",status:"active",hash:r}]);if(o)return{success:!1,message:"Falha ao enviar convite."};const{data:d}=await Q.from("profiles").select("full_name").eq("id",e.promoterId).single(),g=((p=d==null?void 0:d.full_name)==null?void 0:p.split(" ")[0])||"Um Staff";return await Q.rpc("vanta_notify",{p_user_id:e.targetUserId,p_type:"event_invite",p_text:`Voc recebeu um VIP de ${g}`,p_member_id:e.promoterId,p_event_id:e.eventId,p_metadata:{eventId:e.eventId}}),{success:!0,message:"Convite enviado com sucesso para a carteira do membro."}}async function B3(e){if(!Q)return{success:!1,message:"Erro de conexo"};if(e.limit!==void 0&&((await P3(e.eventId))[e.variationId]||0)>=e.limit)return{success:!1,message:"Este lote acabou de esgotar."};const t=btoa(`${e.userId}-${e.eventId}-${Date.now()}`).substring(0,12).toUpperCase(),{data:n,error:i}=await Q.from("user_tickets").insert([{user_id:e.userId,event_id:e.eventId,variation_id:e.variationId,source:e.source,status:"active",hash:t,guest_name:null,guest_cpf:null}]).select().single();return i?(console.error("[VANTA TICKETS] Erro ao emitir ticket:",i),{success:!1,message:"Erro ao processar ticket."}):{success:!0,ticket:n}}async function j5(e,t){if(!Q)return{success:!1,message:"Erro de conexo."};const{data:n,error:i=null}=await Q.from("user_tickets").select("*").eq("hash",e.toUpperCase()).eq("event_id",t).single();return i||!n?{success:!1,message:"Convite invlido para este evento."}:n.status==="used"?{success:!1,message:"Este convite j foi utilizado."}:n.status==="cancelled"?{success:!1,message:"Este convite foi cancelado."}:n.status==="transfer_pending"?{success:!1,message:"Convite em processo de transferncia."}:{success:!0,message:"Acesso Liberado.",ticket:n}}async function B5(e){if(!Q)return!1;const{error:t}=await Q.from("user_tickets").update({status:"used",used_at:new Date().toISOString()}).eq("id",e);return!t}async function U5(e,t,n,i){if(!Q)return{success:!1,message:"Erro de conexo."};try{const r=`transfers/${t}_${Date.now()}.jpg`,{error:o}=await Q.storage.from("selfies").upload(r,i,{contentType:"image/jpeg"});if(o)throw o;const{data:{publicUrl:d}}=Q.storage.from("selfies").getPublicUrl(r),{error:g}=await Q.from("ticket_transfers").insert([{ticket_id:e,sender_id:t,receiver_id:n,security_selfie_url:d,status:"pending"}]);if(g)throw g;const{error:x}=await Q.from("user_tickets").update({status:"transfer_pending"}).eq("id",e);if(x)throw x;return await Q.rpc("vanta_notify",{p_user_id:n,p_type:"message",p_text:"Voc recebeu um presente de acesso (Gift Protocol).",p_member_id:t,p_event_id:null,p_metadata:{action_type:"gift_transfer"}}),{success:!0}}catch(r){return console.error("[GIFT PROTOCOL] Falha ao iniciar:",r),{success:!1,message:r.message||"Falha ao iniciar transferncia."}}}async function F5(e){if(!Q)return[];const{data:t,error:n}=await Q.from("ticket_transfers").select(`
      *,
      sender:profiles!sender_id(full_name, avatar_url),
      ticket:user_tickets(
        event:events(title, start_at, image_url)
      )
    `).eq("receiver_id",e).eq("status","pending");return n||!t?[]:t.map(i=>{var r,o,d,g,x,p,_,E;return{id:i.id,ticketId:i.ticket_id,senderId:i.sender_id,receiverId:i.receiver_id,status:i.status,securitySelfieUrl:i.security_selfie_url,createdAt:i.created_at,event:{title:(o=(r=i.ticket)==null?void 0:r.event)==null?void 0:o.title,date:new Date((g=(d=i.ticket)==null?void 0:d.event)==null?void 0:g.start_at).toLocaleDateString("pt-BR"),image:(p=(x=i.ticket)==null?void 0:x.event)==null?void 0:p.image_url},sender:{name:(_=i.sender)==null?void 0:_.full_name,avatar:(E=i.sender)==null?void 0:E.avatar_url}}})}async function z5(e,t,n){if(!Q)return{success:!1,message:"Erro de conexo."};try{const{data:i,error:r}=await Q.from("ticket_transfers").select("ticket_id, sender_id, receiver_id").eq("id",e).single();if(r||!i)throw new Error("Transferncia no encontrada.");if(i.receiver_id!==n)throw new Error("No autorizado.");if(t==="return")return await Q.from("ticket_transfers").update({status:"returned"}).eq("id",e),await Q.from("user_tickets").update({status:"active"}).eq("id",i.ticket_id),{success:!0,message:"Presente devolvido."};if(t==="accept"){const o=btoa(`${n}-${i.ticket_id}-${Date.now()}`).substring(0,12).toUpperCase();await Q.from("ticket_transfers").update({status:"accepted"}).eq("id",e);const{error:d}=await Q.from("user_tickets").update({user_id:n,hash:o,status:"active",source:"gift",guest_name:null,guest_cpf:null}).eq("id",i.ticket_id);if(d)throw d;return{success:!0,message:"Acesso aceito e adicionado  sua carteira."}}return{success:!1}}catch(i){return console.error("[GIFT PROTOCOL] Falha na resposta:",i),{success:!1,message:i.message}}}const V5=({eventId:e,onSuccess:t})=>{const[n,i]=V.useState(null),[r,o]=V.useState(!1),[d,g]=V.useState(!1),[x,p]=V.useState(null),_=V.useRef(null),E="vanta-scanner-region";V.useEffect(()=>(N(),()=>{O()}),[e]);const N=async()=>{var F;if(!Q)return;const{data:{user:B}}=await Q.auth.getUser();if(!B)return;const{data:j}=await Q.from("events").select("staff").eq("id",e).single();if(j&&j.staff){const Y=j.staff.find(ne=>ne.id===B.id),{data:W}=await Q.from("profiles").select("role").eq("id",B.id).single();["admin","master","vanta_master"].includes((F=W==null?void 0:W.role)==null?void 0:F.toLowerCase())||(Y==null?void 0:Y.status)==="CONFIRMED"?(p(!0),k()):p(!1)}},k=async()=>{try{const B=new M5(E);_.current=B,await B.start({facingMode:"environment"},{fps:10,qrbox:250},L,void 0),g(!0)}catch(B){console.error("[VANTA SCANNER] Erro:",B)}},O=async()=>{var B;(B=_.current)!=null&&B.isScanning&&await _.current.stop()},L=async B=>{r||!B.startsWith("VANTA_AUTH:")||P(B.split(":")[1])},P=async B=>{var j;o(!0);try{const F=await j5(B,e);if(!F.success||!F.ticket){H(!1,F.message);return}let Y=null,W=null;if(F.ticket.user_id){const{data:ne}=await Q.from("profiles").select("*").eq("id",F.ticket.user_id).single();Y=ne}if(F.ticket.source==="complimentary"&&F.ticket.promoter_id){const{data:ne}=await Q.from("profiles").select("full_name").eq("id",F.ticket.promoter_id).single();W=(j=ne==null?void 0:ne.full_name)==null?void 0:j.split(" ")[0]}await B5(F.ticket.id)&&(H(!0,"Acesso Autorizado",{name:F.ticket.guest_name||(Y==null?void 0:Y.full_name),image:(Y==null?void 0:Y.selfie_url)||(Y==null?void 0:Y.avatar_url),gender:Y==null?void 0:Y.gender,source:F.ticket.source,promoter:W}),t())}catch{H(!1,"Falha de rede.")}finally{o(!1)}},H=(B,j,F)=>{i({success:B,message:j,data:F}),B||setTimeout(()=>i(null),3e3)};return x===!1&&x!==null?u.jsxs("div",{className:"p-10 bg-zinc-950 border border-red-900/30 rounded-[3rem] text-center space-y-6 animate-in fade-in",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-red-600/10 border border-red-600/30 flex items-center justify-center mx-auto",children:u.jsx("span",{className:"text-2xl",children:""})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"text-white text-lg font-serif italic",children:"Operao Bloqueada"}),u.jsxs("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:["VOC FOI ESCALADO, MAS AINDA NO CONFIRMOU SUA PRESENA NESTA SESSO.",u.jsx("br",{}),"CONFIRME NA SUA CARTEIRA PARA LIBERAR O SCANNER."]})]})]}):u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{id:E,className:"w-full aspect-square bg-zinc-950 border border-white/5 rounded-[3rem] overflow-hidden relative shadow-2xl",children:[!d&&x!==!1&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-4",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"}),u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:"Ativando Lente de Elite..."})]}),n&&u.jsx("div",{className:`absolute inset-0 z-50 flex flex-col items-center justify-center p-6 animate-in zoom-in-95 ${n.success?"bg-emerald-600/95":"bg-red-600/95"} backdrop-blur-md`,children:n.success&&n.data?u.jsxs("div",{className:"flex flex-col items-center space-y-6 w-full text-center",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("h4",{className:"text-white text-3xl font-serif italic",children:"Acesso Liberado"}),n.data.source==="complimentary"&&u.jsxs("div",{className:"px-4 py-1.5 bg-[#d4af37] text-black rounded-full text-[8px] font-black uppercase tracking-[0.2em] shadow-xl inline-block mx-auto",children:["Cortesia Nominal  ",n.data.promoter||"Staff"]})]}),u.jsx("div",{className:"w-48 h-48 rounded-[2.5rem] border-4 border-white/20 overflow-hidden shadow-2xl bg-zinc-900",children:u.jsx(Kn,{src:n.data.image,gender:n.data.gender})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter leading-tight px-4",children:n.data.name}),u.jsx("p",{className:"text-white/60 text-[9px] font-black uppercase tracking-widest italic",children:n.data.source==="gift"?"Protocolo Transferido":"Titular da Conta"})]}),u.jsx("button",{onClick:()=>i(null),className:"w-full max-w-[200px] py-5 bg-white text-emerald-600 font-black rounded-full uppercase text-[11px] shadow-2xl active:scale-95 transition-all",children:"Confirmar"})]}):u.jsx("h4",{className:"text-white text-2xl font-serif italic text-center px-8",children:n.message})})]})})},U3=({events:e,currentUser:t,initialSelectedEventId:n})=>{const[i,r]=V.useState(null),[o,d]=V.useState("TIMELINE"),[g,x]=V.useState([]),p=s5(i,t);V.useEffect(()=>{if(n){const E=e.find(N=>N.id===n);E&&r(E)}},[n,e]),V.useEffect(()=>{(async()=>{const N=t.role.toLowerCase();if(["vanta_prod","produtor","vanta_socio","socio"].includes(N)){const k=await T3(t.id);x(k.map(O=>O.id))}})()},[t.id,t.role]),V.useEffect(()=>{if(i)if(Uc(i))d("REPORT");else{const E=["vanta_portaria","portaria"].includes(t.role.toLowerCase());d(E?"SCANNER":p.isPromoter?"SEARCH_LIST":"TIMELINE")}},[i==null?void 0:i.id,p.isPromoter,t.role]);const _=e.filter(E=>{const N=new Date().toISOString().split("T")[0];return E.startDate>=N?["admin","master","vanta_master"].includes(t.role.toLowerCase())?!0:["vanta_prod","produtor","vanta_socio","socio"].includes(t.role.toLowerCase())?g.includes(E.communityId):(E.staff||[]).some(P=>P.id===t.id):!1});return i?u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500 pb-32",children:[u.jsxs("header",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("button",{onClick:()=>r(null),className:"text-[8px] font-black text-[#d4af37] uppercase tracking-widest flex items-center gap-1 mb-2",children:[u.jsx(Ge.ArrowLeft,{className:"w-3 h-3"})," Alterar Sesso"]}),u.jsx("h2",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter leading-none",children:i.title}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-[10px] text-[#d4af37] font-black uppercase",children:p.now.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),u.jsx("div",{className:"w-1 h-1 rounded-full bg-zinc-800"}),u.jsxs("span",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest italic",children:[t.role.replace("VANTA_",""),"  Protocolo ",i.id.substring(0,8)]})]})]}),u.jsx("button",{onClick:p.loadGuests,disabled:p.isSyncing,className:`p-3 bg-zinc-950 border border-white/5 rounded-full text-[#d4af37] ${p.isSyncing?"animate-spin":""}`,children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:u.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})})]}),u.jsx("div",{className:"flex gap-6 border-b border-white/5 overflow-x-auto no-scrollbar",children:[{id:"TIMELINE",label:"Timeline",hidden:p.isPromoter},{id:"SCANNER",label:"Scanner QR",hidden:!p.canCheckIn},{id:"SEARCH_LIST",label:"Lista de Nomes"},{id:"REPORT",label:"Balano Final"}].filter(E=>!E.hidden).map(E=>u.jsxs("button",{onClick:()=>d(E.id),className:`pb-4 text-[9px] font-black uppercase tracking-[0.3em] transition-all relative shrink-0 ${o===E.id?"text-[#d4af37]":"text-zinc-700"}`,children:[E.label,o===E.id&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]},E.id))}),o==="TIMELINE"&&u.jsx(r5,{filteredTimeline:p.filteredTimeline,genderFilter:p.genderFilter,setGenderFilter:p.setGenderFilter,now:p.now}),o==="SCANNER"&&u.jsx(V5,{eventId:i.id,onSuccess:()=>{p.loadGuests()}}),o==="SEARCH_LIST"&&u.jsx(a5,{searchQuery:p.searchQuery,setSearchQuery:p.setSearchQuery,filteredGuests:p.filteredGuests,isPromoter:p.isPromoter,isSocio:p.isSocio,canCheckIn:p.canCheckIn,handleCheckIn:p.handleCheckIn,bulkText:p.bulkText,setBulkText:p.setBulkText,selectedRuleId:p.selectedRuleId,setSelectedRuleId:p.setSelectedRuleId,handleBulkAddGuests:p.handleBulkAddGuests,availableRules:i.guestListRules||[]}),o==="REPORT"&&u.jsx(o5,{reportData:p.reportData,isPromoter:p.isPromoter,currentUser:t}),u.jsx("div",{className:"pt-10 space-y-4",children:u.jsxs("p",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-[0.4em] text-center italic leading-relaxed",children:["VANTA_SECURE: DADOS ISOLADOS POR CONTEXTO E PRIVACIDADE.",u.jsx("br",{}),"ESTA SESSO EST SENDO AUDITADA EM TEMPO REAL."]})})]}):u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"GESTO DE ACESSOS"}),u.jsx("p",{className:"text-[20px] font-serif italic text-white tracking-tighter",children:"Selecione a Sesso"})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:_.length>0?_.map(E=>u.jsxs("button",{onClick:()=>r(E),className:"w-full p-6 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] flex items-center gap-5 active:scale-95 transition-all text-left group",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shrink-0 border border-white/10 group-hover:border-[#d4af37]/40 transition-colors",children:u.jsx("img",{src:E.image,className:"w-full h-full object-cover",alt:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"text-white text-[11px] font-black uppercase tracking-widest truncate",children:E.title}),Uc(E)&&u.jsx("span",{className:"text-[6px] px-2 py-0.5 bg-zinc-800 text-zinc-500 rounded-full font-black uppercase",children:"Encerrado"})]}),u.jsxs("p",{className:"text-zinc-500 text-[8px] font-black uppercase tracking-widest mt-1",children:[E.startDate,"  ",E.location]})]}),u.jsx(Ge.ArrowLeft,{className:"w-4 h-4 text-[#d4af37] rotate-180"})]},E.id)):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] bg-zinc-950/20 opacity-30",children:u.jsx("p",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:["admin","master","vanta_master"].includes(t.role.toLowerCase())?"Nenhuma sesso disponvel para check-in.":"Nenhum protocolo ativo vinculado  sua identidade."})})})]})};async function G5(e){if(!Q)return{success:!1,count:0,error:"Supabase no configurado"};try{const{data:t,error:n}=await Q.from("profiles").select("id").overlaps("curated_level",e.levels).eq("city",e.city);if(n)throw n;return!t||t.length===0?{success:!0,count:0}:(await Promise.all(t.map(i=>Q.rpc("vanta_notify",{p_user_id:i.id,p_type:e.actionType==="invite"?"event_invite":"message",p_text:e.message,p_member_id:e.senderId,p_event_id:e.eventId,p_metadata:{action_type:e.actionType,eventId:e.eventId}}))),{success:!0,count:t.length})}catch(t){return console.error("[VANTA BROADCASTER] Falha no disparo massivo:",t),{success:!1,count:0,error:t.message}}}const H5=({events:e,currentUser:t})=>{const[n,i]=V.useState([]),[r,o]=V.useState(""),[d,g]=V.useState(""),[x,p]=V.useState("notification"),[_,E]=V.useState(""),[N,k]=V.useState(!1),[O,L]=V.useState(null),P=V.useMemo(()=>[...new Set(e.map(F=>F.city))].sort(),[e]),H=Object.values(i3),B=F=>{i(Y=>Y.includes(F)?Y.filter(W=>W!==F):[...Y,F])},j=async()=>{if(!r||n.length===0||!_||x==="invite"&&!d){Fe.toast("warning","Dados Incompletos","Preencha segmentao e mensagem.");return}const F=x==="invite"?"Convite VIP":"Comunicado";Fe.confirm({title:"Disparo em Massa",message:`Enviar ${F} para membros ${n.join(", ")} em ${r}?`,confirmLabel:"Disparar Protocolo",onConfirm:async()=>{k(!0);const Y=await G5({levels:n,city:r,eventId:d,actionType:x,message:_,senderId:t.id});k(!1),L(Y)}})};return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-32",children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"COMANDOS DE ELITE"}),u.jsx("p",{className:"text-[24px] font-serif italic text-white tracking-tighter uppercase",children:"Broadcaster Master"})]}),u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-10 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-[#d4af37]/5 rounded-full -mr-20 -mt-20 blur-3xl"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Segmentar por Curadoria"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:H.map(F=>u.jsx("button",{onClick:()=>B(F),className:`py-4 px-2 rounded-2xl text-[8px] font-black uppercase tracking-widest border transition-all ${n.includes(F)?"bg-white text-black border-white shadow-xl":"bg-zinc-900/50 text-zinc-500 border-white/5"}`,children:F},F))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Cidade Alvo"}),u.jsxs("select",{value:r,onChange:F=>o(F.target.value),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20",children:[u.jsx("option",{value:"",children:"SELECIONE A CIDADE"}),P.map(F=>u.jsx("option",{value:F,children:F},F))]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Vincular Evento"}),u.jsxs("select",{value:d,onChange:F=>g(F.target.value),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-white/20",children:[u.jsx("option",{value:"",children:"SELECIONE O EVENTO"}),e.filter(F=>!r||F.city===r).map(F=>u.jsx("option",{value:F.id,children:F.title},F.id))]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Protocolo de Gatilho"}),u.jsx("div",{className:"flex bg-zinc-900 rounded-full p-1 border border-white/5",children:[{id:"notification",label:"COMUNICADO SIMPLES",icon:""},{id:"invite",label:"CONVITE VIP REAL",icon:""}].map(F=>u.jsxs("button",{onClick:()=>p(F.id),className:`flex-1 py-4 text-[8px] font-black uppercase tracking-widest rounded-full transition-all flex items-center justify-center gap-2 ${x===F.id?"bg-white text-black shadow-lg":"text-zinc-500"}`,children:[u.jsx("span",{children:F.icon}),F.label]},F.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Contedo do Disparo"}),u.jsx("textarea",{value:_,onChange:F=>E(F.target.value),placeholder:x==="invite"?"EX: VOC FOI SELECIONADA PARA NOSSA NOITE EXCLUSIVA...":"EX: O BOSQUE BAR ABRE EM 30 MINUTOS...",className:"w-full bg-zinc-900 border border-white/5 rounded-3xl p-6 text-[11px] text-white outline-none focus:border-white/20 h-32 resize-none uppercase leading-relaxed"})]}),u.jsxs("div",{className:"p-6 bg-black/40 border border-white/5 rounded-3xl text-center space-y-2",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-[0.3em]",children:"CONSOLE DE IMPACTO PREVISTO"}),u.jsx("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-widest",children:n.length>0&&r?`ESTE COMANDO SER DISPARADO PARA ${n.length} CATEGORIAS EM ${r.toUpperCase()}`:"CONFIGURE OS FILTROS PARA CALCULAR O IMPACTO"})]}),u.jsx("button",{onClick:j,disabled:N,className:"w-full py-6 bg-white text-black text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all disabled:opacity-30",children:N?"DISPARANDO PROTOCOLO...":"EXECUTAR BROADCAST"})]}),O&&u.jsxs("div",{className:"p-8 bg-emerald-500/10 border border-emerald-500/20 rounded-[2.5rem] flex items-center gap-6 animate-in zoom-in-95 duration-500",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center text-black",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:u.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"Broadcast Concludo"}),u.jsxs("p",{className:"text-[8px] text-emerald-500/80 font-black uppercase tracking-widest mt-1",children:["Impacto: ",O.count," membros notificados."]})]}),u.jsx("button",{onClick:()=>L(null),className:"text-[8px] font-black text-zinc-500 uppercase tracking-widest",children:"Limpar"})]})]})},q5=()=>{const[e,t]=V.useState([]),[n,i]=V.useState(!1),[r,o]=V.useState({sdk:"idle",auth:"idle",db:"idle",storage:"idle",policies:"idle",triggers:"idle"}),d=(p,_="info")=>{t(E=>[{timestamp:new Date().toLocaleTimeString(),msg:p,type:_},...E])},g=async()=>{var _;i(!0),t([]),o({sdk:"loading",auth:"loading",db:"loading",storage:"loading",policies:"loading",triggers:"loading"}),d("VANTA_PROTOCOL: Iniciando Diagnstico de Emergncia & Teste de Estresse...","warn");try{if(d("Validando chaves de acesso injetadas..."),!Q)throw new Error("Cliente Supabase no instanciado.");o(E=>({...E,sdk:"success"})),d("SDK Operacional. Conexo fsica estabelecida.","success")}catch(E){o(N=>({...N,sdk:"error"})),d(`ERRO CRTICO: ${E.message}`,"error"),i(!1);return}let p=null;try{d("Escaneando Gateway de Autenticao...");const{data:E,error:N}=await Q.auth.getSession();if(N)throw N;o(k=>({...k,auth:"success"})),d("Gateway Auth alcanvel.","success"),(_=E==null?void 0:E.session)!=null&&_.user?(p=E.session.user,d(`Sesso detectada: ${p.email} (${p.id})`,"info")):d("Aviso: Nenhuma sesso ativa no browser.","warn")}catch(E){o(N=>({...N,auth:"error"})),d(`Falha no Gateway: ${E.message}`,"error")}try{d("Auditando persistncia (Profiles Table)...");const{error:E,status:N}=await Q.from("profiles").select("id").limit(1);if(E)if(E.code==="PGRST204")d("Tabela OK, mas base de dados vazia.","success");else throw E.code==="42P01"?(d("ERRO: Tabela 'profiles' no encontrada.","error"),d("RESOLUO: Cole o contedo de 'schema.sql' no SQL Editor do Supabase.","warn"),new Error("Missing Tables")):E;else d(`Conexo com Banco OK (Sinal: ${N})`,"success");o(k=>({...k,db:"success"}))}catch(E){o(N=>({...N,db:"error"})),d(`Falha de Sincronizao: ${E.message}`,"error")}try{d("Verificando Clusters de Mdia (Buckets Elite)...");const{data:E,error:N}=await Q.storage.listBuckets();if(N)throw N;const O=["selfies","profiles","event_images"].filter(L=>!E.some(P=>P.name===L));if(O.length>0)throw d(`Buckets ausentes: ${O.join(", ")}`,"error"),d("Ao: Execute o script de Inicializao de Buckets no schema.sql","warn"),new Error("Missing Storage");d("Clusters de Storage verificados com sucesso.","success"),o(L=>({...L,storage:"success"}))}catch(E){o(N=>({...N,storage:"error"})),d(`Erro de Storage: ${E.message}`,"error")}if(p)try{d("VANTA_AUDIT: Testando Isolamento de Pastas (Stress Test)...","audit");const E=new Blob(["test"],{type:"text/plain"}),{error:N}=await Q.storage.from("profiles").upload("SISTEMA_AUDIT/malicious.txt",E);N?d("GATILHO DE SEGURANA OK: Tentativa de invaso de pasta bloqueada pelo banco.","success"):(d("RISCO DETECTADO: O banco permitiu gravao fora do seu escopo de UID.","error"),d("CORREO: Verifique o TRIGGER 'on_avatar_upload' no Postgres.","warn"))}catch{d("Falha ao executar simulador de ataque de path.")}if(p)try{d("VANTA_AUDIT: Verificando Automao de Timestamp (Audit Trail)...","audit");const{data:E}=await Q.from("profiles").select("updated_at").eq("id",p.id).single();await Q.from("profiles").update({updated_at:new Date().toISOString()}).eq("id",p.id);const{data:N}=await Q.from("profiles").select("updated_at").eq("id",p.id).single();E&&N&&E.updated_at!==N.updated_at?(d("AUTOMAO OK: Carimbo de tempo gerenciado nativamente pelo servidor.","success"),o(k=>({...k,triggers:"success"}))):(d("AVISO: Campo updated_at no sofreu alterao atmica.","warn"),o(k=>({...k,triggers:"error"})))}catch{d("Falha no teste de gatilho temporal.")}try{d("Verificando Blindagem Social RLS (Mensagens)...");const{error:E}=await Q.from("messages").select("*").limit(1);E&&E.code==="42501"?d("SEGURANA ATIVA: Acesso a mensagens restrito por contexto.","success"):d("RLS Validado: Fluxo social aberto para auditoria local.","info"),o(N=>({...N,policies:"success"}))}catch{o(N=>({...N,policies:"error"}))}i(!1),d("DIAGNSTICO FINALIZADO. INFRAESTRUTURA ANALISADA COM SUCESSO.","info")},x=p=>p==="loading"?"bg-amber-500 animate-pulse":p==="success"?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.7)]":p==="error"?"bg-red-600 animate-bounce shadow-[0_0_15px_rgba(220,38,38,0.7)]":"bg-zinc-800";return u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-32",children:[u.jsxs("div",{className:"p-8 bg-zinc-950 border border-red-900/20 rounded-[3rem] space-y-8 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-600/40 to-transparent"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-red-600 italic",children:"SECURITY STRESS TEST"}),u.jsx("p",{className:"text-2xl font-serif italic text-white tracking-tighter uppercase",children:"Diagnstico de Blindagem"})]}),u.jsx("button",{onClick:g,disabled:n,className:`px-8 py-4 ${n?"bg-zinc-900 text-zinc-600":"bg-white text-black"} text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all`,children:n?"AUDITANDO...":"EXECUTAR VARREDURA"})]}),u.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:[{id:"sdk",label:"SDK",status:r.sdk},{id:"auth",label:"AUTH",status:r.auth},{id:"db",label:"BANCO",status:r.db},{id:"storage",label:"MDIA",status:r.storage},{id:"triggers",label:"GATILHOS",status:r.triggers},{id:"policies",label:"SAFE",status:r.policies}].map(p=>u.jsxs("div",{className:"p-4 bg-black border border-white/5 rounded-3xl flex flex-col items-center gap-3",children:[u.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${x(p.status)}`}),u.jsx("span",{className:"text-[6px] font-black uppercase tracking-widest text-zinc-600 text-center",children:p.label})]},p.id))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-[8px] text-zinc-700 font-black uppercase tracking-widest ml-6 italic",children:"Console Tcnico de Auditoria Profunda"}),u.jsx("div",{className:"bg-black border border-white/5 rounded-[2.5rem] p-8 h-96 overflow-y-auto no-scrollbar font-mono text-[10px] flex flex-col gap-3 shadow-inner",children:e.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-10 gap-4",children:[u.jsx("div",{className:"w-12 h-12 border-2 border-dashed border-zinc-500 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xl",children:"!"})}),u.jsx("p",{className:"uppercase tracking-[0.4em] text-xs",children:"AGUARDANDO COMANDO DE VARREDURA ELITE"})]}):e.map((p,_)=>u.jsxs("div",{className:"flex gap-4 border-b border-white/5 pb-2 last:border-0 animate-in slide-in-from-left duration-300",children:[u.jsxs("span",{className:"text-zinc-800 shrink-0",children:["[",p.timestamp,"]"]}),u.jsxs("span",{className:`
                ${p.type==="error"?"text-red-500 font-black":""}
                ${p.type==="success"?"text-emerald-500":""}
                ${p.type==="warn"?"text-[#d4af37]":""}
                ${p.type==="audit"?"text-purple-400 font-bold italic":""}
                ${p.type==="info"?"text-zinc-500":""}
              `,children:[p.type==="audit"?" ":"",p.msg]})]},_))})]}),u.jsx("div",{className:"p-8 bg-zinc-900/20 border border-white/5 rounded-[2.5rem] text-center",children:u.jsxs("p",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-[0.4em] leading-loose italic",children:["SISTEMA DE AUDITORIA VANTA ELITE TUNING",u.jsx("br",{}),"VALIDAO FSICA DE SEGURANA E PERFORMANCE."]})})]})};async function Y5(e){if(!Q)return[];let t=Q.from("incidence_reports").select(`
      *,
      subject:profiles!subject_id(full_name, avatar_url, instagram_handle),
      reporter:profiles!reporter_id(full_name)
    `).order("created_at",{ascending:!1});e&&e.length>0&&(t=t.in("status",e));const{data:n,error:i}=await t;return i?(console.error("[VANTA ETHICS] Erro ao listar chamados:",i),[]):(n||[]).map(r=>{var o;return{id:r.id,communityId:r.community_id,reporterId:r.reporter_id,subjectId:r.subject_id,subjectName:(o=r.subject)==null?void 0:o.full_name,description:r.description,status:r.status,finalVerdict:r.final_verdict,votingDeadline:r.voting_deadline,votedRoles:r.voter_roles,createdAt:r.created_at,closedAt:r.closed_at,subject:r.subject,reporter:r.reporter}})}async function X5(e){if(!Q)return null;const{data:t,error:n}=await Q.from("incidence_reports").insert([{community_id:e.communityId,reporter_id:e.reporterId,subject_id:e.subjectId,description:e.description,status:"open"}]).select().single();return n?(console.error("[VANTA ETHICS] Erro ao criar chamado:",n),null):t}async function W5(e,t,n){if(!Q)return null;const i=`${e}/${Date.now()}.jpg`,{error:r}=await Q.storage.from("incidence-proofs").upload(i,t,{contentType:"image/jpeg"});if(r)throw r;const{data:{publicUrl:o}}=Q.storage.from("incidence-proofs").getPublicUrl(i);return await Q.from("incidence_proofs").insert([{report_id:e,file_url:o,file_type:n}]),o}async function K5(e,t,n=24){if(!Q)return!1;const i=new Date;i.setHours(i.getHours()+n);const{error:r}=await Q.from("incidence_reports").update({status:"voting",voter_roles:t,voting_deadline:i.toISOString()}).eq("id",e);return!r}async function $5(e){if(!Q)return!1;const{error:t}=await Q.from("council_votes").insert([{report_id:e.reportId,voter_id:e.voterId,choice:e.choice,weight:e.weight||1}]);if(t){if(t.code==="23505")throw new Error("Voto j registrado para este perfil.");return console.error("[VANTA ETHICS] Erro ao votar:",t),!1}return!0}async function J5(e){if(!Q)return null;try{const{data:t}=await Q.from("council_votes").select("choice, weight").eq("report_id",e);let n=$i.ABSOLVICAO;if(t&&t.length>0){const r={[$i.ADVERTENCIA]:0,[$i.SUSPENSAO]:0,[$i.BANIMENTO]:0,[$i.ABSOLVICAO]:0};t.forEach(o=>{o.choice in r&&(r[o.choice]+=o.weight||1)}),n=Object.entries(r).reduce((o,d)=>o[1]>d[1]?o:d)[0]}const{data:i}=await Q.from("incidence_reports").select("subject_id, description").eq("id",e).single();return i&&((n===$i.SUSPENSAO||n===$i.BANIMENTO)&&await Q5(i.subject_id,`Veredito: ${n.toUpperCase()}. Motivo: ${i.description}`),await Q.from("incidence_reports").update({status:"closed",final_verdict:n,closed_at:new Date().toISOString()}).eq("id",e)),n}catch(t){return console.error("[VANTA ETHICS] Falha ao encerrar chamado:",t),null}}async function Z5(e){var r;if(!Q)return null;const{data:t,error:n}=await Q.from("incidence_reports").select(`
      *, 
      subject:profiles!subject_id(full_name, avatar_url, instagram_handle), 
      reporter:profiles!reporter_id(full_name)
    `).eq("id",e).single();if(n)return console.error("[VANTA ETHICS] Erro ao carregar dossi:",n),null;const{data:i}=await Q.from("incidence_proofs").select("*").eq("report_id",e);return{report:{...t,subjectName:(r=t.subject)==null?void 0:r.full_name},proofs:(i||[]).map(o=>({id:o.id,reportId:o.report_id,fileUrl:o.file_url,fileType:o.file_type,createdAt:o.created_at})),error:n}}async function Q5(e,t){if(!Q)return!1;const{error:n}=await Q.from("profiles").update({is_globally_restricted:!0,restriction_notes:t}).eq("id",e);return!n}const e8=({currentUser:e,communityId:t,onCancel:n,onSuccess:i})=>{const[r,o]=V.useState(null),[d,g]=V.useState(""),[x,p]=V.useState([]),[_,E]=V.useState(["SOCIO"]),[N,k]=V.useState(!1),O=V.useRef(null),L=H=>{var j;const B=(j=H.target.files)==null?void 0:j[0];if(B){const F=URL.createObjectURL(B);p(Y=>[...Y,{blob:B,url:F}])}},P=async()=>{if(!r||!d)return alert("Identifique o membro e descreva o ocorrido.");Fe.confirm({title:"Abertura de Dossi",message:"Protocolar dossi no conselho? Esta ao iniciar uma investigao oficial.",confirmLabel:"Confirmar Protocolo",onConfirm:async()=>{k(!0);try{const H=await X5({communityId:t,reporterId:e.id,subjectId:r.id,description:d});if(H){for(const B of x)await W5(H.id,B.blob,"image");await K5(H.id,_),i()}}catch(H){console.error(H),Fe.toast("error","Falha","No foi possvel protocolar o dossi.")}finally{k(!1)}}})};return u.jsx("div",{className:"space-y-8 animate-in slide-in-from-right duration-500",children:u.jsxs("div",{className:"p-8 bg-zinc-950 border border-red-900/20 rounded-[3rem] space-y-8 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-600/5 rounded-full -mr-16 -mt-16 blur-3xl"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Identificar Membro do Incidente"}),u.jsx(eu,{onSelect:o,placeholder:"BUSCAR MEMBRO..."}),r&&u.jsxs("div",{className:"flex items-center gap-4 p-4 bg-red-600/5 border border-red-600/20 rounded-2xl animate-in fade-in",children:[u.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-white/10",children:u.jsx("img",{src:r.avatar_url||"",className:"w-full h-full object-cover",alt:""})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-[10px] text-white font-black uppercase",children:r.full_name}),u.jsxs("p",{className:"text-[7px] text-zinc-500 font-black uppercase",children:["@",r.instagram_handle]})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Relato do Ocorrido"}),u.jsx("textarea",{value:d,onChange:H=>g(H.target.value),placeholder:"DESCREVA O COMPORTAMENTO INADEQUADO COM DETALHES...",className:"w-full bg-zinc-900 border border-white/5 rounded-3xl p-6 text-[11px] text-white outline-none focus:border-red-600/30 h-32 resize-none uppercase leading-relaxed"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Anexar Provas (Dossi)"}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:[u.jsxs("button",{onClick:()=>{var H;return(H=O.current)==null?void 0:H.click()},className:"w-20 h-20 bg-zinc-900 border border-dashed border-white/10 rounded-2xl flex items-center justify-center shrink-0 hover:border-red-600/40 transition-all",children:[u.jsx(Ge.Plus,{className:"w-6 h-6 text-zinc-600"}),u.jsx("input",{ref:O,type:"file",className:"hidden",onChange:L,accept:"image/*"})]}),x.map((H,B)=>u.jsxs("div",{className:"w-20 h-20 rounded-2xl overflow-hidden border border-white/5 shrink-0 relative",children:[u.jsx("img",{src:H.url,className:"w-full h-full object-cover",alt:""}),u.jsx("button",{onClick:()=>p(j=>j.filter((F,Y)=>Y!==B)),className:"absolute top-1 right-1 bg-black/60 rounded-full p-1",children:u.jsx(Ge.Trash,{className:"w-3 h-3 text-red-500"})})]},B))]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Convocar Conselho"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:["SOCIO","PROMOTOR","PORTARIA"].map(H=>u.jsxs("button",{onClick:()=>E(B=>B.includes(H)?B.filter(j=>j!==H):[...B,H]),className:`py-4 px-2 rounded-2xl text-[8px] font-black uppercase tracking-widest border transition-all ${_.includes(H)?"bg-white text-black border-white shadow-lg":"bg-zinc-900/50 text-zinc-500 border-white/5"}`,children:[H,"S"]},H))})]}),u.jsxs("div",{className:"pt-6 space-y-3",children:[u.jsx("button",{onClick:P,disabled:N,className:"w-full py-6 bg-red-600 text-white text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all disabled:opacity-30",children:N?"Protocolando Incidncia...":"Ativar Tribunal de tica"}),u.jsx("button",{onClick:n,className:"w-full py-2 text-zinc-600 text-[8px] font-black uppercase tracking-widest",children:"Abortar Protocolo"})]})]})})},t8=({reportId:e,currentUser:t,onVoteSuccess:n})=>{var E,N;const[i,r]=V.useState(null),[o,d]=V.useState(!1),[g,x]=V.useState(null);V.useEffect(()=>{p()},[e]);const p=async()=>{const k=await Z5(e);k!=null&&k.report&&r({report:k.report,proofs:k.proofs||[]})},_=async()=>{g&&Fe.confirm({title:"Deliberao",message:"Confirmar voto? Sua deciso ser registrada anonimamente.",confirmLabel:"Protocolar Voto",onConfirm:async()=>{d(!0);try{const k=t.role.toUpperCase().includes("SOCIO")?3:1;await $5({reportId:e,voterId:t.id,choice:g,weight:k})&&(["admin","master","vanta_master"].includes(t.role.toLowerCase())?Fe.confirm({title:"Soberania Master",message:"Voc possui autoridade global. Deseja encerrar este caso e aplicar o veredito imediatamente?",confirmLabel:"Encerrar e Aplicar",onConfirm:async()=>{await J5(e),Fe.toast("success","Caso Encerrado","A sentena foi aplicada ao perfil."),n()},onCancel:()=>{n()}}):(Fe.toast("success","Voto Registrado","Sua deliberao foi protocolada com sucesso."),n()))}catch(k){Fe.toast("error","Falha no Voto",k.message||"Erro ao registrar.")}finally{d(!1)}}})};return i?u.jsx("div",{className:"space-y-10 animate-in zoom-in-95 duration-500",children:u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-8 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-600/40 to-transparent"}),u.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"CONFIDENCIALIDADE NVEL 5"}),u.jsx("h2",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Sala de Deliberao"}),u.jsxs("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:["Analise as provas abaixo e emita seu veredito annimo.",u.jsx("br",{}),"O peso do seu voto  baseado em seu cargo na unidade."]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-6 bg-zinc-900/60 border border-white/5 rounded-3xl space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-white/10",children:u.jsx("img",{src:(E=i.report.subject)==null?void 0:E.avatar_url,className:"w-full h-full object-cover",alt:""})}),u.jsx("span",{className:"text-[10px] text-white font-black uppercase",children:(N=i.report.subject)==null?void 0:N.full_name})]}),u.jsxs("p",{className:"text-[11px] text-zinc-400 italic leading-relaxed",children:['"',i.report.description,'"']})]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar py-2",children:i.proofs.length>0?i.proofs.map((k,O)=>u.jsx("div",{className:"w-32 aspect-square rounded-2xl overflow-hidden border border-white/10 shrink-0",children:u.jsx("img",{src:k.fileUrl,className:"w-full h-full object-cover",alt:""})},O)):u.jsx("div",{className:"w-full py-10 text-center border border-dashed border-white/5 rounded-2xl opacity-20",children:u.jsx("p",{className:"text-[8px] font-black uppercase",children:"Sem provas visuais anexadas."})})})]}),u.jsxs("div",{className:"space-y-4 border-t border-white/5 pt-8",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4 block text-center",children:"Seu Veredito"}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:$i.ABSOLVICAO,label:"Absolvio",color:"bg-emerald-500/10 border-emerald-500/30 text-emerald-500"},{key:$i.ADVERTENCIA,label:"Advertncia",color:"bg-yellow-500/10 border-yellow-500/30 text-yellow-500"},{key:$i.SUSPENSAO,label:"Suspenso",color:"bg-orange-500/10 border-orange-500/30 text-orange-500"},{key:$i.BANIMENTO,label:"Banimento",color:"bg-red-600 text-white"}].map(k=>u.jsx("button",{onClick:()=>x(k.key),className:`py-5 px-2 rounded-[2rem] text-[10px] font-black uppercase tracking-widest border transition-all ${g===k.key?`${k.color} shadow-lg scale-105`:"bg-zinc-900/50 text-zinc-600 border-white/5"}`,children:k.label},k.key))})]}),u.jsx("button",{onClick:_,disabled:o||!g,className:"w-full py-6 bg-white text-black text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all disabled:opacity-30",children:o?"Registrando Voto...":"Confirmar Veredito"})]})}):u.jsx("div",{className:"py-20 text-center animate-pulse",children:"Sincronizando Dossi..."})},n8=({currentUser:e,communityId:t,communities:n=[]})=>{var j;const[i,r]=V.useState(t||null),[o,d]=V.useState(null),[g,x]=V.useState(t?"LIST":"UNIT_SELECTOR"),[p,_]=V.useState([]),[E,N]=V.useState(!1),k=["admin","master","vanta_master","vanta_prod","produtor"].includes(e.role.toLowerCase());V.useEffect(()=>{const F=document.querySelector("main");F&&(F.scrollTop=0)},[g]),V.useEffect(()=>{i&&O()},[i,g]);const O=async()=>{if(!i)return;N(!0);const F=g==="HISTORY"?[ol.CLOSED]:[ol.OPEN,ol.VOTING],Y=await Y5(F);_(Y.filter(W=>W.communityId===i)),N(!1)},L=F=>{g!=="HISTORY"&&(d(F),x("VOTE"))},P=F=>{r(F),x("LIST")},H=F=>{if(F.status===ol.CLOSED){const Y=F.finalVerdict||"ABSOLVICAO",W={[$i.BANIMENTO]:"text-white bg-red-600",[$i.SUSPENSAO]:"text-black bg-orange-500",[$i.ADVERTENCIA]:"text-black bg-yellow-400",[$i.ABSOLVICAO]:"text-white bg-emerald-600"};return{label:`SENTENA: ${Y.toUpperCase()}`,color:W[Y]||"text-zinc-500 bg-black"}}switch(F.status){case ol.OPEN:return{label:"AGUARDANDO CONSELHO",color:"text-white bg-zinc-800"};case ol.VOTING:return{label:"DELIBERAO ATIVA",color:"text-black bg-[#d4af37]"};default:return{label:"EM ANLISE",color:"text-zinc-500 bg-black"}}},B=((j=n.find(F=>F.id===i))==null?void 0:j.name)||"Unidade";return g==="UNIT_SELECTOR"?u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-32",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-red-600 italic",children:"JURISDIO OBRIGATRIA"}),u.jsx("p",{className:"text-2xl font-serif italic text-white tracking-tighter uppercase",children:"Tribunal de tica"}),u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed mt-2",children:"Selecione a Unidade onde o incidente ocorreu para acessar o dossi local."})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.length>0?n.map(F=>{var Y;return u.jsxs("button",{onClick:()=>P(F.id),className:"w-full p-6 bg-zinc-950 border border-white/5 rounded-[2.5rem] flex items-center gap-6 text-left hover:border-red-600/30 transition-all active:scale-[0.98] group",children:[u.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden shrink-0 border border-white/10 p-1 bg-black",children:u.jsx("img",{src:F.logo_url,className:"w-full h-full object-cover rounded-xl",alt:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:F.name}),u.jsxs("p",{className:"text-zinc-600 text-[8px] font-black uppercase tracking-widest mt-1 truncate",children:["Local: ",(Y=F.address)==null?void 0:Y.split(",")[0]]})]}),u.jsx(Ge.ArrowLeft,{className:"w-4 h-4 text-red-600 rotate-180"})]},F.id)}):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] opacity-30",children:u.jsx("p",{className:"text-[8px] font-black uppercase",children:"Nenhuma unidade disponvel para auditoria."})})})]}):u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700 pb-32",children:[u.jsxs("header",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("button",{onClick:()=>x("UNIT_SELECTOR"),className:"text-[8px] font-black text-zinc-500 uppercase tracking-widest flex items-center gap-1 mb-1",children:[u.jsx(Ge.ArrowLeft,{className:"w-3 h-3"})," Alterar Jurisdio"]}),u.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-red-600 italic",children:["WAR ROOM: ",B]}),u.jsx("p",{className:"text-2xl font-serif italic text-white tracking-tighter uppercase",children:"Justia Interna"})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[k&&(g==="LIST"||g==="HISTORY")&&u.jsx("button",{onClick:()=>x("CREATE"),className:"px-6 py-3 bg-red-600 text-white text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Abrir Dossi"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>x("LIST"),className:`px-4 py-2 rounded-full text-[7px] font-black uppercase transition-all ${g==="LIST"?"bg-white text-black":"bg-zinc-900 text-zinc-500 border border-white/5"}`,children:"Ativos"}),u.jsx("button",{onClick:()=>x("HISTORY"),className:`px-4 py-2 rounded-full text-[7px] font-black uppercase transition-all ${g==="HISTORY"?"bg-white text-black":"bg-zinc-900 text-zinc-500 border border-white/5"}`,children:"Histrico"})]})]})]}),(g==="LIST"||g==="HISTORY")&&u.jsxs("div",{className:"space-y-6",children:[E?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-red-600 rounded-full animate-spin"})}):p.length>0?u.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.map(F=>{var W,te,ne;const Y=H(F);return u.jsxs("button",{disabled:g==="HISTORY",onClick:()=>L(F.id),className:`w-full p-6 bg-zinc-950 border border-white/5 rounded-[2.5rem] flex items-center gap-6 text-left transition-all group ${g==="HISTORY"?"opacity-80 grayscale-[0.5]":"hover:border-red-600/30 active:scale-[0.98]"}`,children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shrink-0 border border-white/10 group-hover:border-red-600/40 transition-all",children:u.jsx("img",{src:(W=F.subject)==null?void 0:W.avatar_url,className:"w-full h-full object-cover",alt:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-center gap-2 mb-1",children:u.jsx("span",{className:`px-2 py-0.5 rounded-full text-[6px] font-black uppercase tracking-widest ${Y.color}`,children:Y.label})}),u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:F.subjectName}),u.jsxs("p",{className:"text-zinc-600 text-[9px] font-black uppercase tracking-widest mt-1 truncate italic",children:["Relator: ",(ne=(te=F.reporter)==null?void 0:te.full_name)==null?void 0:ne.split(" ")[0]]})]}),g==="LIST"&&u.jsx(Ge.ArrowLeft,{className:"w-4 h-4 text-red-600 rotate-180 opacity-0 group-hover:opacity-100 transition-all"})]},F.id)})}):u.jsxs("div",{className:"p-8 bg-zinc-900/40 border border-white/5 rounded-[3rem] text-center space-y-4 opacity-50",children:[u.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-full flex items-center justify-center mx-auto",children:u.jsx("span",{className:"text-xl",children:""})}),u.jsxs("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:["Nenhum protocolo ",g==="HISTORY"?"no histrico":"ativo"," nesta unidade.",u.jsx("br",{}),"O ecossistema opera em harmonia."]})]}),u.jsx("div",{className:"pt-10 border-t border-white/5",children:u.jsx("button",{onClick:O,className:"text-[8px] text-zinc-700 font-black uppercase tracking-[0.4em] mb-6 ml-4 flex items-center gap-2",children:"Sincronizar Protocolos Ativos "})})]}),g==="CREATE"&&i&&u.jsx(e8,{currentUser:e,communityId:i,onCancel:()=>x("LIST"),onSuccess:()=>{x("LIST"),O()}}),g==="VOTE"&&o&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>x("LIST"),className:"flex items-center gap-2 text-[9px] font-black uppercase text-zinc-500 mb-4 ml-2",children:[u.jsx(Ge.ArrowLeft,{className:"w-4 h-4"})," Voltar  Lista"]}),u.jsx(t8,{reportId:o,currentUser:e,onVoteSuccess:()=>{x("LIST"),O()}})]}),u.jsx("div",{className:"p-8 bg-zinc-900/20 border border-white/5 rounded-[2.5rem] text-center",children:u.jsxs("p",{className:"text-[7px] text-zinc-800 font-black uppercase tracking-[0.4em] leading-loose italic",children:["CDIGO DE CONDUTA VANTA V2.1",u.jsx("br",{}),"AS DECISES DO CONSELHO SO SOBERANAS E IRREVOGVEIS."]})})]})};async function ig(e){if(!Q)return[];try{let t=Q.from("vanta_staff_templates").select("*");e?t=t.or(`is_global.eq.true,community_id.eq.${e}`):t=t.eq("is_global",!0);const{data:n,error:i}=await t.order("name",{ascending:!0});if(i)throw i;return(n||[]).map(r=>({id:r.id,communityId:r.community_id,name:r.name,description:r.description,dos:Array.isArray(r.dos)?r.dos:[],donts:Array.isArray(r.donts)?r.donts:[],permissions:r.permissions||{},isGlobal:r.is_global,createdAt:r.created_at}))}catch(t){return console.error("[VANTA STAFF API] Erro ao carregar templates:",t),[]}}async function i8(e){if(!Q)return null;const{data:t,error:n}=await Q.from("vanta_staff_templates").insert([{community_id:e.communityId,name:e.name,description:e.description,dos:e.dos,donts:e.donts,permissions:e.permissions,is_global:e.isGlobal}]).select().single();return n?(console.error("[VANTA STAFF API] Erro ao criar template:",n),null):{id:t.id,communityId:t.community_id,name:t.name,description:t.description,dos:t.dos,donts:t.donts,permissions:t.permissions||{},isGlobal:t.is_global,createdAt:t.created_at}}async function s8(e){if(!Q)return!1;const{error:t}=await Q.from("vanta_staff_templates").delete().eq("id",e);return!t}const r8=({currentUser:e,selectedCommunityId:t,communities:n})=>{const[i,r]=V.useState([]),[o,d]=V.useState(!0),[g,x]=V.useState(!1),[p,_]=V.useState(!1),[E,N]=V.useState({name:"",description:"",dos:[],donts:[],permissions:{},isGlobal:!1}),[k,O]=V.useState(""),[L,P]=V.useState(""),H=["admin","master","vanta_master"].includes(e.role.toLowerCase());V.useEffect(()=>{B()},[t]);const B=async()=>{d(!0);const Y=await ig(t);r(Y),d(!1)},j=async()=>{if(!E.name||!E.description)return alert("Preencha o nome e a descrio da funo.");_(!0),await i8({...E,communityId:E.isGlobal?null:t})&&(await B(),x(!1),N({name:"",description:"",dos:[],donts:[],permissions:{},isGlobal:!1})),_(!1)},F=Y=>{N(W=>({...W,permissions:{...W.permissions,[Y]:!W.permissions[Y]}}))};return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-32",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"PROTOCOLO OPERACIONAL"}),u.jsx("p",{className:"text-[22px] font-serif italic text-white tracking-tighter uppercase",children:"Funes de Equipe"})]}),u.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Nova Funo"})]}),g&&u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-8 animate-in zoom-in-95 overflow-hidden",children:[u.jsx("h4",{className:"text-[9px] text-[#d4af37] font-black uppercase tracking-[0.3em] italic",children:"Cadastrar Modelo de Atuao"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Nome da Funo"}),u.jsx("input",{type:"text",value:E.name,onChange:Y=>N({...E,name:Y.target.value}),placeholder:"EX: LIMPEZA / SEGURANA VIP",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/20"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Escopo da Funo"}),u.jsx("textarea",{value:E.description,onChange:Y=>N({...E,description:Y.target.value}),placeholder:"DESCRIO BREVE DA MISSO...",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[10px] text-white uppercase outline-none h-20 resize-none"})]}),H&&u.jsxs("button",{onClick:()=>N({...E,isGlobal:!E.isGlobal}),className:`flex items-center gap-3 p-4 rounded-2xl border transition-all ${E.isGlobal?"bg-emerald-500/10 border-emerald-500/30":"bg-black border-white/5"}`,children:[u.jsx("div",{className:`w-3 h-3 rounded-full border ${E.isGlobal?"bg-emerald-500 border-emerald-500":"border-zinc-800"}`}),u.jsx("span",{className:"text-[8px] font-black uppercase text-white",children:"Tornar Funo Global (Todas as Unidades)"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Permisses do Dashboard"}),u.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto no-scrollbar pr-2",children:[...NN,...SN].map(Y=>u.jsxs("button",{onClick:()=>F(Y.id),className:`flex items-center justify-between p-4 rounded-2xl border transition-all ${E.permissions[Y.id]?"bg-white/5 border-[#d4af37]/40":"bg-black border-white/5 opacity-40"}`,children:[u.jsx("span",{className:"text-[9px] font-black uppercase text-white",children:Y.label}),E.permissions[Y.id]&&u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#d4af37]"})]},Y.id))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-emerald-500 font-black uppercase tracking-widest ml-4",children:"Do's"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:k,onChange:Y=>O(Y.target.value),placeholder:"Ao...",className:"flex-1 bg-zinc-900 border border-white/5 rounded-xl p-3 text-[9px] text-white uppercase"}),u.jsx("button",{onClick:()=>{k&&N({...E,dos:[...E.dos,k]}),O("")},className:"p-3 bg-white text-black rounded-xl",children:"+"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:E.dos.map((Y,W)=>u.jsx("span",{className:"px-3 py-1 bg-emerald-500/10 text-emerald-500 text-[7px] font-black uppercase rounded-full border border-emerald-500/20",children:Y},W))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-red-500 font-black uppercase tracking-widest ml-4",children:"Dont's"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:L,onChange:Y=>P(Y.target.value),placeholder:"Restrio...",className:"flex-1 bg-zinc-900 border border-white/5 rounded-xl p-3 text-[9px] text-white uppercase"}),u.jsx("button",{onClick:()=>{L&&N({...E,donts:[...E.donts,L]}),P("")},className:"p-3 bg-white text-black rounded-xl",children:"+"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:E.donts.map((Y,W)=>u.jsx("span",{className:"px-3 py-1 bg-red-500/10 text-red-500 text-[7px] font-black uppercase rounded-full border border-red-500/20",children:Y},W))})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:j,disabled:p,className:"flex-1 py-5 bg-[#d4af37] text-black text-[10px] font-black uppercase rounded-full shadow-xl",children:"Salvar Modelo"}),u.jsx("button",{onClick:()=>x(!1),className:"px-8 py-5 border border-white/10 text-zinc-500 text-[10px] font-black uppercase rounded-full",children:"Cancelar"})]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:o?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):i.length>0?i.map(Y=>u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] space-y-6 group hover:border-[#d4af37]/20 transition-all",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest",children:Y.name}),Y.isGlobal&&u.jsx("span",{className:"px-2 py-0.5 bg-[#d4af37]/10 text-[#d4af37] text-[6px] font-black rounded-full border border-[#d4af37]/20",children:"GLOBAL"})]}),u.jsx("p",{className:"text-zinc-500 text-[9px] font-medium uppercase tracking-widest",children:Y.description})]}),u.jsx("button",{onClick:()=>s8(Y.id).then(B),className:"p-2 opacity-0 group-hover:opacity-100 text-red-900/40 hover:text-red-500 transition-all",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(Y.permissions||{}).filter(([W,te])=>te).map(([W])=>u.jsx("span",{className:"px-2 py-0.5 bg-black/40 text-zinc-600 text-[5px] font-black uppercase rounded-full border border-white/5",children:W.replace("_"," ")},W))}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[6px] text-zinc-700 font-black uppercase tracking-widest block ml-2",children:"PODE"}),u.jsx("div",{className:"space-y-1",children:Y.dos.map((W,te)=>u.jsxs("div",{className:"text-[8px] text-emerald-500/80 font-black uppercase flex items-center gap-2",children:[u.jsx("span",{children:""})," ",W]},te))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-[6px] text-zinc-700 font-black uppercase tracking-widest block ml-2",children:"NO PODE"}),u.jsx("div",{className:"space-y-1",children:Y.donts.map((W,te)=>u.jsxs("div",{className:"text-[8px] text-red-500/80 font-black uppercase flex items-center gap-2",children:[u.jsx("span",{children:""})," ",W]},te))})]})]})]},Y.id)):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] opacity-30",children:u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase",children:"Nenhuma funo protocolada."})})})]})},a8=({currentUser:e})=>{const[t,n]=V.useState([]),[i,r]=V.useState(!0),[o,d]=V.useState(!1),[g,x]=V.useState(!1),[p,_]=V.useState({name:"",color:"#d4af37",priority:0});V.useEffect(()=>{E()},[]);const E=async()=>{r(!0);const k=await Zm();n(k),r(!1)},N=async()=>{if(!p.name)return;d(!0),await AI(p)&&(await E(),x(!1),_({name:"",color:"#d4af37",priority:0})),d(!1)};return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-32",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600",children:"CURADORIA MXIMA"}),u.jsx("p",{className:"text-[22px] font-serif italic text-white tracking-tighter uppercase",children:"Tags de Elite"})]}),u.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg",children:"Nova Tag"})]}),g&&u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-6 animate-in zoom-in-95",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("input",{type:"text",value:p.name,onChange:k=>_({...p,name:k.target.value}),placeholder:"NOME DA TAG",className:"bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[10px] text-white uppercase outline-none"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"color",value:p.color,onChange:k=>_({...p,color:k.target.value}),className:"h-14 w-14 bg-zinc-900 border border-white/5 rounded-2xl cursor-pointer p-1"}),u.jsx("input",{type:"number",value:p.priority,onChange:k=>_({...p,priority:Number(k.target.value)}),placeholder:"PRIORIDADE",className:"flex-1 bg-zinc-900 border border-white/5 rounded-2xl p-4 text-[10px] text-white uppercase outline-none"})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:N,disabled:o,className:"flex-1 py-4 bg-white text-black text-[10px] font-black uppercase rounded-full",children:"Criar Tag"}),u.jsx("button",{onClick:()=>x(!1),className:"px-8 py-4 text-zinc-600 text-[10px] font-black uppercase",children:"Fechar"})]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:i?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):t.length>0?t.map(k=>u.jsxs("div",{className:"p-5 bg-zinc-900 border border-white/5 rounded-3xl flex items-center justify-between group",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-3 h-3 rounded-full shadow-[0_0_10px_rgba(0,0,0,0.5)]",style:{backgroundColor:k.color}}),u.jsx("h4",{className:"text-white text-[11px] font-black uppercase tracking-widest",children:k.name})]}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsxs("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:["Peso: ",k.priority]}),u.jsx("button",{onClick:()=>SI(k.id).then(E),className:"text-red-900/40 hover:text-red-500 transition-all opacity-0 group-hover:opacity-100",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]})]},k.id)):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] opacity-30",children:u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase",children:"Nenhuma tag customizada."})})})]})},o8=({currentUser:e})=>{const[t,n]=V.useState([]),[i,r]=V.useState([]),[o,d]=V.useState(!0),[g,x]=V.useState(!1),[p,_]=V.useState(null),[E,N]=V.useState(""),[k,O]=V.useState(!1);V.useEffect(()=>{L()},[]);const L=async()=>{d(!0);try{const{data:B}=await Q.from("profiles").select("*").not("role","eq","user").not("role","eq","master");n(B||[]);const j=await ig(null);r(j.filter(F=>F.isGlobal))}catch(B){console.error("[VANTA TEAM] Erro ao carregar time:",B)}finally{d(!1)}},P=async()=>{if(!p||!E)return;const B=i.find(j=>j.id===E);B&&Fe.confirm({title:"Promover Membro",message:`Confirmar acesso administrativo para ${p.full_name} com a funo ${B.name}?`,confirmLabel:"Confirmar Promoo",onConfirm:async()=>{O(!0),await Kv(p.id,"vanta_staff",B.permissions||{})?(await L(),x(!1),_(null),N(""),Fe.toast("success","Promoo Realizada",`${p.full_name} agora possui acesso granular.`)):Fe.toast("error","Erro","Falha ao atualizar protocolo de acesso."),O(!1)}})},H=async B=>{Fe.confirm({title:"Revogar Acesso",message:`Revogar o acesso de ${B.full_name}? Ele voltar a ser um membro comum.`,confirmLabel:"Revogar e Remover",isDestructive:!0,onConfirm:async()=>{O(!0),await Kv(B.id,"user",{})&&(n(F=>F.filter(Y=>Y.id!==B.id)),Fe.toast("info","Acesso Revogado","O membro foi removido da equipe.")),O(!1)}})};return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-bottom duration-500 pb-32",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600 italic",children:"EQUIPE SOBERANA"}),u.jsx("p",{className:"text-[22px] font-serif italic text-white tracking-tighter uppercase",children:"Gesto de Time Master"})]}),u.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Recrutar Subordinado"})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:o?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):t.length>0?t.map(B=>{var j;return u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] flex items-center gap-6 group hover:border-[#d4af37]/20 transition-all",children:[u.jsx("div",{className:"w-14 h-14 rounded-full border border-white/10 p-0.5 overflow-hidden bg-zinc-900",children:u.jsx(Kn,{src:B.avatar_url,gender:B.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:B.full_name}),u.jsx("span",{className:"px-2 py-0.5 bg-[#d4af37]/10 text-[#d4af37] text-[6px] font-black rounded-full border border-[#d4af37]/20 uppercase",children:(j=B.role)==null?void 0:j.replace("_"," ")})]}),u.jsxs("p",{className:"text-zinc-600 text-[9px] font-black uppercase tracking-widest truncate",children:["@",B.instagram_handle]}),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(B.permissions||{}).filter(([F,Y])=>Y).slice(0,3).map(([F])=>u.jsxs("span",{className:"text-[5px] text-zinc-500 uppercase tracking-tighter",children:[" ",F.replace("_"," ")]},F)),Object.values(B.permissions||{}).filter(F=>F).length>3&&u.jsx("span",{className:"text-[5px] text-zinc-500 uppercase",children:"..."})]})]}),u.jsx("button",{onClick:()=>H(B),className:"p-3 text-red-900 opacity-20 group-hover:opacity-100 hover:text-red-500 transition-all",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]},B.id)}):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] opacity-30",children:u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase",children:"Voc ainda no recrutou subordinados globais."})})}),g&&u.jsx("div",{className:"fixed inset-0 z-[11000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-sm bg-zinc-950 border border-white/10 rounded-[3.5rem] p-10 space-y-8 shadow-2xl relative overflow-hidden",children:[u.jsxs("header",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"PROTOCOLO DE RECRUTAMENTO"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Promover Membro"})]}),p?u.jsxs("div",{className:"space-y-8 animate-in zoom-in-95",children:[u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-20 h-20 rounded-full border border-[#d4af37]/30 p-1 overflow-hidden bg-zinc-900 shadow-xl",children:u.jsx(Kn,{src:p.avatar_url,gender:p.gender})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h4",{className:"text-white text-sm font-black uppercase",children:p.full_name}),u.jsxs("p",{className:"text-zinc-500 text-[9px] font-black uppercase",children:["@",p.instagram_handle]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Atribuir Funo Master"}),u.jsxs("select",{value:E,onChange:B=>N(B.target.value),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/30",children:[u.jsx("option",{value:"",children:"SELECIONE UM TEMPLATE..."}),i.map(B=>u.jsx("option",{value:B.id,children:B.name.toUpperCase()},B.id))]}),i.length===0&&u.jsx("p",{className:"text-[7px] text-red-500 font-black uppercase tracking-widest ml-4 italic",children:"AVISO: Voc no possui templates globais criados."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:P,disabled:k||!E,className:"flex-1 py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-95 disabled:opacity-20",children:k?"Efetivando...":"Confirmar Efetivao"}),u.jsx("button",{onClick:()=>_(null),className:"px-6 py-5 border border-white/10 text-zinc-500 text-[10px] font-black uppercase rounded-full",children:"Trocar"})]})]}):u.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top",children:[u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest text-center leading-relaxed",children:"Pesquise um membro verificado para elevar seu nvel de acesso na plataforma."}),u.jsx(eu,{onSelect:_,placeholder:"BUSCAR NA REDE..."})]}),u.jsx("button",{onClick:()=>{x(!1),_(null)},className:"w-full py-4 text-zinc-700 text-[8px] font-black uppercase tracking-[0.3em] text-center",children:"CANCELAR PROTOCOLO"})]})})]})},l8=({communityId:e,currentUser:t,onBack:n})=>{const[i,r]=V.useState([]),[o,d]=V.useState([]),[g,x]=V.useState(!0),[p,_]=V.useState(!1),[E,N]=V.useState(null),[k,O]=V.useState(""),[L,P]=V.useState(!1);V.useEffect(()=>{H()},[e]);const H=async()=>{x(!0);try{const F=await C3(e);r(F);const Y=await ig(e);d(Y)}catch(F){console.error("[VANTA UNIT STAFF] Erro:",F)}finally{x(!1)}},B=async()=>{if(!E||!k)return;const F=o.find(Y=>Y.id===k);F&&Fe.confirm({title:"Delegar Acesso",message:`Confirmar acesso administrativo para ${E.full_name} como ${F.name}?`,confirmLabel:"Confirmar Delegao",onConfirm:async()=>{P(!0);try{await yI(e,E.id,F)&&(await Fc({communityId:e,action:"GRANT_UNIT_ACCESS",category:"STAFF",targetId:E.id,details:{templateName:F.name}}),await H(),_(!1),N(null),O(""),Fe.toast("success","Acesso Delegado",`${E.full_name} agora  ${F.name}.`))}catch{Fe.toast("error","Falha na Delegao","Ocorreu um erro no protocolo.")}finally{P(!1)}}})},j=async F=>{Fe.confirm({title:"Revogar Jurisdio",message:`Revogar o acesso de ${F.full_name}? Ele voltar a ser um membro comum.`,confirmLabel:"Revogar Acesso",isDestructive:!0,onConfirm:async()=>{P(!0);try{await vI(e,F.id)&&(await Fc({communityId:e,action:"REVOKE_UNIT_ACCESS",category:"STAFF",targetId:F.id}),await H(),Fe.toast("info","Acesso Revogado","O perfil voltou ao nvel Membro."))}finally{P(!1)}}})};return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500 pb-32",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-[#d4af37] italic",children:"CONTROLE DE DELEGAO"}),u.jsx("p",{className:"text-[22px] font-serif italic text-white tracking-tighter uppercase",children:"Equipe da Unidade"})]}),u.jsx("button",{onClick:()=>_(!0),className:"px-6 py-3 bg-[#d4af37] text-black text-[9px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"+ Liberar Acesso"})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:g?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):i.length>0?i.map(F=>u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] flex items-center gap-6 group hover:border-[#d4af37]/20 transition-all",children:[u.jsx("div",{className:"w-14 h-14 rounded-full border border-white/10 p-0.5 overflow-hidden bg-zinc-900",children:u.jsx(Kn,{src:F.avatar_url,gender:F.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:F.full_name}),u.jsx("span",{className:"px-2 py-0.5 bg-zinc-800 text-zinc-400 text-[6px] font-black rounded-full border border-white/5 uppercase",children:F.role})]}),u.jsxs("p",{className:"text-zinc-600 text-[9px] font-black uppercase tracking-widest truncate",children:["@",F.instagram_handle]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.entries(F.permissions||{}).filter(([Y,W])=>W).slice(0,3).map(([Y])=>u.jsxs("span",{className:"text-[5px] text-zinc-500 uppercase tracking-tighter",children:[" ",Y.replace("_"," ")]},Y))})]}),u.jsx("button",{onClick:()=>j(F),className:"p-3 text-red-900 opacity-20 group-hover:opacity-100 hover:text-red-500 transition-all",children:u.jsx(Ge.Trash,{className:"w-4 h-4"})})]},F.id)):u.jsx("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[3rem] opacity-30",children:u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase",children:"Sua equipe local est vazia."})})}),p&&u.jsx("div",{className:"fixed inset-0 z-[11000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-sm bg-zinc-950 border border-white/10 rounded-[3.5rem] p-10 space-y-8 shadow-2xl relative overflow-hidden",children:[u.jsxs("header",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"PROTOCOLO DE ACESSO LOCAL"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Delegar Funo"})]}),E?u.jsxs("div",{className:"space-y-8 animate-in zoom-in-95",children:[u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-20 h-20 rounded-full border border-[#d4af37]/30 p-1 overflow-hidden bg-zinc-900 shadow-xl",children:u.jsx(Kn,{src:E.avatar_url,gender:E.gender})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h4",{className:"text-white text-sm font-black uppercase",children:E.full_name}),u.jsxs("p",{className:"text-zinc-600 text-[9px] font-black uppercase",children:["@",E.instagram_handle]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Selecionar Template de Cargo"}),u.jsxs("select",{value:k,onChange:F=>O(F.target.value),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-[10px] text-white uppercase outline-none focus:border-[#d4af37]/30",children:[u.jsx("option",{value:"",children:"SELECIONE A FUNO..."}),o.map(F=>u.jsx("option",{value:F.id,children:F.name.toUpperCase()},F.id))]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:B,disabled:L||!k,className:"flex-1 py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-2xl active:scale-95 disabled:opacity-20",children:L?"Protocolando...":"Confirmar Acesso"}),u.jsx("button",{onClick:()=>N(null),className:"px-6 py-5 border border-white/10 text-zinc-500 text-[10px] font-black uppercase rounded-full",children:"Trocar"})]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest text-center leading-relaxed",children:"Pesquise um membro verificado para liberar acesso administrativo  sua boate."}),u.jsx(eu,{onSelect:N,placeholder:"PESQUISAR NA REDE..."})]}),u.jsx("button",{onClick:()=>{_(!1),N(null)},className:"w-full py-4 text-zinc-700 text-[8px] font-black uppercase tracking-[0.3em] text-center",children:"CANCELAR"})]})})]})},c8=(e,t)=>{const[n,i]=V.useState([]),[r,o]=V.useState(!0),d=async()=>{o(!0);try{const x=await O3(e);i(x)}catch(x){console.error("[MISSION CONTROL HOOK] Erro ao carregar dados:",x)}finally{o(!1)}};V.useEffect(()=>{d()},[e]);const g=V.useMemo(()=>{const x=n.filter(F=>F.checkedIn),p=x.length,_=n.length,E=_>0?p/_*100:0,N=p*150;let k=0,O=0;x.forEach(F=>{const Y=((t==null?void 0:t.guestListRules)||[]).find(W=>W.id===F.ruleId);if(Y){const W=Y.gender.toString().charAt(0).toUpperCase();W==="F"?O++:W==="M"&&k++}});const L=k+O||1,P={femalePct:O/L*100,malePct:k/L*100,female:O,male:k},H=new Map;n.forEach(F=>{const Y=F.addedByEmail;H.has(Y)||H.set(Y,{total:0,checked:0});const W=H.get(Y);W.total++,F.checkedIn&&W.checked++});const B=Array.from(H.entries()).map(([F,Y])=>({name:F.split("@")[0].toUpperCase(),efficiency:Y.checked/Y.total*100,in:Y.checked,total:Y.total})).sort((F,Y)=>Y.efficiency-F.efficiency).slice(0,5),j=((t==null?void 0:t.guestListRules)||[]).map(F=>({label:`${F.type} ${F.gender}`,count:x.filter(Y=>Y.ruleId===F.id).length})).sort((F,Y)=>Y.count-F.count).slice(0,3);return{checkedIn:p,total:_,conversion:E,revenue:N,vibe:P,promoterPerformance:B,ruleDistribution:j}},[n,t]);return{guests:n,isLoading:r,stats:g,refresh:d}},u8=({vibe:e})=>u.jsxs("div",{className:"p-8 bg-zinc-950 border border-white/5 rounded-[2.5rem] space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"Vibe-Check (M vs F)"}),u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase italic",children:"Em Tempo Real"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"w-full h-12 bg-zinc-900 rounded-2xl overflow-hidden flex",children:[u.jsx("div",{className:"h-full bg-pink-500/80 transition-all duration-1000 flex items-center justify-center",style:{width:`${e.femalePct}%`},children:e.femalePct>10&&u.jsxs("span",{className:"text-[8px] font-black text-white",children:[e.femalePct.toFixed(0),"%"]})}),u.jsx("div",{className:"h-full bg-blue-500/80 transition-all duration-1000 flex items-center justify-center border-l border-black/40",style:{width:`${e.malePct}%`},children:e.malePct>10&&u.jsxs("span",{className:"text-[8px] font-black text-white",children:[e.malePct.toFixed(0),"%"]})})]}),u.jsxs("div",{className:"flex justify-between px-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-pink-500"}),u.jsxs("span",{className:"text-[8px] text-zinc-400 font-black uppercase",children:["Feminino: ",e.female]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-[8px] text-zinc-400 font-black uppercase",children:["Masculino: ",e.male]}),u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})]})]})]})]}),d8=({ruleDistribution:e,checkedIn:t})=>u.jsxs("div",{className:"p-8 bg-zinc-950 border border-white/5 rounded-[2.5rem] space-y-6",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"Mix de Acesso Principal"}),u.jsx("div",{className:"space-y-3",children:e.length>0?e.map((n,i)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5",children:[u.jsx("span",{className:"text-[9px] font-black text-white uppercase truncate max-w-[140px]",children:n.label}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-[10px] text-white font-bold",children:n.count}),u.jsx("div",{className:"w-8 h-0.5 bg-zinc-800 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#d4af37]",style:{width:`${n.count/(t||1)*100}%`}})})]})]},i)):u.jsx("p",{className:"text-[8px] text-zinc-700 italic uppercase",children:"Aguardando entradas..."})})]}),f8=({promoterPerformance:e})=>u.jsxs("div",{className:"md:col-span-2 p-8 bg-zinc-950 border border-white/5 rounded-[2.5rem] space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"Ranking de Converso Staff"}),u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-widest",children:"(Check-ins / Lista Nominal)"})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.length>0?e.map((t,n)=>u.jsxs("div",{className:"p-4 bg-zinc-900/60 border border-white/5 rounded-2xl flex items-center gap-4 group transition-all hover:border-[#d4af37]/20",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-white/10 flex items-center justify-center shrink-0",children:u.jsx("span",{className:"text-[9px] font-black text-zinc-500",children:n+1})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[u.jsx("h5",{className:"text-[9px] font-black text-white uppercase truncate",children:t.name}),u.jsxs("span",{className:`text-[9px] font-black ${t.efficiency>=70?"text-emerald-500":t.efficiency>=40?"text-[#d4af37]":"text-red-500"}`,children:[t.efficiency.toFixed(0),"%"]})]}),u.jsx("div",{className:"w-full h-1 bg-black rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-1000 ${t.efficiency>=70?"bg-emerald-500":t.efficiency>=40?"bg-[#d4af37]":"bg-red-500"}`,style:{width:`${t.efficiency}%`}})}),u.jsxs("div",{className:"flex justify-between mt-1.5",children:[u.jsxs("span",{className:"text-[6px] text-zinc-600 font-black uppercase",children:[t.in," Entradas"]}),u.jsxs("span",{className:"text-[6px] text-zinc-600 font-black uppercase",children:["Alvo: ",t.total]})]})]})]},t.name)):u.jsx("div",{className:"col-span-2 py-10 text-center border border-dashed border-white/5 rounded-2xl opacity-20",children:u.jsx("p",{className:"text-[8px] font-black uppercase",children:"Nenhum dado de staff disponvel."})})})]}),h8=({event:e,stats:t})=>u.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"p-10 bg-zinc-900/40 border border-white/5 rounded-[3rem] text-center space-y-6",children:[u.jsx("h4",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-[0.3em] italic",children:"Resumo da Sesso"}),u.jsxs("p",{className:"text-zinc-400 text-sm leading-relaxed uppercase tracking-wide italic",children:['"',e.description,'"']}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 max-w-xs mx-auto",children:[u.jsxs("div",{className:"p-4 bg-black/40 rounded-2xl border border-white/5",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black block uppercase",children:"Capacidade"}),u.jsxs("span",{className:"text-xs text-white font-black",children:[e.capacity," PAX"]})]}),u.jsxs("div",{className:"p-4 bg-black/40 rounded-2xl border border-white/5",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black block uppercase",children:"Vip Only"}),u.jsx("span",{className:"text-xs text-white font-black",children:e.isVipOnly?"SIM":"NO"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx(u8,{vibe:t.vibe}),u.jsx(d8,{ruleDistribution:t.ruleDistribution,checkedIn:t.checkedIn}),u.jsx(f8,{promoterPerformance:t.promoterPerformance})]})]}),p8=({event:e,eventId:t})=>u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"p-8 bg-zinc-950 border border-white/5 rounded-[3rem] space-y-6 shadow-inner",children:[u.jsx("h3",{className:"text-[9px] font-black text-white uppercase tracking-widest",children:"Desempenho de Lotes"}),u.jsxs("div",{className:"space-y-4",children:[(e.batches||[]).map(n=>u.jsxs("div",{className:"flex justify-between items-center p-4 bg-zinc-900/60 border border-white/5 rounded-2xl",children:[u.jsx("span",{className:"text-[9px] font-black text-zinc-400 uppercase",children:n.name}),u.jsx("div",{className:"flex gap-6",children:u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"text-[10px] text-white font-bold",children:[n.soldCount||0," / ",n.limit]}),u.jsx("p",{className:"text-[5px] text-zinc-600 uppercase font-black",children:"Converso"})]})})]},n.id)),(!e.batches||e.batches.length===0)&&u.jsx("p",{className:"text-[8px] text-zinc-700 italic uppercase text-center py-4",children:"Nenhum lote configurado para esta sesso."})]})]}),u.jsx(Dh,{eventId:t,category:"FINANCE",title:"Auditoria Financeira Local"})]}),m8=({eventId:e})=>u.jsx("div",{className:"animate-in fade-in duration-500",children:u.jsx(Dh,{eventId:e,title:"Dossi de Evento (Black Box)"})}),g8=({eventId:e,currentUser:t,events:n,onBack:i})=>{var N;const[r,o]=V.useState("OVERVIEW"),d=V.useMemo(()=>n.find(k=>k.id===e),[n,e]),g=d?Uc(d):!1,{stats:x}=c8(e,d),p=t.role.toLowerCase(),_=["admin","master","vanta_master","vanta_prod","produtor"].includes(p),E=_||!!((N=t.permissions)!=null&&N.finance_view);return d?u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500 pb-32",children:[u.jsxs("header",{className:"flex flex-col gap-4",children:[u.jsxs("button",{onClick:i,className:"text-[8px] font-black text-[#d4af37] uppercase tracking-widest flex items-center gap-1",children:[u.jsx(Ge.ArrowLeft,{className:"w-3 h-3"})," Retornar  Unidade"]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("h2",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter leading-none",children:d.title}),g&&u.jsx("span",{className:"px-3 py-1 bg-zinc-800 text-zinc-500 rounded-full text-[6px] font-black uppercase border border-white/5",children:"Sesso Arquivada"})]}),u.jsxs("p",{className:"text-zinc-500 text-[8px] font-black uppercase tracking-widest",children:[d.startDate,"  ",d.location]})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("div",{className:"w-10 h-10 rounded-full border border-white/10 p-0.5 overflow-hidden bg-zinc-900 shadow-xl",children:u.jsx("img",{src:d.image,className:"w-full h-full object-cover rounded-full",alt:""})})})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[u.jsxs("div",{className:"p-6 bg-zinc-950 border border-white/5 rounded-3xl space-y-1",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-widest block",children:"Presena Real"}),u.jsx("p",{className:"text-2xl font-serif italic text-white",children:x.checkedIn}),u.jsxs("span",{className:"text-[5px] text-zinc-700 font-black uppercase",children:["de ",x.total," convidados"]})]}),u.jsxs("div",{className:"p-6 bg-zinc-950 border border-white/5 rounded-3xl space-y-1",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-widest block",children:"Converso"}),u.jsxs("p",{className:"text-2xl font-serif italic text-[#d4af37]",children:[x.conversion.toFixed(1),"%"]}),u.jsx("div",{className:"w-full h-0.5 bg-zinc-900 mt-2 overflow-hidden rounded-full",children:u.jsx("div",{className:"h-full bg-[#d4af37]",style:{width:`${x.conversion}%`}})})]}),E&&u.jsxs("div",{className:"p-6 bg-zinc-950 border border-white/5 rounded-3xl space-y-1",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-widest block",children:"Faturamento Est."}),u.jsxs("p",{className:"text-2xl font-serif italic text-emerald-500",children:["R$ ",x.revenue.toLocaleString()]}),u.jsx("span",{className:"text-[5px] text-zinc-700 font-black uppercase",children:"Tickets Liquidados"})]}),u.jsxs("div",{className:"p-6 bg-zinc-950 border border-white/5 rounded-3xl space-y-1",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase tracking-widest block",children:"Status Operacional"}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${g?"bg-zinc-800":"bg-emerald-500 animate-pulse shadow-[0_0_10px_rgba(16,185,129,0.5)]"}`}),u.jsx("span",{className:"text-[8px] text-white font-black uppercase",children:g?"Operao Encerrada":"Portaria Ativa"})]})]})]}),u.jsx("div",{className:"flex gap-8 border-b border-white/5 px-2 overflow-x-auto no-scrollbar shrink-0",children:[{id:"OVERVIEW",label:"Briefing"},{id:"OPERATIONS",label:"Portaria & Lista"},{id:"FINANCE",label:"Financeiro",hidden:!E},{id:"AUDIT",label:"Caixa Preta",hidden:!_}].filter(k=>!k.hidden).map(k=>u.jsxs("button",{onClick:()=>o(k.id),className:`pb-4 text-[9px] font-black uppercase tracking-[0.4em] relative transition-all whitespace-nowrap ${r===k.id?"text-white":"text-zinc-600"}`,children:[k.label,r===k.id&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]},k.id))}),u.jsxs("div",{className:"min-h-[400px]",children:[r==="OPERATIONS"&&u.jsx(U3,{events:n,currentUser:t,initialSelectedEventId:e}),r==="OVERVIEW"&&u.jsx(h8,{event:d,stats:x}),r==="FINANCE"&&E&&u.jsx(p8,{event:d,eventId:e}),r==="AUDIT"&&_&&u.jsx(m8,{eventId:e})]}),g&&u.jsx("div",{className:"p-8 bg-black border border-dashed border-white/10 rounded-[2.5rem] text-center mt-12",children:u.jsxs("p",{className:"text-[7px] text-zinc-800 font-black uppercase tracking-[0.4em] leading-loose italic",children:["ESTA SESSO FOI PROTOCOLADA E ARQUIVADA.",u.jsx("br",{}),"NO SO PERMITIDAS ALTERAES EM DADOS HISTRICOS."]})})]}):null},x8=(e,t,n)=>{V.useEffect(()=>{if(!e)return;(async()=>{await hI(e,t,{timestamp:Date.now(),trigger_value:n?String(n):"mount"})})()},[e,t,n])},y8=({currentUser:e,events:t,setEvents:n,onExit:i})=>{const[r,o]=an.useState("HUB"),[d,g]=an.useState(null),[x,p]=an.useState(!0),_=an.useRef(null),E=II(e,t,n),N=e.role.toLowerCase(),k=Zh(e);x8(`ADMIN_VIEW:${r}`,E.selectedCommunityId||d||"GLOBAL",r);const O=an.useMemo(()=>{if(k)return"VANTA";if(d){const j=t.find(F=>F.id===d);if(j)return j.title}if(E.selectedCommunityId){const j=E.communities.find(F=>F.id===E.selectedCommunityId);if(j)return j.name}return"VANTA"},[k,d,E.selectedCommunityId,E.communities,t]);an.useEffect(()=>{(async()=>{if(x){if(k){p(!1);return}if(await E.loadCommunities(),["vanta_prod","produtor","vanta_socio","socio","vanta_financeiro"].includes(N)){E.communities.length===1?(E.setSelectedCommunityId(E.communities[0].id),o(N==="vanta_financeiro"?"FINANCEIRO":"MANAGE_UNIDADE")):o("COMUNIDADES"),p(!1);return}if(["vanta_portaria","portaria","vanta_promoter","promoter","vanta_staff"].includes(N)){const F=t.filter(Y=>(Y.staff||[]).some(W=>W.id===e.id));F.length===1?(g(F[0].id),o("EVENT_MISSION")):o("PORTARIA"),p(!1);return}p(!1)}})()},[N,k,E.communities.length,t.length]);const L={MEMBROS:"list_view",CURADORIA:"list_view",INDICA:"unit_edit",COMUNIDADES:"unit_edit",MANAGE_UNIDADE:"unit_edit",CREATE_EVENTO:"event_edit",EDIT_EVENTO:"event_edit",PORTARIA:"list_checkin",STAFF_TEMPLATES:"unit_staff",FINANCEIRO:"unit_finance",ETICA:"unit_staff",TEAM:"unit_staff",UNIT_STAFF_MGMT:"unit_staff",EVENT_MISSION:"list_view"};an.useEffect(()=>{if(r==="HUB"||x||k)return;const j=L[r];j&&(E.checkPermission(j,E.selectedCommunityId||void 0)||(console.warn(`[VANTA SECURITY] Jurisdio negada para viso: ${r}`),o("HUB")))},[r,E.currentUserUnitPermissions,E.selectedCommunityId,k,x]),an.useEffect(()=>{_.current&&(_.current.scrollTop=0)},[r,d]),an.useEffect(()=>(window.__VANTA_EVENT_REDIREC__=j=>{g(j),o("EVENT_MISSION")},window.__VANTA_NAV_TO__=j=>o(j),()=>{delete window.__VANTA_EVENT_REDIREC__,delete window.__VANTA_NAV_TO__}),[]);const P=(j,F)=>u.jsxs("header",{className:"px-6 pt-14 pb-6 bg-zinc-950 border-b border-white/5 flex justify-between items-center shrink-0",children:[F?u.jsxs("button",{onClick:F,className:"flex items-center gap-2 text-[9px] font-black uppercase text-[#d4af37]",children:[u.jsx(Ge.ArrowLeft,{className:"w-4 h-4"})," Voltar"]}):u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsxs("h1",{className:"text-xl font-serif italic tracking-tighter truncate max-w-[180px]",children:[O," ",u.jsx("span",{className:"text-[#d4af37]",children:"ADMIN"})]}),k&&u.jsx("div",{className:"px-2 py-0.5 bg-[#d4af37]/10 border border-[#d4af37]/30 rounded-full shrink-0",children:u.jsx("span",{className:"text-[5px] text-[#d4af37] font-black uppercase tracking-widest",children:"Sovereign Mode"})})]}),!F&&u.jsx("button",{onClick:i,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-full text-[8px] font-black uppercase shrink-0",children:"Sair"}),u.jsx("h1",{className:"text-[9px] font-black text-zinc-500 uppercase truncate max-w-[100px] text-right",children:j})]});if(x)return u.jsxs("div",{className:"h-screen bg-black flex flex-col items-center justify-center text-white",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin mb-4"}),u.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-zinc-500",children:"Sincronizando Identidade..."})]});const B=!L[r]||k||E.checkPermission(L[r],E.selectedCommunityId||void 0)?r:"HUB";return u.jsxs("div",{className:"h-screen bg-black flex flex-col text-white overflow-hidden",children:[P(B==="HUB"?"HUB CENTRAL":B.replace("_"," "),B==="HUB"||!k?void 0:()=>o("HUB")),u.jsxs("main",{ref:_,className:"flex-1 overflow-y-auto no-scrollbar p-6 pb-48",children:[B==="HUB"&&u.jsx(RI,{userRole:N,setActiveView:o,currentUser:e}),B==="INDICA"&&u.jsx(DI,{events:t}),B==="CURADORIA"&&u.jsx(LI,{...E}),["COMUNIDADES","CREATE_UNIDADE","EDIT_UNIDADE","MANAGE_UNIDADE"].includes(B)&&u.jsx(qI,{view:B==="COMUNIDADES"?"LIST":B==="CREATE_UNIDADE"?"CREATE":B==="EDIT_UNIDADE"?"EDIT":"MANAGE",...E,isMaster:k,currentUser:{...e,role:N},events:t,setActiveView:o,setEventForm:E.setEventForm,onSelectEventForStaff:j=>{g(j),o("EVENT_MISSION")}}),B==="FINANCEIRO"&&E.selectedCommunityId&&u.jsxs("div",{className:"space-y-10 animate-in fade-in duration-700",children:[u.jsxs("div",{className:"flex flex-col gap-1 px-4",children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-[#d4af37] italic",children:"CONTROLE DE CAIXA"}),u.jsx("p",{className:"text-2xl font-serif italic text-white tracking-tighter uppercase",children:"Inteligncia Financeira"})]}),u.jsx("div",{className:"p-8 bg-zinc-900/40 border border-dashed border-white/5 rounded-[2.5rem] text-center",children:u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest",children:"Mdulo financeiro em processamento de segurana."})})]}),B==="EVENTOS"&&u.jsx($v,{currentUser:e,selectedCommunityId:E.selectedCommunityId,communities:E.communities,events:t,eventForm:E.eventForm,setEventForm:E.setEventForm,handleCreateEvent:E.handleCreateEvent,handleUpdateEvent:E.handleUpdateEvent,eventImageInputRef:E.eventImageInputRef,handleFileSelect:E.handleFileSelect,isProcessing:E.isProcessing,showBatchEditor:E.showBatchEditor,setShowBatchEditor:E.setShowBatchEditor,tempBatch:E.tempBatch,setTempBatch:E.setTempBatch,tempVariation:E.tempVariation,setTempVariation:E.setTempVariation,addVariationToBatch:E.addVariationToBatch,confirmBatch:E.confirmBatch,handleAddStaff:E.handleAddStaff,handleRemoveStaff:E.handleRemoveStaff,handleAddLegoRule:E.handleAddLegoRule,handleRemoveLegoRule:E.handleRemoveLegoRule,unitStaff:E.unitStaff}),(B==="CREATE_EVENTO"||B==="EDIT_EVENTO")&&u.jsx($v,{isEditing:B==="EDIT_EVENTO",currentUser:e,selectedCommunityId:E.selectedCommunityId,communities:E.communities,events:t,eventForm:E.eventForm,setEventForm:E.setEventForm,handleCreateEvent:async()=>{await E.handleCreateEvent()&&o("MANAGE_UNIDADE")},handleUpdateEvent:async()=>{await E.handleUpdateEvent()&&o("MANAGE_UNIDADE")},eventImageInputRef:E.eventImageInputRef,handleFileSelect:E.handleFileSelect,isProcessing:E.isProcessing,showBatchEditor:E.showBatchEditor,setShowBatchEditor:E.setShowBatchEditor,tempBatch:E.tempBatch,setTempBatch:E.setTempBatch,tempVariation:E.tempVariation,setTempVariation:E.setTempVariation,addVariationToBatch:E.addVariationToBatch,confirmBatch:E.confirmBatch,handleAddStaff:E.handleAddStaff,handleRemoveStaff:E.handleRemoveStaff,handleAddLegoRule:E.handleAddLegoRule,handleRemoveLegoRule:E.handleRemoveLegoRule,unitStaff:E.unitStaff}),B==="MEMBROS"&&u.jsx(ZI,{}),B==="PORTARIA"&&u.jsx(U3,{events:t,currentUser:e}),B==="EVENT_MISSION"&&d&&u.jsx(g8,{eventId:d,currentUser:e,events:t,onBack:()=>{g(null),["vanta_promoter","promoter","vanta_staff"].includes(N)?o("PORTARIA"):o("MANAGE_UNIDADE")}}),B==="BROADCASTER"&&u.jsx(H5,{events:t,currentUser:e}),B==="DIAGNOSTICO"&&u.jsx(q5,{}),B==="ETICA"&&u.jsx(n8,{currentUser:e,communityId:E.selectedCommunityId||void 0,communities:E.communities}),B==="STAFF_TEMPLATES"&&u.jsx(r8,{currentUser:e,selectedCommunityId:E.selectedCommunityId,communities:E.communities}),B==="GLOBAL_TAGS"&&u.jsx(a8,{currentUser:e}),B==="TEAM"&&u.jsx(o8,{currentUser:e}),B==="UNIT_STAFF_MGMT"&&E.selectedCommunityId&&u.jsx(l8,{communityId:E.selectedCommunityId,currentUser:e,onBack:()=>o("MANAGE_UNIDADE")}),B==="PERMISSOES"&&u.jsx("div",{className:"py-20 text-center opacity-30 border border-dashed border-white/5 rounded-[3rem]",children:u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase",children:"Mdulo em desenvolvimento."})})]}),E.cropState.isOpen&&u.jsx(Qm,{imageSrc:E.cropState.src,onConfirm:E.handleCropConfirm,onCancel:E.handleCropCancel,aspectRatio:E.cropState.aspectRatio,maskShape:E.cropState.maskShape})]})};class v8{constructor(){On(this,"listeners",[]);On(this,"pendingMemberId",null);On(this,"pendingChatMemberId",null);On(this,"pendingVipEventId",null);On(this,"pendingCommunityId",null);On(this,"pendingIndicaId",null);On(this,"pendingEventShareContext",null)}setOpenMemberProfile(t){this.pendingMemberId=t,this.notify()}consumeOpenMemberProfile(){const t=this.pendingMemberId;return this.pendingMemberId=null,t}setOpenChat(t){this.pendingChatMemberId=t,this.notify()}consumeOpenChat(){const t=this.pendingChatMemberId;return this.pendingChatMemberId=null,t}setTriggerVipInvite(t){this.pendingVipEventId=t,this.notify()}consumeTriggerVipInvite(){const t=this.pendingVipEventId;return this.pendingVipEventId=null,t}setOpenCommunityProfile(t){this.pendingCommunityId=t,this.notify()}setOpenCommunity(t){this.setOpenCommunityProfile(t)}consumeOpenCommunityProfile(){const t=this.pendingCommunityId;return this.pendingCommunityId=null,t}setOpenVantaIndica(t){this.pendingIndicaId=t,this.notify()}consumeOpenVantaIndica(){const t=this.pendingIndicaId;return this.pendingIndicaId=null,t}setEventShareContext(t){this.pendingEventShareContext=t,this.notify()}consumeEventShareContext(){const t=this.pendingEventShareContext;return this.pendingEventShareContext=null,t}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notify(){this.listeners.forEach(t=>t())}}const Vs=new v8,b8=({currentUser:e,onNavigate:t})=>u.jsx("button",{onClick:()=>t("profile"),className:"w-10 h-10 rounded-full border border-[#d4af37]/40 p-0.5 overflow-hidden active:scale-90 transition-transform bg-zinc-900","aria-label":"Abrir Perfil",children:u.jsx(Kn,{src:e==null?void 0:e.avatar,gender:e==null?void 0:e.gender,alt:"Me"})}),w8=({show:e,onClose:t,selectedCity:n,onSelectCity:i,availableCities:r,isLoading:o})=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[5000] cursor-default bg-black/20",onClick:t}),u.jsx("div",{className:"fixed top-28 left-1/2 -translate-x-1/2 w-[85%] max-w-xs z-[5010] animate-in slide-in-from-top-2 fade-in duration-300 origin-top",children:u.jsxs("div",{className:"bg-zinc-950/95 border border-[#d4af37]/20 rounded-[2rem] shadow-[0_0_80px_rgba(0,0,0,0.9)] overflow-hidden flex flex-col backdrop-blur-3xl ring-1 ring-white/5",children:[u.jsxs("div",{className:"p-6 border-b border-white/5 text-center relative bg-black/40",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.3em]",children:"SELECIONAR LOCAL"}),u.jsx("button",{onClick:t,className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-600 hover:text-white transition-colors",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:u.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),u.jsx("div",{className:"flex flex-col max-h-[50vh] overflow-y-auto no-scrollbar",children:o?u.jsx("div",{className:"py-8 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):r.length>0?u.jsxs(u.Fragment,{children:[r.map(d=>u.jsxs("button",{onClick:()=>{i(d),t()},className:`w-full py-5 px-8 text-[10px] font-black uppercase tracking-widest text-left transition-all flex justify-between items-center border-b border-white/5 last:border-0 hover:bg-white/5 ${n===d?"text-white bg-white/5":"text-zinc-500"}`,children:[d,n===d&&u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#d4af37] shadow-[0_0_10px_rgba(212,175,55,0.8)]"})]},d)),r.length<5&&u.jsx("div",{className:"p-5 text-center bg-black/20",children:u.jsx("p",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-[0.2em] italic opacity-60",children:"Em breve mais cidades..."})})]}):u.jsxs("div",{className:"py-12 px-8 text-center space-y-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full border border-white/5 flex items-center justify-center mx-auto opacity-20",children:u.jsx(Ge.MapPin,{className:"w-4 h-4 text-zinc-500"})}),u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed italic",children:"Em breve novas cidades"})]})})]})})]}):null,_8=({selectedCity:e,onClick:t})=>u.jsxs("button",{onClick:t,className:"flex flex-col items-center active:scale-95 transition-all",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.3em] mb-1 italic",children:"ESTOU EM"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[11px] text-white font-black uppercase tracking-[0.4em]",children:e}),u.jsx("div",{className:"w-2 h-2 border-r border-b border-zinc-600 rotate-45 mb-1"})]})]}),E8=({unreadCount:e,currentUser:t,onClick:n})=>u.jsxs("button",{onClick:n,className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center relative active:scale-90 transition-transform","aria-label":"Abrir Notificaes",children:[u.jsx(Ge.Bell,{className:"w-5 h-5 text-white"}),e>0&&t&&u.jsx("div",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-[#d4af37] rounded-full border border-black shadow-[0_0_10px_rgba(212,175,55,0.5)]"})]}),A8=({currentUser:e,activeTab:t,setActiveTab:n,selectedCity:i,setShowCitySelector:r,setShowNotifications:o,isCityInteractive:d=!0,events:g,children:x,onTitleClick:p,onEventClick:_,isDetailView:E=!1})=>{const[N,k]=V.useState(Ji.getUnreadCount()),[O,L]=V.useState(Ji.getUnreadMessageCount()),[P,H]=V.useState([]),[B,j]=V.useState(null),[F,Y]=V.useState(null),[W,te]=V.useState(!1),ne=V.useRef(null);V.useEffect(()=>{ne.current&&(ne.current.scrollTop=0)},[t,E]),V.useEffect(()=>{const _e=()=>{k(Ji.getUnreadCount()),L(Ji.getUnreadMessageCount()),H(Ji.getAll())};return _e(),Ji.subscribe(_e)},[]),V.useEffect(()=>{B?(te(!0),jI(B).then(_e=>{Y(_e),te(!1)})):Y(null)},[B]),V.useEffect(()=>{const _e=()=>{const pe=Vs.pendingMemberId;pe&&(j(pe),Vs.consumeOpenMemberProfile())};return Vs.subscribe(_e)},[]);const ie=!!(e!=null&&e.isGloballyRestricted);return u.jsxs("div",{className:`h-full flex flex-col relative selection:bg-purple-500 selection:text-white bg-black transition-all duration-1000 ${ie?"grayscale brightness-75":""}`,children:[t==="home"&&!E&&u.jsxs("header",{className:"px-6 pt-16 pb-8 flex justify-between items-center z-[100] bg-black/50 backdrop-blur-md safe-top shrink-0 animate-in fade-in slide-in-from-top duration-500",children:[u.jsx(b8,{currentUser:e,onNavigate:n}),u.jsx(_8,{selectedCity:i,onClick:()=>r(!0)}),u.jsx("div",{className:"flex items-center gap-3",children:u.jsx(E8,{unreadCount:N,currentUser:e,onClick:()=>o(!0)})})]}),ie&&!E&&u.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[500] px-6 py-2 bg-red-600 text-white flex items-center justify-center gap-3 shrink-0 animate-pulse safe-top border-b border-black/20",children:[u.jsx("span",{className:"text-xl",children:""}),u.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest italic text-center leading-tight",children:"PROTOCOLO DE SEGURANA ATIVADO: ACESSO EM ANLISE PELO CONSELHO"})]}),u.jsx("main",{ref:ne,className:"flex-1 relative flex flex-col min-h-0 overflow-hidden",children:x}),!E&&u.jsx("nav",{className:"h-20 glass border-t border-white/5 flex justify-around items-center px-4 safe-bottom shrink-0 relative z-[150] bg-zinc-950",children:[{id:"home",label:"Incio",icon:Ge.Home},{id:"map",label:"Radar",icon:Ge.MapPin},{id:"search",label:"Buscar",icon:Ge.Search},{id:"messages",label:"Social",icon:Ge.Message,restricted:!0,badge:O>0},{id:"profile",label:"Perfil",icon:Ge.User,restricted:!0}].map(_e=>u.jsxs("button",{onClick:()=>n(_e.id),className:`flex flex-col items-center justify-center gap-1.5 flex-1 h-full transition-all duration-300 relative ${t===_e.id?"text-white":"text-zinc-700"} ${ie&&_e.restricted?"opacity-20":""}`,children:[u.jsx(_e.icon,{className:`w-5 h-5 ${t===_e.id?"text-[#d4af37]":""}`}),u.jsx("span",{className:`text-[7px] font-black uppercase tracking-[0.2em] ${t===_e.id?"opacity-100":"opacity-40"}`,children:_e.label}),_e.badge&&!ie&&u.jsx("div",{className:"absolute top-3 right-6 w-2 h-2 bg-[#d4af37] rounded-full border border-black shadow-[0_0_10px_rgba(212,175,55,0.8)] animate-pulse"})]},_e.id))}),F&&e&&u.jsx(eg,{member:F,onBack:()=>{j(null),Y(null)},onMessage:()=>{n("messages"),j(null),Y(null)}}),W&&u.jsx("div",{className:"fixed inset-0 z-[1000] bg-black/60 backdrop-blur-sm flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})})]})},S8=({items:e,currentSlide:t,onItemClick:n,onChange:i})=>{const[r,o]=V.useState(0),[d,g]=V.useState(!1),x=V.useRef(0),p=N=>{g(!0),x.current=N.touches[0].clientX},_=N=>{if(!d)return;const O=N.touches[0].clientX-x.current;Math.abs(O)<150&&o(O)},E=()=>{g(!1),Math.abs(r)>50&&i&&(r<0?i((t+1)%e.length):i((t-1+e.length)%e.length)),o(0)};return e.length===0?u.jsx("div",{className:"aspect-[16/10] w-full rounded-[2.5rem] bg-zinc-950/20 border border-dashed border-white/5 flex items-center justify-center opacity-40",children:u.jsx("p",{className:"text-zinc-700 text-[8px] font-black uppercase tracking-widest italic",children:"Curadoria em tempo real..."})}):u.jsxs("div",{className:"relative aspect-[16/10] w-full rounded-[2.5rem] bg-zinc-900/40 border border-white/10 overflow-hidden cursor-pointer shadow-2xl touch-pan-y",onClick:()=>!d&&Math.abs(r)<5&&n(e[t]),onTouchStart:p,onTouchMove:_,onTouchEnd:E,children:[u.jsx("div",{className:"w-full h-full relative",style:{transform:`translateX(${r}px)`,transition:d?"none":"transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"},children:e.map((N,k)=>u.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${k===t?"opacity-100 z-10":"opacity-0 z-0"}`,children:[u.jsx("img",{src:N.image,alt:N.title,className:"w-full h-full object-cover brightness-[0.4] pointer-events-none select-none relative z-0"}),u.jsxs("div",{className:"absolute inset-0 p-8 flex flex-col justify-end bg-gradient-to-t from-black via-black/40 to-transparent z-20 pointer-events-none",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.4em] mb-2 drop-shadow-md",children:N.tag||"VANTA INDICA"}),u.jsx("h3",{className:"text-white text-xl font-serif italic tracking-tighter uppercase leading-tight max-w-[90%] drop-shadow-lg",children:N.title}),N.id==="fallback-chave"&&u.jsx("p",{className:"text-[8px] text-zinc-300 font-black uppercase tracking-widest mt-2",children:"Explore os melhores lugares onde a elite se encontra."}),N.id==="fallback-social"&&u.jsx("p",{className:"text-[8px] text-zinc-300 font-black uppercase tracking-widest mt-2",children:"Encontre e conecte-se com membros aprovados pelo conselho."}),N.id==="fallback-wallet"&&u.jsx("p",{className:"text-[8px] text-zinc-300 font-black uppercase tracking-widest mt-2",children:"Seus convites e entradas organizados com total agilidade."}),N.id==="fallback-profile"&&u.jsx("p",{className:"text-[8px] text-zinc-300 font-black uppercase tracking-widest mt-2",children:"Molde sua presena e gerencie sua conta exclusiva."})]})]},N.id))}),e.length>1&&u.jsx("div",{className:"absolute bottom-6 right-8 flex gap-2 z-30 pointer-events-none",children:e.map((N,k)=>u.jsx("div",{className:`h-1 rounded-full transition-all duration-500 shadow-lg ${k===t?"w-6 bg-white":"w-1 bg-white/20"}`},k))})]})},N8=({events:e,isConfigured:t,onEventClick:n})=>t?e.length===0?u.jsxs("div",{className:"py-24 text-center border border-dashed border-white/5 rounded-[2.5rem] bg-zinc-950/20 opacity-30",children:[u.jsx("div",{className:"w-10 h-10 border border-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ge.Calendar,{className:"w-4 h-4 text-zinc-800"})}),u.jsx("p",{className:"text-zinc-700 text-[9px] font-black uppercase tracking-[0.4em]",children:"Nenhuma sesso disponvel"}),u.jsx("p",{className:"text-zinc-800 text-[7px] font-black uppercase tracking-widest mt-2 italic",children:"Tente selecionar outra cidade."})]}):u.jsx("div",{className:"space-y-10",children:e.map(i=>{const r=(i==null?void 0:i.image_url)??(i==null?void 0:i.image)??(i==null?void 0:i.imageUrl)??"",o=typeof r=="string"&&r.trim().length>0?r.trim():null;return u.jsxs("div",{onClick:()=>n(i.id),className:"group active:scale-[0.98] transition-all cursor-pointer relative",children:[u.jsxs("div",{className:"aspect-[16/9] w-full rounded-[2.5rem] overflow-hidden border border-white/5 mb-4 relative shadow-xl",children:[o?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:o,alt:i.title,onError:d=>{const g=d.currentTarget;g.style.display="none";const x=g.parentElement,p=x==null?void 0:x.querySelector('[data-vanta-fallback="event"]');p&&(p.style.display="flex")},className:"w-full h-full object-cover transition-all duration-1000 group-hover:scale-110 grayscale-[0.2] group-hover:grayscale-0"}),u.jsx("div",{"data-vanta-fallback":"event",style:{display:"none"},className:"w-full h-full items-center justify-center bg-zinc-950",children:u.jsx("span",{className:"text-[10px] font-serif italic text-[#d4af37] font-bold",children:"V"})})]}):u.jsx("div",{className:"w-full h-full bg-white/5"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),i.isFeatured&&u.jsx("div",{className:"absolute top-4 right-4 bg-white/10 backdrop-blur-md border border-white/20 px-3 py-1 rounded-full",children:u.jsx("span",{className:"text-[6px] text-white font-black uppercase tracking-widest",children:"RECOMENDADO"})})]}),u.jsxs("div",{className:"px-4",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsx("h3",{className:"text-white text-[13px] font-black uppercase tracking-widest truncate max-w-[70%]",children:i.title}),u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-widest",children:i.startTime})]}),u.jsxs("p",{className:"text-zinc-500 text-[9px] font-black uppercase tracking-wider italic",children:[i.startDate,"  ",i.location]})]})]},i.id)})}):u.jsxs("div",{className:"py-20 text-center border border-dashed border-white/5 rounded-[2.5rem] bg-zinc-950/20 px-8",children:[u.jsx("h4",{className:"text-white text-xs font-black uppercase tracking-widest mb-2",children:"Sincronizao offline"}),u.jsx("p",{className:"text-zinc-700 text-[8px] font-black uppercase tracking-widest leading-loose italic",children:"Aguardando conexo com a rede master."})]}),C8=()=>u.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"h-2 w-24 bg-zinc-900 mx-auto rounded-full"}),u.jsx("div",{className:"aspect-[16/10] w-full rounded-[2.5rem] bg-zinc-900 overflow-hidden relative",children:u.jsx("div",{className:"absolute inset-0 animate-shimmer"})})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"h-2 w-32 bg-zinc-900 mx-auto rounded-full"}),[1,2].map(e=>u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"aspect-[16/9] w-full rounded-[2rem] bg-zinc-900 overflow-hidden relative",children:u.jsx("div",{className:"absolute inset-0 animate-shimmer"})}),u.jsxs("div",{className:"px-2 space-y-2",children:[u.jsx("div",{className:"h-3 w-1/2 bg-zinc-900 rounded-full"}),u.jsx("div",{className:"h-2 w-1/3 bg-zinc-900 rounded-full"})]})]},e))]})]}),T8=({selectedCity:e,onOpenConcierge:t,onEventClick:n,onNavigate:i,events:r,isConfigured:o=!0})=>{const[d,g]=V.useState(0),[x,p]=V.useState(Ac.getItems()),[_,E]=V.useState(Ac.getIsLoaded()),[N,k]=V.useState(!0),[O,L]=V.useState("TODOS"),[P,H]=V.useState(0),[B,j]=V.useState(!1),[F,Y]=V.useState(0),W=V.useRef(null);V.useEffect(()=>{const X=setTimeout(()=>k(!1),800),K=Ac.subscribe(()=>{p(Ac.getItems()),E(Ac.getIsLoaded())});return()=>{clearTimeout(X),K()}},[]);const te=V.useMemo(()=>{const K=r.filter(J=>J.city===e).flatMap(J=>J.vibeTags||[]);return["TODOS",...Array.from(new Set(K)).sort()]},[r,e]),ne=V.useMemo(()=>{let X=r.filter(K=>K.city===e);return O!=="TODOS"&&(X=X.filter(K=>{var J;return(J=K.vibeTags)==null?void 0:J.includes(O)})),X.sort((K,J)=>{if(K.isFeatured&&!J.isFeatured)return-1;if(!K.isFeatured&&J.isFeatured)return 1;const oe=new Date(`${K.startDate}T${K.startTime||"00:00"}`).getTime(),fe=new Date(`${J.startDate}T${J.startTime||"00:00"}`).getTime();return oe-fe})},[r,e,O]),ie=V.useMemo(()=>x.filter(X=>X.city?X.city===e:!0),[x,e]);V.useEffect(()=>{g(0),L("TODOS")},[e]),V.useEffect(()=>{if(ie.length<=1)return;const X=setInterval(()=>{g(K=>(K+1)%ie.length)},5e3);return()=>clearInterval(X)},[ie.length,d]);const _e=X=>{var K;((K=W.current)==null?void 0:K.scrollTop)===0&&Y(X.touches[0].pageY)},Ee=X=>{var oe;if(F===0||B)return;const J=X.touches[0].pageY-F;J>0&&((oe=W.current)==null?void 0:oe.scrollTop)===0&&H(Math.min(J*.4,120))},pe=()=>{P>80&&Ne(),H(0),Y(0)},Ne=()=>{j(!0),window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(50),window.dispatchEvent(new CustomEvent("vanta:refresh")),setTimeout(()=>{j(!1)},2e3)},ue=X=>{if(X.type==="EVENT"&&X.eventId)n(X.eventId);else if(X.type==="LINK"&&X.url)if(X.url==="NAV_MESSAGES")t();else if(X.url==="NAV_MAP")i("map");else if(X.url==="NAV_WALLET")i("wallet");else if(X.url==="NAV_SEARCH")i("search");else if(X.url==="NAV_PROFILE")i("profile");else{if(X.url==="NAV_HOME")return;window.open(X.url,"_blank")}};return N||!_&&r.length===0?u.jsx("div",{className:"p-6 h-full overflow-hidden",children:u.jsx(C8,{})}):u.jsxs("div",{ref:W,onTouchStart:_e,onTouchMove:Ee,onTouchEnd:pe,className:"p-6 relative h-full overflow-y-auto no-scrollbar pb-10 animate-in fade-in duration-700",children:[u.jsxs("div",{className:"absolute top-0 left-0 right-0 flex flex-col items-center justify-center transition-all duration-300 pointer-events-none z-[200]",style:{height:B?"100px":`${P}px`,opacity:B?1:Math.min(P/80,1),marginTop:B?"20px":"0px"},children:[u.jsx("div",{className:`w-10 h-10 rounded-full border border-[#d4af37]/40 bg-black flex items-center justify-center shadow-[0_0_30px_rgba(212,175,55,0.3)] transition-transform ${B?"animate-spin":""}`,children:u.jsx("span",{className:"text-[#d4af37] font-serif italic font-black text-lg",children:"V"})}),u.jsx("span",{className:"text-[6px] text-[#d4af37] font-black uppercase tracking-[0.5em] mt-3 animate-pulse",children:B?"SINCRONIZANDO PROTOCOLO...":"PUXE PARA ATUALIZAR"})]}),u.jsxs("div",{className:"space-y-12 transition-transform duration-300",style:{transform:`translateY(${B?"80px":P>0?`${P*.5}px`:"0px"})`},children:[ie.length>0&&u.jsxs("section",{className:"space-y-6",children:[u.jsx("h2",{className:"text-[10px] font-black text-[#d4af37] uppercase tracking-[0.5em] italic text-center",children:"VANTA INDICA"}),u.jsx(S8,{items:ie,currentSlide:d,onItemClick:ue,onChange:X=>g(X)})]}),te.length>1&&u.jsx("section",{className:"sticky top-0 z-30 py-2 bg-black/80 backdrop-blur-md -mx-6 px-6",children:u.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:te.map(X=>u.jsx("button",{onClick:()=>L(X),className:`px-4 py-2 rounded-full text-[7px] font-black uppercase tracking-widest transition-all whitespace-nowrap border ${O===X?"bg-white text-black border-white shadow-lg":"bg-zinc-900 text-zinc-500 border-white/5"}`,children:X},X))})}),u.jsxs("section",{className:"space-y-8",children:[u.jsx("h2",{className:"text-[10px] font-black text-[#d4af37] uppercase tracking-[0.5em] italic text-center",children:O==="TODOS"?"PRXIMOS EVENTOS":`VIBE: ${O}`}),u.jsx(N8,{events:ne,isConfigured:o,onEventClick:n})]})]}),u.jsxs("button",{onClick:t,className:"fixed right-6 bottom-28 w-14 h-14 bg-black/80 backdrop-blur-2xl border border-white/10 rounded-full flex items-center justify-center text-white shadow-[0_15px_40px_rgba(0,0,0,0.8)] active:scale-90 transition-all z-[120] hover:border-[#d4af37]/40 group","aria-label":"Acionar Concierge",children:[u.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[#d4af37] rounded-full border-2 border-black animate-pulse shadow-[0_0_20px_rgba(212,175,55,0.6)]"}),u.jsx(Ge.Message,{className:"w-5 h-5 text-zinc-400 group-hover:text-[#d4af37] transition-colors"})]})]})};class I8{constructor(){On(this,"listeners",[]);On(this,"userData",{bio:"",avatar:"",gallery:[],isPlus:!1,privacy:{profileInfo:"todos",confirmedEvents:"amigos",messages:"amigos"},confirmedEventIds:[]});On(this,"friendships",{})}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notify(){this.listeners.forEach(t=>t())}updateProfile(t){this.userData={...this.userData,...t},this.notify()}confirmEvent(t){this.userData.confirmedEventIds.includes(t)||(this.userData.confirmedEventIds.push(t),this.notify())}updateFriendship(t,n){this.friendships[t]=n,this.notify()}}const Dc=new I8,F3=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e);async function R8(e,t){if(!Q||!F3(t))return null;try{const{data:n,error:i}=await Q.from("event_rsvps").select("status").eq("event_id",e).eq("user_id",t).maybeSingle();if(i)throw i;return n?n.status:null}catch{return null}}async function k8(e,t){if(!Q)throw new Error("Supabase no configurado.");if(!F3(t)){console.error("[VANTA_SYNC] Tentativa de RSVP com ID invlido detectada e bloqueada:",t);return}const{error:n}=await Q.from("event_rsvps").upsert({event_id:e,user_id:t,status:"going",updated_at:new Date().toISOString()},{onConflict:"event_id,user_id"});if(n)throw n}const O8=({event:e,currentUser:t,onClose:n,onSuccess:i})=>{var x;const[r,o]=V.useState(!1),d=["female","feminino","f","woman","mulher"].includes(((x=t.gender)==null?void 0:x.toLowerCase())||""),g=async()=>{o(!0);try{await B3({userId:t.id,eventId:e.id,variationId:"vip_benefit",source:"benefit"}),i()}catch(p){console.error("[VIP INVITE] Erro ao aceitar convite:",p)}finally{o(!1)}};return u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-8 animate-in fade-in duration-700",children:u.jsxs("div",{className:"w-full max-w-sm bg-zinc-950 border border-[#d4af37]/30 rounded-[3.5rem] p-10 flex flex-col items-center text-center space-y-10 shadow-[0_0_100px_rgba(212,175,55,0.2)] relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#d4af37] to-transparent"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("span",{className:"text-[10px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"VOCE  NOSSA (O) CONVIDADO"}),u.jsxs("h2",{className:"text-4xl font-serif italic text-white tracking-tighter uppercase leading-tight",children:[t.fullName,", voc  ",d?"nossa convidada":"nosso convidado"," especial."]})]}),u.jsxs("div",{className:"w-full aspect-video rounded-3xl overflow-hidden border border-white/10 relative",children:[u.jsx("img",{src:e.image,className:"w-full h-full object-cover brightness-50",alt:""}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 bg-black/40",children:[u.jsx("h3",{className:"text-white text-lg font-serif italic uppercase tracking-tighter",children:e.title}),u.jsxs("p",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-widest mt-2",children:[e.startDate,"  ",e.location]})]})]}),u.jsxs("div",{className:"space-y-4 w-full",children:[u.jsxs("p",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-[0.3em] leading-loose",children:["CURTA ",e.title.toUpperCase()," POR NOSSA CONTA.",u.jsx("br",{}),"CONVITE VIP LIBERADO NA CARTEIRA."]}),u.jsx("button",{onClick:g,disabled:r,className:"w-full py-6 bg-white text-black text-[12px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all disabled:opacity-50",children:r?"GERANDO ACESSO...":"GARANTIR CONVITE VIP"}),u.jsx("button",{onClick:n,disabled:r,className:"text-[9px] text-zinc-700 font-black uppercase tracking-widest hover:text-zinc-500 transition-colors",children:"Agora no, obrigado"})]})]})})},M8=({title:e,city:t,state:n,image:i,isRestricted:r,onBack:o})=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"sticky top-0 z-[210] p-6 flex items-center justify-between safe-top",children:[u.jsx("button",{onClick:o,className:"w-12 h-12 rounded-full bg-black/50 backdrop-blur-xl border border-white/10 flex items-center justify-center text-white active:scale-90 transition-all",children:u.jsx(Ge.ArrowLeft,{className:"w-5 h-5"})}),u.jsx("div",{className:"px-4 py-2 bg-black/50 backdrop-blur-xl border border-white/10 rounded-full",children:u.jsx("span",{className:"text-[8px] font-black text-[#d4af37] uppercase tracking-[0.3em]",children:"Sesso"})}),u.jsx("div",{className:"w-12"})]}),u.jsxs("div",{className:"relative w-full aspect-square md:aspect-video -mt-24",children:[u.jsx("img",{src:i,className:"w-full h-full object-cover",alt:""}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"}),r&&u.jsx("div",{className:"absolute inset-0 bg-red-900/10 backdrop-grayscale flex items-center justify-center",children:u.jsx("div",{className:"px-4 py-2 bg-red-600 rounded-full shadow-2xl",children:u.jsx("span",{className:"text-[8px] font-black text-white uppercase tracking-widest",children:"Aura de Restrio"})})})]}),u.jsxs("div",{className:"px-8 -mt-20 relative z-10 space-y-2",children:[u.jsxs("span",{className:"text-[9px] font-black text-[#d4af37] uppercase tracking-[0.4em]",children:[t,"  ",n]}),u.jsx("h1",{className:"text-5xl font-serif italic text-white tracking-tighter leading-none uppercase",children:e})]})]}),D8=({confirmedFriends:e,presenceMap:t,onMemberClick:n})=>e.length===0?null:u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-[#d4af37]/20 rounded-3xl space-y-4 shadow-[0_0_40px_rgba(212,175,55,0.05)]",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.3em] block",children:"Amigos nesta sesso"}),t.size>0&&u.jsx("span",{className:"px-2 py-0.5 bg-[#d4af37]/10 rounded-full text-[5px] text-[#d4af37] font-black uppercase tracking-widest animate-pulse",children:"Ativo na Noite"})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("div",{className:"flex -space-x-3 overflow-hidden",children:e.map(i=>{const r=t.has(i.id);return u.jsx("button",{onClick:()=>n(i.id),className:`w-11 h-11 rounded-full border-2 overflow-hidden bg-zinc-800 transition-all active:scale-90 ${r?"border-[#d4af37] z-10 shadow-[0_0_15px_rgba(212,175,55,0.4)]":"border-black"}`,children:u.jsx(Kn,{src:i.avatar_url,gender:i.gender})},i.id)})})})]}),L8=({isRestricted:e,isConfirmed:t,onShowTickets:n,onViewTicket:i})=>u.jsx("div",{className:"pt-4",children:e?u.jsxs("div",{className:"p-8 bg-zinc-950 border border-red-900/20 rounded-[2.5rem] text-center space-y-4",children:[u.jsx("span",{className:"text-[10px] text-red-500 font-black uppercase tracking-[0.4em]",children:"Protocolo Interrompido"}),u.jsx("p",{className:"text-[9px] text-zinc-600 font-medium uppercase tracking-widest leading-relaxed italic",children:'"MEMBRO SOB JURISDIO DO CONSELHO. AS FUNES DE AQUISIO E RSVP FORAM SUSPENSAS POR TEMPO INDETERMINADO."'})]}):t?u.jsxs("div",{className:"p-8 bg-emerald-500/10 border border-emerald-500/20 rounded-[2.5rem] flex flex-col items-center text-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center text-black",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:u.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white text-[11px] font-black uppercase tracking-widest",children:"Sua Presena est Confirmada"}),u.jsx("p",{className:"text-zinc-500 text-[8px] font-black uppercase tracking-widest mt-1",children:"Acesso disponvel na sua carteira digital."})]}),u.jsx("button",{onClick:i,className:"text-[8px] text-zinc-700 font-black uppercase tracking-widest border-b border-zinc-800 pb-1",children:"Ver Ticket na Carteira"})]}):u.jsx("button",{onClick:n,className:"w-full py-6 bg-white text-black text-[12px] font-black uppercase rounded-full shadow-[0_20px_50px_rgba(255,255,255,0.1)] active:scale-95 transition-all",children:"Garantir Acesso"})}),P8=({batches:e,salesCounts:t,isLoading:n,onClose:i,onConfirm:r})=>{const o=d=>{Fe.confirm({title:"Aquisio de Acesso",message:"Confirmar compra?",confirmLabel:"Sim, Confirmar",onConfirm:()=>r(d)})};return u.jsx("div",{className:"fixed inset-0 z-[1000] bg-black/90 backdrop-blur-2xl flex items-end animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full bg-zinc-950 rounded-t-[3.5rem] border-t border-white/10 p-10 space-y-10 animate-in slide-in-from-bottom duration-500 max-h-[80vh] overflow-y-auto no-scrollbar",children:[u.jsxs("header",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"CATEGORIAS DISPONVEIS"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Escolha seu Acesso"})]}),u.jsx("button",{onClick:i,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-zinc-500",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current rotate-45",children:u.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]}),u.jsx("div",{className:"space-y-4",children:e.map(d=>u.jsxs("div",{className:"space-y-3",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:d.name}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:d.variations.map(g=>{const x=t[g.id]||0,p=g.limit-x,_=p<=0;return u.jsxs("button",{disabled:_||n,onClick:()=>o(g),className:`p-6 rounded-[2.5rem] border text-left flex items-center justify-between transition-all group ${_?"bg-zinc-950 border-white/5 opacity-40 grayscale":"bg-zinc-900/60 border-white/5 hover:border-[#d4af37]/30 hover:bg-zinc-900 active:scale-[0.98]"}`,children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:g.area}),u.jsxs("span",{className:"text-[7px] text-zinc-500 uppercase font-black",children:[" ",g.gender]})]}),u.jsx("span",{className:"text-[9px] text-[#d4af37] font-black uppercase tracking-widest",children:_?"ESGOTADO":`R$ ${g.price.toLocaleString("pt-BR")}`})]}),!_&&u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-black flex items-center justify-center group-hover:scale-110 transition-transform",children:u.jsx(Ge.Plus,{className:"w-4 h-4"})}),u.jsxs("span",{className:"text-[6px] text-zinc-700 font-black uppercase",children:["ltimas ",p," vagas"]})]})]},g.id)})})]},d.id))})]})})},j8=[{id:"u1",fullName:"Julia Costa",instagramHandle:"juju.costa",avatarUrl:""},{id:"u2",fullName:"Marcos Silva",instagramHandle:"marcos.s",avatarUrl:""},{id:"u3",fullName:"Beatriz Almeida",instagramHandle:"bia.almeida",avatarUrl:""},{id:"u4",fullName:"Rafael Torres",instagramHandle:"rafa.torres",avatarUrl:""},{id:"u5",fullName:"Camila Rocha",instagramHandle:"camila.r",avatarUrl:""}],B8=({event:e,currentUser:t,onClose:n})=>{const[i,r]=V.useState(!1),[o,d]=V.useState(!1),[g,x]=V.useState(""),p={id:e.communityId,name:"COMUNIDADE VANTA",logo:e.image,description:"Espao exclusivo de conexes e experincias de alto nvel.",followers:1240},_=V.useMemo(()=>{const L=Ir.getAll();return new Set(Object.keys(L).filter(P=>L[P]==="friends"))},[]),E=V.useMemo(()=>{let L=[...j8];return i&&L.unshift({id:t.id,fullName:t.fullName,instagramHandle:t.instagram,avatarUrl:t.avatar}),L},[i,t]),N=V.useMemo(()=>{const L=E.length;if(L===0)return"Seja o primeiro a curtir";const P=E.filter(H=>_.has(H.id)&&H.id!==t.id);return i?L===1?"Curtido por voc":P.length>0?`Curtido por voc, @${P[0].instagramHandle} e outros ${L-2>0?L-2:""}`.replace(/ e outros $/,""):`Curtido por voc e outros ${L-1}`:P.length>0?P.length===1?`Curtido por @${P[0].instagramHandle} e outros ${L-1}`:`Curtido por @${P[0].instagramHandle}, @${P[1].instagramHandle} e outros ${L-2}`:`Curtido por @${E[0].instagramHandle} e outros ${L-1}`},[i,E,_]),k=V.useMemo(()=>{let L=E;if(g.trim()){const P=g.toLowerCase();L=L.filter(H=>H.fullName.toLowerCase().includes(P)||H.instagramHandle.toLowerCase().includes(P))}return L.sort((P,H)=>{const B=_.has(P.id)?1:0,j=_.has(H.id)?1:0,F=P.id===t.id?2:0;return(H.id===t.id?2:0)+j-(F+B)})},[E,g,_,t]),O=L=>{Vs.setOpenMemberProfile(L)};return u.jsxs("div",{className:"fixed inset-0 z-[3000] bg-black animate-in slide-in-from-right duration-500 overflow-y-auto no-scrollbar",children:[u.jsxs("div",{className:"sticky top-0 z-50 p-6 flex items-center justify-between bg-black/80 backdrop-blur-md border-b border-white/5 safe-top",children:[u.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-zinc-500",children:u.jsx(Ge.ArrowLeft,{className:"w-5 h-5"})}),u.jsx("span",{className:"text-[8px] font-black text-[#d4af37] uppercase tracking-[0.3em]",children:"PERFIL DA COMUNIDADE"}),u.jsx("div",{className:"w-10"})]}),u.jsxs("div",{className:"flex flex-col items-center pt-10 px-8 pb-32 space-y-8",children:[u.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[u.jsx("div",{className:"w-32 h-32 rounded-[2.5rem] border-2 border-[#d4af37]/30 p-1 overflow-hidden bg-zinc-900 shadow-[0_0_40px_rgba(212,175,55,0.15)]",children:u.jsx("img",{src:p.logo,className:"w-full h-full object-cover rounded-[2rem]",alt:""})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h2",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter",children:p.name}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs("span",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest",children:[p.followers," SEGUIDORES"]}),u.jsx("span",{className:"text-[#d4af37] text-[10px]",children:"Verify "})]})]})]}),u.jsxs("div",{className:"w-full bg-zinc-900/40 border border-white/5 rounded-[2rem] p-4 flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>r(!i),className:`flex items-center gap-3 px-6 py-3 rounded-full transition-all active:scale-95 ${i?"bg-[#d4af37] text-black":"bg-black border border-white/10 text-white"}`,children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:i?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})}),u.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:i?"CURTIDO":"CURTIR"})]}),u.jsxs("button",{onClick:()=>d(!0),className:"flex-1 flex justify-end items-center gap-3 active:opacity-60",children:[u.jsx("span",{className:"text-[8px] text-zinc-400 font-black uppercase tracking-widest text-right max-w-[120px] truncate",children:N}),u.jsx("div",{className:"flex -space-x-2",children:E.slice(0,2).map((L,P)=>u.jsx("div",{className:"w-6 h-6 rounded-full border border-black overflow-hidden bg-zinc-800",children:u.jsx(Kn,{src:L.avatarUrl,alt:L.fullName})},P))})]})]}),u.jsx("div",{className:"w-full text-center",children:u.jsx("p",{className:"text-[10px] text-zinc-400 font-medium uppercase tracking-widest leading-loose",children:p.description})}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[u.jsx("div",{className:"aspect-square rounded-3xl bg-zinc-900 border border-white/5"}),u.jsx("div",{className:"aspect-square rounded-3xl bg-zinc-900 border border-white/5"})]})]}),o&&u.jsxs("div",{className:"fixed inset-0 z-[3100] bg-black/95 backdrop-blur-xl flex flex-col animate-in slide-in-from-bottom duration-300",children:[u.jsxs("header",{className:"p-6 border-b border-white/5 flex items-center justify-between bg-black/50",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:"COMUNIDADE"}),u.jsx("h3",{className:"text-xl font-serif italic text-white uppercase tracking-tighter",children:"Curtidas"})]}),u.jsx("button",{onClick:()=>d(!1),className:"w-10 h-10 bg-zinc-900 rounded-full border border-white/10 flex items-center justify-center text-zinc-500 active:scale-90",children:u.jsx("span",{className:"text-[10px] font-black",children:"X"})})]}),u.jsx("div",{className:"p-6 border-b border-white/5",children:u.jsxs("div",{className:"relative",children:[u.jsx(Ge.Search,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),u.jsx("input",{type:"text",value:g,onChange:L=>x(L.target.value),placeholder:"BUSCAR MEMBRO...",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl py-4 pl-12 pr-6 text-[9px] text-white uppercase tracking-widest outline-none focus:border-[#d4af37]/30"})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4",children:k.length>0?k.map(L=>{const P=_.has(L.id),H=L.id===t.id;return u.jsxs("button",{onClick:()=>O(L.id),className:"w-full flex items-center gap-4 p-4 bg-zinc-900/40 border border-white/5 rounded-[2rem] hover:bg-white/5 transition-all active:scale-95 text-left",children:[u.jsx("div",{className:`w-12 h-12 rounded-full border p-0.5 bg-black overflow-hidden shrink-0 ${P||H?"border-[#d4af37]":"border-white/10"}`,children:u.jsx(Kn,{src:L.avatarUrl})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"text-[10px] font-black text-white uppercase truncate",children:L.fullName}),H&&u.jsx("span",{className:"text-[5px] bg-[#d4af37] text-black px-1.5 py-0.5 rounded-full font-black",children:"VOC"}),P&&!H&&u.jsx("span",{className:"text-[5px] bg-[#d4af37]/10 text-[#d4af37] px-1.5 py-0.5 rounded-full font-black border border-[#d4af37]/20",children:"AMIGO"})]}),u.jsxs("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest",children:["@",L.instagramHandle]})]}),u.jsx(Ge.ArrowLeft,{className:"w-3 h-3 text-zinc-600 rotate-180"})]},L.id)}):u.jsx("div",{className:"py-20 text-center opacity-30",children:u.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"Nenhum membro encontrado."})})})]})]})},U8=({event:e,onBack:t,currentUser:n,onRequireAuth:i})=>{const[r,o]=V.useState(Dc.userData.confirmedEventIds.includes(e.id)),[d,g]=V.useState(null),[x,p]=V.useState(!1),[_,E]=V.useState(!1),[N,k]=V.useState({}),[O,L]=V.useState([]),[P,H]=V.useState(new Set),[B,j]=V.useState(!1),[F,Y]=V.useState(!1),W=V.useRef(null),te=!!(n!=null&&n.isGloballyRestricted);V.useEffect(()=>{W.current&&(W.current.scrollTop=0)},[e.id]),V.useEffect(()=>{const Ee=async()=>{if(!Q||!n)return;const{data:{user:ue}}=await Q.auth.getUser();ue&&(g(ue.id),await R8(e.id,ue.id)==="going"&&o(!0))},pe=async()=>{const ue=await P3(e.id);k(ue)};Ee(),pe(),Vs.consumeTriggerVipInvite()===e.id&&n&&!te&&E(!0)},[e.id,n,te]),V.useEffect(()=>{(async()=>{if(!Q||!n)return;const pe=Object.entries(Ir.getAll()).filter(([ue,X])=>X==="friends").map(([ue])=>ue);if(pe.length===0)return;const{data:Ne}=await Q.from("event_rsvps").select("user_id, profiles(id, full_name, avatar_url, gender)").eq("event_id",e.id).in("user_id",pe);if(Ne){L(Ne.map(X=>X.profiles));const{data:ue}=await Q.from("event_rsvps").select("user_id, events(start_at, end_at)").eq("status","going").in("user_id",pe);if(ue){const X=new Date,K=ue.filter(J=>{const oe=new Date(J.events.start_at),fe=J.events.end_at?new Date(J.events.end_at):new Date(oe.getTime()+480*60*1e3);return X>=oe&&X<=fe}).map(J=>J.user_id);H(new Set(K))}}})()},[e.id,n]);const ne=async Ee=>{if(te)return;if(!n)return i==null?void 0:i("Ingressos");const pe=d||(n==null?void 0:n.id);if(pe){p(!0);try{const Ne=await B3({userId:pe,eventId:e.id,variationId:Ee.id,source:"purchase",limit:Ee.limit});if(!Ne.success){Fe.toast("error","Indisponvel",Ne.message||"Lote esgotado.");return}await k8(e.id,pe),Dc.confirmEvent(e.id),o(!0),j(!1),Fe.toast("success","Acesso Garantido","Seu ticket est na carteira.")}catch{Fe.toast("error","Erro","Falha ao processar reserva.")}finally{p(!1)}}},ie=()=>{if(!n){i==null||i("Comunidade");return}Y(!0)},_e=e.dressCode||e.lineup||e.entryTips;return u.jsxs("div",{ref:W,className:"fixed inset-0 z-[200] bg-black overflow-y-auto no-scrollbar animate-in slide-in-from-right duration-500 pb-32",children:[u.jsx(M8,{title:e.title,city:e.city,state:e.state,image:e.image,isRestricted:te,onBack:t}),u.jsxs("div",{className:"px-8 mt-8 relative z-10 space-y-8",children:[u.jsx("div",{className:"flex justify-center",children:u.jsxs("button",{onClick:ie,className:"px-6 py-2 rounded-full border border-white/10 bg-zinc-900/50 text-[8px] font-black uppercase tracking-[0.2em] text-zinc-400 hover:text-white hover:bg-zinc-900 transition-all flex items-center gap-2",children:[u.jsx("span",{children:"Ver perfil comunidade"}),u.jsx("svg",{viewBox:"0 0 24 24",className:"w-3 h-3 fill-current",children:u.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]})}),u.jsx(D8,{confirmedFriends:O,presenceMap:P,onMemberClick:Ee=>Vs.setOpenMemberProfile(Ee)}),u.jsx("div",{className:"space-y-4",children:u.jsx("p",{className:"text-zinc-400 text-[11px] leading-relaxed uppercase tracking-wide",children:e.description})}),_e&&u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-white/5 rounded-[2.5rem] space-y-5 shadow-lg",children:[u.jsx("h4",{className:"text-[9px] font-black text-[#d4af37] uppercase tracking-[0.3em] px-2 italic",children:"Protocolo Operacional"}),u.jsxs("div",{className:"grid gap-4",children:[e.dressCode&&u.jsxs("div",{className:"flex items-start gap-4 p-3 rounded-2xl hover:bg-white/5 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-900 flex items-center justify-center shrink-0 border border-white/5",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest block mb-0.5",children:"Dress Code"}),u.jsx("p",{className:"text-[10px] text-white font-medium uppercase",children:e.dressCode})]})]}),e.lineup&&u.jsxs("div",{className:"flex items-start gap-4 p-3 rounded-2xl hover:bg-white/5 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-900 flex items-center justify-center shrink-0 border border-white/5",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest block mb-0.5",children:"Line-Up"}),u.jsx("p",{className:"text-[10px] text-white font-medium uppercase",children:e.lineup})]})]}),e.entryTips&&u.jsxs("div",{className:"flex items-start gap-4 p-3 rounded-2xl hover:bg-white/5 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-900 flex items-center justify-center shrink-0 border border-white/5",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-widest block mb-0.5",children:"Dicas de Acesso"}),u.jsx("p",{className:"text-[10px] text-white font-medium uppercase",children:e.entryTips})]})]})]})]}),u.jsx(L8,{isRestricted:te,isConfirmed:r,onShowTickets:()=>j(!0),onViewTicket:()=>Dc.updateProfile({})})]}),B&&u.jsx(P8,{batches:e.batches,salesCounts:N,isLoading:x,onClose:()=>j(!1),onConfirm:ne}),_&&!te&&u.jsx(O8,{event:e,currentUser:n,onClose:()=>E(!1),onSuccess:()=>{E(!1),o(!0)}}),F&&n&&u.jsx(B8,{event:e,currentUser:n,onClose:()=>Y(!1)})]})},F8=({localData:e,setLocalData:t,isSaving:n,onCancel:i,onSave:r,pendingAvatarBlob:o,pendingGalleryBlobs:d,handleAvatarFileChange:g,handleGalleryFileChange:x,handleGalleryPhotoClick:p,removePhoto:_,setAsProfilePicture:E,fileInputRef:N,galleryFileInputRef:k,onLogout:O})=>{const L=()=>{Fe.confirm({title:"Atualizar Dados",message:"Confirmar atualizao de dados biomtricos e cadastrais?",confirmLabel:"Confirmar",onConfirm:r})};return u.jsxs("div",{className:"fixed inset-0 z-[500] w-full h-full bg-black p-8 pt-20 pb-32 animate-in fade-in duration-300 overflow-y-auto no-scrollbar",children:[u.jsxs("header",{className:"flex justify-between items-center mb-12",children:[u.jsx("button",{onClick:i,className:"text-zinc-500 text-[10px] font-black uppercase tracking-widest disabled:opacity-20",disabled:n,children:"Cancelar"}),u.jsx("h2",{className:"text-[11px] font-black text-white uppercase tracking-[0.4em]",children:"Editar Perfil"}),u.jsx("button",{onClick:L,disabled:n,className:"text-[#d4af37] text-[10px] font-black uppercase tracking-widest disabled:animate-pulse",children:n?"Sincronizando...":"Salvar"})]}),u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsxs("div",{className:"w-24 h-24 rounded-full border border-white/10 relative overflow-hidden bg-zinc-900",children:[u.jsx(Kn,{src:e.avatar,gender:e.gender,alt:"Profile"}),u.jsx("button",{onClick:()=>{var P;return(P=N.current)==null?void 0:P.click()},className:"absolute inset-0 bg-black/40 flex items-center justify-center transition-opacity opacity-0 hover:opacity-100",disabled:n,children:u.jsx(Ge.Plus,{className:"w-5 h-5 text-white"})}),u.jsx("input",{type:"file",ref:N,className:"hidden",accept:"image/*",onChange:g})]}),u.jsx("span",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:o?"IMAGEM PRONTA PARA SALVAR":"Mudar Foto de Perfil"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Biografia (Max 400)"}),u.jsx("textarea",{value:e.bio,onChange:P=>t({...e,bio:P.target.value.slice(0,400)}),className:"w-full bg-zinc-900 border border-white/5 rounded-[2rem] p-6 text-[11px] text-white outline-none focus:border-white/20 h-32 resize-none uppercase",placeholder:"CONTE-NOS MAIS SOBRE VOC...",disabled:n})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col gap-1 ml-4",children:u.jsx("label",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest",children:"Galeria do Membro (Pr-visualizao Local)"})}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsx("input",{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:x}),[0,1,2,3,4,5].map(P=>{const H=e.gallery[P],B=H&&H===e.avatar,j=!!d[P];return u.jsx("div",{className:`aspect-square bg-zinc-900 border ${B?"border-[#d4af37]/50 shadow-[0_0_10px_rgba(212,175,55,0.2)]":"border-white/5"} rounded-2xl overflow-hidden relative group transition-all`,children:H?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:H,className:"w-full h-full object-cover",alt:`Gallery ${P}`}),u.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>_(P),className:"w-6 h-6 bg-black/60 backdrop-blur-md rounded-full flex items-center justify-center border border-white/5",children:u.jsx(Ge.Trash,{className:"w-3 h-3 text-red-500"})}),u.jsx("button",{onClick:()=>E(H),className:`w-6 h-6 ${B?"bg-[#d4af37] text-black":"bg-black/60 text-[#d4af37]"} backdrop-blur-md rounded-full flex items-center justify-center border border-white/5 transition-colors`,children:u.jsx("span",{className:"text-[10px]",children:""})})]}),j&&u.jsx("div",{className:"absolute bottom-1 left-1 w-2 h-2 bg-[#d4af37] rounded-full animate-pulse"}),u.jsx("button",{onClick:()=>p(P),className:"absolute inset-0 z-0"})]}):u.jsx("button",{onClick:()=>p(P),className:"w-full h-full flex items-center justify-center opacity-20",children:u.jsx(Ge.Plus,{className:"w-4 h-4 text-white"})})},P)})]})]}),u.jsxs("div",{className:"space-y-6 pt-6 border-t border-white/5",children:[u.jsx("h3",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-[0.3em] mb-4",children:"Privacidade"}),[{id:"profileInfo",label:"Quem v meu perfil?"},{id:"confirmedEvents",label:"Quem v meus eventos?"},{id:"messages",label:"Quem pode me enviar msg?"}].map(P=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("span",{className:"text-[8px] text-zinc-700 font-black uppercase ml-4",children:P.label}),u.jsx("div",{className:"flex bg-zinc-950 rounded-full p-1 border border-white/5",children:["todos","amigos","ninguem"].map(H=>u.jsx("button",{onClick:()=>t({...e,privacy:{...e.privacy,[P.id]:H}}),className:`flex-1 py-2 text-[7px] font-black uppercase tracking-widest rounded-full transition-all ${e.privacy[P.id]===H?"bg-white text-black":"text-zinc-600"}`,disabled:n,children:H},H))})]},P.id))]}),u.jsx("div",{className:"pt-12 space-y-4 border-t border-red-900/10",children:u.jsx("button",{onClick:()=>prompt("Para confirmar, digite SENHA:")&&O(),className:"w-full py-5 border border-red-900/30 text-red-500 text-[9px] font-black uppercase tracking-widest rounded-full",children:"Excluir Conta Permanentemente"})})]}),n&&u.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-[11000] flex flex-col items-center justify-center space-y-4",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-[#d4af37]/20 border-t-[#d4af37] rounded-full animate-spin"}),u.jsx("p",{className:"text-[10px] text-white font-black uppercase tracking-[0.4em] animate-pulse",children:"Sincronizando Mdia..."})]})]})},z8=({embedMode:e,lockoutTimestamp:t,timeLeft:n,password:i,setPassword:r,isVerifying:o,onUnlock:d})=>u.jsx("div",{className:`flex-1 flex flex-col items-center justify-center animate-in fade-in duration-500 p-8 relative overflow-hidden ${e?"min-h-[400px] w-full bg-zinc-900/10 rounded-[2rem] border border-white/5":"bg-black h-full"}`,children:u.jsxs("div",{className:"w-full max-w-xs space-y-8 text-center relative z-10",children:[u.jsx("div",{className:`w-20 h-20 rounded-full border flex items-center justify-center mx-auto mb-6 transition-all duration-500 ${t?"bg-red-500/10 border-red-500 animate-pulse":"bg-zinc-900 border-white/5"}`,children:u.jsx("svg",{viewBox:"0 0 24 24",className:`w-8 h-8 ${t?"fill-red-500":"text-[#d4af37] fill-current"}`,children:u.jsx("path",{d:"M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-9h-1V6a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2zM9 6a3 3 0 1 1 6 0v2H9V6z"})})}),u.jsx("h3",{className:`text-2xl font-serif italic uppercase tracking-tighter ${t?"text-red-500":"text-white"}`,children:t?"Carteira Bloqueada":"Acesso Restrito"}),t?u.jsx("div",{className:"text-3xl font-mono text-red-500 font-black tracking-widest",children:n}):u.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u.jsx("input",{type:"password",value:i,onChange:g=>r(g.target.value),placeholder:"SENHA DO APP",className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-center text-white text-[12px] uppercase tracking-[0.5em] outline-none"}),u.jsx("button",{disabled:o||!i,className:"w-full py-5 bg-white text-black font-black rounded-full uppercase text-[10px] tracking-widest",children:o?"Verificando...":"Desbloquear"})]})]})}),V8=({tickets:e,pendingGifts:t,isRestricted:n,onGiftResponse:i,onOpenTicket:r,onStartTransfer:o})=>u.jsxs(u.Fragment,{children:[n&&u.jsxs("div",{className:"p-6 bg-red-600/10 border border-red-600/30 rounded-[2.5rem] flex flex-col items-center text-center gap-2",children:[u.jsx("span",{className:"text-[8px] font-black text-red-500 uppercase tracking-widest",children:"AURA DE RESTRIO ATIVA"}),u.jsx("p",{className:"text-[9px] text-zinc-400 uppercase leading-relaxed",children:"Seus tickets esto congelados at a resoluo do seu dossi no Conselho de tica."})]}),t.length>0&&!n&&u.jsxs("section",{className:"space-y-6",children:[u.jsx("h4",{className:"text-[9px] text-zinc-600 font-black uppercase tracking-[0.4em] px-2 flex items-center gap-2",children:"Protocolos de Entrada"}),t.map(d=>{var g,x,p;return u.jsxs("div",{className:"p-6 bg-zinc-900/40 border border-[#d4af37]/30 rounded-[2.5rem] flex flex-col gap-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full border border-white/10 p-0.5 overflow-hidden",children:u.jsx("img",{src:(g=d.sender)==null?void 0:g.avatar,className:"w-full h-full object-cover rounded-full"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest",children:["PRESENTE DE ",(x=d.sender)==null?void 0:x.name.split(" ")[0]]}),u.jsx("h3",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:(p=d.event)==null?void 0:p.title})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>i(d.id,"accept"),className:"flex-1 py-3 bg-[#d4af37] text-black text-[8px] font-black uppercase rounded-full",children:"Aceitar"}),u.jsx("button",{onClick:()=>i(d.id,"return"),className:"px-6 py-3 border border-red-500/20 text-red-500 text-[8px] font-black uppercase rounded-full",children:"Devolver"})]})]},d.id)})]}),u.jsxs("section",{className:"space-y-6",children:[u.jsx("h4",{className:"text-[9px] text-zinc-600 font-black uppercase tracking-[0.4em] px-2",children:"Prximas Sesses"}),e.map(d=>{var g,x,p,_;return u.jsxs("div",{className:`w-full p-6 bg-zinc-950 border border-white/5 rounded-[2.5rem] flex flex-col gap-6 relative overflow-hidden ${n?"opacity-50 grayscale":""}`,children:[d.source==="complimentary"&&u.jsx("div",{className:"absolute top-0 right-0 px-4 py-1 bg-[#d4af37] text-black text-[6px] font-black uppercase tracking-widest rotate-0 rounded-bl-xl z-20 shadow-xl",children:"CORTESIA - VENDA PROIBIDA"}),u.jsxs("div",{className:"flex items-center gap-5",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shrink-0 border border-white/10 shadow-lg",children:u.jsx("img",{src:(g=d.events)==null?void 0:g.image,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:(x=d.events)==null?void 0:x.title}),u.jsx("p",{className:"text-zinc-500 text-[8px] font-black uppercase tracking-widest mt-1",children:(p=d.events)==null?void 0:p.start_date})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>r(d),className:`flex-[2] py-4 text-[9px] font-black uppercase rounded-full shadow-xl active:scale-95 transition-all ${n?"bg-zinc-800 text-zinc-500 opacity-30":d.guest_cpf?"bg-white text-black":"bg-emerald-500 text-black"}`,children:n?"Acesso Suspenso":d.guest_cpf?"Ver QR Code":"Validar Titularidade"}),((_=d.events)==null?void 0:_.isTransferEnabled)&&u.jsx("button",{onClick:()=>o(d),disabled:n||!d.guest_cpf,className:"flex-1 py-4 bg-zinc-900 border border-white/10 text-white text-[9px] font-black uppercase rounded-full active:scale-95 transition-all disabled:opacity-20",children:"Transferir"})]})]},d.id)}),e.length===0&&u.jsx("div",{className:"py-20 text-center opacity-20 border border-dashed border-white/10 rounded-[2.5rem]",children:u.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"Sua carteira est vazia."})})]})]}),G8=({staffEvents:e,currentUser:t,onGenerateInvite:n,onConfirmPresence:i})=>{const[r,o]=V.useState(!1),[d,g]=V.useState(null),[x,p]=V.useState(!1),_=N=>{g(N),o(!0)},E=async N=>{var k;if(d){p(!0);try{const O=await P5({eventId:d,promoterId:t.id,targetUserId:N.id});O.success?(Fe.toast("success","Convite Enviado",`O acesso VIP j est na carteira de ${(k=N.full_name)==null?void 0:k.split(" ")[0]}.`),o(!1),g(null)):Fe.toast("error","Protocolo Negado",O.message||"Falha ao enviar convite.")}catch{Fe.toast("error","Falha de Rede","No foi possvel concluir o Direct Drop.")}finally{p(!1)}}};return u.jsxs("div",{className:"space-y-10 animate-in slide-in-from-right duration-500",children:[u.jsxs("div",{className:"p-8 bg-zinc-950 border border-[#d4af37]/20 rounded-[3rem] space-y-4",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic text-center block",children:"MINHAS ESCALAS PROTOCOLADAS"}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map(N=>{const k=N.staff.find(j=>j.id===t.id),O=(k==null?void 0:k.status)==="CONFIRMED",L=(k==null?void 0:k.vipQuota)||0,P=N.vipUsed||0,H=N.vipEntered||0,B=Math.max(0,L-P);return u.jsxs("div",{className:`p-6 rounded-[2.5rem] border transition-all ${O?"bg-emerald-500/5 border-emerald-500/20":"bg-zinc-900 border-[#d4af37]/20 shadow-xl scale-[1.02]"}`,children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("h4",{className:"text-white text-[12px] font-black uppercase tracking-widest",children:N.title}),u.jsxs("p",{className:"text-zinc-500 text-[8px] font-black uppercase",children:[N.startDate,"  ",N.startTime]})]}),u.jsx("span",{className:`px-2 py-1 rounded-full text-[6px] font-black uppercase ${O?"bg-emerald-500 text-black":"bg-[#d4af37] text-black animate-pulse"}`,children:O?"CONFIRMADO ":"PENDENTE"})]}),O&&L>0&&u.jsxs("div",{className:"p-4 bg-black/60 rounded-2xl border border-[#d4af37]/20 mb-4 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[7px] text-white font-black uppercase tracking-widest",children:"Cota Cortesia VIP"}),u.jsxs("span",{className:"text-[10px] text-white font-black",children:[P,"/",L]})]}),u.jsx("div",{className:"w-full h-1 bg-zinc-900 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#d4af37]",style:{width:`${P/L*100}%`}})}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("p",{className:"text-[6px] text-zinc-500 uppercase font-black",children:[H," convidados entraram"]}),u.jsxs("p",{className:"text-[6px] text-emerald-500 uppercase font-black",children:[B," envios livres"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(N.id),disabled:B===0,className:"px-4 py-2 bg-zinc-800 text-white text-[7px] font-black uppercase rounded-full border border-white/10 active:scale-95 disabled:opacity-20",children:"Enviar Direto"}),u.jsx("button",{onClick:()=>n(N.id),disabled:B===0,className:"px-4 py-2 bg-white text-black text-[7px] font-black uppercase rounded-full shadow-lg active:scale-95 disabled:opacity-20",children:"Gerar Link"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 bg-black/40 rounded-2xl border border-white/5",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-800 flex items-center justify-center text-[10px]",children:""}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[6px] text-zinc-600 font-black uppercase",children:"Funo"}),u.jsx("span",{className:"text-[9px] text-white font-black uppercase",children:k==null?void 0:k.role})]})]}),!O&&u.jsx("button",{onClick:()=>i(N.id),className:"w-full py-4 bg-white text-black text-[9px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all",children:"Confirmar Presena na Noite"})]},N.id)})})]}),r&&u.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in zoom-in-95",children:u.jsxs("div",{className:"w-full max-sm bg-zinc-950 border border-white/10 rounded-[3rem] p-8 space-y-6 shadow-2xl",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"DIRECT DROP"}),u.jsx("h3",{className:"text-xl font-serif italic text-white uppercase",children:"Enviar VIP"}),u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:"O ingresso ser enviado diretamente para a carteira."})]}),x?u.jsx("div",{className:"py-12 flex justify-center",children:u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):u.jsx(eu,{onSelect:E,placeholder:"BUSCAR MEMBRO...",label:"Destinatrio"}),u.jsx("button",{onClick:()=>{o(!1),g(null)},className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest",disabled:x,children:"Cancelar"})]})})]})};var H8=Object.defineProperty,Bh=Object.getOwnPropertySymbols,z3=Object.prototype.hasOwnProperty,V3=Object.prototype.propertyIsEnumerable,lb=(e,t,n)=>t in e?H8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hm=(e,t)=>{for(var n in t||(t={}))z3.call(t,n)&&lb(e,n,t[n]);if(Bh)for(var n of Bh(t))V3.call(t,n)&&lb(e,n,t[n]);return e},pm=(e,t)=>{var n={};for(var i in e)z3.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&Bh)for(var i of Bh(e))t.indexOf(i)<0&&V3.call(e,i)&&(n[i]=e[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var El;(e=>{const t=class Ot{constructor(x,p,_,E){if(this.version=x,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],x<Ot.MIN_VERSION||x>Ot.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=x*4+17;let N=[];for(let O=0;O<this.size;O++)N.push(!1);for(let O=0;O<this.size;O++)this.modules.push(N.slice()),this.isFunction.push(N.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(_);if(this.drawCodewords(k),E==-1){let O=1e9;for(let L=0;L<8;L++){this.applyMask(L),this.drawFormatBits(L);const P=this.getPenaltyScore();P<O&&(E=L,O=P),this.applyMask(L)}}r(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(x,p){const _=e.QrSegment.makeSegments(x);return Ot.encodeSegments(_,p)}static encodeBinary(x,p){const _=e.QrSegment.makeBytes(x);return Ot.encodeSegments([_],p)}static encodeSegments(x,p,_=1,E=40,N=-1,k=!0){if(!(Ot.MIN_VERSION<=_&&_<=E&&E<=Ot.MAX_VERSION)||N<-1||N>7)throw new RangeError("Invalid value");let O,L;for(O=_;;O++){const j=Ot.getNumDataCodewords(O,p)*8,F=d.getTotalBits(x,O);if(F<=j){L=F;break}if(O>=E)throw new RangeError("Data too long")}for(const j of[Ot.Ecc.MEDIUM,Ot.Ecc.QUARTILE,Ot.Ecc.HIGH])k&&L<=Ot.getNumDataCodewords(O,j)*8&&(p=j);let P=[];for(const j of x){n(j.mode.modeBits,4,P),n(j.numChars,j.mode.numCharCountBits(O),P);for(const F of j.getData())P.push(F)}r(P.length==L);const H=Ot.getNumDataCodewords(O,p)*8;r(P.length<=H),n(0,Math.min(4,H-P.length),P),n(0,(8-P.length%8)%8,P),r(P.length%8==0);for(let j=236;P.length<H;j^=253)n(j,8,P);let B=[];for(;B.length*8<P.length;)B.push(0);return P.forEach((j,F)=>B[F>>>3]|=j<<7-(F&7)),new Ot(O,p,B,N)}getModule(x,p){return 0<=x&&x<this.size&&0<=p&&p<this.size&&this.modules[p][x]}getModules(){return this.modules}drawFunctionPatterns(){for(let _=0;_<this.size;_++)this.setFunctionModule(6,_,_%2==0),this.setFunctionModule(_,6,_%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const x=this.getAlignmentPatternPositions(),p=x.length;for(let _=0;_<p;_++)for(let E=0;E<p;E++)_==0&&E==0||_==0&&E==p-1||_==p-1&&E==0||this.drawAlignmentPattern(x[_],x[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(x){const p=this.errorCorrectionLevel.formatBits<<3|x;let _=p;for(let N=0;N<10;N++)_=_<<1^(_>>>9)*1335;const E=(p<<10|_)^21522;r(E>>>15==0);for(let N=0;N<=5;N++)this.setFunctionModule(8,N,i(E,N));this.setFunctionModule(8,7,i(E,6)),this.setFunctionModule(8,8,i(E,7)),this.setFunctionModule(7,8,i(E,8));for(let N=9;N<15;N++)this.setFunctionModule(14-N,8,i(E,N));for(let N=0;N<8;N++)this.setFunctionModule(this.size-1-N,8,i(E,N));for(let N=8;N<15;N++)this.setFunctionModule(8,this.size-15+N,i(E,N));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let x=this.version;for(let _=0;_<12;_++)x=x<<1^(x>>>11)*7973;const p=this.version<<12|x;r(p>>>18==0);for(let _=0;_<18;_++){const E=i(p,_),N=this.size-11+_%3,k=Math.floor(_/3);this.setFunctionModule(N,k,E),this.setFunctionModule(k,N,E)}}drawFinderPattern(x,p){for(let _=-4;_<=4;_++)for(let E=-4;E<=4;E++){const N=Math.max(Math.abs(E),Math.abs(_)),k=x+E,O=p+_;0<=k&&k<this.size&&0<=O&&O<this.size&&this.setFunctionModule(k,O,N!=2&&N!=4)}}drawAlignmentPattern(x,p){for(let _=-2;_<=2;_++)for(let E=-2;E<=2;E++)this.setFunctionModule(x+E,p+_,Math.max(Math.abs(E),Math.abs(_))!=1)}setFunctionModule(x,p,_){this.modules[p][x]=_,this.isFunction[p][x]=!0}addEccAndInterleave(x){const p=this.version,_=this.errorCorrectionLevel;if(x.length!=Ot.getNumDataCodewords(p,_))throw new RangeError("Invalid argument");const E=Ot.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][p],N=Ot.ECC_CODEWORDS_PER_BLOCK[_.ordinal][p],k=Math.floor(Ot.getNumRawDataModules(p)/8),O=E-k%E,L=Math.floor(k/E);let P=[];const H=Ot.reedSolomonComputeDivisor(N);for(let j=0,F=0;j<E;j++){let Y=x.slice(F,F+L-N+(j<O?0:1));F+=Y.length;const W=Ot.reedSolomonComputeRemainder(Y,H);j<O&&Y.push(0),P.push(Y.concat(W))}let B=[];for(let j=0;j<P[0].length;j++)P.forEach((F,Y)=>{(j!=L-N||Y>=O)&&B.push(F[j])});return r(B.length==k),B}drawCodewords(x){if(x.length!=Math.floor(Ot.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let _=this.size-1;_>=1;_-=2){_==6&&(_=5);for(let E=0;E<this.size;E++)for(let N=0;N<2;N++){const k=_-N,L=(_+1&2)==0?this.size-1-E:E;!this.isFunction[L][k]&&p<x.length*8&&(this.modules[L][k]=i(x[p>>>3],7-(p&7)),p++)}}r(p==x.length*8)}applyMask(x){if(x<0||x>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let _=0;_<this.size;_++){let E;switch(x){case 0:E=(_+p)%2==0;break;case 1:E=p%2==0;break;case 2:E=_%3==0;break;case 3:E=(_+p)%3==0;break;case 4:E=(Math.floor(_/3)+Math.floor(p/2))%2==0;break;case 5:E=_*p%2+_*p%3==0;break;case 6:E=(_*p%2+_*p%3)%2==0;break;case 7:E=((_+p)%2+_*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][_]&&E&&(this.modules[p][_]=!this.modules[p][_])}}getPenaltyScore(){let x=0;for(let N=0;N<this.size;N++){let k=!1,O=0,L=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[N][P]==k?(O++,O==5?x+=Ot.PENALTY_N1:O>5&&x++):(this.finderPenaltyAddHistory(O,L),k||(x+=this.finderPenaltyCountPatterns(L)*Ot.PENALTY_N3),k=this.modules[N][P],O=1);x+=this.finderPenaltyTerminateAndCount(k,O,L)*Ot.PENALTY_N3}for(let N=0;N<this.size;N++){let k=!1,O=0,L=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][N]==k?(O++,O==5?x+=Ot.PENALTY_N1:O>5&&x++):(this.finderPenaltyAddHistory(O,L),k||(x+=this.finderPenaltyCountPatterns(L)*Ot.PENALTY_N3),k=this.modules[P][N],O=1);x+=this.finderPenaltyTerminateAndCount(k,O,L)*Ot.PENALTY_N3}for(let N=0;N<this.size-1;N++)for(let k=0;k<this.size-1;k++){const O=this.modules[N][k];O==this.modules[N][k+1]&&O==this.modules[N+1][k]&&O==this.modules[N+1][k+1]&&(x+=Ot.PENALTY_N2)}let p=0;for(const N of this.modules)p=N.reduce((k,O)=>k+(O?1:0),p);const _=this.size*this.size,E=Math.ceil(Math.abs(p*20-_*10)/_)-1;return r(0<=E&&E<=9),x+=E*Ot.PENALTY_N4,r(0<=x&&x<=2568888),x}getAlignmentPatternPositions(){if(this.version==1)return[];{const x=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(x*2-2))*2;let _=[6];for(let E=this.size-7;_.length<x;E-=p)_.splice(1,0,E);return _}}static getNumRawDataModules(x){if(x<Ot.MIN_VERSION||x>Ot.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*x+128)*x+64;if(x>=2){const _=Math.floor(x/7)+2;p-=(25*_-10)*_-55,x>=7&&(p-=36)}return r(208<=p&&p<=29648),p}static getNumDataCodewords(x,p){return Math.floor(Ot.getNumRawDataModules(x)/8)-Ot.ECC_CODEWORDS_PER_BLOCK[p.ordinal][x]*Ot.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][x]}static reedSolomonComputeDivisor(x){if(x<1||x>255)throw new RangeError("Degree out of range");let p=[];for(let E=0;E<x-1;E++)p.push(0);p.push(1);let _=1;for(let E=0;E<x;E++){for(let N=0;N<p.length;N++)p[N]=Ot.reedSolomonMultiply(p[N],_),N+1<p.length&&(p[N]^=p[N+1]);_=Ot.reedSolomonMultiply(_,2)}return p}static reedSolomonComputeRemainder(x,p){let _=p.map(E=>0);for(const E of x){const N=E^_.shift();_.push(0),p.forEach((k,O)=>_[O]^=Ot.reedSolomonMultiply(k,N))}return _}static reedSolomonMultiply(x,p){if(x>>>8||p>>>8)throw new RangeError("Byte out of range");let _=0;for(let E=7;E>=0;E--)_=_<<1^(_>>>7)*285,_^=(p>>>E&1)*x;return r(_>>>8==0),_}finderPenaltyCountPatterns(x){const p=x[1];r(p<=this.size*3);const _=p>0&&x[2]==p&&x[3]==p*3&&x[4]==p&&x[5]==p;return(_&&x[0]>=p*4&&x[6]>=p?1:0)+(_&&x[6]>=p*4&&x[0]>=p?1:0)}finderPenaltyTerminateAndCount(x,p,_){return x&&(this.finderPenaltyAddHistory(p,_),p=0),p+=this.size,this.finderPenaltyAddHistory(p,_),this.finderPenaltyCountPatterns(_)}finderPenaltyAddHistory(x,p){p[0]==0&&(x+=this.size),p.pop(),p.unshift(x)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(g,x,p){if(x<0||x>31||g>>>x)throw new RangeError("Value out of range");for(let _=x-1;_>=0;_--)p.push(g>>>_&1)}function i(g,x){return(g>>>x&1)!=0}function r(g){if(!g)throw new Error("Assertion error")}const o=class Yn{constructor(x,p,_){if(this.mode=x,this.numChars=p,this.bitData=_,p<0)throw new RangeError("Invalid argument");this.bitData=_.slice()}static makeBytes(x){let p=[];for(const _ of x)n(_,8,p);return new Yn(Yn.Mode.BYTE,x.length,p)}static makeNumeric(x){if(!Yn.isNumeric(x))throw new RangeError("String contains non-numeric characters");let p=[];for(let _=0;_<x.length;){const E=Math.min(x.length-_,3);n(parseInt(x.substring(_,_+E),10),E*3+1,p),_+=E}return new Yn(Yn.Mode.NUMERIC,x.length,p)}static makeAlphanumeric(x){if(!Yn.isAlphanumeric(x))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],_;for(_=0;_+2<=x.length;_+=2){let E=Yn.ALPHANUMERIC_CHARSET.indexOf(x.charAt(_))*45;E+=Yn.ALPHANUMERIC_CHARSET.indexOf(x.charAt(_+1)),n(E,11,p)}return _<x.length&&n(Yn.ALPHANUMERIC_CHARSET.indexOf(x.charAt(_)),6,p),new Yn(Yn.Mode.ALPHANUMERIC,x.length,p)}static makeSegments(x){return x==""?[]:Yn.isNumeric(x)?[Yn.makeNumeric(x)]:Yn.isAlphanumeric(x)?[Yn.makeAlphanumeric(x)]:[Yn.makeBytes(Yn.toUtf8ByteArray(x))]}static makeEci(x){let p=[];if(x<0)throw new RangeError("ECI assignment value out of range");if(x<128)n(x,8,p);else if(x<16384)n(2,2,p),n(x,14,p);else if(x<1e6)n(6,3,p),n(x,21,p);else throw new RangeError("ECI assignment value out of range");return new Yn(Yn.Mode.ECI,0,p)}static isNumeric(x){return Yn.NUMERIC_REGEX.test(x)}static isAlphanumeric(x){return Yn.ALPHANUMERIC_REGEX.test(x)}getData(){return this.bitData.slice()}static getTotalBits(x,p){let _=0;for(const E of x){const N=E.mode.numCharCountBits(p);if(E.numChars>=1<<N)return 1/0;_+=4+N+E.bitData.length}return _}static toUtf8ByteArray(x){x=encodeURI(x);let p=[];for(let _=0;_<x.length;_++)x.charAt(_)!="%"?p.push(x.charCodeAt(_)):(p.push(parseInt(x.substring(_+1,_+3),16)),_+=2);return p}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let d=o;e.QrSegment=o})(El||(El={}));(e=>{(t=>{const n=class{constructor(r,o){this.ordinal=r,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(El||(El={}));(e=>{(t=>{const n=class{constructor(r,o){this.modeBits=r,this.numBitsCharCount=o}numCharCountBits(r){return this.numBitsCharCount[Math.floor((r+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(El||(El={}));var Tc=El;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var q8={L:Tc.QrCode.Ecc.LOW,M:Tc.QrCode.Ecc.MEDIUM,Q:Tc.QrCode.Ecc.QUARTILE,H:Tc.QrCode.Ecc.HIGH},G3=128,H3="L",q3="#FFFFFF",Y3="#000000",X3=!1,W3=1,Y8=4,X8=0,W8=.1;function K3(e,t=0){const n=[];return e.forEach(function(i,r){let o=null;i.forEach(function(d,g){if(!d&&o!==null){n.push(`M${o+t} ${r+t}h${g-o}v1H${o+t}z`),o=null;return}if(g===i.length-1){if(!d)return;o===null?n.push(`M${g+t},${r+t} h1v1H${g+t}z`):n.push(`M${o+t},${r+t} h${g+1-o}v1H${o+t}z`);return}d&&o===null&&(o=g)})}),n.join("")}function $3(e,t){return e.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((r,o)=>o<t.x||o>=t.x+t.w?r:!1))}function K8(e,t,n,i){if(i==null)return null;const r=e.length+n*2,o=Math.floor(t*W8),d=r/t,g=(i.width||o)*d,x=(i.height||o)*d,p=i.x==null?e.length/2-g/2:i.x*d,_=i.y==null?e.length/2-x/2:i.y*d,E=i.opacity==null?1:i.opacity;let N=null;if(i.excavate){let O=Math.floor(p),L=Math.floor(_),P=Math.ceil(g+p-O),H=Math.ceil(x+_-L);N={x:O,y:L,w:P,h:H}}const k=i.crossOrigin;return{x:p,y:_,h:x,w:g,excavation:N,opacity:E,crossOrigin:k}}function $8(e,t){return t!=null?Math.max(Math.floor(t),0):e?Y8:X8}function J3({value:e,level:t,minVersion:n,includeMargin:i,marginSize:r,imageSettings:o,size:d,boostLevel:g}){let x=an.useMemo(()=>{const O=(Array.isArray(e)?e:[e]).reduce((L,P)=>(L.push(...Tc.QrSegment.makeSegments(P)),L),[]);return Tc.QrCode.encodeSegments(O,q8[t],n,void 0,void 0,g)},[e,t,n,g]);const{cells:p,margin:_,numCells:E,calculatedImageSettings:N}=an.useMemo(()=>{let k=x.getModules();const O=$8(i,r),L=k.length+O*2,P=K8(k,d,O,o);return{cells:k,margin:O,numCells:L,calculatedImageSettings:P}},[x,d,o,i,r]);return{qrcode:x,margin:_,cells:p,numCells:E,calculatedImageSettings:N}}var J8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Z8=an.forwardRef(function(t,n){const i=t,{value:r,size:o=G3,level:d=H3,bgColor:g=q3,fgColor:x=Y3,includeMargin:p=X3,minVersion:_=W3,boostLevel:E,marginSize:N,imageSettings:k}=i,L=pm(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=L,H=pm(L,["style"]),B=k==null?void 0:k.src,j=an.useRef(null),F=an.useRef(null),Y=an.useCallback(ue=>{j.current=ue,typeof n=="function"?n(ue):n&&(n.current=ue)},[n]),[W,te]=an.useState(!1),{margin:ne,cells:ie,numCells:_e,calculatedImageSettings:Ee}=J3({value:r,level:d,minVersion:_,boostLevel:E,includeMargin:p,marginSize:N,imageSettings:k,size:o});an.useEffect(()=>{if(j.current!=null){const ue=j.current,X=ue.getContext("2d");if(!X)return;let K=ie;const J=F.current,oe=Ee!=null&&J!==null&&J.complete&&J.naturalHeight!==0&&J.naturalWidth!==0;oe&&Ee.excavation!=null&&(K=$3(ie,Ee.excavation));const fe=window.devicePixelRatio||1;ue.height=ue.width=o*fe;const Se=o/_e*fe;X.scale(Se,Se),X.fillStyle=g,X.fillRect(0,0,_e,_e),X.fillStyle=x,J8?X.fill(new Path2D(K3(K,ne))):ie.forEach(function(ee,ae){ee.forEach(function(ve,Ie){ve&&X.fillRect(Ie+ne,ae+ne,1,1)})}),Ee&&(X.globalAlpha=Ee.opacity),oe&&X.drawImage(J,Ee.x+ne,Ee.y+ne,Ee.w,Ee.h)}}),an.useEffect(()=>{te(!1)},[B]);const pe=hm({height:o,width:o},P);let Ne=null;return B!=null&&(Ne=an.createElement("img",{src:B,key:B,style:{display:"none"},onLoad:()=>{te(!0)},ref:F,crossOrigin:Ee==null?void 0:Ee.crossOrigin})),an.createElement(an.Fragment,null,an.createElement("canvas",hm({style:pe,height:o,width:o,ref:Y,role:"img"},H)),Ne)});Z8.displayName="QRCodeCanvas";var Z3=an.forwardRef(function(t,n){const i=t,{value:r,size:o=G3,level:d=H3,bgColor:g=q3,fgColor:x=Y3,includeMargin:p=X3,minVersion:_=W3,boostLevel:E,title:N,marginSize:k,imageSettings:O}=i,L=pm(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:H,numCells:B,calculatedImageSettings:j}=J3({value:r,level:d,minVersion:_,boostLevel:E,includeMargin:p,marginSize:k,imageSettings:O,size:o});let F=H,Y=null;O!=null&&j!=null&&(j.excavation!=null&&(F=$3(H,j.excavation)),Y=an.createElement("image",{href:O.src,height:j.h,width:j.w,x:j.x+P,y:j.y+P,preserveAspectRatio:"none",opacity:j.opacity,crossOrigin:j.crossOrigin}));const W=K3(F,P);return an.createElement("svg",hm({height:o,width:o,viewBox:`0 0 ${B} ${B}`,ref:n,role:"img"},L),!!N&&an.createElement("title",null,N),an.createElement("path",{fill:g,d:`M0,0 h${B}v${B}H0z`,shapeRendering:"crispEdges"}),an.createElement("path",{fill:x,d:W,shapeRendering:"crispEdges"}),Y)});Z3.displayName="QRCodeSVG";const Q8=({selectedTicket:e,ticketToValidate:t,validationData:n,setValidationData:i,isValidating:r,onCloseSelection:o,onCloseValidation:d,onValidationSubmit:g,isRestricted:x})=>{var p,_,E;return u.jsxs(u.Fragment,{children:[e&&!x&&u.jsx("div",{className:"fixed inset-0 z-[9000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in fade-in duration-300",onClick:o,children:u.jsxs("div",{className:"w-full max-sm bg-zinc-950 border border-white/10 rounded-[3.5rem] p-10 flex flex-col items-center text-center space-y-10",onClick:N=>N.stopPropagation(),children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter",children:(p=e.events)==null?void 0:p.title}),e.source==="complimentary"&&u.jsx("span",{className:"text-[9px] text-[#d4af37] font-black uppercase tracking-[0.3em] bg-[#d4af37]/10 px-4 py-1.5 rounded-full border border-[#d4af37]/30",children:"CORTESIA EXCLUSIVA"})]}),u.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-[0_0_60px_rgba(255,255,255,0.15)] relative",children:u.jsx(Z3,{value:`VANTA_AUTH:${e.hash||e.id}`,size:200})}),u.jsxs("div",{className:"space-y-4 w-full",children:[u.jsxs("div",{className:"bg-black/60 rounded-3xl p-6 border border-white/5 space-y-2",children:[u.jsx("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest",children:"TITULAR VALIDADO"}),u.jsx("h4",{className:"text-white text-lg font-black uppercase tracking-tighter leading-none",children:e.guest_name}),u.jsxs("p",{className:"text-[#d4af37] text-[10px] font-mono tracking-widest",children:["CPF: ***.",(_=e.guest_cpf)==null?void 0:_.slice(3,6),".",(E=e.guest_cpf)==null?void 0:E.slice(6,9),"-**"]})]}),u.jsx("button",{onClick:o,className:"w-full py-6 bg-white text-black text-[11px] font-black uppercase rounded-full shadow-2xl",children:"Fechar"})]})]})}),t&&u.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in zoom-in-95",onClick:d,children:u.jsxs("div",{className:"w-full max-sm bg-zinc-950 border border-emerald-500/20 rounded-[3.5rem] p-10 space-y-8 shadow-2xl relative overflow-hidden",onClick:N=>N.stopPropagation(),children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/5 rounded-full -mr-16 -mt-16 blur-3xl"}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-emerald-500 font-black uppercase tracking-[0.5em] italic",children:"ETAPA OBRIGATRIA"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Validar Titularidade"}),u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:"Para liberar o QR Code, confirme os dados de quem usar este ingresso."})]}),u.jsxs("form",{onSubmit:g,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Nome Completo"}),u.jsx("input",{value:n.name,onChange:N=>i({...n,name:N.target.value}),className:"w-full bg-zinc-900 border border-white/10 rounded-2xl p-5 text-white text-[10px] uppercase outline-none focus:border-emerald-500/30",placeholder:"NOME DO TITULAR"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"CPF (Somente Nmeros)"}),u.jsx("input",{value:n.cpf,onChange:N=>i({...n,cpf:N.target.value.replace(/\D/g,"").slice(0,11)}),className:"w-full bg-zinc-900 border border-white/10 rounded-2xl p-5 text-white text-[10px] uppercase outline-none focus:border-emerald-500/30",placeholder:"00011122233"})]}),u.jsx("button",{disabled:r,className:"w-full py-6 bg-emerald-500 text-black text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all disabled:opacity-50 mt-4",children:r?"Validando...":"Confirmar e Gerar QR"})]})]})})]})};var zc=typeof self<"u"?self:{};function Rd(e,t){e:{for(var n=["CLOSURE_FLAGS"],i=zc,r=0;r<n.length;r++)if((i=i[n[r]])==null){n=null;break e}n=i}return(e=n&&n[e])!=null?e:t}function al(){throw Error("Invalid UTF8")}function cb(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let gh,U1;const e6=typeof TextDecoder<"u";let t6;const n6=typeof TextEncoder<"u";function Q3(e){if(n6)e=(t6||(t6=new TextEncoder)).encode(e);else{let n=0;const i=new Uint8Array(3*e.length);for(let r=0;r<e.length;r++){var t=e.charCodeAt(r);if(t<128)i[n++]=t;else{if(t<2048)i[n++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&r<e.length){const o=e.charCodeAt(++r);if(o>=56320&&o<=57343){t=1024*(t-55296)+o-56320+65536,i[n++]=t>>18|240,i[n++]=t>>12&63|128,i[n++]=t>>6&63|128,i[n++]=63&t|128;continue}r--}t=65533}i[n++]=t>>12|224,i[n++]=t>>6&63|128}i[n++]=63&t|128}}e=n===i.length?i:i.subarray(0,n)}return e}function eE(e){zc.setTimeout((()=>{throw e}),0)}var mm,i6=Rd(610401301,!1),ub=Rd(748402147,!0),sg=Rd(824648567,!0),rg=Rd(824656860,Rd(1,!0));function db(){var e=zc.navigator;return e&&(e=e.userAgent)?e:""}const fb=zc.navigator;function i0(e){return i0[" "](e),e}mm=fb&&fb.userAgentData||null,i0[" "]=function(){};const tE={};let md=null;function s6(e){const t=e.length;let n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);const i=new Uint8Array(n);let r=0;return(function(o,d){function g(p){for(;x<o.length;){const _=o.charAt(x++),E=md[_];if(E!=null)return E;if(!/^[\s\xa0]*$/.test(_))throw Error("Unknown base64 encoding at char: "+_)}return p}nE();let x=0;for(;;){const p=g(-1),_=g(0),E=g(64),N=g(64);if(N===64&&p===-1)break;d(p<<2|_>>4),E!=64&&(d(_<<4&240|E>>2),N!=64&&d(E<<6&192|N))}})(e,(function(o){i[r++]=o})),r!==n?i.subarray(0,r):i}function nE(){if(!md){md={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const i=e.concat(t[n].split(""));tE[n]=i;for(let r=0;r<i.length;r++){const o=i[r];md[o]===void 0&&(md[o]=r)}}}}var r6=typeof Uint8Array<"u",iE=!(!(i6&&mm&&mm.brands.length>0)&&(db().indexOf("Trident")!=-1||db().indexOf("MSIE")!=-1))&&typeof btoa=="function";const hb=/[-_.]/g,a6={"-":"+",_:"/",".":"="};function o6(e){return a6[e]||""}function sE(e){if(!iE)return s6(e);e=hb.test(e)?e.replace(hb,o6):e,e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function ag(e){return r6&&e!=null&&e instanceof Uint8Array}var Vc={};function Al(){return l6||(l6=new Kr(null,Vc))}function og(e){rE(Vc);var t=e.g;return(t=t==null||ag(t)?t:typeof t=="string"?sE(t):null)==null?t:e.g=t}var Kr=class{h(){return new Uint8Array(og(this)||0)}constructor(e,t){if(rE(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let l6,c6;function rE(e){if(e!==Vc)throw Error("illegal external caller")}function aE(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function gm(e){return aE(e=Error(e),"warning"),e}function Gc(e,t){if(e!=null){var n=c6??(c6={}),i=n[e]||0;i>=t||(n[e]=i+1,aE(e=Error(),"incident"),eE(e))}}function tu(){return typeof BigInt=="function"}var nu=typeof Symbol=="function"&&typeof Symbol()=="symbol";function $r(e,t,n=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?n&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t}var u6=$r("jas",void 0,!0),pb=$r(void 0,"0di"),ld=$r(void 0,"1oa"),Gs=$r(void 0,Symbol()),d6=$r(void 0,"0ub"),f6=$r(void 0,"0ubs"),xm=$r(void 0,"0ubsb"),h6=$r(void 0,"0actk"),Hc=$r("m_m","Pa",!0),mb=$r();const oE={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},lE=Object.defineProperties,Ze=nu?u6:"Ga";var Cl;const gb=[];function jd(e,t){nu||Ze in e||lE(e,oE),e[Ze]|=t}function Ci(e,t){nu||Ze in e||lE(e,oE),e[Ze]=t}function Bd(e){return jd(e,34),e}function kd(e){return jd(e,8192),e}Ci(gb,7),Cl=Object.freeze(gb);var qc={};function qs(e,t){return t===void 0?e.h!==Sl&&!!(2&(0|e.v[Ze])):!!(2&t)&&e.h!==Sl}const Sl={};function lg(e,t){if(e!=null){if(typeof e=="string")e=e?new Kr(e,Vc):Al();else if(e.constructor!==Kr)if(ag(e))e=e.length?new Kr(new Uint8Array(e),Vc):Al();else{if(!t)throw Error();e=void 0}}return e}class xb{constructor(t,n,i){this.g=t,this.h=n,this.l=i}next(){const t=this.g.next();return t.done||(t.value=this.h.call(this.l,t.value)),t}[Symbol.iterator](){return this}}var p6=Object.freeze({});function cE(e,t,n){const i=128&t?0:-1,r=e.length;var o;(o=!!r)&&(o=(o=e[r-1])!=null&&typeof o=="object"&&o.constructor===Object);const d=r+(o?-1:0);for(t=128&t?1:0;t<d;t++)n(t-i,e[t]);if(o){e=e[r-1];for(const g in e)!isNaN(g)&&n(+g,e[g])}}var uE={};function iu(e){return 128&e?uE:void 0}function s0(e){return e.Na=!0,e}var m6=s0((e=>typeof e=="number")),yb=s0((e=>typeof e=="string")),g6=s0((e=>typeof e=="boolean")),r0=typeof zc.BigInt=="function"&&typeof zc.BigInt(0)=="bigint";function Hs(e){var t=e;if(yb(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(m6(t)&&!Number.isSafeInteger(t))throw Error(String(t));return r0?BigInt(e):e=g6(e)?e?"1":"0":yb(e)?e.trim()||"0":String(e)}var ym=s0((e=>r0?e>=y6&&e<=b6:e[0]==="-"?vb(e,x6):vb(e,v6)));const x6=Number.MIN_SAFE_INTEGER.toString(),y6=r0?BigInt(Number.MIN_SAFE_INTEGER):void 0,v6=Number.MAX_SAFE_INTEGER.toString(),b6=r0?BigInt(Number.MAX_SAFE_INTEGER):void 0;function vb(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){const i=e[n],r=t[n];if(i>r)return!1;if(i<r)return!0}}const w6=typeof Uint8Array.prototype.slice=="function";let _6,jn=0,gi=0;function bb(e){const t=e>>>0;jn=t,gi=(e-t)/4294967296>>>0}function Yc(e){if(e<0){bb(-e);const[t,n]=fg(jn,gi);jn=t>>>0,gi=n>>>0}else bb(e)}function cg(e){const t=_6||(_6=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),gi=0,jn=t.getUint32(0,!0)}function vm(e,t){const n=4294967296*t+(e>>>0);return Number.isSafeInteger(n)?n:Od(e,t)}function E6(e,t){return Hs(tu()?BigInt.asUintN(64,(BigInt(t>>>0)<<BigInt(32))+BigInt(e>>>0)):Od(e,t))}function ug(e,t){const n=2147483648&t;return n&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),typeof(e=vm(e,t))=="number"?n?-e:e:n?"-"+e:e}function dE(e,t){return tu()?Hs(BigInt.asIntN(64,(BigInt.asUintN(32,BigInt(t))<<BigInt(32))+BigInt.asUintN(32,BigInt(e)))):Hs(dg(e,t))}function Od(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else tu()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+wb(n)+wb(e));return n}function wb(e){return e=String(e),"0000000".slice(e.length)+e}function dg(e,t){if(2147483648&t)if(tu())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[n,i]=fg(e,t);e="-"+Od(n,i)}else e=Od(e,t);return e}function a0(e){if(e.length<16)Yc(Number(e));else if(tu())e=BigInt(e),jn=Number(e&BigInt(4294967295))>>>0,gi=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");gi=jn=0;const n=e.length;for(let i=t,r=(n-t)%6+t;r<=n;i=r,r+=6){const o=Number(e.slice(i,r));gi*=1e6,jn=1e6*jn+o,jn>=4294967296&&(gi+=Math.trunc(jn/4294967296),gi>>>=0,jn>>>=0)}if(t){const[i,r]=fg(jn,gi);jn=i,gi=r}}}function fg(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Rr(e){return Array.prototype.slice.call(e)}const Ud=typeof BigInt=="function"?BigInt.asIntN:void 0,A6=typeof BigInt=="function"?BigInt.asUintN:void 0,Nl=Number.isSafeInteger,o0=Number.isFinite,Xc=Math.trunc,S6=Hs(0);function gd(e){if(e!=null&&typeof e!="number")throw Error(`Value of float/double field must be a number, found ${typeof e}: ${e}`);return e}function Wr(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function Md(e){if(e!=null&&typeof e!="boolean"){var t=typeof e;throw Error(`Expected boolean but got ${t!="object"?t:e?Array.isArray(e)?"array":t:"null"}: ${e}`)}return e}function fE(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const N6=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Fd(e){switch(typeof e){case"bigint":return!0;case"number":return o0(e);case"string":return N6.test(e);default:return!1}}function su(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return o0(e)?0|e:void 0}function hE(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return o0(e)?e>>>0:void 0}function pE(e){const t=e.length;return(e[0]==="-"?t<20||t===20&&e<="-9223372036854775808":t<19||t===19&&e<="9223372036854775807")?e:(a0(e),dg(jn,gi))}function hg(e){return e=Xc(e),Nl(e)||(Yc(e),e=ug(jn,gi)),e}function mE(e){var t=Xc(Number(e));return Nl(t)?String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),pE(e))}function gE(e){var t=Xc(Number(e));return Nl(t)?Hs(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),tu()?Hs(Ud(64,BigInt(e))):Hs(pE(e)))}function xE(e){return Nl(e)?e=Hs(hg(e)):(e=Xc(e),Nl(e)?e=String(e):(Yc(e),e=dg(jn,gi)),e=Hs(e)),e}function C6(e){return e==null?e:typeof e=="bigint"?(ym(e)?e=Number(e):(e=Ud(64,e),e=ym(e)?Number(e):String(e)),e):Fd(e)?typeof e=="number"?hg(e):mE(e):void 0}function Uh(e){const t=typeof e;return e==null?e:t==="bigint"?Hs(Ud(64,e)):Fd(e)?t==="string"?gE(e):xE(e):void 0}function yE(e){if(typeof e!="string")throw Error();return e}function zd(e){if(e!=null&&typeof e!="string")throw Error();return e}function qi(e){return e==null||typeof e=="string"?e:void 0}function pg(e,t,n,i){return e!=null&&e[Hc]===qc?e:Array.isArray(e)?((i=(n=0|e[Ze])|32&i|2&i)!==n&&Ci(e,i),new t(e)):(n?2&i?((e=t[pb])||(Bd((e=new t).v),e=t[pb]=e),t=e):t=new t:t=void 0,t)}function T6(e,t,n){if(t)e:{if(!Fd(t=e))throw gm("int64");switch(typeof t){case"string":t=gE(t);break e;case"bigint":t=Hs(Ud(64,t));break e;default:t=xE(t)}}else t=Uh(e);return(e=t)==null?n?S6:void 0:e}const I6={};let R6=(function(){try{return i0(new class extends Map{constructor(){super()}}),!1}catch{return!0}})();class F1{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,n){return this.g.set(t,n),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,n){return this.g.forEach(t,n)}[Symbol.iterator](){return this.entries()}}const k6=R6?(Object.setPrototypeOf(F1.prototype,Map.prototype),Object.defineProperties(F1.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),F1):class extends Map{constructor(){super()}};function _b(e){return e}function z1(e){if(2&e.J)throw Error("Cannot mutate an immutable Map")}var Ta=class extends k6{constructor(e,t,n=_b,i=_b){super(),this.J=0|e[Ze],this.K=t,this.S=n,this.fa=this.K?O6:i;for(let r=0;r<e.length;r++){const o=e[r],d=n(o[0],!1,!0);let g=o[1];t?g===void 0&&(g=null):g=i(o[1],!1,!0,void 0,void 0,this.J),super.set(d,g)}}V(e){return kd(Array.from(super.entries(),e))}clear(){z1(this),super.clear()}delete(e){return z1(this),super.delete(this.S(e,!0,!1))}entries(){if(this.K){var e=super.keys();e=new xb(e,M6,this)}else e=super.entries();return e}values(){if(this.K){var e=super.keys();e=new xb(e,Ta.prototype.get,this)}else e=super.values();return e}forEach(e,t){this.K?super.forEach(((n,i,r)=>{e.call(t,r.get(i),i,r)})):super.forEach(e,t)}set(e,t){return z1(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.fa(t,!0,!0,this.K,!1,this.J))}Ma(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.K?e===void 0?null:e:this.fa(e,!1,!0,void 0,!1,this.J),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(t!==void 0){var n=this.K;return n?((n=this.fa(t,!1,!0,n,this.ra,this.J))!==t&&super.set(e,n),n):t}}[Symbol.iterator](){return this.entries()}};function O6(e,t,n,i,r,o){return e=pg(e,i,n,o),r&&(e=gg(e)),e}function M6(e){return[e,this.get(e)]}let D6;function Eb(){return D6||(D6=new Ta(Bd([]),void 0,void 0,void 0,I6))}function l0(e){return Gs?e[Gs]:void 0}function Fh(e,t){for(const n in e)!isNaN(n)&&t(e,+n,e[n])}Ta.prototype.toJSON=void 0;var bm=class{};const L6={Ka:!0};function P6(e,t){t<100||Gc(f6,1)}function c0(e,t,n,i){const r=i!==void 0;i=!!i;var o,d=Gs;!r&&nu&&d&&(o=e[d])&&Fh(o,P6),d=[];var g=e.length;let x;o=4294967295;let p=!1;const _=!!(64&t),E=_?128&t?0:-1:void 0;1&t||(x=g&&e[g-1],x!=null&&typeof x=="object"&&x.constructor===Object?o=--g:x=void 0,!_||128&t||r||(p=!0,o=o-E+E)),t=void 0;for(var N=0;N<g;N++){let k=e[N];if(k!=null&&(k=n(k,i))!=null)if(_&&N>=o){const O=N-E;(t??(t={}))[O]=k}else d[N]=k}if(x)for(let k in x){if((g=x[k])==null||(g=n(g,i))==null)continue;let O;N=+k,_&&!Number.isNaN(N)&&(O=N+E)<o?d[O]=g:(t??(t={}))[k]=g}return t&&(p?d.push(t):d[o]=t),r&&Gs&&(e=l0(e))&&e instanceof bm&&(d[Gs]=(function(k){const O=new bm;return Fh(k,((L,P,H)=>{O[P]=Rr(H)})),O.da=k.da,O})(e)),d}function j6(e){return e[0]=Dd(e[0]),e[1]=Dd(e[1]),e}function Dd(e){switch(typeof e){case"number":return Number.isFinite(e)?e:""+e;case"bigint":return ym(e)?Number(e):""+e;case"boolean":return e?1:0;case"object":if(Array.isArray(e)){var t=0|e[Ze];return e.length===0&&1&t?void 0:c0(e,t,Dd)}if(e!=null&&e[Hc]===qc)return vE(e);if(e instanceof Kr){if((t=e.g)==null)e="";else if(typeof t=="string")e=t;else{if(iE){for(var n="",i=0,r=t.length-10240;i<r;)n+=String.fromCharCode.apply(null,t.subarray(i,i+=10240));n+=String.fromCharCode.apply(null,i?t.subarray(i):t),t=btoa(n)}else{n===void 0&&(n=0),nE(),n=tE[n],i=Array(Math.floor(t.length/3)),r=n[64]||"";let p=0,_=0;for(;p<t.length-2;p+=3){var o=t[p],d=t[p+1],g=t[p+2],x=n[o>>2];o=n[(3&o)<<4|d>>4],d=n[(15&d)<<2|g>>6],g=n[63&g],i[_++]=x+o+d+g}switch(x=0,g=r,t.length-p){case 2:g=n[(15&(x=t[p+1]))<<2]||r;case 1:t=t[p],i[_]=n[t>>2]+n[(3&t)<<4|x>>4]+g+r}t=i.join("")}e=e.g=t}return e}return e instanceof Ta?e=e.size!==0?e.V(j6):void 0:void 0}return e}function vE(e){return c0(e=e.v,0|e[Ze],Dd)}let B6,U6;function xl(e,t){return bE(e,t[0],t[1])}function bE(e,t,n,i=0){if(e==null){var r=32;n?(e=[n],r|=128):e=[],t&&(r=-16760833&r|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(r=0|e[Ze],ub&&1&r)throw Error("rfarr");if(2048&r&&!(2&r)&&(function(){if(ub)throw Error("carr");Gc(h6,5)})(),256&r)throw Error("farr");if(64&r)return(r|i)!==r&&Ci(e,r|i),e;if(n&&(r|=128,n!==e[0]))throw Error("mid");e:{r|=64;var o=(n=e).length;if(o){var d=o-1;const x=n[d];if(x!=null&&typeof x=="object"&&x.constructor===Object){if((d-=t=128&r?0:-1)>=1024)throw Error("pvtlmt");for(var g in x)(o=+g)<d&&(n[o+t]=x[g],delete x[g]);r=-16760833&r|(1023&d)<<14;break e}}if(t){if((g=Math.max(t,o-(128&r?0:-1)))>1024)throw Error("spvt");r=-16760833&r|(1023&g)<<14}}}return Ci(e,64|r|i),e}function F6(e,t){if(typeof e!="object")return e;if(Array.isArray(e)){var n=0|e[Ze];return e.length===0&&1&n?void 0:Ab(e,n,t)}if(e!=null&&e[Hc]===qc)return Sb(e);if(e instanceof Ta){if(2&(t=e.J))return e;if(!e.size)return;if(n=Bd(e.V()),e.K)for(e=0;e<n.length;e++){const i=n[e];let r=i[1];r=r==null||typeof r!="object"?void 0:r!=null&&r[Hc]===qc?Sb(r):Array.isArray(r)?Ab(r,0|r[Ze],!!(32&t)):void 0,i[1]=r}return n}return e instanceof Kr?e:void 0}function Ab(e,t,n){return 2&t||(!n||4096&t||16&t?e=ru(e,t,!1,n&&!(16&t)):(jd(e,34),4&t&&Object.freeze(e))),e}function mg(e,t,n){return e=new e.constructor(t),n&&(e.h=Sl),e.m=Sl,e}function Sb(e){const t=e.v,n=0|t[Ze];return qs(e,n)?e:xg(e,t,n)?mg(e,t):ru(t,n)}function ru(e,t,n,i){return i??(i=!!(34&t)),e=c0(e,t,F6,i),i=32,n&&(i|=2),Ci(e,t=16769217&t|i),e}function gg(e){const t=e.v,n=0|t[Ze];return qs(e,n)?xg(e,t,n)?mg(e,t,!0):new e.constructor(ru(t,n,!1)):e}function au(e){if(e.h!==Sl)return!1;var t=e.v;return jd(t=ru(t,0|t[Ze]),2048),e.v=t,e.h=void 0,e.m=void 0,!0}function ou(e){if(!au(e)&&qs(e,0|e.v[Ze]))throw Error()}function Tl(e,t){t===void 0&&(t=0|e[Ze]),32&t&&!(4096&t)&&Ci(e,4096|t)}function xg(e,t,n){return!!(2&n)||!(!(32&n)||4096&n)&&(Ci(t,2|n),e.h=Sl,!0)}const z6=Hs(0),Eo={};function Dn(e,t,n,i,r){if((t=Ia(e.v,t,n,r))!==null||i&&e.m!==Sl)return t}function Ia(e,t,n,i){if(t===-1)return null;const r=t+(n?0:-1),o=e.length-1;let d,g;if(!(o<1+(n?0:-1))){if(r>=o)if(d=e[o],d!=null&&typeof d=="object"&&d.constructor===Object)n=d[t],g=!0;else{if(r!==o)return;n=d}else n=e[r];if(i&&n!=null){if((i=i(n))==null)return i;if(!Object.is(i,n))return g?d[t]=i:e[r]=i,i}return n}}function pn(e,t,n,i){ou(e),Si(e=e.v,0|e[Ze],t,n,i)}function Si(e,t,n,i,r){const o=n+(r?0:-1);var d=e.length-1;if(d>=1+(r?0:-1)&&o>=d){const g=e[d];if(g!=null&&typeof g=="object"&&g.constructor===Object)return g[n]=i,t}return o<=d?(e[o]=i,t):(i!==void 0&&(n>=(d=(t??(t=0|e[Ze]))>>14&1023||536870912)?i!=null&&(e[d+(r?0:-1)]={[n]:i}):e[o]=i),t)}function pl(){return p6===void 0?2:4}function ml(e,t,n,i,r){let o=e.v,d=0|o[Ze];i=qs(e,d)?1:i,r=!!r||i===3,i===2&&au(e)&&(o=e.v,d=0|o[Ze]);let g=(e=yg(o,t))===Cl?7:0|e[Ze],x=vg(g,d);var p=!(4&x);if(p){4&x&&(e=Rr(e),g=0,x=vl(x,d),d=Si(o,d,t,e));let _=0,E=0;for(;_<e.length;_++){const N=n(e[_]);N!=null&&(e[E++]=N)}E<_&&(e.length=E),n=-513&(4|x),x=n&=-1025,x&=-4097}return x!==g&&(Ci(e,x),2&x&&Object.freeze(e)),wE(e,x,o,d,t,i,p,r)}function wE(e,t,n,i,r,o,d,g){let x=t;return o===1||o===4&&(2&t||!(16&t)&&32&i)?yl(t)||((t|=!e.length||d&&!(4096&t)||32&i&&!(4096&t||16&t)?2:256)!==x&&Ci(e,t),Object.freeze(e)):(o===2&&yl(t)&&(e=Rr(e),x=0,t=vl(t,i),i=Si(n,i,r,e)),yl(t)||(g||(t|=16),t!==x&&Ci(e,t))),2&t||!(4096&t||16&t)||Tl(n,i),e}function yg(e,t,n){return e=Ia(e,t,n),Array.isArray(e)?e:Cl}function vg(e,t){return 2&t&&(e|=2),1|e}function yl(e){return!!(2&e)&&!!(4&e)||!!(256&e)}function _E(e){return lg(e,!0)}function EE(e){e=Rr(e);for(let t=0;t<e.length;t++){const n=e[t]=Rr(e[t]);Array.isArray(n[1])&&(n[1]=Bd(n[1]))}return kd(e)}function No(e,t,n,i){ou(e),Si(e=e.v,0|e[Ze],t,(i==="0"?Number(n)===0:n===i)?void 0:n)}function lu(e,t,n){if(2&t)throw Error();const i=iu(t);let r=yg(e,n,i),o=r===Cl?7:0|r[Ze],d=vg(o,t);return(2&d||yl(d)||16&d)&&(d===o||yl(d)||Ci(r,d),r=Rr(r),o=0,d=vl(d,t),Si(e,t,n,r,i)),d&=-13,d!==o&&Ci(r,d),r}function V1(e,t){var n=mA;return wg(bg(e=e.v),e,void 0,n)===t?t:-1}function bg(e){if(nu)return e[ld]??(e[ld]=new Map);if(ld in e)return e[ld];const t=new Map;return Object.defineProperty(e,ld,{value:t}),t}function AE(e,t,n,i,r){const o=bg(e),d=wg(o,e,t,n,r);return d!==i&&(d&&(t=Si(e,t,d,void 0,r)),o.set(n,i)),t}function wg(e,t,n,i,r){let o=e.get(i);if(o!=null)return o;o=0;for(let d=0;d<i.length;d++){const g=i[d];Ia(t,g,r)!=null&&(o!==0&&(n=Si(t,n,o,void 0,r)),o=g)}return e.set(i,o),o}function _g(e,t,n){let i=0|e[Ze];const r=iu(i),o=Ia(e,n,r);let d;if(o!=null&&o[Hc]===qc){if(!qs(o))return au(o),o.v;d=o.v}else Array.isArray(o)&&(d=o);if(d){const g=0|d[Ze];2&g&&(d=ru(d,g))}return d=xl(d,t),d!==o&&Si(e,i,n,d,r),d}function SE(e,t,n,i,r){let o=!1;if((i=Ia(e,i,r,(d=>{const g=pg(d,n,!1,t);return o=g!==d&&g!=null,g})))!=null)return o&&!qs(i)&&Tl(e,t),i}function Wt(e,t,n,i){let r=e.v,o=0|r[Ze];if((t=SE(r,o,t,n,i))==null)return t;if(o=0|r[Ze],!qs(e,o)){const d=gg(t);d!==t&&(au(e)&&(r=e.v,o=0|r[Ze]),o=Si(r,o,n,t=d,i),Tl(r,o))}return t}function NE(e,t,n,i,r,o,d,g){var x=qs(e,n);o=x?1:o,d=!!d||o===3,x=g&&!x,(o===2||x)&&au(e)&&(n=0|(t=e.v)[Ze]);var p=(e=yg(t,r))===Cl?7:0|e[Ze],_=vg(p,n);if(g=!(4&_)){var E=e,N=n;const k=!!(2&_);k&&(N|=2);let O=!k,L=!0,P=0,H=0;for(;P<E.length;P++){const B=pg(E[P],i,!1,N);if(B instanceof i){if(!k){const j=qs(B);O&&(O=!j),L&&(L=j)}E[H++]=B}}H<P&&(E.length=H),_|=4,_=L?-4097&_:4096|_,_=O?8|_:-9&_}if(_!==p&&(Ci(e,_),2&_&&Object.freeze(e)),x&&!(8&_||!e.length&&(o===1||o===4&&(2&_||!(16&_)&&32&n)))){for(yl(_)&&(e=Rr(e),_=vl(_,n),n=Si(t,n,r,e)),i=e,x=_,p=0;p<i.length;p++)(E=i[p])!==(_=gg(E))&&(i[p]=_);x|=8,Ci(e,_=x=i.length?4096|x:-4097&x)}return wE(e,_,t,n,r,o,g,d)}function Ra(e,t,n){const i=e.v;return NE(e,i,0|i[Ze],t,n,pl(),!1,!0)}function CE(e){return e==null&&(e=void 0),e}function lt(e,t,n,i,r){return pn(e,n,i=CE(i),r),i&&!qs(i)&&Tl(e.v),e}function bd(e,t,n,i){e:{var r=i=CE(i);ou(e);const o=e.v;let d=0|o[Ze];if(r==null){const g=bg(o);if(wg(g,o,d,n)!==t)break e;g.set(n,0)}else d=AE(o,d,n,t);Si(o,d,t,r)}i&&!qs(i)&&Tl(e.v)}function vl(e,t){return-273&(2&t?2|e:-3&e)}function Eg(e,t,n,i){var r=i;ou(e),e=NE(e,i=e.v,0|i[Ze],n,t,2,!0),r=r??new n,e.push(r),t=n=e===Cl?7:0|e[Ze],(r=qs(r))?(n&=-9,e.length===1&&(n&=-4097)):n|=4096,n!==t&&Ci(e,n),r||Tl(i)}function ur(e,t,n){return su(Dn(e,t,void 0,n))}function TE(e){return(rg?Dn(e,2,void 0,void 0,Uh):Uh(Dn(e,2)))??z6}function ri(e,t){return Dn(e,t,void 0,void 0,Wr)??0}function ka(e,t,n){if(n!=null){if(typeof n!="number"||!o0(n))throw gm("int32");n|=0}pn(e,t,n)}function it(e,t,n){pn(e,t,gd(n))}function Ys(e,t,n){No(e,t,zd(n),"")}function zh(e,t,n){{ou(e);const d=e.v;let g=0|d[Ze];if(n==null)Si(d,g,t);else{var i=e=n===Cl?7:0|n[Ze],r=yl(e),o=r||Object.isFrozen(n);for(r||(e=0),o||(n=Rr(n),i=0,e=vl(e,g),o=!1),e|=5,e|=(4&e?512&e?512:1024&e?1024:0:void 0)??(rg?1024:0),r=0;r<n.length;r++){const x=n[r],p=yE(x);Object.is(x,p)||(o&&(n=Rr(n),i=0,e=vl(e,g),o=!1),n[r]=p)}e!==i&&(o&&(n=Rr(n),e=vl(e,g)),Ci(n,e)),Si(d,g,t,n)}}}function u0(e,t,n){ou(e),ml(e,t,qi,2,!0).push(yE(n))}var vc=class{constructor(e,t,n){if(this.buffer=e,n&&!t)throw Error();this.g=t}};function Ag(e,t){if(typeof e=="string")return new vc(sE(e),t);if(Array.isArray(e))return new vc(new Uint8Array(e),t);if(e.constructor===Uint8Array)return new vc(e,!1);if(e.constructor===ArrayBuffer)return e=new Uint8Array(e),new vc(e,!1);if(e.constructor===Kr)return t=og(e)||new Uint8Array(0),new vc(t,!0,e);if(e instanceof Uint8Array)return e=e.constructor===Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new vc(e,!1);throw Error()}function Wc(e,t){let n,i=0,r=0,o=0;const d=e.h;let g=e.g;do n=d[g++],i|=(127&n)<<o,o+=7;while(o<32&&128&n);if(o>32)for(r|=(127&n)>>4,o=3;o<32&&128&n;o+=7)n=d[g++],r|=(127&n)<<o;if(bl(e,g),!(128&n))return t(i>>>0,r>>>0);throw Error()}function Sg(e){let t=0,n=e.g;const i=n+10,r=e.h;for(;n<i;){const o=r[n++];if(t|=o,(128&o)==0)return bl(e,n),!!(127&t)}throw Error()}function ko(e){const t=e.h;let n=e.g,i=t[n++],r=127&i;if(128&i&&(i=t[n++],r|=(127&i)<<7,128&i&&(i=t[n++],r|=(127&i)<<14,128&i&&(i=t[n++],r|=(127&i)<<21,128&i&&(i=t[n++],r|=i<<28,128&i&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw Error();return bl(e,n),r}function Oa(e){return ko(e)>>>0}function Vh(e){var t=e.h;const n=e.g;var i=t[n],r=t[n+1];const o=t[n+2];return t=t[n+3],bl(e,e.g+4),e=2*((r=(i<<0|r<<8|o<<16|t<<24)>>>0)>>31)+1,i=r>>>23&255,r&=8388607,i==255?r?NaN:e*(1/0):i==0?1401298464324817e-60*e*r:e*Math.pow(2,i-150)*(r+8388608)}function V6(e){return ko(e)}function bl(e,t){if(e.g=t,t>e.l)throw Error()}function IE(e,t){if(t<0)throw Error();const n=e.g;if((t=n+t)>e.l)throw Error();return e.g=t,n}function RE(e,t){if(t==0)return Al();var n=IE(e,t);return e.Y&&e.j?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?new Uint8Array(0):w6?e.slice(n,t):new Uint8Array(e.subarray(n,t))),n.length==0?Al():new Kr(n,Vc)}var Nb=[];function kE(e,t,n,i){if(Gh.length){const r=Gh.pop();return r.o(i),r.g.init(e,t,n,i),r}return new G6(e,t,n,i)}function OE(e){e.g.clear(),e.l=-1,e.h=-1,Gh.length<100&&Gh.push(e)}function ME(e){var t=e.g;if(t.g==t.l)return!1;e.m=e.g.g;var n=Oa(e.g);if(t=n>>>3,!((n&=7)>=0&&n<=5)||t<1)throw Error();return e.l=t,e.h=n,!0}function Ch(e){switch(e.h){case 0:e.h!=0?Ch(e):Sg(e.g);break;case 1:bl(e=e.g,e.g+8);break;case 2:if(e.h!=2)Ch(e);else{var t=Oa(e.g);bl(e=e.g,e.g+t)}break;case 5:bl(e=e.g,e.g+4);break;case 3:for(t=e.l;;){if(!ME(e))throw Error();if(e.h==4){if(e.l!=t)throw Error();break}Ch(e)}break;default:throw Error()}}function Vd(e,t,n){const i=e.g.l;var r=Oa(e.g);let o=(r=e.g.g+r)-i;if(o<=0&&(e.g.l=r,n(t,e,void 0,void 0,void 0),o=r-e.g.g),o)throw Error();return e.g.g=r,e.g.l=i,t}function Ng(e){var t=Oa(e.g),n=IE(e=e.g,t);if(e=e.h,e6){var i,r=e;(i=U1)||(i=U1=new TextDecoder("utf-8",{fatal:!0})),t=n+t,r=n===0&&t===r.length?r:r.subarray(n,t);try{var o=i.decode(r)}catch(g){if(gh===void 0){try{i.decode(new Uint8Array([128]))}catch{}try{i.decode(new Uint8Array([97])),gh=!0}catch{gh=!1}}throw!gh&&(U1=void 0),g}}else{t=(o=n)+t,n=[];let g,x=null;for(;o<t;){var d=e[o++];d<128?n.push(d):d<224?o>=t?al():(g=e[o++],d<194||(192&g)!=128?(o--,al()):n.push((31&d)<<6|63&g)):d<240?o>=t-1?al():(g=e[o++],(192&g)!=128||d===224&&g<160||d===237&&g>=160||(192&(i=e[o++]))!=128?(o--,al()):n.push((15&d)<<12|(63&g)<<6|63&i)):d<=244?o>=t-2?al():(g=e[o++],(192&g)!=128||g-144+(d<<28)>>30!=0||(192&(i=e[o++]))!=128||(192&(r=e[o++]))!=128?(o--,al()):(d=(7&d)<<18|(63&g)<<12|(63&i)<<6|63&r,d-=65536,n.push(55296+(d>>10&1023),56320+(1023&d)))):al(),n.length>=8192&&(x=cb(x,n),n.length=0)}o=cb(x,n)}return o}function DE(e){const t=Oa(e.g);return RE(e.g,t)}function d0(e,t,n){var i=Oa(e.g);for(i=e.g.g+i;e.g.g<i;)n.push(t(e.g))}var G6=class{constructor(e,t,n,i){if(Nb.length){const r=Nb.pop();r.init(e,t,n,i),e=r}else e=new class{constructor(r,o,d,g){this.h=null,this.j=!1,this.g=this.l=this.m=0,this.init(r,o,d,g)}init(r,o,d,{Y:g=!1,ea:x=!1}={}){this.Y=g,this.ea=x,r&&(r=Ag(r,this.ea),this.h=r.buffer,this.j=r.g,this.m=o||0,this.l=d!==void 0?this.m+d:this.h.length,this.g=this.m)}clear(){this.h=null,this.j=!1,this.g=this.l=this.m=0,this.Y=!1}}(e,t,n,i);this.g=e,this.m=this.g.g,this.h=this.l=-1,this.o(i)}o({ha:e=!1}={}){this.ha=e}},Gh=[];function Cb(e){return e?/^\d+$/.test(e)?(a0(e),new wm(jn,gi)):null:H6||(H6=new wm(0,0))}var wm=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let H6;function Tb(e){return e?/^-?\d+$/.test(e)?(a0(e),new _m(jn,gi)):null:q6||(q6=new _m(0,0))}var _m=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let q6;function Lc(e,t,n){for(;n>0||t>127;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function cu(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function f0(e,t){if(t>=0)cu(e,t);else{for(let n=0;n<9;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Cg(e){var t=jn;e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function Kc(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function hr(e,t,n){cu(e.g,8*t+n)}function Tg(e,t){return hr(e,t,2),t=e.g.end(),Kc(e,t),t.push(e.h),t}function Ig(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;n>127;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function h0(e,t,n){hr(e,t,2),cu(e.g,n.length),Kc(e,e.g.end()),Kc(e,n)}function Hh(e,t,n,i){n!=null&&(t=Tg(e,t),i(n,e),Ig(e,t))}function Jr(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var Rg=Jr(),LE=Jr(),kg=Jr(),Og=Jr(),PE=Jr(),jE=Jr(),Y6=Jr(),p0=Jr(),BE=Jr(),UE=Jr();function Zr(e,t,n){var i=e.v;Gs&&Gs in i&&(i=i[Gs])&&delete i[t.g],t.h?t.j(e,t.h,t.g,n,t.l):t.j(e,t.g,n,t.l)}var Qe=class{constructor(e,t){this.v=bE(e,t,void 0,2048)}toJSON(){return vE(this)}j(){var r;var e=TR,t=this.v,n=e.g,i=Gs;if(nu&&i&&((r=t[i])==null?void 0:r[n])!=null&&Gc(d6,3),t=e.g,mb&&Gs&&mb===void 0&&(i=(n=this.v)[Gs])&&(i=i.da))try{i(n,t,L6)}catch(o){eE(o)}return e.h?e.m(this,e.h,e.g,e.l):e.m(this,e.g,e.defaultValue,e.l)}clone(){const e=this.v,t=0|e[Ze];return xg(this,e,t)?mg(this,e,!0):new this.constructor(ru(e,t,!1))}};Qe.prototype[Hc]=qc,Qe.prototype.toString=function(){return this.v.toString()};var uu=class{constructor(e,t,n){this.g=e,this.h=t,e=Rg,this.l=!!e&&n===e||!1}};function m0(e,t){return new uu(e,t,Rg)}function FE(e,t,n,i,r){Hh(e,n,HE(t,i),r)}const X6=m0((function(e,t,n,i,r){return e.h===2&&(Vd(e,_g(t,i,n),r),!0)}),FE),W6=m0((function(e,t,n,i,r){return e.h===2&&(Vd(e,_g(t,i,n),r),!0)}),FE);var g0=Symbol(),x0=Symbol(),Em=Symbol(),Ib=Symbol(),Rb=Symbol();let zE,VE;function Il(e,t,n,i){var r=i[e];if(r)return r;(r={}).qa=i,r.T=(function(E){switch(typeof E){case"boolean":return B6||(B6=[0,void 0,!0]);case"number":return E>0?void 0:E===0?U6||(U6=[0,void 0]):[-E,void 0];case"string":return[0,E];case"object":return E}})(i[0]);var o=i[1];let d=1;o&&o.constructor===Object&&(r.ba=o,typeof(o=i[++d])=="function"&&(r.ma=!0,zE??(zE=o),VE??(VE=i[d+1]),o=i[d+=2]));const g={};for(;o&&Array.isArray(o)&&o.length&&typeof o[0]=="number"&&o[0]>0;){for(var x=0;x<o.length;x++)g[o[x]]=o;o=i[++d]}for(x=1;o!==void 0;){let E;typeof o=="number"&&(x+=o,o=i[++d]);var p=void 0;if(o instanceof uu?E=o:(E=X6,d--),E==null?void 0:E.l){o=i[++d],p=i;var _=d;typeof o=="function"&&(o=o(),p[_]=o),p=o}for(_=x+1,typeof(o=i[++d])=="number"&&o<0&&(_-=o,o=i[++d]);x<_;x++){const N=g[x];p?n(r,x,E,p,N):t(r,x,E,N)}}return i[e]=r}function GE(e){return Array.isArray(e)?e[0]instanceof uu?e:[W6,e]:[e,void 0]}function HE(e,t){return e instanceof Qe?e.v:Array.isArray(e)?xl(e,t):void 0}function Mg(e,t,n,i){const r=n.g;e[t]=i?(o,d,g)=>r(o,d,g,i):r}function Dg(e,t,n,i,r){const o=n.g;let d,g;e[t]=(x,p,_)=>o(x,p,_,g||(g=Il(x0,Mg,Dg,i).T),d||(d=Lg(i)),r)}function Lg(e){let t=e[Em];if(t!=null)return t;const n=Il(x0,Mg,Dg,e);return t=n.ma?(i,r)=>zE(i,r,n):(i,r)=>{for(;ME(r)&&r.h!=4;){var o=r.l,d=n[o];if(d==null){var g=n.ba;g&&(g=g[o])&&(g=$6(g))!=null&&(d=n[o]=g)}if(d==null||!d(r,i,o)){if(d=(g=r).m,Ch(g),g.ha)var x=void 0;else x=g.g.g-d,g.g.g=d,x=RE(g.g,x);d=void 0,g=i,x&&((d=g[Gs]??(g[Gs]=new bm))[o]??(d[o]=[])).push(x)}}return(i=l0(i))&&(i.da=n.qa[Rb]),!0},e[Em]=t,e[Rb]=K6.bind(e),t}function K6(e,t,n,i){var r=this[x0];const o=this[Em],d=xl(void 0,r.T),g=l0(e);if(g){var x=!1,p=r.ba;if(p){if(r=(_,E,N)=>{if(N.length!==0)if(p[E])for(const k of N){_=kE(k);try{x=!0,o(d,_)}finally{OE(_)}}else i==null||i(e,E,N)},t==null)Fh(g,r);else if(g!=null){const _=g[t];_&&r(g,t,_)}if(x){let _=0|e[Ze];if(2&_&&2048&_&&!(n!=null&&n.Ka))throw Error();const E=iu(_),N=(k,O)=>{if(Ia(e,k,E)!=null){if((n==null?void 0:n.Qa)===1)return;throw Error()}O!=null&&(_=Si(e,_,k,O,E)),delete g[k]};t==null?cE(d,0|d[Ze],((k,O)=>{N(k,O)})):N(t,Ia(d,t,E))}}}}function $6(e){const t=(e=GE(e))[0].g;if(e=e[1]){const n=Lg(e),i=Il(x0,Mg,Dg,e).T;return(r,o,d)=>t(r,o,d,i,n)}return t}function y0(e,t,n){e[t]=n.h}function v0(e,t,n,i){let r,o;const d=n.h;e[t]=(g,x,p)=>d(g,x,p,o||(o=Il(g0,y0,v0,i).T),r||(r=qE(i)))}function qE(e){let t=e[Ib];if(!t){const n=Il(g0,y0,v0,e);t=(i,r)=>YE(i,r,n),e[Ib]=t}return t}function YE(e,t,n){cE(e,0|e[Ze],((i,r)=>{if(r!=null){var o=(function(d,g){var x=d[g];if(x)return x;if((x=d.ba)&&(x=x[g])){var p=(x=GE(x))[0].h;if(x=x[1]){const _=qE(x),E=Il(g0,y0,v0,x).T;x=d.ma?VE(E,_):(N,k,O)=>p(N,k,O,E,_)}else x=p;return d[g]=x}})(n,i);o?o(t,r,i):i<500||Gc(xm,3)}})),(e=l0(e))&&Fh(e,((i,r,o)=>{for(Kc(t,t.g.end()),i=0;i<o.length;i++)Kc(t,og(o[i])||new Uint8Array(0))}))}const J6=Hs(0);function du(e,t){if(Array.isArray(t)){var n=0|t[Ze];if(4&n)return t;for(var i=0,r=0;i<t.length;i++){const o=e(t[i]);o!=null&&(t[r++]=o)}return r<i&&(t.length=r),(e=-1537&(5|n))!==n&&Ci(t,e),2&e&&Object.freeze(t),t}}function os(e,t,n){return new uu(e,t,n)}function fu(e,t,n){return new uu(e,t,n)}function Di(e,t,n){Si(e,0|e[Ze],t,n,iu(0|e[Ze]))}var Z6=m0((function(e,t,n,i,r){if(e.h!==2)return!1;if(e=Rr(e=Vd(e,xl([void 0,void 0],i),r)),r=iu(i=0|t[Ze]),2&i)throw Error();let o=Ia(t,n,r);if(o instanceof Ta)(2&o.J)!=0?(o=o.V(),o.push(e),Si(t,i,n,o,r)):o.Ma(e);else if(Array.isArray(o)){var d=0|o[Ze];8192&d||Ci(o,d|=8192),2&d&&(o=EE(o),Si(t,i,n,o,r)),o.push(e)}else Si(t,i,n,kd([e]),r);return!0}),(function(e,t,n,i,r){if(t instanceof Ta)t.forEach(((o,d)=>{Hh(e,n,xl([d,o],i),r)}));else if(Array.isArray(t)){for(let o=0;o<t.length;o++){const d=t[o];Array.isArray(d)&&Hh(e,n,xl(d,i),r)}kd(t)}}));function XE(e,t,n){(t=Wr(t))!=null&&(hr(e,n,5),e=e.g,cg(t),Cg(e))}function WE(e,t,n){if(t=(function(i){if(i==null)return i;const r=typeof i;if(r==="bigint")return String(Ud(64,i));if(Fd(i)){if(r==="string")return mE(i);if(r==="number")return hg(i)}})(t),t!=null&&(typeof t=="string"&&Tb(t),t!=null))switch(hr(e,n,0),typeof t){case"number":e=e.g,Yc(t),Lc(e,jn,gi);break;case"bigint":n=BigInt.asUintN(64,t),n=new _m(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Lc(e.g,n.h,n.g);break;default:n=Tb(t),Lc(e.g,n.h,n.g)}}function KE(e,t,n){(t=su(t))!=null&&t!=null&&(hr(e,n,0),f0(e.g,t))}function $E(e,t,n){(t=fE(t))!=null&&(hr(e,n,0),e.g.g.push(t?1:0))}function JE(e,t,n){(t=qi(t))!=null&&h0(e,n,Q3(t))}function ZE(e,t,n,i,r){Hh(e,n,HE(t,i),r)}function QE(e,t,n){(t=t==null||typeof t=="string"||t instanceof Kr?t:void 0)!=null&&h0(e,n,Ag(t,!0).buffer)}function eA(e,t,n){return(e.h===5||e.h===2)&&(t=lu(t,0|t[Ze],n),e.h==2?d0(e,Vh,t):t.push(Vh(e.g)),!0)}var xi=os((function(e,t,n){return e.h===5&&(Di(t,n,Vh(e.g)),!0)}),XE,p0),Q6=fu(eA,(function(e,t,n){if((t=du(Wr,t))!=null)for(let d=0;d<t.length;d++){var i=e,r=n,o=t[d];o!=null&&(hr(i,r,5),i=i.g,cg(o),Cg(i))}}),p0),Pg=fu(eA,(function(e,t,n){if((t=du(Wr,t))!=null&&t.length){hr(e,n,2),cu(e.g,4*t.length);for(let i=0;i<t.length;i++)n=e.g,cg(t[i]),Cg(n)}}),p0),eR=os((function(e,t,n){return e.h===5&&(Di(t,n,(e=Vh(e.g))===0?void 0:e),!0)}),XE,p0),Oo=os((function(e,t,n){return sg?(e.h!==0?e=!1:(Di(t,n,Wc(e.g,dE)),e=!0),e):e.h===0&&(Di(t,n,Wc(e.g,ug)),!0)}),WE,jE),G1=os((function(e,t,n){return sg?(e.h!==0?t=!1:(Di(t,n,(e=Wc(e.g,dE))===J6?void 0:e),t=!0),t):e.h===0&&(Di(t,n,(e=Wc(e.g,ug))===0?void 0:e),!0)}),WE,jE),tR=os((function(e,t,n){return sg?(e.h!==0?e=!1:(Di(t,n,Wc(e.g,E6)),e=!0),e):e.h===0&&(Di(t,n,Wc(e.g,vm)),!0)}),(function(e,t,n){if(t=(function(i){if(i==null)return i;var r=typeof i;if(r==="bigint")return String(A6(64,i));if(Fd(i)){if(r==="string")return r=Xc(Number(i)),Nl(r)&&r>=0?i=String(r):((r=i.indexOf("."))!==-1&&(i=i.substring(0,r)),(r=i[0]!=="-"&&((r=i.length)<20||r===20&&i<="18446744073709551615"))||(a0(i),i=Od(jn,gi))),i;if(r==="number")return(i=Xc(i))>=0&&Nl(i)||(Yc(i),i=vm(jn,gi)),i}})(t),t!=null&&(typeof t=="string"&&Cb(t),t!=null))switch(hr(e,n,0),typeof t){case"number":e=e.g,Yc(t),Lc(e,jn,gi);break;case"bigint":n=BigInt.asUintN(64,t),n=new wm(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Lc(e.g,n.h,n.g);break;default:n=Cb(t),Lc(e.g,n.h,n.g)}}),Y6),Mi=os((function(e,t,n){return e.h===0&&(Di(t,n,ko(e.g)),!0)}),KE,Og),Gd=fu((function(e,t,n){return(e.h===0||e.h===2)&&(t=lu(t,0|t[Ze],n),e.h==2?d0(e,ko,t):t.push(ko(e.g)),!0)}),(function(e,t,n){if((t=du(su,t))!=null&&t.length){n=Tg(e,n);for(let i=0;i<t.length;i++)f0(e.g,t[i]);Ig(e,n)}}),Og),Ic=os((function(e,t,n){return e.h===0&&(Di(t,n,(e=ko(e.g))===0?void 0:e),!0)}),KE,Og),ai=os((function(e,t,n){return e.h===0&&(Di(t,n,Sg(e.g)),!0)}),$E,LE),wl=os((function(e,t,n){return e.h===0&&(Di(t,n,(e=Sg(e.g))===!1?void 0:e),!0)}),$E,LE),Wi=fu((function(e,t,n){return e.h===2&&(e=Ng(e),lu(t,0|t[Ze],n).push(e),!0)}),(function(e,t,n){if((t=du(qi,t))!=null)for(let d=0;d<t.length;d++){var i=e,r=n,o=t[d];o!=null&&h0(i,r,Q3(o))}}),kg),To=os((function(e,t,n){return e.h===2&&(Di(t,n,(e=Ng(e))===""?void 0:e),!0)}),JE,kg),_n=os((function(e,t,n){return e.h===2&&(Di(t,n,Ng(e)),!0)}),JE,kg),Oi=(function(e,t,n=Rg){return new uu(e,t,n)})((function(e,t,n,i,r){return e.h===2&&(i=xl(void 0,i),lu(t,0|t[Ze],n).push(i),Vd(e,i,r),!0)}),(function(e,t,n,i,r){if(Array.isArray(t)){for(let o=0;o<t.length;o++)ZE(e,t[o],n,i,r);1&(e=0|t[Ze])||Ci(t,1|e)}})),si=m0((function(e,t,n,i,r,o){if(e.h!==2)return!1;let d=0|t[Ze];return AE(t,d,o,n,iu(d)),Vd(e,t=_g(t,i,n),r),!0}),ZE),tA=os((function(e,t,n){return e.h===2&&(Di(t,n,DE(e)),!0)}),QE,BE),nR=fu((function(e,t,n){return(e.h===0||e.h===2)&&(t=lu(t,0|t[Ze],n),e.h==2?d0(e,Oa,t):t.push(Oa(e.g)),!0)}),(function(e,t,n){if((t=du(hE,t))!=null)for(let d=0;d<t.length;d++){var i=e,r=n,o=t[d];o!=null&&(hr(i,r,0),cu(i.g,o))}}),PE),iR=os((function(e,t,n){return e.h===0&&(Di(t,n,(e=Oa(e.g))===0?void 0:e),!0)}),(function(e,t,n){(t=hE(t))!=null&&t!=null&&(hr(e,n,0),cu(e.g,t))}),PE),Xs=os((function(e,t,n){return e.h===0&&(Di(t,n,ko(e.g)),!0)}),(function(e,t,n){(t=su(t))!=null&&(t=parseInt(t,10),hr(e,n,0),f0(e.g,t))}),UE);class sR{constructor(t,n){var i=Ks;this.g=t,this.h=n,this.m=Wt,this.j=lt,this.defaultValue=void 0,this.l=i.Oa!=null?uE:void 0}register(){i0(this)}}function Qr(e,t){return new sR(e,t)}function Mo(e,t){return(n,i)=>{{const o={ea:!0};i&&Object.assign(o,i),n=kE(n,void 0,void 0,o);try{const d=new e,g=d.v;Lg(t)(g,n);var r=d}finally{OE(n)}}return r}}function b0(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const d=this.g;return this.g=[],d}}}};YE(this.v,t,Il(g0,y0,v0,e)),Kc(t,t.g.end());const n=new Uint8Array(t.h),i=t.l,r=i.length;let o=0;for(let d=0;d<r;d++){const g=i[d];n.set(g,o),o+=g.length}return t.l=[n],n}}var kb=class extends Qe{constructor(e){super(e)}},Ob=[0,To,os((function(e,t,n){return e.h===2&&(Di(t,n,(e=DE(e))===Al()?void 0:e),!0)}),(function(e,t,n){if(t!=null){if(t instanceof Qe){const i=t.Ra;return void(i?(t=i(t),t!=null&&h0(e,n,Ag(t,!0).buffer)):Gc(xm,3))}if(Array.isArray(t))return void Gc(xm,3)}QE(e,t,n)}),BE)];let H1,Mb=globalThis.trustedTypes;function Db(e){var t;return H1===void 0&&(H1=(function(){let n=null;if(!Mb)return n;try{const i=r=>r;n=Mb.createPolicy("goog#html",{createHTML:i,createScript:i,createScriptURL:i})}catch{}return n})()),e=(t=H1)?t.createScriptURL(e):e,new class{constructor(n){this.g=n}toString(){return this.g+""}}(e)}function rR(e,...t){if(t.length===0)return Db(e[0]);let n=e[0];for(let i=0;i<t.length;i++)n+=encodeURIComponent(t[i])+e[i+1];return Db(n)}var nA=[0,Mi,Xs,ai,-1,Gd,Xs,-1,ai],aR=class extends Qe{constructor(e){super(e)}},iA=[0,ai,_n,ai,Xs,-1,fu((function(e,t,n){return(e.h===0||e.h===2)&&(t=lu(t,0|t[Ze],n),e.h==2?d0(e,V6,t):t.push(ko(e.g)),!0)}),(function(e,t,n){if((t=du(su,t))!=null&&t.length){n=Tg(e,n);for(let i=0;i<t.length;i++)f0(e.g,t[i]);Ig(e,n)}}),UE),_n,-1,[0,ai,-1],Xs,ai,-1],sA=[0,3,ai,-1,2,[0,Mi],[0,Xs,ai],[0,_n,-1],[0]],rA=[0,_n,-2],Lb=class extends Qe{constructor(e){super(e)}},aA=[0],oA=[0,Mi,ai,1,ai,-4],Ks=class extends Qe{constructor(e){super(e,2)}},Ni={};Ni[336783863]=[0,_n,ai,-1,Mi,[0,[1,2,3,4,5,6,7,8,9],si,aA,si,iA,si,rA,si,oA,si,nA,si,[0,_n,-2],si,[0,_n,Xs],si,sA,si,[0,Xs,-1,ai]],[0,_n],ai,[0,[1,3],[2,4],si,[0,Gd],-1,si,[0,Wi],-1,Oi,[0,_n,-1]],_n];var Pb=[0,G1,-1,wl,-3,G1,Gd,To,Ic,G1,-1,wl,Ic,wl,-2,To];function Ln(e,t){u0(e,3,t)}function Ut(e,t){u0(e,4,t)}var vs=class extends Qe{constructor(e){super(e,500)}o(e){return lt(this,0,7,e)}},wd=[-1,{}],jb=[0,_n,1,wd],Bb=[0,_n,Wi,wd];function pr(e,t){Eg(e,1,vs,t)}function Bn(e,t){u0(e,10,t)}function Qt(e,t){u0(e,15,t)}var $s=class extends Qe{constructor(e){super(e,500)}o(e){return lt(this,0,1001,e)}},lA=[-500,Oi,[-500,To,-1,Wi,-3,[-2,Ni,ai],Oi,Ob,Ic,-1,jb,Bb,Oi,[0,To,wl],To,Pb,Ic,Wi,987,Wi],4,Oi,[-500,_n,-1,[-1,{}],998,_n],Oi,[-500,_n,Wi,-1,[-2,{},ai],997,Wi,-1],Ic,Oi,[-500,_n,Wi,wd,998,Wi],Wi,Ic,jb,Bb,Oi,[0,To,-1,wd],Wi,-2,Pb,To,-1,wl,[0,wl,iR],978,wd,Oi,Ob];$s.prototype.g=b0(lA);var oR=Mo($s,lA),lR=class extends Qe{constructor(e){super(e)}},cA=class extends Qe{constructor(e){super(e)}g(){return Ra(this,lR,1)}},uA=[0,Oi,[0,Mi,xi,_n,-1]],w0=Mo(cA,uA),cR=class extends Qe{constructor(e){super(e)}},uR=class extends Qe{constructor(e){super(e)}},q1=class extends Qe{constructor(e){super(e)}l(){return Wt(this,cR,2)}g(){return Ra(this,uR,5)}},dA=Mo(class extends Qe{constructor(e){super(e)}},[0,Wi,Gd,Pg,[0,Xs,[0,Mi,-3],[0,xi,-3],[0,Mi,-1,[0,Oi,[0,Mi,-2]]],Oi,[0,xi,-1,_n,xi]],_n,-1,Oo,Oi,[0,Mi,xi],Wi,Oo]),fA=class extends Qe{constructor(e){super(e)}},Pc=Mo(class extends Qe{constructor(e){super(e)}},[0,Oi,[0,xi,-4]]),hA=class extends Qe{constructor(e){super(e)}},Hd=Mo(class extends Qe{constructor(e){super(e)}},[0,Oi,[0,xi,-4]]),dR=class extends Qe{constructor(e){super(e)}},fR=[0,Mi,-1,Pg,Xs],pA=class extends Qe{constructor(e){super(e)}};pA.prototype.g=b0([0,xi,-4,Oo]);var hR=class extends Qe{constructor(e){super(e)}},pR=Mo(class extends Qe{constructor(e){super(e)}},[0,Oi,[0,1,Mi,_n,uA],Oo]),Ub=class extends Qe{constructor(e){super(e)}},mR=class extends Qe{constructor(e){super(e)}na(){const e=Dn(this,1,void 0,void 0,_E);return e??Al()}},gR=class extends Qe{constructor(e){super(e)}},mA=[1,2],xR=Mo(class extends Qe{constructor(e){super(e)}},[0,Oi,[0,mA,si,[0,Pg],si,[0,tA],Mi,_n],Oo]),jg=class extends Qe{constructor(e){super(e)}},gA=[0,_n,Mi,xi,Wi,-1],Fb=class extends Qe{constructor(e){super(e)}},yR=[0,ai,-1],zb=class extends Qe{constructor(e){super(e)}},Th=[1,2,3,4,5,6],qh=class extends Qe{constructor(e){super(e)}g(){return Dn(this,1,void 0,void 0,_E)!=null}l(){return qi(Dn(this,2))!=null}},$n=class extends Qe{constructor(e){super(e)}g(){return fE(Dn(this,2))??!1}},xA=[0,tA,_n,[0,Mi,Oo,-1],[0,tR,Oo]],yi=[0,xA,ai,[0,Th,si,oA,si,iA,si,nA,si,aA,si,rA,si,sA],Xs],_0=class extends Qe{constructor(e){super(e)}},Bg=[0,yi,xi,-1,Mi],vR=Qr(502141897,_0);Ni[502141897]=Bg;var bR=Mo(class extends Qe{constructor(e){super(e)}},[0,[0,Xs,-1,Q6,nR],fR]),yA=class extends Qe{constructor(e){super(e)}},vA=class extends Qe{constructor(e){super(e)}},Am=[0,yi,xi,[0,yi],ai],wR=Qr(508968150,vA);Ni[508968150]=[0,yi,Bg,Am,xi,[0,[0,xA]]],Ni[508968149]=Am;var bc=class extends Qe{constructor(e){super(e)}l(){return Wt(this,jg,2)}g(){pn(this,2)}},bA=[0,yi,gA];Ni[478825465]=bA;var _R=class extends Qe{constructor(e){super(e)}},wA=class extends Qe{constructor(e){super(e)}},Ug=class extends Qe{constructor(e){super(e)}},Fg=class extends Qe{constructor(e){super(e)}},_A=class extends Qe{constructor(e){super(e)}},Vb=[0,yi,[0,yi],bA,-1],EA=[0,yi,xi,Mi],zg=[0,yi,xi],AA=[0,yi,EA,zg,xi],ER=Qr(479097054,_A);Ni[479097054]=[0,yi,AA,Vb],Ni[463370452]=Vb,Ni[464864288]=EA;var AR=Qr(462713202,Fg);Ni[462713202]=AA,Ni[474472470]=zg;var SR=class extends Qe{constructor(e){super(e)}},SA=class extends Qe{constructor(e){super(e)}},NA=class extends Qe{constructor(e){super(e)}},CA=class extends Qe{constructor(e){super(e)}},Vg=[0,yi,xi,-1,Mi],Sm=[0,yi,xi,ai];CA.prototype.g=b0([0,yi,zg,[0,yi],Bg,Am,Vg,Sm]);var TA=class extends Qe{constructor(e){super(e)}},NR=Qr(456383383,TA);Ni[456383383]=[0,yi,gA];var IA=class extends Qe{constructor(e){super(e)}},CR=Qr(476348187,IA);Ni[476348187]=[0,yi,yR];var RA=class extends Qe{constructor(e){super(e)}},Gb=class extends Qe{constructor(e){super(e)}},kA=[0,Xs,-1],TR=Qr(458105876,class extends Qe{constructor(e){super(e)}g(){let e;var t=this.v;const n=0|t[Ze];return e=qs(this,n),t=(function(i,r,o,d){var g=Gb;!d&&au(i)&&(o=0|(r=i.v)[Ze]);var x=Ia(r,2);if(i=!1,x==null){if(d)return Eb();x=[]}else if(x.constructor===Ta){if(!(2&x.J)||d)return x;x=x.V()}else Array.isArray(x)?i=!!(2&(0|x[Ze])):x=[];if(d){if(!x.length)return Eb();i||(i=!0,Bd(x))}else i&&(i=!1,kd(x),x=EE(x));return!i&&32&o&&jd(x,32),o=Si(r,o,2,d=new Ta(x,g,T6,void 0)),i||Tl(r,o),d})(this,t,n,e),!e&&Gb&&(t.ra=!0),t}});Ni[458105876]=[0,kA,Z6,[!0,Oo,[0,_n,-1,Wi]],[0,Gd,ai,Xs]];var Gg=class extends Qe{constructor(e){super(e)}},OA=Qr(458105758,Gg);Ni[458105758]=[0,yi,_n,kA];var Y1=class extends Qe{constructor(e){super(e)}},Hb=[0,eR,-1,wl],IR=class extends Qe{constructor(e){super(e)}},MA=class extends Qe{constructor(e){super(e)}},Nm=[1,2];MA.prototype.g=b0([0,Nm,si,Hb,si,[0,Oi,Hb]]);var DA=class extends Qe{constructor(e){super(e)}},RR=Qr(443442058,DA);Ni[443442058]=[0,yi,_n,Mi,xi,Wi,-1,ai,xi],Ni[514774813]=Vg;var LA=class extends Qe{constructor(e){super(e)}},kR=Qr(516587230,LA);function Cm(e,t){return t=t?t.clone():new jg,e.displayNamesLocale!==void 0?pn(t,1,zd(e.displayNamesLocale)):e.displayNamesLocale===void 0&&pn(t,1),e.maxResults!==void 0?ka(t,2,e.maxResults):"maxResults"in e&&pn(t,2),e.scoreThreshold!==void 0?it(t,3,e.scoreThreshold):"scoreThreshold"in e&&pn(t,3),e.categoryAllowlist!==void 0?zh(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&pn(t,4),e.categoryDenylist!==void 0?zh(t,5,e.categoryDenylist):"categoryDenylist"in e&&pn(t,5),t}function PA(e){const t=Number(e);return Number.isSafeInteger(t)?t:String(e)}function Hg(e,t=-1,n=""){return{categories:e.map((i=>({index:ur(i,1)??0??-1,score:ri(i,2)??0,categoryName:qi(Dn(i,3))??""??"",displayName:qi(Dn(i,4))??""??""}))),headIndex:t,headName:n}}function OR(e){const t={classifications:Ra(e,hR,1).map((n=>{var i;return Hg(((i=Wt(n,cA,4))==null?void 0:i.g())??[],ur(n,2)??0,qi(Dn(n,3))??"")}))};return(function(n){return C6(rg?Dn(n,2,void 0,void 0,Uh):Dn(n,2))})(e)!=null&&(t.timestampMs=PA(TE(e))),t}function jA(e){var d,g;var t=ml(e,3,Wr,pl()),n=ml(e,2,su,pl()),i=ml(e,1,qi,pl()),r=ml(e,9,qi,pl());const o={categories:[],keypoints:[]};for(let x=0;x<t.length;x++)o.categories.push({score:t[x],index:n[x]??-1,categoryName:i[x]??"",displayName:r[x]??""});if((t=(d=Wt(e,q1,4))==null?void 0:d.l())&&(o.boundingBox={originX:ur(t,1,Eo)??0,originY:ur(t,2,Eo)??0,width:ur(t,3,Eo)??0,height:ur(t,4,Eo)??0,angle:0}),(g=Wt(e,q1,4))==null?void 0:g.g().length)for(const x of Wt(e,q1,4).g())o.keypoints.push({x:Dn(x,1,void 0,Eo,Wr)??0,y:Dn(x,2,void 0,Eo,Wr)??0,score:Dn(x,4,void 0,Eo,Wr)??0,label:qi(Dn(x,3,void 0,Eo))??""});return o}function E0(e){const t=[];for(const n of Ra(e,hA,1))t.push({x:ri(n,1)??0,y:ri(n,2)??0,z:ri(n,3)??0,visibility:ri(n,4)??0});return t}function _d(e){const t=[];for(const n of Ra(e,fA,1))t.push({x:ri(n,1)??0,y:ri(n,2)??0,z:ri(n,3)??0,visibility:ri(n,4)??0});return t}function qb(e){return Array.from(e,(t=>t>127?t-256:t))}function Yb(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let n=0,i=0,r=0;for(let o=0;o<e.length;o++)n+=e[o]*t[o],i+=e[o]*e[o],r+=t[o]*t[o];if(i<=0||r<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(i*r)}let xh;Ni[516587230]=[0,yi,Vg,Sm,xi],Ni[518928384]=Sm;const MR=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function BA(){if(xh===void 0)try{await WebAssembly.instantiate(MR),xh=!0}catch{xh=!1}return xh}async function cd(e,t=rR``){const n=await BA()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${n}.js`,wasmBinaryPath:`${t}/${e}_${n}.wasm`}}var cl=class{};function UA(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Xb(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise(((n,i)=>{t.addEventListener("load",(()=>{n()}),!1),t.addEventListener("error",(r=>{i(r)}),!1),document.body.appendChild(t)}))}try{importScripts(e.toString())}catch(t){if(!(t instanceof TypeError))throw t;await self.import(e.toString())}}function FA(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function et(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function Wb(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[i,r]=FA(t);return!e.l||i===e.i.canvas.width&&r===e.i.canvas.height||(e.i.canvas.width=i,e.i.canvas.height=r),[i,r]}function Kb(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const i=new Uint32Array(t.length);for(let r=0;r<t.length;r++)i[r]=e.i.stringToNewUTF8(t[r]);t=e.i._malloc(4*i.length),e.i.HEAPU32.set(i,t>>2),n(t);for(const r of i)e.i._free(r);e.i._free(t)}function Yr(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function Ao(e,t,n){let i=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(r,o,d)=>{o?(n(i,d),i=[]):i.push(r)}}cl.forVisionTasks=function(e){return cd("vision",e)},cl.forTextTasks=function(e){return cd("text",e)},cl.forGenAiExperimentalTasks=function(e){return cd("genai_experimental",e)},cl.forGenAiTasks=function(e){return cd("genai",e)},cl.forAudioTasks=function(e){return cd("audio",e)},cl.isSimdSupported=function(){return BA()};async function DR(e,t,n,i){return e=await(async(r,o,d,g,x)=>{if(o&&await Xb(o),!self.ModuleFactory||d&&(await Xb(d),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&x&&((o=self.Module).locateFile=x.locateFile,x.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=x.mainScriptUrlOrBlob)),x=await self.ModuleFactory(self.Module||x),self.ModuleFactory=self.Module=void 0,new r(x,g)})(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:r=>r.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&r.endsWith(".data")?n.assetBinaryPath.toString():r}),await e.o(i),e}function X1(e,t){const n=Wt(e.baseOptions,qh,1)||new qh;typeof t=="string"?(pn(n,2,zd(t)),pn(n,1)):t instanceof Uint8Array&&(pn(n,1,lg(t,!1)),pn(n,2)),lt(e.baseOptions,0,1,n)}function $b(e){try{const t=e.H.length;if(t===1)throw Error(e.H[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.H.map((n=>n.message)).join(", "))}finally{e.H=[]}}function We(e,t){e.C=Math.max(e.C,t)}function A0(e,t){e.B=new vs,Ys(e.B,2,"PassThroughCalculator"),Ln(e.B,"free_memory"),Ut(e.B,"free_memory_unused_out"),Bn(t,"free_memory"),pr(t,e.B)}function $c(e,t){Ln(e.B,t),Ut(e.B,t+"_unused_out")}function S0(e){e.g.addBoolToStream(!0,"free_memory",e.C)}var Tm=class{constructor(t){this.g=t,this.H=[],this.C=0,this.g.setAutoRenderToScreen(!1)}l(t,n=!0){var i,r,o,d,g,x;if(n){const p=t.baseOptions||{};if((i=t.baseOptions)!=null&&i.modelAssetBuffer&&((r=t.baseOptions)!=null&&r.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((o=Wt(this.baseOptions,qh,1))!=null&&o.g()||(d=Wt(this.baseOptions,qh,1))!=null&&d.l()||(g=t.baseOptions)!=null&&g.modelAssetBuffer||(x=t.baseOptions)!=null&&x.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(_,E){let N=Wt(_.baseOptions,zb,3);if(!N){var k=N=new zb,O=new Lb;bd(k,4,Th,O)}"delegate"in E&&(E.delegate==="GPU"?(E=N,k=new aR,bd(E,2,Th,k)):(E=N,k=new Lb,bd(E,4,Th,k))),lt(_.baseOptions,0,3,N)})(this,p),p.modelAssetPath)return fetch(p.modelAssetPath.toString()).then((_=>{if(_.ok)return _.arrayBuffer();throw Error(`Failed to fetch model: ${p.modelAssetPath} (${_.status})`)})).then((_=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(_),!0,!1,!1),X1(this,"/model.dat"),this.m(),this.L()}));if(p.modelAssetBuffer instanceof Uint8Array)X1(this,p.modelAssetBuffer);else if(p.modelAssetBuffer)return(async function(_){const E=[];for(var N=0;;){const{done:k,value:O}=await _.read();if(k)break;E.push(O),N+=O.length}if(E.length===0)return new Uint8Array(0);if(E.length===1)return E[0];_=new Uint8Array(N),N=0;for(const k of E)_.set(k,N),N+=k.length;return _})(p.modelAssetBuffer).then((_=>{X1(this,_),this.m(),this.L()}))}return this.m(),this.L(),Promise.resolve()}L(){}ca(){let t;if(this.g.ca((n=>{t=oR(n)})),!t)throw Error("Failed to retrieve CalculatorGraphConfig");return t}setGraph(t,n){this.g.attachErrorListener(((i,r)=>{this.H.push(Error(r))})),this.g.Ja(),this.g.setGraph(t,n),this.B=void 0,$b(this)}finishProcessing(){this.g.finishProcessing(),$b(this)}close(){this.B=void 0,this.g.closeGraph()}};function Ro(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}Tm.prototype.close=Tm.prototype.close;class LR{constructor(t,n,i,r){this.g=t,this.h=n,this.m=i,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Jb(e,t,n){const i=e.g;if(n=Ro(i.createShader(n),"Failed to create WebGL shader"),i.shaderSource(n,t),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${i.getShaderInfoLog(n)}`);return i.attachShader(e.h,n),n}function Zb(e,t){const n=e.g,i=Ro(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(i);const r=Ro(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,r),n.enableVertexAttribArray(e.O),n.vertexAttribPointer(e.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const o=Ro(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(e.L),n.vertexAttribPointer(e.L,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new LR(n,i,r,o)}function qg(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function PR(e,t,n,i){return qg(e,t),e.h||(e.m(),e.D()),n?(e.u||(e.u=Zb(e,!0)),n=e.u):(e.A||(e.A=Zb(e,!1)),n=e.A),t.useProgram(e.h),n.bind(),e.l(),e=i(),n.g.bindVertexArray(null),e}function zA(e,t,n){return qg(e,t),e=Ro(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function VA(e,t,n){qg(e,t),e.B||(e.B=Ro(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.B),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function jR(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var GA=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=Ro(e.createProgram(),"Failed to create WebGL program"),this.X=Jb(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.W=Jb(this,this.H(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.O=e.getAttribLocation(this.h,"aVertex"),this.L=e.getAttribLocation(this.h,"aTex")}D(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.X),e.deleteShader(this.W)}this.B&&this.g.deleteFramebuffer(this.B),this.A&&this.A.close(),this.u&&this.u.close()}};function Ca(e,t){switch(t){case 0:return e.g.find((n=>n instanceof Uint8Array));case 1:return e.g.find((n=>n instanceof Float32Array));case 2:return e.g.find((n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function Im(e){var t=Ca(e,1);if(!t){if(t=Ca(e,0))t=new Float32Array(t).map((i=>i/255));else{t=new Float32Array(e.width*e.height);const i=Jc(e);var n=Yg(e);if(VA(n,i,HA(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),i.readPixels(0,0,e.width,e.height,i.RGBA,i.FLOAT,n);for(let r=0,o=0;r<t.length;++r,o+=4)t[r]=n[o]}else i.readPixels(0,0,e.width,e.height,i.RED,i.FLOAT,t)}e.g.push(t)}return t}function HA(e){let t=Ca(e,2);if(!t){const n=Jc(e);t=YA(e);const i=Im(e),r=qA(e);n.texImage2D(n.TEXTURE_2D,0,r,e.width,e.height,0,n.RED,n.FLOAT,i),Rm(e)}return t}function Jc(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Ro(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function qA(e){if(e=Jc(e),!yh)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))yh=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");yh=e.R16F}return yh}function Yg(e){return e.l||(e.l=new GA),e.l}function YA(e){const t=Jc(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=Ca(e,2);return n||(n=zA(Yg(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function Rm(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var yh,ki=class{constructor(e,t,n,i,r,o,d){this.g=e,this.m=t,this.j=n,this.canvas=i,this.l=r,this.width=o,this.height=d,this.j&&--Qb===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!Ca(this,0)}ka(){return!!Ca(this,1)}R(){return!!Ca(this,2)}ja(){return(t=Ca(e=this,0))||(t=Im(e),t=new Uint8Array(t.map((n=>Math.round(255*n)))),e.g.push(t)),t;var e,t}ia(){return Im(this)}N(){return HA(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const i=Jc(this),r=Yg(this);i.activeTexture(i.TEXTURE1),n=zA(r,i,this.m?i.LINEAR:i.NEAREST),i.bindTexture(i.TEXTURE_2D,n);const o=qA(this);i.texImage2D(i.TEXTURE_2D,0,o,this.width,this.height,0,i.RED,i.FLOAT,null),i.bindTexture(i.TEXTURE_2D,null),VA(r,i,n),PR(r,i,!1,(()=>{YA(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),Rm(this)})),jR(r),Rm(this)}}e.push(n)}return new ki(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Jc(this).deleteTexture(Ca(this,2)),Qb=-1}};ki.prototype.close=ki.prototype.close,ki.prototype.clone=ki.prototype.clone,ki.prototype.getAsWebGLTexture=ki.prototype.N,ki.prototype.getAsFloat32Array=ki.prototype.ia,ki.prototype.getAsUint8Array=ki.prototype.ja,ki.prototype.hasWebGLTexture=ki.prototype.R,ki.prototype.hasFloat32Array=ki.prototype.ka,ki.prototype.hasUint8Array=ki.prototype.Fa;var Qb=250;function Mr(...e){return e.map((([t,n])=>({start:t,end:n})))}const BR=(function(e){return class extends e{Ja(){this.i._registerModelResourcesGraphService()}}})((ew=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:UA()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const n=e.length,i=this.i._malloc(n);this.i.HEAPU8.set(e,i),t?this.i._changeBinaryGraph(n,i):this.i._changeTextGraph(n,i),this.i._free(i)}configureAudio(e,t,n,i,r){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),et(this,i||"input_audio",(o=>{et(this,r=r||"audio_header",(d=>{this.i._configureAudio(o,d,e,t??0,n)}))}))}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ca(e){Yr(this,"__graph_config__",(t=>{e(t)})),et(this,"__graph_config__",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,i,r){const o=4*e.length;this.h!==o&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(o),this.h=o),this.i.HEAPF32.set(e,this.g/4),et(this,i,(d=>{this.i._addAudioToInputStream(this.g,t,n,d,r)}))}addGpuBufferToStream(e,t,n){et(this,t,(i=>{const[r,o]=Wb(this,e,i);this.i._addBoundTextureToStream(i,r,o,n)}))}addBoolToStream(e,t,n){et(this,t,(i=>{this.i._addBoolToInputStream(e,i,n)}))}addDoubleToStream(e,t,n){et(this,t,(i=>{this.i._addDoubleToInputStream(e,i,n)}))}addFloatToStream(e,t,n){et(this,t,(i=>{this.i._addFloatToInputStream(e,i,n)}))}addIntToStream(e,t,n){et(this,t,(i=>{this.i._addIntToInputStream(e,i,n)}))}addUintToStream(e,t,n){et(this,t,(i=>{this.i._addUintToInputStream(e,i,n)}))}addStringToStream(e,t,n){et(this,t,(i=>{et(this,e,(r=>{this.i._addStringToInputStream(r,i,n)}))}))}addStringRecordToStream(e,t,n){et(this,t,(i=>{Kb(this,Object.keys(e),(r=>{Kb(this,Object.values(e),(o=>{this.i._addFlatHashMapToInputStream(r,o,Object.keys(e).length,i,n)}))}))}))}addProtoToStream(e,t,n,i){et(this,n,(r=>{et(this,t,(o=>{const d=this.i._malloc(e.length);this.i.HEAPU8.set(e,d),this.i._addProtoToInputStream(d,e.length,o,r,i),this.i._free(d)}))}))}addEmptyPacketToStream(e,t){et(this,e,(n=>{this.i._addEmptyPacketToInputStream(n,t)}))}addBoolVectorToStream(e,t,n){et(this,t,(i=>{const r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(r,o);this.i._addBoolVectorToInputStream(r,i,n)}))}addDoubleVectorToStream(e,t,n){et(this,t,(i=>{const r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(r,o);this.i._addDoubleVectorToInputStream(r,i,n)}))}addFloatVectorToStream(e,t,n){et(this,t,(i=>{const r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(r,o);this.i._addFloatVectorToInputStream(r,i,n)}))}addIntVectorToStream(e,t,n){et(this,t,(i=>{const r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(r,o);this.i._addIntVectorToInputStream(r,i,n)}))}addUintVectorToStream(e,t,n){et(this,t,(i=>{const r=this.i._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(r,o);this.i._addUintVectorToInputStream(r,i,n)}))}addStringVectorToStream(e,t,n){et(this,t,(i=>{const r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const o of e)et(this,o,(d=>{this.i._addStringVectorEntry(r,d)}));this.i._addStringVectorToInputStream(r,i,n)}))}addBoolToInputSidePacket(e,t){et(this,t,(n=>{this.i._addBoolToInputSidePacket(e,n)}))}addDoubleToInputSidePacket(e,t){et(this,t,(n=>{this.i._addDoubleToInputSidePacket(e,n)}))}addFloatToInputSidePacket(e,t){et(this,t,(n=>{this.i._addFloatToInputSidePacket(e,n)}))}addIntToInputSidePacket(e,t){et(this,t,(n=>{this.i._addIntToInputSidePacket(e,n)}))}addUintToInputSidePacket(e,t){et(this,t,(n=>{this.i._addUintToInputSidePacket(e,n)}))}addStringToInputSidePacket(e,t){et(this,t,(n=>{et(this,e,(i=>{this.i._addStringToInputSidePacket(i,n)}))}))}addProtoToInputSidePacket(e,t,n){et(this,n,(i=>{et(this,t,(r=>{const o=this.i._malloc(e.length);this.i.HEAPU8.set(e,o),this.i._addProtoToInputSidePacket(o,e.length,r,i),this.i._free(o)}))}))}addBoolVectorToInputSidePacket(e,t){et(this,t,(n=>{const i=this.i._allocateBoolVector(e.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const r of e)this.i._addBoolVectorEntry(i,r);this.i._addBoolVectorToInputSidePacket(i,n)}))}addDoubleVectorToInputSidePacket(e,t){et(this,t,(n=>{const i=this.i._allocateDoubleVector(e.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const r of e)this.i._addDoubleVectorEntry(i,r);this.i._addDoubleVectorToInputSidePacket(i,n)}))}addFloatVectorToInputSidePacket(e,t){et(this,t,(n=>{const i=this.i._allocateFloatVector(e.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const r of e)this.i._addFloatVectorEntry(i,r);this.i._addFloatVectorToInputSidePacket(i,n)}))}addIntVectorToInputSidePacket(e,t){et(this,t,(n=>{const i=this.i._allocateIntVector(e.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const r of e)this.i._addIntVectorEntry(i,r);this.i._addIntVectorToInputSidePacket(i,n)}))}addUintVectorToInputSidePacket(e,t){et(this,t,(n=>{const i=this.i._allocateUintVector(e.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of e)this.i._addUintVectorEntry(i,r);this.i._addUintVectorToInputSidePacket(i,n)}))}addStringVectorToInputSidePacket(e,t){et(this,t,(n=>{const i=this.i._allocateStringVector(e.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const r of e)et(this,r,(o=>{this.i._addStringVectorEntry(i,o)}));this.i._addStringVectorToInputSidePacket(i,n)}))}attachBoolListener(e,t){Yr(this,e,t),et(this,e,(n=>{this.i._attachBoolListener(n)}))}attachBoolVectorListener(e,t){Ao(this,e,t),et(this,e,(n=>{this.i._attachBoolVectorListener(n)}))}attachIntListener(e,t){Yr(this,e,t),et(this,e,(n=>{this.i._attachIntListener(n)}))}attachIntVectorListener(e,t){Ao(this,e,t),et(this,e,(n=>{this.i._attachIntVectorListener(n)}))}attachUintListener(e,t){Yr(this,e,t),et(this,e,(n=>{this.i._attachUintListener(n)}))}attachUintVectorListener(e,t){Ao(this,e,t),et(this,e,(n=>{this.i._attachUintVectorListener(n)}))}attachDoubleListener(e,t){Yr(this,e,t),et(this,e,(n=>{this.i._attachDoubleListener(n)}))}attachDoubleVectorListener(e,t){Ao(this,e,t),et(this,e,(n=>{this.i._attachDoubleVectorListener(n)}))}attachFloatListener(e,t){Yr(this,e,t),et(this,e,(n=>{this.i._attachFloatListener(n)}))}attachFloatVectorListener(e,t){Ao(this,e,t),et(this,e,(n=>{this.i._attachFloatVectorListener(n)}))}attachStringListener(e,t){Yr(this,e,t),et(this,e,(n=>{this.i._attachStringListener(n)}))}attachStringVectorListener(e,t){Ao(this,e,t),et(this,e,(n=>{this.i._attachStringVectorListener(n)}))}attachProtoListener(e,t,n){Yr(this,e,t),et(this,e,(i=>{this.i._attachProtoListener(i,n||!1)}))}attachProtoVectorListener(e,t,n){Ao(this,e,t),et(this,e,(i=>{this.i._attachProtoVectorListener(i,n||!1)}))}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Yr(this,e,((i,r)=>{i=new Float32Array(i.buffer,i.byteOffset,i.length/4),t(i,r)})),et(this,e,(i=>{this.i._attachAudioListener(i,n||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends ew{get ga(){return this.i}pa(e,t,n){et(this,t,(i=>{const[r,o]=Wb(this,e,i);this.ga._addBoundTextureAsImageToStream(i,r,o,n)}))}Z(e,t){Yr(this,e,t),et(this,e,(n=>{this.ga._attachImageListener(n)}))}aa(e,t){Ao(this,e,t),et(this,e,(n=>{this.ga._attachImageVectorListener(n)}))}}));var ew,Dr=class extends BR{};async function Gt(e,t,n){return(async function(i,r,o,d){return DR(i,r,o,d)})(e,n.canvas??(UA()?void 0:document.createElement("canvas")),t,n)}function XA(e,t,n,i){if(e.U){const o=new pA;if(n!=null&&n.regionOfInterest){if(!e.oa)throw Error("This task doesn't support region-of-interest.");var r=n.regionOfInterest;if(r.left>=r.right||r.top>=r.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(r.left<0||r.top<0||r.right>1||r.bottom>1)throw Error("Expected RectF values to be in [0,1].");it(o,1,(r.left+r.right)/2),it(o,2,(r.top+r.bottom)/2),it(o,4,r.right-r.left),it(o,3,r.bottom-r.top)}else it(o,1,.5),it(o,2,.5),it(o,4,1),it(o,3,1);if(n!=null&&n.rotationDegrees){if((n==null?void 0:n.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(it(o,5,-Math.PI*n.rotationDegrees/180),(n==null?void 0:n.rotationDegrees)%180!=0){const[d,g]=FA(t);n=ri(o,3)*g/d,r=ri(o,4)*d/g,it(o,4,n),it(o,3,r)}}e.g.addProtoToStream(o.g(),"mediapipe.NormalizedRect",e.U,i)}e.g.pa(t,e.X,i??performance.now()),e.finishProcessing()}function Lr(e,t,n){var i;if((i=e.baseOptions)!=null&&i.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");XA(e,t,n,e.C+1)}function ea(e,t,n,i){var r;if(!((r=e.baseOptions)!=null&&r.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");XA(e,t,n,i)}function Zc(e,t,n,i){var r=t.data;const o=t.width,d=o*(t=t.height);if((r instanceof Uint8Array||r instanceof Float32Array)&&r.length!==d)throw Error("Unsupported channel count: "+r.length/d);return e=new ki([r],n,!1,e.g.i.canvas,e.P,o,t),i?e.clone():e}var Ws=class extends Tm{constructor(e,t,n,i){super(e),this.g=e,this.X=t,this.U=n,this.oa=i,this.P=new GA}l(e,t=!0){if("runningMode"in e&&pn(this.baseOptions,2,Md(!!e.runningMode&&e.runningMode!=="IMAGE")),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};Ws.prototype.close=Ws.prototype.close;var Bs=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},lt(e=this.h=new _0,0,1,t=new $n),it(this.h,2,.5),it(this.h,3,.3)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&it(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&it(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}F(e,t){return this.j={detections:[]},Lr(this,e,t),this.j}G(e,t,n){return this.j={detections:[]},ea(this,e,n,t),this.j}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect_in"),Qt(e,"detections");const t=new Ks;Zr(t,vR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect_in"),Ut(n,"DETECTIONS:detections"),n.o(t),pr(e,n),this.g.attachProtoVectorListener("detections",((i,r)=>{for(const o of i)i=dA(o),this.j.detections.push(jA(i));We(this,r)})),this.g.attachEmptyPacketListener("detections",(i=>{We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Bs.prototype.detectForVideo=Bs.prototype.G,Bs.prototype.detect=Bs.prototype.F,Bs.prototype.setOptions=Bs.prototype.o,Bs.createFromModelPath=async function(e,t){return Gt(Bs,e,{baseOptions:{modelAssetPath:t}})},Bs.createFromModelBuffer=function(e,t){return Gt(Bs,e,{baseOptions:{modelAssetBuffer:t}})},Bs.createFromOptions=function(e,t){return Gt(Bs,e,t)};var Xg=Mr([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Wg=Mr([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Kg=Mr([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),WA=Mr([474,475],[475,476],[476,477],[477,474]),$g=Mr([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),Jg=Mr([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),KA=Mr([469,470],[470,471],[471,472],[472,469]),Zg=Mr([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),$A=[...Xg,...Wg,...Kg,...$g,...Jg,...Zg],JA=Mr([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function tw(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var qn=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,lt(e=this.h=new vA,0,1,t=new $n),this.A=new yA,lt(this.h,0,3,this.A),this.u=new _0,lt(this.h,0,2,this.u),ka(this.u,4,1),it(this.u,2,.5),it(this.A,2,.5),it(this.h,4,.5)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return"numFaces"in e&&ka(this.u,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&it(this.u,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&it(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&it(this.A,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}F(e,t){return tw(this),Lr(this,e,t),this.j}G(e,t,n){return tw(this),ea(this,e,n,t),this.j}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"face_landmarks");const t=new Ks;Zr(t,wR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),pr(e,n),this.g.attachProtoVectorListener("face_landmarks",((i,r)=>{for(const o of i)i=Hd(o),this.j.faceLandmarks.push(E0(i));We(this,r)})),this.g.attachEmptyPacketListener("face_landmarks",(i=>{We(this,i)})),this.outputFaceBlendshapes&&(Qt(e,"blendshapes"),Ut(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((i,r)=>{if(this.outputFaceBlendshapes)for(const o of i)i=w0(o),this.j.faceBlendshapes.push(Hg(i.g()??[]));We(this,r)})),this.g.attachEmptyPacketListener("blendshapes",(i=>{We(this,i)}))),this.outputFacialTransformationMatrixes&&(Qt(e,"face_geometry"),Ut(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((i,r)=>{if(this.outputFacialTransformationMatrixes)for(const o of i)(i=Wt(i=bR(o),dR,2))&&this.j.facialTransformationMatrixes.push({rows:ur(i,1)??0??0,columns:ur(i,2)??0??0,data:ml(i,3,Wr,pl()).slice()??[]});We(this,r)})),this.g.attachEmptyPacketListener("face_geometry",(i=>{We(this,i)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};qn.prototype.detectForVideo=qn.prototype.G,qn.prototype.detect=qn.prototype.F,qn.prototype.setOptions=qn.prototype.o,qn.createFromModelPath=function(e,t){return Gt(qn,e,{baseOptions:{modelAssetPath:t}})},qn.createFromModelBuffer=function(e,t){return Gt(qn,e,{baseOptions:{modelAssetBuffer:t}})},qn.createFromOptions=function(e,t){return Gt(qn,e,t)},qn.FACE_LANDMARKS_LIPS=Xg,qn.FACE_LANDMARKS_LEFT_EYE=Wg,qn.FACE_LANDMARKS_LEFT_EYEBROW=Kg,qn.FACE_LANDMARKS_LEFT_IRIS=WA,qn.FACE_LANDMARKS_RIGHT_EYE=$g,qn.FACE_LANDMARKS_RIGHT_EYEBROW=Jg,qn.FACE_LANDMARKS_RIGHT_IRIS=KA,qn.FACE_LANDMARKS_FACE_OVAL=Zg,qn.FACE_LANDMARKS_CONTOURS=$A,qn.FACE_LANDMARKS_TESSELATION=JA;var Qg=Mr([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function nw(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function iw(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function sw(e,t=!0){const n=[];for(const r of e){var i=w0(r);e=[];for(const o of i.g())i=t&&ur(o,1)!=null?ur(o,1)??0:-1,e.push({score:ri(o,2)??0,index:i,categoryName:qi(Dn(o,3))??""??"",displayName:qi(Dn(o,4))??""??""});n.push(e)}return n}var Ms=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],lt(e=this.j=new _A,0,1,t=new $n),this.u=new Fg,lt(this.j,0,2,this.u),this.D=new Ug,lt(this.u,0,3,this.D),this.A=new wA,lt(this.u,0,2,this.A),this.h=new _R,lt(this.j,0,3,this.h),it(this.A,2,.5),it(this.u,4,.5),it(this.D,2,.5)}get baseOptions(){return Wt(this.j,$n,1)}set baseOptions(e){lt(this.j,0,1,e)}o(e){var r,o,d,g;if(ka(this.A,3,e.numHands??1),"minHandDetectionConfidence"in e&&it(this.A,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&it(this.u,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&it(this.D,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new bc,n=t,i=Cm(e.cannedGesturesClassifierOptions,(r=Wt(this.h,bc,3))==null?void 0:r.l());lt(n,0,2,i),lt(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((o=Wt(this.h,bc,3))==null||o.g());return e.customGesturesClassifierOptions?(lt(n=t=new bc,0,2,i=Cm(e.customGesturesClassifierOptions,(d=Wt(this.h,bc,4))==null?void 0:d.l())),lt(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((g=Wt(this.h,bc,4))==null||g.g()),this.l(e)}Ha(e,t){return nw(this),Lr(this,e,t),iw(this)}Ia(e,t,n){return nw(this),ea(this,e,n,t),iw(this)}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"hand_gestures"),Qt(e,"hand_landmarks"),Qt(e,"world_hand_landmarks"),Qt(e,"handedness");const t=new Ks;Zr(t,ER,this.j);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"HAND_GESTURES:hand_gestures"),Ut(n,"LANDMARKS:hand_landmarks"),Ut(n,"WORLD_LANDMARKS:world_hand_landmarks"),Ut(n,"HANDEDNESS:handedness"),n.o(t),pr(e,n),this.g.attachProtoVectorListener("hand_landmarks",((i,r)=>{for(const o of i){i=Hd(o);const d=[];for(const g of Ra(i,hA,1))d.push({x:ri(g,1)??0,y:ri(g,2)??0,z:ri(g,3)??0,visibility:ri(g,4)??0});this.landmarks.push(d)}We(this,r)})),this.g.attachEmptyPacketListener("hand_landmarks",(i=>{We(this,i)})),this.g.attachProtoVectorListener("world_hand_landmarks",((i,r)=>{for(const o of i){i=Pc(o);const d=[];for(const g of Ra(i,fA,1))d.push({x:ri(g,1)??0,y:ri(g,2)??0,z:ri(g,3)??0,visibility:ri(g,4)??0});this.worldLandmarks.push(d)}We(this,r)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(i=>{We(this,i)})),this.g.attachProtoVectorListener("hand_gestures",((i,r)=>{this.gestures.push(...sw(i,!1)),We(this,r)})),this.g.attachEmptyPacketListener("hand_gestures",(i=>{We(this,i)})),this.g.attachProtoVectorListener("handedness",((i,r)=>{this.handedness.push(...sw(i)),We(this,r)})),this.g.attachEmptyPacketListener("handedness",(i=>{We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function rw(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}Ms.prototype.recognizeForVideo=Ms.prototype.Ia,Ms.prototype.recognize=Ms.prototype.Ha,Ms.prototype.setOptions=Ms.prototype.o,Ms.createFromModelPath=function(e,t){return Gt(Ms,e,{baseOptions:{modelAssetPath:t}})},Ms.createFromModelBuffer=function(e,t){return Gt(Ms,e,{baseOptions:{modelAssetBuffer:t}})},Ms.createFromOptions=function(e,t){return Gt(Ms,e,t)},Ms.HAND_CONNECTIONS=Qg;var Ds=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],lt(e=this.h=new Fg,0,1,t=new $n),this.u=new Ug,lt(this.h,0,3,this.u),this.j=new wA,lt(this.h,0,2,this.j),ka(this.j,3,1),it(this.j,2,.5),it(this.u,2,.5),it(this.h,4,.5)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return"numHands"in e&&ka(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&it(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&it(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&it(this.u,2,e.minHandPresenceConfidence??.5),this.l(e)}F(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Lr(this,e,t),rw(this)}G(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],ea(this,e,n,t),rw(this)}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"hand_landmarks"),Qt(e,"world_hand_landmarks"),Qt(e,"handedness");const t=new Ks;Zr(t,AR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"LANDMARKS:hand_landmarks"),Ut(n,"WORLD_LANDMARKS:world_hand_landmarks"),Ut(n,"HANDEDNESS:handedness"),n.o(t),pr(e,n),this.g.attachProtoVectorListener("hand_landmarks",((i,r)=>{for(const o of i)i=Hd(o),this.landmarks.push(E0(i));We(this,r)})),this.g.attachEmptyPacketListener("hand_landmarks",(i=>{We(this,i)})),this.g.attachProtoVectorListener("world_hand_landmarks",((i,r)=>{for(const o of i)i=Pc(o),this.worldLandmarks.push(_d(i));We(this,r)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(i=>{We(this,i)})),this.g.attachProtoVectorListener("handedness",((i,r)=>{var o=this.handedness,d=o.push;const g=[];for(const x of i){i=w0(x);const p=[];for(const _ of i.g())p.push({score:ri(_,2)??0,index:ur(_,1)??0??-1,categoryName:qi(Dn(_,3))??""??"",displayName:qi(Dn(_,4))??""??""});g.push(p)}d.call(o,...g),We(this,r)})),this.g.attachEmptyPacketListener("handedness",(i=>{We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ds.prototype.detectForVideo=Ds.prototype.G,Ds.prototype.detect=Ds.prototype.F,Ds.prototype.setOptions=Ds.prototype.o,Ds.createFromModelPath=function(e,t){return Gt(Ds,e,{baseOptions:{modelAssetPath:t}})},Ds.createFromModelBuffer=function(e,t){return Gt(Ds,e,{baseOptions:{modelAssetBuffer:t}})},Ds.createFromOptions=function(e,t){return Gt(Ds,e,t)},Ds.HAND_CONNECTIONS=Qg;var ZA=Mr([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function aw(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function ow(e){try{if(!e.D)return e.h;e.D(e.h)}finally{S0(e)}}function vh(e,t){e=Hd(e),t.push(E0(e))}var Mn=class extends Ws{constructor(e,t){super(new Dr(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,lt(e=this.j=new CA,0,1,t=new $n),this.I=new Ug,lt(this.j,0,2,this.I),this.W=new SR,lt(this.j,0,3,this.W),this.u=new _0,lt(this.j,0,4,this.u),this.O=new yA,lt(this.j,0,5,this.O),this.A=new SA,lt(this.j,0,6,this.A),this.M=new NA,lt(this.j,0,7,this.M),it(this.u,2,.5),it(this.u,3,.3),it(this.O,2,.5),it(this.A,2,.5),it(this.A,3,.3),it(this.M,2,.5),it(this.I,2,.5)}get baseOptions(){return Wt(this.j,$n,1)}set baseOptions(e){lt(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&it(this.u,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&it(this.u,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&it(this.O,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&it(this.A,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&it(this.A,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&it(this.M,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&it(this.I,2,e.minHandLandmarksConfidence??.5),this.l(e)}F(e,t,n){const i=typeof t!="function"?t:{};return this.D=typeof t=="function"?t:n,aw(this),Lr(this,e,i),ow(this)}G(e,t,n,i){const r=typeof n!="function"?n:{};return this.D=typeof n=="function"?n:i,aw(this),ea(this,e,r,t),ow(this)}m(){var e=new $s;Bn(e,"input_frames_image"),Qt(e,"pose_landmarks"),Qt(e,"pose_world_landmarks"),Qt(e,"face_landmarks"),Qt(e,"left_hand_landmarks"),Qt(e,"left_hand_world_landmarks"),Qt(e,"right_hand_landmarks"),Qt(e,"right_hand_world_landmarks");const t=new Ks,n=new kb;Ys(n,1,"type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),(function(r,o){if(o!=null)if(Array.isArray(o))pn(r,2,c0(o,0,Dd));else{if(!(typeof o=="string"||o instanceof Kr||ag(o)))throw Error("invalid value in Any.value field: "+o+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");No(r,2,lg(o,!1),Al())}})(n,this.j.g());const i=new vs;Ys(i,2,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Eg(i,8,kb,n),Ln(i,"IMAGE:input_frames_image"),Ut(i,"POSE_LANDMARKS:pose_landmarks"),Ut(i,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Ut(i,"FACE_LANDMARKS:face_landmarks"),Ut(i,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Ut(i,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Ut(i,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Ut(i,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),i.o(t),pr(e,i),A0(this,e),this.g.attachProtoListener("pose_landmarks",((r,o)=>{vh(r,this.h.poseLandmarks),We(this,o)})),this.g.attachEmptyPacketListener("pose_landmarks",(r=>{We(this,r)})),this.g.attachProtoListener("pose_world_landmarks",((r,o)=>{var d=this.h.poseWorldLandmarks;r=Pc(r),d.push(_d(r)),We(this,o)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(r=>{We(this,r)})),this.outputPoseSegmentationMasks&&(Ut(i,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),$c(this,"pose_segmentation_mask"),this.g.Z("pose_segmentation_mask",((r,o)=>{this.h.poseSegmentationMasks=[Zc(this,r,!0,!this.D)],We(this,o)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(r=>{this.h.poseSegmentationMasks=[],We(this,r)}))),this.g.attachProtoListener("face_landmarks",((r,o)=>{vh(r,this.h.faceLandmarks),We(this,o)})),this.g.attachEmptyPacketListener("face_landmarks",(r=>{We(this,r)})),this.outputFaceBlendshapes&&(Qt(e,"extra_blendshapes"),Ut(i,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((r,o)=>{var d=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(r=w0(r),d.push(Hg(r.g()??[]))),We(this,o)})),this.g.attachEmptyPacketListener("extra_blendshapes",(r=>{We(this,r)}))),this.g.attachProtoListener("left_hand_landmarks",((r,o)=>{vh(r,this.h.leftHandLandmarks),We(this,o)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(r=>{We(this,r)})),this.g.attachProtoListener("left_hand_world_landmarks",((r,o)=>{var d=this.h.leftHandWorldLandmarks;r=Pc(r),d.push(_d(r)),We(this,o)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(r=>{We(this,r)})),this.g.attachProtoListener("right_hand_landmarks",((r,o)=>{vh(r,this.h.rightHandLandmarks),We(this,o)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(r=>{We(this,r)})),this.g.attachProtoListener("right_hand_world_landmarks",((r,o)=>{var d=this.h.rightHandWorldLandmarks;r=Pc(r),d.push(_d(r)),We(this,o)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(r=>{We(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Mn.prototype.detectForVideo=Mn.prototype.G,Mn.prototype.detect=Mn.prototype.F,Mn.prototype.setOptions=Mn.prototype.o,Mn.createFromModelPath=function(e,t){return Gt(Mn,e,{baseOptions:{modelAssetPath:t}})},Mn.createFromModelBuffer=function(e,t){return Gt(Mn,e,{baseOptions:{modelAssetBuffer:t}})},Mn.createFromOptions=function(e,t){return Gt(Mn,e,t)},Mn.HAND_CONNECTIONS=Qg,Mn.POSE_CONNECTIONS=ZA,Mn.FACE_LANDMARKS_LIPS=Xg,Mn.FACE_LANDMARKS_LEFT_EYE=Wg,Mn.FACE_LANDMARKS_LEFT_EYEBROW=Kg,Mn.FACE_LANDMARKS_LEFT_IRIS=WA,Mn.FACE_LANDMARKS_RIGHT_EYE=$g,Mn.FACE_LANDMARKS_RIGHT_EYEBROW=Jg,Mn.FACE_LANDMARKS_RIGHT_IRIS=KA,Mn.FACE_LANDMARKS_FACE_OVAL=Zg,Mn.FACE_LANDMARKS_CONTOURS=$A,Mn.FACE_LANDMARKS_TESSELATION=JA;var lr=class extends Ws{constructor(e,t){super(new Dr(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},lt(e=this.h=new TA,0,1,t=new $n)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return lt(this.h,0,2,Cm(e,Wt(this.h,jg,2))),this.l(e)}sa(e,t){return this.j={classifications:[]},Lr(this,e,t),this.j}ta(e,t,n){return this.j={classifications:[]},ea(this,e,n,t),this.j}m(){var e=new $s;Bn(e,"input_image"),Bn(e,"norm_rect"),Qt(e,"classifications");const t=new Ks;Zr(t,NR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Ln(n,"IMAGE:input_image"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"CLASSIFICATIONS:classifications"),n.o(t),pr(e,n),this.g.attachProtoListener("classifications",((i,r)=>{this.j=OR(pR(i)),We(this,r)})),this.g.attachEmptyPacketListener("classifications",(i=>{We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};lr.prototype.classifyForVideo=lr.prototype.ta,lr.prototype.classify=lr.prototype.sa,lr.prototype.setOptions=lr.prototype.o,lr.createFromModelPath=function(e,t){return Gt(lr,e,{baseOptions:{modelAssetPath:t}})},lr.createFromModelBuffer=function(e,t){return Gt(lr,e,{baseOptions:{modelAssetBuffer:t}})},lr.createFromOptions=function(e,t){return Gt(lr,e,t)};var Ls=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect",!0),this.h=new IA,this.embeddings={embeddings:[]},lt(e=this.h,0,1,t=new $n)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){var t=this.h,n=Wt(this.h,Fb,2);return n=n?n.clone():new Fb,e.l2Normalize!==void 0?pn(n,1,Md(e.l2Normalize)):"l2Normalize"in e&&pn(n,1),e.quantize!==void 0?pn(n,2,Md(e.quantize)):"quantize"in e&&pn(n,2),lt(t,0,2,n),this.l(e)}za(e,t){return Lr(this,e,t),this.embeddings}Aa(e,t,n){return ea(this,e,n,t),this.embeddings}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"embeddings_out");const t=new Ks;Zr(t,CR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"EMBEDDINGS:embeddings_out"),n.o(t),pr(e,n),this.g.attachProtoListener("embeddings_out",((i,r)=>{i=xR(i),this.embeddings=(function(o){return{embeddings:Ra(o,gR,1).map((d=>{var p,_;const g={headIndex:ur(d,3)??0??-1,headName:qi(Dn(d,4))??""??""};var x=d.v;return SE(x,0|x[Ze],Ub,V1(d,1))!==void 0?(d=ml(d=Wt(d,Ub,V1(d,1),void 0),1,Wr,pl()),g.floatEmbedding=d.slice()):(x=new Uint8Array(0),g.quantizedEmbedding=((_=(p=Wt(d,mR,V1(d,2),void 0))==null?void 0:p.na())==null?void 0:_.h())??x),g})),timestampMs:PA(TE(o))}})(i),We(this,r)})),this.g.attachEmptyPacketListener("embeddings_out",(i=>{We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ls.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=Yb(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Yb(qb(e.quantizedEmbedding),qb(t.quantizedEmbedding))}return e},Ls.prototype.embedForVideo=Ls.prototype.Aa,Ls.prototype.embed=Ls.prototype.za,Ls.prototype.setOptions=Ls.prototype.o,Ls.createFromModelPath=function(e,t){return Gt(Ls,e,{baseOptions:{modelAssetPath:t}})},Ls.createFromModelBuffer=function(e,t){return Gt(Ls,e,{baseOptions:{modelAssetBuffer:t}})},Ls.createFromOptions=function(e,t){return Gt(Ls,e,t)};var km=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach((n=>{n.close()})),(t=this.categoryMask)==null||t.close()}};function UR(e){var n,i;const t=(function(r){return Ra(r,vs,1)})(e.ca()).filter((r=>(qi(Dn(r,1))??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(e.u=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(((i=(n=Wt(t[0],Ks,7))==null?void 0:n.j())==null?void 0:i.g())??new Map).forEach(((r,o)=>{e.u[Number(o)]=qi(Dn(r,1))??""}))}function lw(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function cw(e){try{const t=new km(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{S0(e)}}km.prototype.close=km.prototype.close;var ys=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect",!1),this.u=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Gg,this.A=new RA,lt(this.h,0,3,this.A),lt(e=this.h,0,1,t=new $n)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?pn(this.h,2,zd(e.displayNamesLocale)):"displayNamesLocale"in e&&pn(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}L(){UR(this)}segment(e,t,n){const i=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,lw(this),Lr(this,e,i),cw(this)}La(e,t,n,i){const r=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:i,lw(this),ea(this,e,r,t),cw(this)}Da(){return this.u}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect");const t=new Ks;Zr(t,OA,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect"),n.o(t),pr(e,n),A0(this,e),this.outputConfidenceMasks&&(Qt(e,"confidence_masks"),Ut(n,"CONFIDENCE_MASKS:confidence_masks"),$c(this,"confidence_masks"),this.g.aa("confidence_masks",((i,r)=>{this.confidenceMasks=i.map((o=>Zc(this,o,!0,!this.j))),We(this,r)})),this.g.attachEmptyPacketListener("confidence_masks",(i=>{this.confidenceMasks=[],We(this,i)}))),this.outputCategoryMask&&(Qt(e,"category_mask"),Ut(n,"CATEGORY_MASK:category_mask"),$c(this,"category_mask"),this.g.Z("category_mask",((i,r)=>{this.categoryMask=Zc(this,i,!1,!this.j),We(this,r)})),this.g.attachEmptyPacketListener("category_mask",(i=>{this.categoryMask=void 0,We(this,i)}))),Qt(e,"quality_scores"),Ut(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((i,r)=>{this.qualityScores=i,We(this,r)})),this.g.attachEmptyPacketListener("quality_scores",(i=>{this.categoryMask=void 0,We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ys.prototype.getLabels=ys.prototype.Da,ys.prototype.segmentForVideo=ys.prototype.La,ys.prototype.segment=ys.prototype.segment,ys.prototype.setOptions=ys.prototype.o,ys.createFromModelPath=function(e,t){return Gt(ys,e,{baseOptions:{modelAssetPath:t}})},ys.createFromModelBuffer=function(e,t){return Gt(ys,e,{baseOptions:{modelAssetBuffer:t}})},ys.createFromOptions=function(e,t){return Gt(ys,e,t)};var Om=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach((n=>{n.close()})),(t=this.categoryMask)==null||t.close()}};Om.prototype.close=Om.prototype.close;var Xr=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Gg,this.u=new RA,lt(this.h,0,3,this.u),lt(e=this.h,0,1,t=new $n)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,t,n,i){const r=typeof n!="function"?n:{};if(this.j=typeof n=="function"?n:i,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.C+1,i=new MA,t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var o=new Y1;No(o,3,Md(!0),!1),No(o,1,gd(t.keypoint.x),0),No(o,2,gd(t.keypoint.y),0),bd(i,1,Nm,o)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");{const g=new IR;for(o of t.scribble)No(t=new Y1,3,Md(!0),!1),No(t,1,gd(o.x),0),No(t,2,gd(o.y),0),Eg(g,1,Y1,t);bd(i,2,Nm,g)}}this.g.addProtoToStream(i.g(),"mediapipe.tasks.vision.interactive_segmenter.proto.RegionOfInterest","roi_in",n),Lr(this,e,r);e:{try{const g=new Om(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var d=g;break e}this.j(g)}finally{S0(this)}d=void 0}return d}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"roi_in"),Bn(e,"norm_rect_in");const t=new Ks;Zr(t,OA,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraphV2"),Ln(n,"IMAGE:image_in"),Ln(n,"ROI:roi_in"),Ln(n,"NORM_RECT:norm_rect_in"),n.o(t),pr(e,n),A0(this,e),this.outputConfidenceMasks&&(Qt(e,"confidence_masks"),Ut(n,"CONFIDENCE_MASKS:confidence_masks"),$c(this,"confidence_masks"),this.g.aa("confidence_masks",((i,r)=>{this.confidenceMasks=i.map((o=>Zc(this,o,!0,!this.j))),We(this,r)})),this.g.attachEmptyPacketListener("confidence_masks",(i=>{this.confidenceMasks=[],We(this,i)}))),this.outputCategoryMask&&(Qt(e,"category_mask"),Ut(n,"CATEGORY_MASK:category_mask"),$c(this,"category_mask"),this.g.Z("category_mask",((i,r)=>{this.categoryMask=Zc(this,i,!1,!this.j),We(this,r)})),this.g.attachEmptyPacketListener("category_mask",(i=>{this.categoryMask=void 0,We(this,i)}))),Qt(e,"quality_scores"),Ut(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((i,r)=>{this.qualityScores=i,We(this,r)})),this.g.attachEmptyPacketListener("quality_scores",(i=>{this.categoryMask=void 0,We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Xr.prototype.segment=Xr.prototype.segment,Xr.prototype.setOptions=Xr.prototype.o,Xr.createFromModelPath=function(e,t){return Gt(Xr,e,{baseOptions:{modelAssetPath:t}})},Xr.createFromModelBuffer=function(e,t){return Gt(Xr,e,{baseOptions:{modelAssetBuffer:t}})},Xr.createFromOptions=function(e,t){return Gt(Xr,e,t)};var cr=class extends Ws{constructor(e,t){super(new Dr(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},lt(e=this.h=new DA,0,1,t=new $n)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?pn(this.h,2,zd(e.displayNamesLocale)):"displayNamesLocale"in e&&pn(this.h,2),e.maxResults!==void 0?ka(this.h,3,e.maxResults):"maxResults"in e&&pn(this.h,3),e.scoreThreshold!==void 0?it(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&pn(this.h,4),e.categoryAllowlist!==void 0?zh(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&pn(this.h,5),e.categoryDenylist!==void 0?zh(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&pn(this.h,6),this.l(e)}F(e,t){return this.j={detections:[]},Lr(this,e,t),this.j}G(e,t,n){return this.j={detections:[]},ea(this,e,n,t),this.j}m(){var e=new $s;Bn(e,"input_frame_gpu"),Bn(e,"norm_rect"),Qt(e,"detections");const t=new Ks;Zr(t,RR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.ObjectDetectorGraph"),Ln(n,"IMAGE:input_frame_gpu"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"DETECTIONS:detections"),n.o(t),pr(e,n),this.g.attachProtoVectorListener("detections",((i,r)=>{for(const o of i)i=dA(o),this.j.detections.push(jA(i));We(this,r)})),this.g.attachEmptyPacketListener("detections",(i=>{We(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};cr.prototype.detectForVideo=cr.prototype.G,cr.prototype.detect=cr.prototype.F,cr.prototype.setOptions=cr.prototype.o,cr.createFromModelPath=async function(e,t){return Gt(cr,e,{baseOptions:{modelAssetPath:t}})},cr.createFromModelBuffer=function(e,t){return Gt(cr,e,{baseOptions:{modelAssetBuffer:t}})},cr.createFromOptions=function(e,t){return Gt(cr,e,t)};var Mm=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){var e;(e=this.segmentationMasks)==null||e.forEach((t=>{t.close()}))}};function uw(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function dw(e){try{const t=new Mm(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.u)return t;e.u(t)}finally{S0(e)}}Mm.prototype.close=Mm.prototype.close;var Ps=class extends Ws{constructor(e,t){super(new Dr(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,lt(e=this.h=new LA,0,1,t=new $n),this.A=new NA,lt(this.h,0,3,this.A),this.j=new SA,lt(this.h,0,2,this.j),ka(this.j,4,1),it(this.j,2,.5),it(this.A,2,.5),it(this.h,4,.5)}get baseOptions(){return Wt(this.h,$n,1)}set baseOptions(e){lt(this.h,0,1,e)}o(e){return"numPoses"in e&&ka(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&it(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&it(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&it(this.A,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}F(e,t,n){const i=typeof t!="function"?t:{};return this.u=typeof t=="function"?t:n,uw(this),Lr(this,e,i),dw(this)}G(e,t,n,i){const r=typeof n!="function"?n:{};return this.u=typeof n=="function"?n:i,uw(this),ea(this,e,r,t),dw(this)}m(){var e=new $s;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"normalized_landmarks"),Qt(e,"world_landmarks"),Qt(e,"segmentation_masks");const t=new Ks;Zr(t,kR,this.h);const n=new vs;Ys(n,2,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Ln(n,"IMAGE:image_in"),Ln(n,"NORM_RECT:norm_rect"),Ut(n,"NORM_LANDMARKS:normalized_landmarks"),Ut(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),pr(e,n),A0(this,e),this.g.attachProtoVectorListener("normalized_landmarks",((i,r)=>{this.landmarks=[];for(const o of i)i=Hd(o),this.landmarks.push(E0(i));We(this,r)})),this.g.attachEmptyPacketListener("normalized_landmarks",(i=>{this.landmarks=[],We(this,i)})),this.g.attachProtoVectorListener("world_landmarks",((i,r)=>{this.worldLandmarks=[];for(const o of i)i=Pc(o),this.worldLandmarks.push(_d(i));We(this,r)})),this.g.attachEmptyPacketListener("world_landmarks",(i=>{this.worldLandmarks=[],We(this,i)})),this.outputSegmentationMasks&&(Ut(n,"SEGMENTATION_MASK:segmentation_masks"),$c(this,"segmentation_masks"),this.g.aa("segmentation_masks",((i,r)=>{this.segmentationMasks=i.map((o=>Zc(this,o,!0,!this.u))),We(this,r)})),this.g.attachEmptyPacketListener("segmentation_masks",(i=>{this.segmentationMasks=[],We(this,i)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ps.prototype.detectForVideo=Ps.prototype.G,Ps.prototype.detect=Ps.prototype.F,Ps.prototype.setOptions=Ps.prototype.o,Ps.createFromModelPath=function(e,t){return Gt(Ps,e,{baseOptions:{modelAssetPath:t}})},Ps.createFromModelBuffer=function(e,t){return Gt(Ps,e,{baseOptions:{modelAssetBuffer:t}})},Ps.createFromOptions=function(e,t){return Gt(Ps,e,t)},Ps.POSE_CONNECTIONS=ZA;const QA=({onCapture:e,onCancel:t,ctaLabel:n="Confirmar Biometria"})=>{const i=V.useRef(null),r=V.useRef(null),[o,d]=V.useState(null),[g,x]=V.useState(null),[p,_]=V.useState(null),[E,N]=V.useState(!1),[k,O]=V.useState(null),[L,P]=V.useState(null),[H,B]=V.useState("IDLE"),[j,F]=V.useState("Iniciando sensor biomtrico..."),Y=V.useRef(null);V.useEffect(()=>{(async()=>{try{const ue=await cl.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm"),X=await Bs.createFromOptions(ue,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_detector/blaze_face_short_range/float16/1/blaze_face_short_range.tflite",delegate:"GPU"},runningMode:"VIDEO"});P(X),F("Aguardando cmera...")}catch(ue){console.error("Erro ao carregar IA:",ue),B("VALID"),F("")}})()},[]),V.useEffect(()=>(W(),()=>{te(),Y.current&&cancelAnimationFrame(Y.current)}),[]),V.useEffect(()=>{E&&L&&!p&&ie()},[E,L,p]);const W=async()=>{try{const Ne=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}},audio:!1});d(Ne),i.current&&(i.current.srcObject=Ne,i.current.onloadeddata=()=>N(!0))}catch(Ne){console.error("Erro cmera:",Ne),O("Permisso de cmera necessria para biometria.")}},te=()=>{o&&(o.getTracks().forEach(Ne=>Ne.stop()),d(null))},ne=Ne=>{const ue=document.createElement("canvas");ue.width=50,ue.height=50;const X=ue.getContext("2d");if(!X)return 100;X.drawImage(Ne,0,0,50,50);const J=X.getImageData(0,0,50,50).data;let oe,fe,Se,ee,ae=0;for(let ve=0,Ie=J.length;ve<Ie;ve+=4)oe=J[ve],fe=J[ve+1],Se=J[ve+2],ee=Math.floor((oe+fe+Se)/3),ae+=ee;return Math.floor(ae/2500)},ie=()=>{const Ne=async()=>{var J;if(!i.current||!L)return;const ue=i.current;if(ue.videoWidth===0||ue.videoHeight===0){Y.current=requestAnimationFrame(Ne);return}const X=performance.now();if(ne(ue)<40){F("Ambiente muito escuro. Melhore a luz."),B("INVALID"),Y.current=requestAnimationFrame(Ne);return}try{const oe=L.detectForVideo(ue,X);if(oe.detections.length===0)F("Rosto no detectado."),B("INVALID");else if(oe.detections.length>1)F("Apenas uma pessoa permitida."),B("INVALID");else{const fe=oe.detections[0],Se=fe.boundingBox,ee=Se.width/ue.videoWidth,ae=Se.originX+Se.width/2,ve=Math.abs(ue.videoWidth/2-ae)/ue.videoWidth;ee<.2?(F("Aproxime o rosto."),B("INVALID")):ee>.75?(F("Afaste-se um pouco."),B("INVALID")):ve>.15?(F("Centralize o rosto."),B("INVALID")):(((J=fe.categories[0])==null?void 0:J.score)??0)<.7?(F("Mantenha o rosto firme."),B("INVALID")):(F("Perfeito. Toque para capturar."),B("VALID"))}}catch(oe){console.warn("MediaPipe error:",oe)}Y.current=requestAnimationFrame(Ne)};Ne()},_e=()=>{if(H!=="VALID"&&E||!i.current||!r.current)return;const Ne=i.current,ue=r.current;ue.width=Ne.videoWidth,ue.height=Ne.videoHeight;const X=ue.getContext("2d");X&&(X.translate(ue.width,0),X.scale(-1,1),X.drawImage(Ne,0,0,ue.width,ue.height),ue.toBlob(K=>{K&&(x(K),_(URL.createObjectURL(K)),te(),Y.current&&cancelAnimationFrame(Y.current))},"image/jpeg",.8))},Ee=()=>{x(null),_(null),B("IDLE"),F("Reiniciando sensores..."),W()},pe=()=>p?"border-white/20":H==="VALID"?"border-[#d4af37] shadow-[0_0_30px_rgba(212,175,55,0.5)]":H==="INVALID"?"border-red-500/50 shadow-[0_0_20px_rgba(220,38,38,0.3)]":"border-white/10";return u.jsxs("div",{className:"flex flex-col items-center space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h3",{className:"text-white text-sm font-black uppercase tracking-widest",children:"Biometria Facial"}),u.jsx("p",{className:`text-[8px] font-black uppercase tracking-[0.3em] leading-relaxed transition-colors duration-300 ${H==="INVALID"?"text-red-400":H==="VALID"?"text-[#d4af37]":"text-zinc-500"}`,children:g?"VERIFIQUE SUA FOTO":j})]}),u.jsx("div",{className:`relative w-72 h-72 rounded-full border-4 overflow-hidden bg-zinc-900 transition-all duration-300 ${pe()}`,children:p?u.jsx("img",{src:p,className:"w-full h-full object-cover scale-x-[-1]",alt:"Selfie"}):u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}),(!E||!L)&&!k&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:u.jsx("div",{className:"w-8 h-8 border-2 border-[#d4af37]/20 border-t-[#d4af37] rounded-full animate-spin"})}),k&&u.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center bg-zinc-900",children:u.jsx("span",{className:"text-red-500 text-[9px] font-black uppercase leading-relaxed",children:k})}),u.jsx("div",{className:"absolute inset-0 border-[40px] border-black/60 pointer-events-none rounded-full"}),H==="VALID"&&u.jsx("div",{className:"absolute inset-4 border-2 border-[#d4af37]/30 rounded-full animate-pulse pointer-events-none"})]})}),u.jsx("canvas",{ref:r,className:"hidden"}),u.jsx("div",{className:"w-full flex flex-col gap-3",children:p?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>e(g),className:"w-full py-5 bg-[#d4af37] text-black font-black rounded-full uppercase text-[10px] tracking-widest shadow-xl active:scale-95 transition-all",children:n}),u.jsx("button",{onClick:Ee,className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest",children:"Refazer Captura"})]}):u.jsx(u.Fragment,{children:u.jsx("button",{onClick:_e,disabled:!E||H!=="VALID",className:`w-full py-5 font-black rounded-full uppercase text-[10px] tracking-widest transition-all shadow-xl ${H==="VALID"?"bg-white text-black active:scale-95":"bg-zinc-800 text-zinc-600 opacity-50 cursor-not-allowed"}`,children:H==="VALID"?"Capturar":"Ajuste o Rosto..."})})})]})},FR=({step:e,transferAuthPassword:t,setTransferAuthPassword:n,isProcessingLocal:i,onAuthSubmit:r,onCancel:o,onUserSelect:d,transferTarget:g,onFinalize:x})=>{var p;return u.jsxs(u.Fragment,{children:[e==="AUTH"&&u.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in zoom-in-95",children:u.jsxs("div",{className:"w-full max-w-xs space-y-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border border-[#d4af37]/30 flex items-center justify-center mx-auto bg-zinc-900 shadow-xl",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-[#d4af37]",children:u.jsx("path",{d:"M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-9h-1V6a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2zM9 6a3 3 0 1 1 6 0v2H9V6z"})})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-xl font-serif italic text-white uppercase tracking-tighter",children:"Re-autenticao"}),u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:"Confirme sua senha para liberar a transferncia segura de acesso."})]}),u.jsxs("form",{onSubmit:r,className:"space-y-4",children:[u.jsx("input",{type:"password",value:t,onChange:_=>n(_.target.value),placeholder:"SENHA ATUAL",className:"w-full bg-zinc-900 border border-white/10 rounded-2xl p-5 text-center text-white text-[12px] uppercase tracking-[0.5em] outline-none focus:border-[#d4af37]/30"}),u.jsx("button",{disabled:i||!t,className:"w-full py-5 bg-white text-black font-black rounded-full uppercase text-[10px] tracking-widest shadow-xl",children:i?"Validando...":"Confirmar Protocolo"})]}),u.jsx("button",{onClick:o,className:"text-zinc-600 text-[8px] font-black uppercase tracking-widest",children:"Cancelar"})]})}),e==="PICK_USER"&&u.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in slide-in-from-bottom duration-500",children:u.jsxs("div",{className:"w-full max-sm space-y-8",children:[u.jsxs("header",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"GIFT PROTOCOL: PASSO 1"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Destinatrio"})]}),u.jsx("div",{className:"bg-zinc-950 border border-white/5 rounded-[3rem] p-8 shadow-2xl",children:u.jsx(eu,{onSelect:d,placeholder:"BUSCAR AMIGO PARA PRESENTEAR...",label:"Selecionar Membro"})}),u.jsx("button",{onClick:o,className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest text-center",children:"Abortar Transferncia"})]})}),e==="SELFIE_CHECK"&&g&&u.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/95 backdrop-blur-3xl flex items-center justify-center p-6 animate-in zoom-in-95 duration-500 overflow-y-auto no-scrollbar",children:u.jsxs("div",{className:"w-full max-sm space-y-10 py-10",children:[u.jsxs("header",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-[8px] text-[#d4af37] font-black uppercase tracking-[0.5em] italic",children:"GIFT PROTOCOL: PASSO 2"}),u.jsx("h3",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter",children:"Assinatura Biomtrica"}),u.jsxs("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest leading-relaxed",children:["Precisamos de uma selfie rpida para validar que voc",u.jsx("br",{}),"est transferindo o acesso a ",(p=g.full_name)==null?void 0:p.split(" ")[0],"."]})]}),u.jsx("div",{className:"bg-zinc-950 border border-white/5 rounded-[3.5rem] p-10 shadow-2xl",children:u.jsx(QA,{onCapture:x,onCancel:o,ctaLabel:"Assinar e Enviar"})})]})}),e==="PROCESSING"&&u.jsxs("div",{className:"fixed inset-0 z-[11000] bg-black/90 backdrop-blur-md flex flex-col items-center justify-center space-y-6",children:[u.jsx("div",{className:"w-12 h-12 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"}),u.jsx("p",{className:"text-[10px] text-white font-black uppercase tracking-[0.4em] animate-pulse",children:"Criptografando Presente..."})]})]})},e4=({currentUser:e,embedMode:t=!1})=>{const[n,i]=V.useState("TICKETS"),[r,o]=V.useState([]),[d,g]=V.useState([]),[x,p]=V.useState([]),[_,E]=V.useState(!0),[N,k]=V.useState(null),[O,L]=V.useState(null),[P,H]=V.useState({name:"",cpf:""}),[B,j]=V.useState(!1),[F,Y]=V.useState(!0),[W,te]=V.useState(""),[ne,ie]=V.useState(!1),[_e,Ee]=V.useState(0),[pe,Ne]=V.useState(null),[ue,X]=V.useState(""),[K,J]=V.useState("IDLE"),[oe,fe]=V.useState(null),[Se,ee]=V.useState(null),[ae,ve]=V.useState(""),[Ie,qe]=V.useState(!1),Oe=!!e.isGloballyRestricted,xt=["admin","master","vanta_master","vanta_prod","produtor","vanta_socio","vanta_promoter","vanta_portaria","vanta_staff"].includes(e.role.toLowerCase());V.useEffect(()=>{Y(!0);const ze=localStorage.getItem(`vanta_wallet_lock_${e.id}`);if(ze){const ft=parseInt(ze,10);ft>Date.now()?(Ne(ft),Ee(3)):localStorage.removeItem(`vanta_wallet_lock_${e.id}`)}},[e.id]),V.useEffect(()=>{if(!pe)return;const ze=setInterval(()=>{const ft=Date.now(),De=pe-ft;if(De<=0)Ne(null),Ee(0),localStorage.removeItem(`vanta_wallet_lock_${e.id}`),clearInterval(ze);else{const wt=Math.floor(De/6e4),Un=Math.floor(De%6e4/1e3);X(`${wt}:${Un.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(ze)},[pe]);const mt=async()=>{if(Q){E(!0);try{const{data:ze}=await Q.from("user_tickets").select("id, source, status, hash, used_at, created_at, event_id, promoter_id, guest_name, guest_cpf, events(id, title, city, start_at, image_url, is_transfer_enabled)").eq("user_id",e.id),ft=(ze||[]).map(wt=>{if(!wt.events)return wt;const Un=Array.isArray(wt.events)?wt.events[0]:wt.events,Nt=new Date(Un.start_at);return{...wt,events:{...Un,image:Un.image_url,start_date:Nt.toLocaleDateString("pt-BR"),start_at:Un.start_at,isTransferEnabled:Un.is_transfer_enabled!==!1}}});if(o(ft),xt){const{data:wt}=await Q.from("events").select("*, communities(name)").contains("staff",JSON.stringify([{id:e.id}])),Un=await Promise.all((wt||[]).map(async Nt=>{const{count:ls}=await Q.from("user_tickets").select("id",{count:"exact",head:!0}).eq("event_id",Nt.id).eq("promoter_id",e.id).eq("source","complimentary"),{count:Zn}=await Q.from("user_tickets").select("id",{count:"exact",head:!0}).eq("event_id",Nt.id).eq("promoter_id",e.id).eq("source","complimentary").eq("status","used");return{...Nt,vipUsed:ls||0,vipEntered:Zn||0}}));g(Un)}const De=await F5(e.id);p(De)}catch(ze){console.error("[VANTA WALLET] Erro ao carregar dados:",ze)}finally{E(!1)}}};V.useEffect(()=>{F||mt()},[e.id,F]);const Ft=async ze=>{if(ze.preventDefault(),!(!W.trim()||pe)){ie(!0);try{const{error:ft}=await Q.auth.signInWithPassword({email:e.email,password:W});if(ft){const De=_e+1;if(Ee(De),De>=3){const wt=Date.now()+3e5;Ne(wt),localStorage.setItem(`vanta_wallet_lock_${e.id}`,wt.toString()),te("")}}else Y(!1),Ee(0)}finally{ie(!1)}}},In=ze=>{if(Oe){Fe.toast("error","Acesso Negado","ACESSO BLOQUEADO PELO CONSELHO");return}ze.guest_cpf?k(ze):(H({name:e.fullName,cpf:""}),L(ze))},En=async ze=>{if(ze.preventDefault(),!!O){if(P.name.length<5||P.cpf.length!==11){Fe.toast("error","Dados Invlidos","Dados invlidos. CPF deve ter 11 dgitos.");return}Fe.confirm({title:"Validao Biomtrica",message:"Confirmar dados do titular? Esta ao  irreversvel.",confirmLabel:"Sim, Confirmar",onConfirm:async()=>{j(!0);try{const ft=await D5({ticketId:O.id,guestName:P.name,guestCpf:P.cpf});ft.success?(Fe.toast("success","Validado","Titularidade Confirmada. Acesso Liberado."),o(De=>De.map(wt=>wt.id===O.id?{...wt,guest_name:P.name.toUpperCase(),guest_cpf:P.cpf}:wt)),k({...O,guest_name:P.name.toUpperCase(),guest_cpf:P.cpf}),L(null)):Fe.toast("error","Erro",ft.message)}catch{Fe.toast("error","Erro","Erro de conexo.")}finally{j(!1)}}})}},oi=ze=>{if(Oe){Fe.toast("error","Suspenso","TRANSFERNCIAS SUSPENSAS");return}fe(ze),J("AUTH")},At=ze=>{const ft=`${window.location.origin}/activate?event=${ze}&staff=${e.id}`;navigator.clipboard&&(navigator.clipboard.writeText(ft),Fe.toast("success","Copiado","Link de Convite Copiado"))},bn=async ze=>{if(ze.preventDefault(),!!ae.trim()){qe(!0);try{const{error:ft}=await Q.auth.signInWithPassword({email:e.email,password:ae});ft?Fe.toast("error","Erro","Senha Incorreta"):(J("PICK_USER"),ve(""))}finally{qe(!1)}}},Jn=async ze=>{var ft;!oe||!Se||Fe.confirm({title:"Gift Protocol",message:`Transferir ingresso permanentemente para ${(ft=Se.full_name)==null?void 0:ft.split(" ")[0]}?`,confirmLabel:"Transferir Agora",onConfirm:async()=>{J("PROCESSING");try{const De=await U5(oe.id,e.id,Se.id,ze);De.success?(Fe.toast("success","Enviado","Protocolo de Transferncia Ativado"),J("IDLE"),fe(null),ee(null),mt()):(Fe.toast("error","Falha",De.message||"Falha na transferncia"),J("IDLE"))}catch{Fe.toast("error","Erro","Erro de conexo"),J("IDLE")}}})},mn=async ze=>{qe(!0);try{const{error:ft}=await Q.rpc("confirm_staff_presence",{p_event_id:ze,p_user_id:e.id,p_status:"CONFIRMED"});ft||(Fe.toast("success","Confirmado","Presena Confirmada Protocolada"),mt())}finally{qe(!1)}},en=async(ze,ft)=>{var Un;if(Oe&&ft==="accept"){Fe.toast("error","Bloqueado","RECEBIMENTO BLOQUEADO");return}const De=x.find(Nt=>Nt.id===ze),wt=((Un=De==null?void 0:De.sender)==null?void 0:Un.name)||"Membro";Fe.confirm({title:ft==="accept"?"Aceitar Gift":"Devolver Gift",message:ft==="accept"?`Aceitar convite de ${wt}?`:`Recusar convite de ${wt}?`,confirmLabel:ft==="accept"?"Aceitar":"Devolver",isDestructive:ft==="return",onConfirm:async()=>{qe(!0);try{const Nt=await z5(ze,ft,e.id);Nt.success?(Fe.toast("success","Processado",Nt.message||"Protocolo Processado"),mt()):Fe.toast("error","Erro",Nt.message||"Erro ao processar")}finally{qe(!1)}}})},zt=V.useMemo(()=>{const ze=new Date,ft=[...r].sort((De,wt)=>{var ls,Zn;const Un=(ls=De.events)!=null&&ls.start_at?new Date(De.events.start_at).getTime():0,Nt=(Zn=wt.events)!=null&&Zn.start_at?new Date(wt.events.start_at).getTime():0;return Un-Nt});return{upcoming:ft.filter(De=>{var wt;return De.status==="active"&&((wt=De.events)==null?void 0:wt.start_at)&&new Date(De.events.start_at)>=new Date(ze.getTime()-480*60*1e3)}),history:ft.filter(De=>{var wt;return De.status==="used"||((wt=De.events)==null?void 0:wt.start_at)&&new Date(De.events.start_at)<new Date(ze.getTime()-480*60*1e3)}).reverse()}},[r]);return F?u.jsx(z8,{embedMode:t,lockoutTimestamp:pe,timeLeft:ue,password:W,setPassword:te,isVerifying:ne,onUnlock:Ft}):u.jsxs("div",{className:`flex-1 flex flex-col animate-in fade-in duration-500 overflow-hidden pb-10 ${t?"w-full":"bg-black h-full"}`,children:[!t&&u.jsxs("header",{className:"px-10 pt-20 pb-10 flex-shrink-0 safe-top",children:[u.jsx("h1",{className:"text-5xl font-serif italic text-white tracking-tighter",children:"Acesso"}),xt&&u.jsxs("div",{className:"flex gap-6 mt-6 border-b border-white/5",children:[u.jsxs("button",{onClick:()=>i("TICKETS"),className:`pb-4 text-[9px] font-black uppercase tracking-[0.3em] relative ${n==="TICKETS"?"text-[#d4af37]":"text-zinc-600"}`,children:["Meus Tickets ",n==="TICKETS"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]}),u.jsxs("button",{onClick:()=>i("STAFF_AGENDA"),className:`pb-4 text-[9px] font-black uppercase tracking-[0.3em] relative ${n==="STAFF_AGENDA"?"text-[#d4af37]":"text-zinc-600"}`,children:["Agenda Staff ",n==="STAFF_AGENDA"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-12 px-6",children:n==="TICKETS"?u.jsx(V8,{tickets:zt.upcoming,pendingGifts:x,isRestricted:Oe,onGiftResponse:en,onOpenTicket:In,onStartTransfer:oi}):u.jsx(G8,{staffEvents:d,currentUser:e,onGenerateInvite:At,onConfirmPresence:mn})}),u.jsx(Q8,{selectedTicket:N,ticketToValidate:O,validationData:P,setValidationData:H,isValidating:B,onCloseSelection:()=>k(null),onCloseValidation:()=>L(null),onValidationSubmit:En,isRestricted:Oe}),u.jsx(FR,{step:K,transferAuthPassword:ae,setTransferAuthPassword:ve,isProcessingLocal:Ie,onAuthSubmit:bn,onCancel:()=>{J("IDLE"),fe(null)},onUserSelect:ze=>{ee(ze),J("SELFIE_CHECK")},transferTarget:Se,onFinalize:Jn})]})},zR=({currentUser:e,localData:t,activeSubTab:n,setActiveSubTab:i,onEdit:r,onLogout:o,onOpenAdmin:d,isAdmin:g})=>{const x=()=>{Fe.confirm({title:"Sair do Sistema",message:"Deseja sair do VANTA?",confirmLabel:"Sim, Sair",onConfirm:()=>{o(),Fe.toast("success","Desconectado","Voc foi deslogado com sucesso.")}})};return u.jsxs("div",{className:"w-full flex flex-col items-center p-8 pt-32 pb-32 animate-in fade-in duration-500 overflow-y-auto no-scrollbar h-full relative",children:[u.jsxs("div",{className:"relative mb-8 shrink-0",children:[u.jsx("div",{className:`w-32 h-32 rounded-full p-1 overflow-hidden relative border ${t.isPlus?"border-[#d4af37]/80 shadow-[0_0_30px_rgba(212,175,55,0.2)]":"border-white/10"}`,children:u.jsx(Kn,{src:t.avatar,gender:e.gender,alt:"Profile"})}),t.isPlus&&u.jsx("div",{className:"absolute -top-1 -right-1 w-8 h-8 bg-[#d4af37] rounded-full border-4 border-black flex items-center justify-center",children:u.jsx(Ge.Star,{className:"w-3 h-3 text-black"})})]}),u.jsxs("div",{className:"text-center mb-6 shrink-0",children:[u.jsx("h2",{className:"text-4xl font-serif italic text-white tracking-tighter uppercase leading-none",children:e.fullName}),u.jsxs("p",{className:"text-[#d4af37] text-[9px] font-black uppercase tracking-[0.4em] italic mt-2",children:["@",e.instagram]})]}),u.jsxs("div",{className:"flex gap-10 mb-10 border-b border-white/5 w-full justify-center shrink-0",children:[u.jsxs("button",{onClick:()=>i("perfil"),className:`pb-4 text-[9px] font-black uppercase tracking-[0.3em] transition-all relative ${n==="perfil"?"text-white":"text-zinc-600"}`,children:["Perfil ",n==="perfil"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]}),u.jsxs("button",{onClick:()=>i("carteira"),className:`pb-4 text-[9px] font-black uppercase tracking-[0.3em] transition-all relative ${n==="carteira"?"text-white":"text-zinc-600"}`,children:["Carteira ",n==="carteira"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#d4af37]"})]})]}),n==="perfil"?u.jsxs("div",{className:"w-full flex flex-col items-center animate-in fade-in duration-300",children:[u.jsx("div",{className:"w-full max-xs text-center mb-12 shrink-0",children:u.jsx("p",{className:"text-zinc-400 text-[11px] leading-relaxed uppercase tracking-wider font-light",children:t.bio||"SEM BIOGRAFIA DEFINIDA."})}),t.gallery.filter(Boolean).length>0&&u.jsxs("div",{className:"w-full space-y-4 mb-12 shrink-0",children:[u.jsx("h4",{className:"text-[8px] text-zinc-700 font-black uppercase tracking-[0.4em] text-center italic",children:"Galeria"}),u.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar px-4",children:t.gallery.filter(Boolean).map((p,_)=>u.jsx("div",{className:"w-40 aspect-[4/5] shrink-0 rounded-[2rem] overflow-hidden border border-white/5",children:u.jsx("img",{src:p,className:"w-full h-full object-cover transition-all duration-500",alt:`Gallery ${_}`})},_))})]}),u.jsxs("div",{className:"w-full max-w-xs space-y-4 mb-8 shrink-0",children:[g&&u.jsx("button",{onClick:d,className:"w-full py-5 bg-[#d4af37] text-black text-[10px] font-black uppercase rounded-full shadow-[0_0_200px_rgba(212,175,55,0.3)] active:scale-95 transition-all",children:"Painel Administrativo"}),u.jsx("button",{onClick:r,className:"w-full py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-xl active:scale-95 transition-all",children:"Editar Perfil"}),u.jsx("button",{onClick:x,className:"w-full py-5 border border-white/10 text-white text-[10px] font-black uppercase rounded-full hover:bg-white/5 active:scale-95 transition-all",children:"Sair"})]})]}):u.jsx("div",{className:"w-full animate-in slide-in-from-right duration-300 min-h-[500px]",children:u.jsx(e4,{currentUser:e,embedMode:!0})})]})},VR=({currentUser:e,onLogout:t,onOpenAdmin:n})=>{const[i,r]=V.useState(!1),[o,d]=V.useState(!1),[g,x]=V.useState("perfil"),[p,_]=V.useState(null),E=V.useRef(null),N=V.useRef(null),[k,O]=V.useState(null),[L,P]=V.useState(null),[H,B]=V.useState({}),[j,F]=V.useState([]),[Y,W]=V.useState({bio:e.bio||"",avatar:e.avatar,gallery:e.gallery||[],isPlus:e.isVantaPlus||!1,privacy:e.privacy||{profileInfo:"todos",confirmedEvents:"amigos",messages:"amigos"},gender:e.gender});V.useEffect(()=>{W({bio:e.bio||"",avatar:e.avatar,gallery:e.gallery||[],isPlus:e.isVantaPlus||!1,privacy:e.privacy||{profileInfo:"todos",confirmedEvents:"amigos",messages:"amigos"},gender:e.gender})},[e]);const te=()=>{j.forEach(J=>URL.revokeObjectURL(J)),F([]),P(null),B({})},ne=()=>{if(!Q||!e)return;const J=L,oe={...H},fe={...Y};Dc.updateProfile({...fe}),r(!1),Fe.toast("success","Informaes atualizadas","Perfil salvo com sucesso."),(async()=>{console.log("[VANTA_SYNC] Iniciando persistncia em segundo plano...");try{let ee=fe.avatar,ae=[...fe.gallery];const ve=[];J&&ve.push(Wv(e.id,J,"avatar_main").then(qe=>({type:"avatar",url:qe}))),Object.entries(oe).forEach(([qe,Oe])=>{const xt=Number(qe);ve.push(Wv(e.id,Oe,`gallery_${xt}`).then(mt=>({type:"gallery",index:xt,url:mt})))}),ve.length>0&&(await Promise.all(ve)).forEach(Oe=>{Oe.type==="avatar"?ee=Oe.url:Oe.type==="gallery"&&(ae[Oe.index]=Oe.url)});const Ie={bio:fe.bio,privacy:fe.privacy,avatar_url:ee,gallery:ae,updated_at:new Date().toISOString()};await Q.from("profiles").update(Ie).eq("id",e.id),await Q.auth.updateUser({data:{avatar_url:ee,bio:fe.bio,gallery:ae}}),Dc.updateProfile({...fe,avatar:ee,gallery:ae}),console.log("[VANTA_SYNC] Sincronizao concluda com sucesso.")}catch(ee){console.error("[VANTA_SYNC] Erro na sincronizao:",ee)}finally{te()}})()},ie=J=>{var oe;O(J),(oe=N.current)==null||oe.click()},_e=J=>{var fe;const oe=(fe=J.target.files)==null?void 0:fe[0];if(oe&&k!==null){const Se=new FileReader;Se.onloadend=()=>{_({src:Se.result,type:"gallery",index:k}),O(null)},Se.readAsDataURL(oe)}J.target.value=""},Ee=J=>{var fe;const oe=(fe=J.target.files)==null?void 0:fe[0];if(oe){const Se=new FileReader;Se.onloadend=()=>{_({src:Se.result,type:"avatar"})},Se.readAsDataURL(oe)}J.target.value=""},pe=async J=>{if(p)try{const oe=MI(J);p.type==="avatar"?(P(oe),W(fe=>({...fe,avatar:J}))):p.type==="gallery"&&p.index!==void 0&&(B(fe=>({...fe,[p.index]:oe})),W(fe=>{const Se=[...fe.gallery];return Se[p.index]=J,{...fe,gallery:Se}}))}catch(oe){console.error("Erro ao processar recorte:",oe)}finally{_(null)}},Ne=J=>{W(oe=>{const fe=[...oe.gallery];return fe[J]="",{...oe,gallery:fe}}),B(oe=>{const fe={...oe};return delete fe[J],fe})},ue=J=>{const oe=Y.gallery.indexOf(J);oe!==-1&&H[oe]?P(H[oe]):P(null),W(fe=>({...fe,avatar:J}))},X=()=>{te(),r(!1)},K=CN(e);return u.jsxs(u.Fragment,{children:[i?u.jsx(F8,{localData:Y,setLocalData:W,isSaving:o,onCancel:X,onSave:ne,pendingAvatarBlob:L,pendingGalleryBlobs:H,handleAvatarFileChange:Ee,handleGalleryFileChange:_e,handleGalleryPhotoClick:ie,removePhoto:Ne,setAsProfilePicture:ue,fileInputRef:E,galleryFileInputRef:N,onLogout:t}):u.jsx(zR,{currentUser:e,localData:Y,activeSubTab:g,setActiveSubTab:x,onEdit:()=>r(!0),onLogout:t,onOpenAdmin:n,isAdmin:K}),p&&u.jsx(Qm,{imageSrc:p.src,onConfirm:pe,onCancel:()=>_(null)})]})},GR=({activeTab:e,onTabChange:t,query:n,onQueryChange:i})=>u.jsxs("header",{className:"px-10 pt-20 pb-6 flex-shrink-0 safe-top space-y-8",children:[u.jsx("h1",{className:"text-5xl font-serif italic text-white tracking-tighter",children:"Buscar"}),u.jsxs("div",{className:"relative",children:[u.jsx(Ge.Search,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),u.jsx("input",{type:"text",value:n,onChange:r=>i(r.target.value),placeholder:e==="EVENTOS"?"PROCURAR SESSES...":"BUSCAR MEMBROS...",className:"w-full bg-zinc-900/50 border border-white/5 rounded-full py-6 pl-14 pr-6 text-[10px] text-white uppercase tracking-[0.2em] outline-none focus:border-[#d4af37]/30 transition-all placeholder:text-zinc-700"})]}),u.jsx("div",{className:"flex gap-8 border-b border-white/5",children:["EVENTOS","MEMBROS"].map(r=>u.jsxs("button",{onClick:()=>t(r),className:`pb-4 text-[9px] font-black uppercase tracking-[0.4em] transition-all relative ${e===r?"text-[#d4af37]":"text-zinc-700"}`,children:[r,e===r&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-[#d4af37] animate-in slide-in-from-left duration-300"})]},r))})]}),HR=({events:e,query:t,onEventClick:n})=>u.jsx("div",{className:"space-y-4",children:t.trim()?e.length>0?e.map(i=>u.jsxs("div",{onClick:()=>n==null?void 0:n(i.id),className:"group flex items-center gap-6 p-4 bg-zinc-900/20 border border-white/5 rounded-[2rem] hover:bg-white/5 transition-all cursor-pointer active:scale-95",children:[u.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden flex-shrink-0",children:u.jsxs(u.Fragment,{children:[u.jsx("img",{src:i.image,onError:r=>{const o=r.currentTarget;o.style.display="none";const d=o.parentElement,g=d==null?void 0:d.querySelector('[data-vanta-fallback="event"]');g&&(g.style.display="flex")},className:"w-full h-full object-cover transition-all duration-500",alt:""}),u.jsx("div",{"data-vanta-fallback":"event",style:{display:"none"},className:"w-full h-full items-center justify-center bg-zinc-950",children:u.jsx("span",{className:"text-[10px] font-serif italic text-[#d4af37] font-bold",children:"V"})})]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-white text-[11px] font-black uppercase tracking-widest mb-1 truncate",children:i.title}),u.jsx("p",{className:"text-zinc-500 text-[8px] font-black uppercase tracking-widest truncate",children:i.location})]})]},i.id)):u.jsx("div",{className:"py-20 text-center opacity-30",children:u.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhuma sesso encontrada"})}):u.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-center px-8 space-y-6",children:[u.jsx(Ge.Search,{className:"w-10 h-10 text-zinc-800 opacity-20"}),u.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em] text-zinc-700 leading-relaxed max-w-[280px]",children:"O ACESSO AOS MELHORES EVENTOS COMEA AQUI. PROCURE POR EVENTOS OU CLUBES."})]})}),qR=({members:e,isLoading:t,query:n,friendships:i,onMemberClick:r,onAction:o})=>u.jsx("div",{className:"space-y-4",children:n.trim()?t?u.jsx("div",{className:"py-20 flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"})}):e.length>0?e.map(d=>{const g=i[d.id]||"none";return u.jsxs("div",{onClick:()=>r(d),className:"flex items-center gap-6 p-5 bg-zinc-900/20 border border-white/5 rounded-[2.5rem] hover:bg-white/5 transition-all cursor-pointer active:scale-95",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border border-white/10 p-1 flex-shrink-0 bg-zinc-900 overflow-hidden",children:u.jsx(Kn,{src:d.avatar_url,gender:d.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:d.full_name||"Membro"}),u.jsxs("p",{className:"text-zinc-600 text-[9px] font-black uppercase tracking-widest truncate",children:["@",d.instagram_handle||"vanta_member"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[g==="none"&&u.jsx("button",{onClick:x=>o(x,d.id,"outgoing"),className:"px-4 py-2 bg-white text-black text-[7px] font-black uppercase rounded-full",children:"Solicitar"}),g==="outgoing"&&u.jsx("button",{disabled:!0,className:"px-4 py-2 bg-zinc-900 border border-white/5 text-zinc-500 text-[7px] font-black uppercase rounded-full",children:"Solicitado"}),g==="incoming"&&u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:x=>o(x,d.id,"none"),className:"w-8 h-8 rounded-full border border-red-900/20 flex items-center justify-center text-red-500 text-[8px]",children:""}),u.jsx("button",{onClick:x=>o(x,d.id,"friends"),className:"w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-black text-[8px]",children:""})]}),g==="friends"&&u.jsx("div",{className:"px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 text-[7px] font-black uppercase rounded-full",children:"Amigos"})]})]},d.id)}):u.jsx("div",{className:"py-20 text-center opacity-30",children:u.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhum membro encontrado"})}):u.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-center px-8 space-y-6",children:[u.jsx("div",{className:"w-12 h-12 rounded-full border border-zinc-800/30 flex items-center justify-center opacity-20",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-zinc-700",children:u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})})}),u.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em] text-zinc-700 leading-relaxed max-w-[280px]",children:"CONECTE-SE AO TOPO. ENCONTRE UM AMIGO PARA EXPANDIR SEU CRCULO."})]})}),YR=({events:e,setActiveTab:t,currentUser:n,onBlockSocial:i,onEventClick:r})=>{const[o,d]=V.useState(""),[g,x]=V.useState("EVENTOS"),[p,_]=V.useState(null),[E,N]=V.useState([]),[k,O]=V.useState(!1),[L,P]=V.useState(Ir.getAll());V.useEffect(()=>{const Y=()=>{Vs.consumeOpenMemberProfile()&&n&&x("MEMBROS")};Y();const W=Vs.subscribe(Y),te=Ir.subscribe(()=>P(Ir.getAll()));return()=>{W(),te()}},[n]),V.useEffect(()=>{if(g!=="MEMBROS"||!n)return;if(!o.trim()){N([]),O(!1);return}const Y=setTimeout(async()=>{O(!0);const W=await R3(o);N(W),O(!1)},350);return()=>clearTimeout(Y)},[o,g,n]);const H=V.useMemo(()=>{if(!o.trim())return[];const Y=o.toLowerCase();return e.filter(W=>W.title.toLowerCase().includes(Y)||W.city.toLowerCase().includes(Y)||W.location.toLowerCase().includes(Y))},[o,e]),B=(Y,W,te)=>{Y.stopPropagation(),Ir.setStatus(W,te)},j=Y=>{Vs.setOpenChat(Y),t==null||t("messages"),_(null)},F=Y=>{if(Y==="MEMBROS"&&!n){i==null||i();return}x(Y)};return p&&n?u.jsx(eg,{member:p,onBack:()=>_(null),onMessage:j}):u.jsxs("div",{className:"flex-1 flex flex-col bg-black h-full animate-in fade-in duration-500 overflow-hidden",children:[u.jsx(GR,{activeTab:g,onTabChange:F,query:o,onQueryChange:d}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 no-scrollbar pb-10",children:g==="EVENTOS"?u.jsx(HR,{events:H,query:o,onEventClick:r}):u.jsx(qR,{members:E,isLoading:k,query:o,friendships:L,onMemberClick:_,onAction:B})})]})},XR=({selectedDate:e,onSelect:t,events:n})=>{const i=V.useMemo(()=>{const N=new Date;return N.setHours(0,0,0,0),N},[]),[r,o]=V.useState(new Date(e.getFullYear(),e.getMonth(),1)),d=r.toLocaleString("pt-BR",{month:"long"}).toUpperCase(),g=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),x=new Date(r.getFullYear(),r.getMonth(),1).getDay(),p=V.useMemo(()=>new Set(n.map(N=>{const k=N;return k.startDate??k.start_date??k.startDateStr??null})),[n]),_=N=>N.toISOString().split("T")[0],E=r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth();return u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"relative flex items-center justify-center min-h-[80px]",children:[u.jsx("button",{disabled:E,onClick:()=>!E&&o(new Date(r.getFullYear(),r.getMonth()-1,1)),className:`absolute left-0 p-4 transition-all z-20 ${E?"opacity-5 cursor-not-allowed":"text-zinc-600 active:scale-90"}`,children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 rotate-180 fill-current",children:u.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-4xl font-serif italic text-white tracking-tighter",children:d}),u.jsx("span",{className:"text-[10px] text-[#d4af37] font-black uppercase tracking-[0.4em]",children:r.getFullYear()})]}),u.jsx("button",{onClick:()=>o(new Date(r.getFullYear(),r.getMonth()+1,1)),className:"absolute right-0 p-4 text-zinc-600 active:scale-90 transition-all z-20",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:u.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})})]}),u.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["D","S","T","Q","Q","S","S"].map((N,k)=>u.jsx("div",{className:"text-center text-[8px] text-zinc-700 font-black mb-4 uppercase tracking-widest",children:N},`weekday-${k}`)),Array.from({length:x}).map((N,k)=>u.jsx("div",{},`empty-${k}`)),Array.from({length:g}).map((N,k)=>{const O=k+1,L=new Date(r.getFullYear(),r.getMonth(),O),P=_(L),H=p.has(P),B=_(e)===P,j=L<i;return u.jsxs("button",{disabled:j,onClick:()=>!j&&t(L),className:`aspect-square rounded-2xl flex flex-col items-center justify-center transition-all relative ${B?"bg-white text-black shadow-2xl scale-105 z-10":H&&!j?"bg-zinc-900 border border-white/5 text-white hover:border-[#d4af37]/30":"text-zinc-600"} ${j?"opacity-5 cursor-not-allowed saturate-0 pointer-events-none":"active:scale-90 hover:bg-zinc-800"}`,children:[u.jsx("span",{className:`text-[11px] font-black ${j?"line-through decoration-zinc-800":""}`,children:O}),H&&!B&&!j&&u.jsx("div",{className:"absolute bottom-2 w-1.5 h-1.5 rounded-full bg-[#d4af37] shadow-[0_0_8px_rgba(212,175,55,0.6)] animate-pulse"})]},O)})]}),u.jsx("div",{className:"mt-8 p-6 bg-zinc-900/20 border border-dashed border-white/5 rounded-[2rem] text-center",children:u.jsxs("p",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-[0.4em] leading-loose italic",children:["O PASSADO NO EXISTE NA PLATAFORMA.",u.jsx("br",{}),"APENAS O PRESENTE E O FUTURO SO RELEVANTES."]})})]})},WR=({event:e,isLive:t,onClose:n,onEventClick:i})=>u.jsx("div",{className:"fixed bottom-32 left-6 right-6 z-[100] animate-in slide-in-from-bottom duration-300",children:u.jsxs("div",{className:"bg-zinc-950/90 backdrop-blur-2xl border border-white/10 rounded-[2.5rem] p-5 flex items-center gap-5 shadow-2xl overflow-hidden relative group",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[#d4af37]"}),u.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden flex-shrink-0 border border-white/10",children:u.jsxs(u.Fragment,{children:[u.jsx("img",{src:e.image,onError:r=>{const o=r.currentTarget;o.style.display="none";const d=o.parentElement,g=d==null?void 0:d.querySelector('[data-vanta-fallback="event"]');g&&(g.style.display="flex")},className:"w-full h-full object-cover",alt:""}),u.jsx("div",{"data-vanta-fallback":"event",style:{display:"none"},className:"w-full h-full items-center justify-center bg-zinc-950",children:u.jsx("span",{className:"text-[10px] font-serif italic text-[#d4af37] font-bold",children:"V"})})]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-[0.3em] block",children:e.location}),t&&u.jsxs("span",{className:"flex items-center gap-1 bg-[#d4af37]/10 px-1.5 py-0.5 rounded-full",children:[u.jsx("span",{className:"w-1 h-1 bg-[#d4af37] rounded-full animate-pulse"}),u.jsx("span",{className:"text-[6px] text-[#d4af37] font-black uppercase tracking-widest",children:"Acontecendo Agora"})]})]}),u.jsx("h3",{className:"text-white text-sm font-serif italic uppercase truncate mb-3",children:e.title}),u.jsx("button",{onClick:()=>i(e.id),className:"w-full py-2.5 bg-white text-black text-[8px] font-black uppercase tracking-widest rounded-xl active:scale-95 transition-all",children:"Ver Detalhes"})]}),u.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-zinc-600",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:u.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})}),KR=({events:e,currentUser:t,onRequireAuth:n,onEventClick:i})=>{const r=V.useRef(null),o=BI(e,t);V.useEffect(()=>{o.permissionStatus==="granted"&&r.current&&!o.mapLoaded?o.initMap(o.userCoords||gl,r.current):o.permissionStatus==="denied"&&r.current&&!o.mapLoaded&&o.initMap(gl,r.current)},[o.permissionStatus,o.mapLoaded]);const d=(()=>{const p=new Date,_=new Date(p);_.setDate(p.getDate()+1);const E=new Date(p);return E.setDate(p.getDate()+(6-p.getDay()+7)%7),[{label:"Hoje",date:p},{label:"Amanh",date:_},{label:"FDS",date:E}]})(),g=p=>p.toISOString().split("T")[0],x=o.previewEventId?e.find(p=>p.id===o.previewEventId):null;return u.jsxs("div",{className:"flex-1 flex flex-col bg-black h-full relative overflow-hidden animate-in fade-in duration-500",children:[u.jsx("div",{className:"absolute inset-0 z-0",children:u.jsx("div",{ref:r,className:"w-full h-full",style:{background:"#050505"}})}),u.jsxs("div",{className:"absolute top-10 left-0 right-0 z-40 text-center pointer-events-none px-6",children:[u.jsx("h1",{className:"text-white text-2xl font-serif italic uppercase tracking-tighter drop-shadow-lg",children:"Radar de Eventos"}),u.jsxs("p",{className:"text-[#d4af37] text-[8px] font-black uppercase tracking-[0.4em]",children:[o.filteredEvents.length," eventos em ",o.selectedDate.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})]})]}),u.jsx("div",{className:"absolute top-24 left-0 right-0 z-40 px-4 pointer-events-none",children:u.jsxs("div",{className:"max-w-md mx-auto flex gap-1.5 pointer-events-auto",children:[d.map((p,_)=>{const E=g(o.selectedDate)===g(p.date);return u.jsx("button",{onClick:()=>o.handleDateChange(p.date),className:`flex-1 py-3 rounded-2xl text-[8px] font-black uppercase tracking-widest transition-all border ${E?"bg-[#d4af37] text-black border-[#d4af37]":"bg-black/60 border border-white/10 text-white backdrop-blur-md"}`,children:p.label},_)}),u.jsx("button",{onClick:()=>o.setShowCalendar(!0),className:"flex-1 py-3 bg-black/60 border border-white/10 rounded-2xl text-[7px] font-black uppercase tracking-widest text-zinc-400 backdrop-blur-md",children:"Calendrio"})]})}),u.jsx("button",{onClick:o.recenterMap,className:"fixed bottom-[124px] right-4 z-[60] w-12 h-12 bg-black/80 backdrop-blur-xl border border-[#d4af37]/20 rounded-full flex items-center justify-center text-[#d4af37] shadow-2xl active:scale-90 transition-all",children:u.jsx(Ge.MapPin,{className:"w-5 h-5"})}),x&&u.jsx(WR,{event:x,isLive:o.isEventLiveNow(x),onClose:()=>o.setPreviewEventId(null),onEventClick:p=>i==null?void 0:i(p)}),o.permissionStatus==="prompt"&&u.jsx("div",{className:"fixed inset-0 z-[1000] bg-black/80 backdrop-blur-xl flex items-center justify-center p-6",children:u.jsxs("div",{className:"w-full max-sm bg-zinc-950 border border-white/10 rounded-[3rem] p-10 text-center space-y-8 shadow-2xl animate-in zoom-in-95 duration-300",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-white/5 border border-[#d4af37]/20 flex items-center justify-center mx-auto",children:u.jsx(Ge.MapPin,{className:"w-8 h-8 text-[#d4af37]"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter leading-none",children:"Fique por dentro"}),u.jsx("p",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-[0.3em] leading-loose",children:"Ative o GPS para visualizar eventos ao seu redor."})]}),u.jsxs("div",{className:"space-y-3 pt-4",children:[u.jsx("button",{onClick:()=>o.requestLocation(r.current),className:"w-full py-6 bg-white text-black text-[11px] font-black uppercase tracking-widest rounded-full shadow-xl",children:"Permitir"}),u.jsx("button",{onClick:()=>{o.setPermissionStatus("denied"),o.initMap(Mc["Rio de Janeiro"]||gl,r.current)},className:"w-full py-6 border border-white/10 text-white text-[10px] font-black uppercase tracking-widest rounded-full",children:"Agora nao"})]})]})}),o.showCalendar&&u.jsxs("div",{className:"fixed inset-0 z-[1100] bg-black flex flex-col safe-top animate-in slide-in-from-bottom duration-500",children:[u.jsxs("header",{className:"p-8 flex justify-between items-center border-b border-white/5",children:[u.jsx("button",{onClick:()=>o.setShowCalendar(!1),className:"text-zinc-500 text-[9px] font-black uppercase tracking-widest",children:"Fechar"}),u.jsx("h4",{className:"text-[11px] font-black text-white uppercase tracking-[0.4em]",children:"Agenda de Eventos"}),u.jsx("div",{className:"w-10"})]}),u.jsx("div",{className:"flex-1 p-8 overflow-y-auto no-scrollbar",children:u.jsx(XR,{selectedDate:o.selectedDate,onSelect:p=>{o.handleDateChange(p),o.setShowCalendar(!1)},events:e})})]})]})};async function $R(e){try{return(await N3()).find(n=>n.id===e)||null}catch{return null}}const JR=({eventId:e,promoterId:t,onSuccess:n})=>{const[i,r]=V.useState(null),[o,d]=V.useState(!0),[g,x]=V.useState(!1),[p,_]=V.useState({name:"",cpf:""}),[E,N]=V.useState(null);V.useEffect(()=>{$R(e).then(O=>{r(O),d(!1)})},[e]);const k=async O=>{if(O.preventDefault(),p.name.length<5||p.cpf.length!==11){N("Preencha o nome completo e o CPF (11 dgitos).");return}x(!0),N(null);try{const L=await L5({eventId:e,promoterId:t,guestName:p.name,guestCpf:p.cpf});L.success?n():N(L.message)}catch{N("Falha na conexo com o protocolo VANTA.")}finally{x(!1)}};return o?u.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center p-8 space-y-4",children:[u.jsx("div",{className:"w-12 h-12 border-2 border-[#d4af37]/20 border-t-[#d4af37] rounded-full animate-spin"}),u.jsx("p",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-[0.4em]",children:"Autenticando Convite..."})]}):i?u.jsxs("div",{className:"fixed inset-0 bg-black overflow-y-auto no-scrollbar pb-32 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"relative w-full aspect-square md:aspect-video",children:[u.jsx("img",{src:i.image,className:"w-full h-full object-cover brightness-[0.3]",alt:""}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-10",children:[u.jsx("span",{className:"text-[#d4af37] text-[10px] font-black uppercase tracking-[0.6em] mb-4",children:"CONVITE EXCLUSIVO"}),u.jsx("h1",{className:"text-5xl font-serif italic text-white uppercase tracking-tighter leading-none",children:i.title})]})]}),u.jsxs("div",{className:"px-10 -mt-10 relative z-10 space-y-10",children:[u.jsxs("div",{className:"p-8 bg-zinc-950 border border-white/10 rounded-[3rem] shadow-2xl space-y-8",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h3",{className:"text-white text-xl font-serif italic",children:"Ativar Acesso VIP"}),u.jsxs("p",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-widest leading-relaxed",children:["ESTE CONVITE  NOMINAL E INTRANSFERVEL.",u.jsx("br",{}),"IDENTIFICAO OBRIGATRIA NA PORTARIA."]})]}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"Nome Completo"}),u.jsx("input",{required:!0,value:p.name,onChange:O=>_({...p,name:O.target.value}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-white text-[10px] uppercase outline-none focus:border-[#d4af37]/30",placeholder:"EX: GABRIEL OLIVEIRA SILVA"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-widest ml-4",children:"CPF (Somente nmeros)"}),u.jsx("input",{required:!0,maxLength:11,value:p.cpf,onChange:O=>_({...p,cpf:O.target.value.replace(/\D/g,"")}),className:"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-white text-[10px] uppercase outline-none focus:border-[#d4af37]/30",placeholder:"00011122233"})]}),E&&u.jsx("div",{className:"p-4 bg-red-600/10 border border-red-600/30 rounded-2xl animate-in slide-in-from-top duration-300",children:u.jsx("p",{className:"text-[8px] text-red-500 font-black uppercase text-center leading-relaxed",children:E})}),u.jsx("button",{type:"submit",disabled:g,className:"w-full py-6 bg-white text-black text-[11px] font-black uppercase rounded-full shadow-2xl active:scale-95 transition-all mt-4 disabled:opacity-30",children:g?"Validando Protocolo...":"Ativar Ingresso Cortesia"})]})]}),u.jsx("div",{className:"p-8 bg-zinc-900/40 border border-dashed border-white/10 rounded-[2.5rem] text-center",children:u.jsxs("p",{className:"text-[8px] text-zinc-700 font-black uppercase tracking-[0.4em] leading-loose",children:["LIMITE DE 2 CONVITES POR CPF.",u.jsx("br",{}),"VANTA LIFESTYLE  2025"]})})]})]}):null},ZR=Object.prototype.toString,QR=e=>ZR.call(e)==="[object Error]",ek=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function tk(e){if(!(e&&QR(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;const{message:n,stack:i}=e;return n==="Load failed"?i===void 0||"__sentry_captured__"in e:n.startsWith("error sending request for url")?!0:ek.has(n)}function nk(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function bh(e,t,{min:n=0,allowInfinity:i=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${i?" or Infinity":""}.`);if(!i&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw new TypeError(`Expected \`${e}\` to be  ${n}.`)}}class t4 extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}function ik(e,t){const n=Math.max(1,e+1),i=t.randomize?Math.random()+1:1;let r=Math.round(i*t.minTimeout*t.factor**(n-1));return r=Math.min(r,t.maxTimeout),r}function fw(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function sk({error:e,attemptNumber:t,retriesConsumed:n,startTime:i,options:r}){var k,O,L,P;const o=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(o instanceof t4)throw o.originalError;const d=Number.isFinite(r.retries)?Math.max(0,r.retries-n):r.retries,g=r.maxRetryTime??Number.POSITIVE_INFINITY,x=Object.freeze({error:o,attemptNumber:t,retriesLeft:d,retriesConsumed:n});if(await r.onFailedAttempt(x),fw(i,g)<=0)throw o;const p=await r.shouldConsumeRetry(x),_=fw(i,g);if(_<=0||d<=0)throw o;if(o instanceof TypeError&&!tk(o)){if(p)throw o;return(k=r.signal)==null||k.throwIfAborted(),!1}if(!await r.shouldRetry(x))throw o;if(!p)return(O=r.signal)==null||O.throwIfAborted(),!1;const E=ik(n,r),N=Math.min(E,_);return(L=r.signal)==null||L.throwIfAborted(),N>0&&await new Promise((H,B)=>{var Y,W;const j=()=>{var te;clearTimeout(F),(te=r.signal)==null||te.removeEventListener("abort",j),B(r.signal.reason)},F=setTimeout(()=>{var te;(te=r.signal)==null||te.removeEventListener("abort",j),H()},N);r.unref&&((Y=F.unref)==null||Y.call(F)),(W=r.signal)==null||W.addEventListener("abort",j,{once:!0})}),(P=r.signal)==null||P.throwIfAborted(),!0}async function rk(e,t={}){var o,d,g;if(t={...t},nk(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??(t.retries=10),t.factor??(t.factor=2),t.minTimeout??(t.minTimeout=1e3),t.maxTimeout??(t.maxTimeout=Number.POSITIVE_INFINITY),t.maxRetryTime??(t.maxRetryTime=Number.POSITIVE_INFINITY),t.randomize??(t.randomize=!1),t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.shouldConsumeRetry??(t.shouldConsumeRetry=()=>!0),bh("factor",t.factor,{min:0,allowInfinity:!1}),bh("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),bh("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),bh("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),(o=t.signal)==null||o.throwIfAborted();let n=0,i=0;const r=performance.now();for(;!Number.isFinite(t.retries)||i<=t.retries;){n++;try{(d=t.signal)==null||d.throwIfAborted();const x=await e(n);return(g=t.signal)==null||g.throwIfAborted(),x}catch(x){await sk({error:x,attemptNumber:n,retriesConsumed:i,startTime:r,options:t})&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")}var ak={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ok,lk;function ck(){return{geminiUrl:ok,vertexUrl:lk}}function uk(e,t,n,i){var r,o;if(!(e!=null&&e.baseUrl)){const d=ck();return t?(r=d.vertexUrl)!==null&&r!==void 0?r:n:(o=d.geminiUrl)!==null&&o!==void 0?o:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class La{}function Ve(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const o=t[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function S(e,t,n){for(let o=0;o<t.length-1;o++){const d=t[o];if(d.endsWith("[]")){const g=d.slice(0,-2);if(!(g in e))if(Array.isArray(n))e[g]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(e[g])){const x=e[g];if(Array.isArray(n))for(let p=0;p<x.length;p++){const _=x[p];S(_,t.slice(o+1),n[p])}else for(const p of x)S(p,t.slice(o+1),n)}return}else if(d.endsWith("[0]")){const g=d.slice(0,-3);g in e||(e[g]=[{}]);const x=e[g];S(x[0],t.slice(o+1),n);return}(!e[d]||typeof e[d]!="object")&&(e[d]={}),e=e[d]}const i=t[t.length-1],r=e[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function w(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const r=t[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in e){const d=e[o];return Array.isArray(d)?d.map(g=>w(g,t.slice(i+1),n)):n}else return n}else e=e[r]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function dk(e,t){for(const[n,i]of Object.entries(t)){const r=n.split("."),o=i.split("."),d=new Set;let g=-1;for(let x=0;x<r.length;x++)if(r[x]==="*"){g=x;break}if(g!==-1&&o.length>g)for(let x=g;x<o.length;x++){const p=o[x];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&d.add(p)}Dm(e,r,o,0,d)}}function Dm(e,t,n,i,r){if(i>=t.length||typeof e!="object"||e===null)return;const o=t[i];if(o.endsWith("[]")){const d=o.slice(0,-2),g=e;if(d in g&&Array.isArray(g[d]))for(const x of g[d])Dm(x,t,n,i+1,r)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const d=e,g=Object.keys(d).filter(p=>!p.startsWith("_")&&!r.has(p)),x={};for(const p of g)x[p]=d[p];for(const[p,_]of Object.entries(x)){const E=[];for(const N of n.slice(i))N==="*"?E.push(p):E.push(N);S(d,E,_)}for(const p of g)delete d[p]}}else{const d=e;o in d&&Dm(d[o],t,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ex(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(e){const t={},n=w(e,["operationName"]);n!=null&&S(t,["operationName"],n);const i=w(e,["resourceName"]);return i!=null&&S(t,["_url","resourceName"],i),t}function hk(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["metadata"]);i!=null&&S(t,["metadata"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);o!=null&&S(t,["error"],o);const d=w(e,["response","generateVideoResponse"]);return d!=null&&S(t,["response"],mk(d)),t}function pk(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["metadata"]);i!=null&&S(t,["metadata"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);o!=null&&S(t,["error"],o);const d=w(e,["response"]);return d!=null&&S(t,["response"],gk(d)),t}function mk(e){const t={},n=w(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(d=>xk(d))),S(t,["generatedVideos"],o)}const i=w(e,["raiMediaFilteredCount"]);i!=null&&S(t,["raiMediaFilteredCount"],i);const r=w(e,["raiMediaFilteredReasons"]);return r!=null&&S(t,["raiMediaFilteredReasons"],r),t}function gk(e){const t={},n=w(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(d=>yk(d))),S(t,["generatedVideos"],o)}const i=w(e,["raiMediaFilteredCount"]);i!=null&&S(t,["raiMediaFilteredCount"],i);const r=w(e,["raiMediaFilteredReasons"]);return r!=null&&S(t,["raiMediaFilteredReasons"],r),t}function xk(e){const t={},n=w(e,["video"]);return n!=null&&S(t,["video"],Ak(n)),t}function yk(e){const t={},n=w(e,["_self"]);return n!=null&&S(t,["video"],Sk(n)),t}function vk(e){const t={},n=w(e,["operationName"]);return n!=null&&S(t,["_url","operationName"],n),t}function bk(e){const t={},n=w(e,["operationName"]);return n!=null&&S(t,["_url","operationName"],n),t}function wk(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["metadata"]);i!=null&&S(t,["metadata"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);o!=null&&S(t,["error"],o);const d=w(e,["response"]);return d!=null&&S(t,["response"],_k(d)),t}function _k(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["parent"]);i!=null&&S(t,["parent"],i);const r=w(e,["documentName"]);return r!=null&&S(t,["documentName"],r),t}function n4(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["metadata"]);i!=null&&S(t,["metadata"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);o!=null&&S(t,["error"],o);const d=w(e,["response"]);return d!=null&&S(t,["response"],Ek(d)),t}function Ek(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["parent"]);i!=null&&S(t,["parent"],i);const r=w(e,["documentName"]);return r!=null&&S(t,["documentName"],r),t}function Ak(e){const t={},n=w(e,["uri"]);n!=null&&S(t,["uri"],n);const i=w(e,["encodedVideo"]);i!=null&&S(t,["videoBytes"],ex(i));const r=w(e,["encoding"]);return r!=null&&S(t,["mimeType"],r),t}function Sk(e){const t={},n=w(e,["gcsUri"]);n!=null&&S(t,["uri"],n);const i=w(e,["bytesBase64Encoded"]);i!=null&&S(t,["videoBytes"],ex(i));const r=w(e,["mimeType"]);return r!=null&&S(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hw;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(hw||(hw={}));var pw;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(pw||(pw={}));var mw;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(mw||(mw={}));var Io;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Io||(Io={}));var gw;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(gw||(gw={}));var xw;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(xw||(xw={}));var yw;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yw||(yw={}));var vw;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vw||(vw={}));var bw;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(bw||(bw={}));var ww;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ww||(ww={}));var _w;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(_w||(_w={}));var Ew;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Ew||(Ew={}));var Aw;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Aw||(Aw={}));var Sw;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Sw||(Sw={}));var Nw;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Nw||(Nw={}));var Cw;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Cw||(Cw={}));var Tw;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Tw||(Tw={}));var Iw;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Iw||(Iw={}));var Rw;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Rw||(Rw={}));var kw;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(kw||(kw={}));var Ow;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ow||(Ow={}));var Yh;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Yh||(Yh={}));var Mw;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mw||(Mw={}));var Dw;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Dw||(Dw={}));var Lw;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Lw||(Lw={}));var Lm;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lm||(Lm={}));var Pw;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Pw||(Pw={}));var jw;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(jw||(jw={}));var Pm;(function(e){e.COLLECTION="COLLECTION"})(Pm||(Pm={}));var Bw;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Bw||(Bw={}));var Uw;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Uw||(Uw={}));var Fw;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Fw||(Fw={}));var zw;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(zw||(zw={}));var Vw;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Vw||(Vw={}));var Gw;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Gw||(Gw={}));var Hw;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Hw||(Hw={}));var qw;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qw||(qw={}));var Yw;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Yw||(Yw={}));var Xw;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Xw||(Xw={}));var Ww;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Ww||(Ww={}));var Kw;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Kw||(Kw={}));var $w;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})($w||($w={}));var Jw;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"})(Jw||(Jw={}));var Zw;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Zw||(Zw={}));var Qw;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Qw||(Qw={}));var e_;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(e_||(e_={}));var t_;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(t_||(t_={}));var n_;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(n_||(n_={}));var i_;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(i_||(i_={}));var s_;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(s_||(s_={}));var r_;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(r_||(r_={}));var a_;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(a_||(a_={}));var o_;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(o_||(o_={}));var l_;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(l_||(l_={}));var c_;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(c_||(c_={}));var u_;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(u_||(u_={}));var Rc;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Rc||(Rc={}));class jm{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ud{get text(){var t,n,i,r,o,d,g,x;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const E=[];for(const N of(x=(g=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||g===void 0?void 0:g.parts)!==null&&x!==void 0?x:[]){for(const[k,O]of Object.entries(N))k!=="text"&&k!=="thought"&&k!=="thoughtSignature"&&(O!==null||O!==void 0)&&E.push(k);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;_=!0,p+=N.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var t,n,i,r,o,d,g,x;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const E of(x=(g=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||g===void 0?void 0:g.parts)!==null&&x!==void 0?x:[]){for(const[N,k]of Object.entries(E))N!=="inlineData"&&(k!==null||k!==void 0)&&_.push(N);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var t,n,i,r,o,d,g,x;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(x=(g=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||g===void 0?void 0:g.parts)===null||x===void 0?void 0:x.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var t,n,i,r,o,d,g,x,p;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(x=(g=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||g===void 0?void 0:g.parts)===null||x===void 0?void 0:x.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var t,n,i,r,o,d,g,x,p;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(x=(g=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||g===void 0?void 0:g.parts)===null||x===void 0?void 0:x.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class d_{}class f_{}class Nk{}class Ck{}class Tk{}class Ik{}class h_{}class p_{}class m_{}class Rk{}class Xh{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Xh;let r;const o=t;return n?r=pk(o):r=hk(o),Object.assign(i,r),i}}class g_{}class x_{}class y_{}class v_{}class kk{}class Ok{}class Mk{}class tx{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new tx,o=wk(t);return Object.assign(i,o),i}}class Dk{}class Lk{}class Pk{}class jk{}class b_{}class Bk{get text(){var t,n,i;let r="",o=!1;const d=[];for(const g of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[x,p]of Object.entries(g))x!=="text"&&x!=="thought"&&p!==null&&d.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;o=!0,r+=g.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var t,n,i;let r="";const o=[];for(const d of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[g,x]of Object.entries(d))g!=="inlineData"&&x!==null&&o.push(g);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Uk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nx{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new nx,o=n4(t);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kt(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function i4(e,t){const n=Kt(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function s4(e){return Array.isArray(e)?e.map(t=>Wh(t)):[Wh(e)]}function Wh(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function r4(e){const t=Wh(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function a4(e){const t=Wh(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function w_(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function o4(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>w_(t)):[w_(e)]}function Bm(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function __(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function E_(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Zi(e){if(e==null)throw new Error("ContentUnion is required");return Bm(e)?e:{role:"user",parts:o4(e)}}function ix(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Zi(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Zi(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Zi(n)):[Zi(t)]}function dr(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(__(e)||E_(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Zi(e)]}const t=[],n=[],i=Bm(e[0]);for(const r of e){const o=Bm(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(r);else{if(__(r)||E_(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||t.push({role:"user",parts:o4(n)}),t}function Fk(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Io).includes(n[0].toUpperCase())?n[0].toUpperCase():Io.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Io).includes(i.toUpperCase())?i.toUpperCase():Io.TYPE_UNSPECIFIED})}}function jc(e){const t={},n=["items"],i=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&Fk(e.type,t);for(const[d,g]of Object.entries(e))if(g!=null)if(d=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;t.type=Object.values(Io).includes(g.toUpperCase())?g.toUpperCase():Io.TYPE_UNSPECIFIED}else if(n.includes(d))t[d]=jc(g);else if(i.includes(d)){const x=[];for(const p of g){if(p.type=="null"){t.nullable=!0;continue}x.push(jc(p))}t[d]=x}else if(r.includes(d)){const x={};for(const[p,_]of Object.entries(g))x[p]=jc(_);t[d]=x}else{if(d==="additionalProperties")continue;t[d]=g}return t}function sx(e){return jc(e)}function rx(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ax(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function hu(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=jc(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=jc(t.response));return e}function pu(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function zk(e,t,n,i=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Pa(e,t){if(typeof t!="string")throw new Error("name must be a string");return zk(e,t,"cachedContents")}function l4(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Do(e){return ex(e)}function Vk(e){return e!=null&&typeof e=="object"&&"name"in e}function Gk(e){return e!=null&&typeof e=="object"&&"video"in e}function Hk(e){return e!=null&&typeof e=="object"&&"uri"in e}function c4(e){var t;let n;if(Vk(e)&&(n=e.name),!(Hk(e)&&(n=e.uri,n===void 0))&&!(Gk(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function u4(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function d4(e){for(const t of["models","tunedModels","publisherModels"])if(qk(e,t))return e[t];return[]}function qk(e,t){return e!==null&&typeof e=="object"&&t in e}function Yk(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function Xk(e,t={}){const n=[],i=new Set;for(const r of e){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const d=Yk(r,t);d.functionDeclarations&&n.push(...d.functionDeclarations)}return{functionDeclarations:n}}function f4(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Wk(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function h4(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let o=!1;for(const d of r){if(typeof d!="object"||d===null)continue;const x=d.response;if(typeof x!="object"||x===null)continue;if(x.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function mu(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function p4(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kk(e){const t={},n=w(e,["responsesFile"]);n!=null&&S(t,["fileName"],n);const i=w(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(d=>I7(d))),S(t,["inlinedResponses"],o)}const r=w(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["inlinedEmbedContentResponses"],o)}return t}function $k(e){const t={},n=w(e,["predictionsFormat"]);n!=null&&S(t,["format"],n);const i=w(e,["gcsDestination","outputUriPrefix"]);i!=null&&S(t,["gcsUri"],i);const r=w(e,["bigqueryDestination","outputUri"]);return r!=null&&S(t,["bigqueryUri"],r),t}function Jk(e){const t={},n=w(e,["format"]);n!=null&&S(t,["predictionsFormat"],n);const i=w(e,["gcsUri"]);i!=null&&S(t,["gcsDestination","outputUriPrefix"],i);const r=w(e,["bigqueryUri"]);if(r!=null&&S(t,["bigqueryDestination","outputUri"],r),w(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(w(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(w(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ih(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["metadata","displayName"]);i!=null&&S(t,["displayName"],i);const r=w(e,["metadata","state"]);r!=null&&S(t,["state"],p4(r));const o=w(e,["metadata","createTime"]);o!=null&&S(t,["createTime"],o);const d=w(e,["metadata","endTime"]);d!=null&&S(t,["endTime"],d);const g=w(e,["metadata","updateTime"]);g!=null&&S(t,["updateTime"],g);const x=w(e,["metadata","model"]);x!=null&&S(t,["model"],x);const p=w(e,["metadata","output"]);return p!=null&&S(t,["dest"],Kk(h4(p))),t}function Um(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["displayName"]);i!=null&&S(t,["displayName"],i);const r=w(e,["state"]);r!=null&&S(t,["state"],p4(r));const o=w(e,["error"]);o!=null&&S(t,["error"],o);const d=w(e,["createTime"]);d!=null&&S(t,["createTime"],d);const g=w(e,["startTime"]);g!=null&&S(t,["startTime"],g);const x=w(e,["endTime"]);x!=null&&S(t,["endTime"],x);const p=w(e,["updateTime"]);p!=null&&S(t,["updateTime"],p);const _=w(e,["model"]);_!=null&&S(t,["model"],_);const E=w(e,["inputConfig"]);E!=null&&S(t,["src"],Zk(E));const N=w(e,["outputConfig"]);N!=null&&S(t,["dest"],$k(h4(N)));const k=w(e,["completionStats"]);return k!=null&&S(t,["completionStats"],k),t}function Zk(e){const t={},n=w(e,["instancesFormat"]);n!=null&&S(t,["format"],n);const i=w(e,["gcsSource","uris"]);i!=null&&S(t,["gcsUri"],i);const r=w(e,["bigquerySource","inputUri"]);return r!=null&&S(t,["bigqueryUri"],r),t}function Qk(e,t){const n={};if(w(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(w(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(w(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=w(t,["fileName"]);i!=null&&S(n,["fileName"],i);const r=w(t,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>T7(e,d))),S(n,["requests","requests"],o)}return n}function e7(e){const t={},n=w(e,["format"]);n!=null&&S(t,["instancesFormat"],n);const i=w(e,["gcsUri"]);i!=null&&S(t,["gcsSource","uris"],i);const r=w(e,["bigqueryUri"]);if(r!=null&&S(t,["bigquerySource","inputUri"],r),w(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(w(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function t7(e){const t={},n=w(e,["data"]);if(n!=null&&S(t,["data"],n),w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function n7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],mu(e,i)),n}function i7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],mu(e,i)),n}function s7(e){const t={},n=w(e,["content"]);n!=null&&S(t,["content"],n);const i=w(e,["citationMetadata"]);i!=null&&S(t,["citationMetadata"],r7(i));const r=w(e,["tokenCount"]);r!=null&&S(t,["tokenCount"],r);const o=w(e,["finishReason"]);o!=null&&S(t,["finishReason"],o);const d=w(e,["avgLogprobs"]);d!=null&&S(t,["avgLogprobs"],d);const g=w(e,["groundingMetadata"]);g!=null&&S(t,["groundingMetadata"],g);const x=w(e,["index"]);x!=null&&S(t,["index"],x);const p=w(e,["logprobsResult"]);p!=null&&S(t,["logprobsResult"],p);const _=w(e,["safetyRatings"]);if(_!=null){let N=_;Array.isArray(N)&&(N=N.map(k=>k)),S(t,["safetyRatings"],N)}const E=w(e,["urlContextMetadata"]);return E!=null&&S(t,["urlContextMetadata"],E),t}function r7(e){const t={},n=w(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),S(t,["citations"],i)}return t}function m4(e){const t={},n=w(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>P7(o))),S(t,["parts"],r)}const i=w(e,["role"]);return i!=null&&S(t,["role"],i),t}function a7(e,t){const n={},i=w(e,["displayName"]);if(t!==void 0&&i!=null&&S(t,["batch","displayName"],i),w(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function o7(e,t){const n={},i=w(e,["displayName"]);t!==void 0&&i!=null&&S(t,["displayName"],i);const r=w(e,["dest"]);return t!==void 0&&r!=null&&S(t,["outputConfig"],Jk(Wk(r))),n}function A_(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["_url","model"],Kt(e,i));const r=w(t,["src"]);r!=null&&S(n,["batch","inputConfig"],Qk(e,f4(e,r)));const o=w(t,["config"]);return o!=null&&a7(o,n),n}function l7(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["model"],Kt(e,i));const r=w(t,["src"]);r!=null&&S(n,["inputConfig"],e7(f4(e,r)));const o=w(t,["config"]);return o!=null&&o7(o,n),n}function c7(e,t){const n={},i=w(e,["displayName"]);return t!==void 0&&i!=null&&S(t,["batch","displayName"],i),n}function u7(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["_url","model"],Kt(e,i));const r=w(t,["src"]);r!=null&&S(n,["batch","inputConfig"],x7(e,r));const o=w(t,["config"]);return o!=null&&c7(o,n),n}function d7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],mu(e,i)),n}function f7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],mu(e,i)),n}function h7(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["name"]);i!=null&&S(t,["name"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);return o!=null&&S(t,["error"],o),t}function p7(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["name"]);i!=null&&S(t,["name"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);return o!=null&&S(t,["error"],o),t}function m7(e,t){const n={},i=w(t,["contents"]);if(i!=null){let o=ix(e,i);Array.isArray(o)&&(o=o.map(d=>d)),S(n,["requests[]","request","content"],o)}const r=w(t,["config"]);return r!=null&&(S(n,["_self"],g7(r,n)),dk(n,{"requests[].*":"requests[].request.*"})),n}function g7(e,t){const n={},i=w(e,["taskType"]);t!==void 0&&i!=null&&S(t,["requests[]","taskType"],i);const r=w(e,["title"]);t!==void 0&&r!=null&&S(t,["requests[]","title"],r);const o=w(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&S(t,["requests[]","outputDimensionality"],o),w(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(w(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function x7(e,t){const n={},i=w(t,["fileName"]);i!=null&&S(n,["file_name"],i);const r=w(t,["inlinedRequests"]);return r!=null&&S(n,["requests"],m7(e,r)),n}function y7(e){const t={};if(w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=w(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function v7(e){const t={},n=w(e,["id"]);n!=null&&S(t,["id"],n);const i=w(e,["args"]);i!=null&&S(t,["args"],i);const r=w(e,["name"]);if(r!=null&&S(t,["name"],r),w(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(w(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function b7(e){const t={},n=w(e,["allowedFunctionNames"]);n!=null&&S(t,["allowedFunctionNames"],n);const i=w(e,["mode"]);if(i!=null&&S(t,["mode"],i),w(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function w7(e,t,n){const i={},r=w(t,["systemInstruction"]);n!==void 0&&r!=null&&S(n,["systemInstruction"],m4(Zi(r)));const o=w(t,["temperature"]);o!=null&&S(i,["temperature"],o);const d=w(t,["topP"]);d!=null&&S(i,["topP"],d);const g=w(t,["topK"]);g!=null&&S(i,["topK"],g);const x=w(t,["candidateCount"]);x!=null&&S(i,["candidateCount"],x);const p=w(t,["maxOutputTokens"]);p!=null&&S(i,["maxOutputTokens"],p);const _=w(t,["stopSequences"]);_!=null&&S(i,["stopSequences"],_);const E=w(t,["responseLogprobs"]);E!=null&&S(i,["responseLogprobs"],E);const N=w(t,["logprobs"]);N!=null&&S(i,["logprobs"],N);const k=w(t,["presencePenalty"]);k!=null&&S(i,["presencePenalty"],k);const O=w(t,["frequencyPenalty"]);O!=null&&S(i,["frequencyPenalty"],O);const L=w(t,["seed"]);L!=null&&S(i,["seed"],L);const P=w(t,["responseMimeType"]);P!=null&&S(i,["responseMimeType"],P);const H=w(t,["responseSchema"]);H!=null&&S(i,["responseSchema"],sx(H));const B=w(t,["responseJsonSchema"]);if(B!=null&&S(i,["responseJsonSchema"],B),w(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(w(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=w(t,["safetySettings"]);if(n!==void 0&&j!=null){let Ne=j;Array.isArray(Ne)&&(Ne=Ne.map(ue=>j7(ue))),S(n,["safetySettings"],Ne)}const F=w(t,["tools"]);if(n!==void 0&&F!=null){let Ne=pu(F);Array.isArray(Ne)&&(Ne=Ne.map(ue=>U7(hu(ue)))),S(n,["tools"],Ne)}const Y=w(t,["toolConfig"]);if(n!==void 0&&Y!=null&&S(n,["toolConfig"],B7(Y)),w(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=w(t,["cachedContent"]);n!==void 0&&W!=null&&S(n,["cachedContent"],Pa(e,W));const te=w(t,["responseModalities"]);te!=null&&S(i,["responseModalities"],te);const ne=w(t,["mediaResolution"]);ne!=null&&S(i,["mediaResolution"],ne);const ie=w(t,["speechConfig"]);if(ie!=null&&S(i,["speechConfig"],rx(ie)),w(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _e=w(t,["thinkingConfig"]);_e!=null&&S(i,["thinkingConfig"],_e);const Ee=w(t,["imageConfig"]);Ee!=null&&S(i,["imageConfig"],C7(Ee));const pe=w(t,["enableEnhancedCivicAnswers"]);if(pe!=null&&S(i,["enableEnhancedCivicAnswers"],pe),w(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function _7(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["candidates"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(p=>s7(p))),S(t,["candidates"],x)}const r=w(e,["modelVersion"]);r!=null&&S(t,["modelVersion"],r);const o=w(e,["promptFeedback"]);o!=null&&S(t,["promptFeedback"],o);const d=w(e,["responseId"]);d!=null&&S(t,["responseId"],d);const g=w(e,["usageMetadata"]);return g!=null&&S(t,["usageMetadata"],g),t}function E7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],mu(e,i)),n}function A7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],mu(e,i)),n}function S7(e){const t={};if(w(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=w(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function N7(e){const t={};if(w(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(w(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=w(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function C7(e){const t={},n=w(e,["aspectRatio"]);n!=null&&S(t,["aspectRatio"],n);const i=w(e,["imageSize"]);if(i!=null&&S(t,["imageSize"],i),w(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(w(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(w(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function T7(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["request","model"],Kt(e,i));const r=w(t,["contents"]);if(r!=null){let g=dr(r);Array.isArray(g)&&(g=g.map(x=>m4(x))),S(n,["request","contents"],g)}const o=w(t,["metadata"]);o!=null&&S(n,["metadata"],o);const d=w(t,["config"]);return d!=null&&S(n,["request","generationConfig"],w7(e,d,w(n,["request"],{}))),n}function I7(e){const t={},n=w(e,["response"]);n!=null&&S(t,["response"],_7(n));const i=w(e,["metadata"]);i!=null&&S(t,["metadata"],i);const r=w(e,["error"]);return r!=null&&S(t,["error"],r),t}function R7(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);if(t!==void 0&&r!=null&&S(t,["_query","pageToken"],r),w(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function k7(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);t!==void 0&&r!=null&&S(t,["_query","pageToken"],r);const o=w(e,["filter"]);return t!==void 0&&o!=null&&S(t,["_query","filter"],o),n}function O7(e){const t={},n=w(e,["config"]);return n!=null&&R7(n,t),t}function M7(e){const t={},n=w(e,["config"]);return n!=null&&k7(n,t),t}function D7(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>Ih(d))),S(t,["batchJobs"],o)}return t}function L7(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>Um(d))),S(t,["batchJobs"],o)}return t}function P7(e){const t={},n=w(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const i=w(e,["codeExecutionResult"]);i!=null&&S(t,["codeExecutionResult"],i);const r=w(e,["executableCode"]);r!=null&&S(t,["executableCode"],r);const o=w(e,["fileData"]);o!=null&&S(t,["fileData"],y7(o));const d=w(e,["functionCall"]);d!=null&&S(t,["functionCall"],v7(d));const g=w(e,["functionResponse"]);g!=null&&S(t,["functionResponse"],g);const x=w(e,["inlineData"]);x!=null&&S(t,["inlineData"],t7(x));const p=w(e,["text"]);p!=null&&S(t,["text"],p);const _=w(e,["thought"]);_!=null&&S(t,["thought"],_);const E=w(e,["thoughtSignature"]);E!=null&&S(t,["thoughtSignature"],E);const N=w(e,["videoMetadata"]);return N!=null&&S(t,["videoMetadata"],N),t}function j7(e){const t={},n=w(e,["category"]);if(n!=null&&S(t,["category"],n),w(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=w(e,["threshold"]);return i!=null&&S(t,["threshold"],i),t}function B7(e){const t={},n=w(e,["retrievalConfig"]);n!=null&&S(t,["retrievalConfig"],n);const i=w(e,["functionCallingConfig"]);return i!=null&&S(t,["functionCallingConfig"],b7(i)),t}function U7(e){const t={};if(w(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=w(e,["computerUse"]);n!=null&&S(t,["computerUse"],n);const i=w(e,["fileSearch"]);i!=null&&S(t,["fileSearch"],i);const r=w(e,["codeExecution"]);if(r!=null&&S(t,["codeExecution"],r),w(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=w(e,["functionDeclarations"]);if(o!=null){let _=o;Array.isArray(_)&&(_=_.map(E=>E)),S(t,["functionDeclarations"],_)}const d=w(e,["googleMaps"]);d!=null&&S(t,["googleMaps"],S7(d));const g=w(e,["googleSearch"]);g!=null&&S(t,["googleSearch"],N7(g));const x=w(e,["googleSearchRetrieval"]);x!=null&&S(t,["googleSearchRetrieval"],x);const p=w(e,["urlContext"]);return p!=null&&S(t,["urlContext"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ma;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Ma||(Ma={}));class Rl{constructor(t,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,r)}init(t,n,i){var r,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!i||Object.keys(i).length===0?d={config:{}}:typeof i=="object"?d=Object.assign({},i):d=i,d.config&&(d.config.pageToken=n.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(o=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F7 extends La{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(Ma.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=A_(this.apiClient,t),i=n._url,r=Ve("{model}:batchGenerateContent",i),g=n.batch.inputConfig.requests,x=g.requests,p=[];for(const _ of x){const E=Object.assign({},_);if(E.systemInstruction){const N=E.systemInstruction;delete E.systemInstruction;const k=E.request;k.systemInstruction=N,E.request=k}p.push(E)}return g.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(t),d=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(d)i.dest=`${d}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=l7(this.apiClient,t);return g=Ve("batchPredictionJobs",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Um(_))}else{const p=A_(this.apiClient,t);return g=Ve("{model}:batchGenerateContent",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>Ih(_))}}async createEmbeddingsInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=u7(this.apiClient,t);return o=Ve("{model}:asyncBatchEmbedContent",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>Ih(x))}}async get(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=A7(this.apiClient,t);return g=Ve("batchPredictionJobs/{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Um(_))}else{const p=E7(this.apiClient,t);return g=Ve("batches/{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>Ih(_))}}async cancel(t){var n,i,r,o;let d="",g={};if(this.apiClient.isVertexAI()){const x=i7(this.apiClient,t);d=Ve("batchPredictionJobs/{name}:cancel",x._url),g=x._query,delete x._url,delete x._query,await this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const x=n7(this.apiClient,t);d=Ve("batches/{name}:cancel",x._url),g=x._query,delete x._url,delete x._query,await this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=M7(t);return g=Ve("batchPredictionJobs",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=L7(_),N=new b_;return Object.assign(N,E),N})}else{const p=O7(t);return g=Ve("batches",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=D7(_),N=new b_;return Object.assign(N,E),N})}}async delete(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=f7(this.apiClient,t);return g=Ve("batchPredictionJobs/{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>p7(_))}else{const p=d7(this.apiClient,t);return g=Ve("batches/{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>h7(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z7(e){const t={},n=w(e,["data"]);if(n!=null&&S(t,["data"],n),w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function S_(e){const t={},n=w(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>u9(o))),S(t,["parts"],r)}const i=w(e,["role"]);return i!=null&&S(t,["role"],i),t}function V7(e,t){const n={},i=w(e,["ttl"]);t!==void 0&&i!=null&&S(t,["ttl"],i);const r=w(e,["expireTime"]);t!==void 0&&r!=null&&S(t,["expireTime"],r);const o=w(e,["displayName"]);t!==void 0&&o!=null&&S(t,["displayName"],o);const d=w(e,["contents"]);if(t!==void 0&&d!=null){let _=dr(d);Array.isArray(_)&&(_=_.map(E=>S_(E))),S(t,["contents"],_)}const g=w(e,["systemInstruction"]);t!==void 0&&g!=null&&S(t,["systemInstruction"],S_(Zi(g)));const x=w(e,["tools"]);if(t!==void 0&&x!=null){let _=x;Array.isArray(_)&&(_=_.map(E=>f9(E))),S(t,["tools"],_)}const p=w(e,["toolConfig"]);if(t!==void 0&&p!=null&&S(t,["toolConfig"],d9(p)),w(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function G7(e,t){const n={},i=w(e,["ttl"]);t!==void 0&&i!=null&&S(t,["ttl"],i);const r=w(e,["expireTime"]);t!==void 0&&r!=null&&S(t,["expireTime"],r);const o=w(e,["displayName"]);t!==void 0&&o!=null&&S(t,["displayName"],o);const d=w(e,["contents"]);if(t!==void 0&&d!=null){let E=dr(d);Array.isArray(E)&&(E=E.map(N=>N)),S(t,["contents"],E)}const g=w(e,["systemInstruction"]);t!==void 0&&g!=null&&S(t,["systemInstruction"],Zi(g));const x=w(e,["tools"]);if(t!==void 0&&x!=null){let E=x;Array.isArray(E)&&(E=E.map(N=>h9(N))),S(t,["tools"],E)}const p=w(e,["toolConfig"]);t!==void 0&&p!=null&&S(t,["toolConfig"],p);const _=w(e,["kmsKeyName"]);return t!==void 0&&_!=null&&S(t,["encryption_spec","kmsKeyName"],_),n}function H7(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["model"],i4(e,i));const r=w(t,["config"]);return r!=null&&V7(r,n),n}function q7(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["model"],i4(e,i));const r=w(t,["config"]);return r!=null&&G7(r,n),n}function Y7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],Pa(e,i)),n}function X7(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],Pa(e,i)),n}function W7(e){const t={},n=w(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function K7(e){const t={},n=w(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function $7(e){const t={};if(w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=w(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function J7(e){const t={},n=w(e,["id"]);n!=null&&S(t,["id"],n);const i=w(e,["args"]);i!=null&&S(t,["args"],i);const r=w(e,["name"]);if(r!=null&&S(t,["name"],r),w(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(w(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Z7(e){const t={},n=w(e,["allowedFunctionNames"]);n!=null&&S(t,["allowedFunctionNames"],n);const i=w(e,["mode"]);if(i!=null&&S(t,["mode"],i),w(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Q7(e){const t={},n=w(e,["description"]);n!=null&&S(t,["description"],n);const i=w(e,["name"]);i!=null&&S(t,["name"],i);const r=w(e,["parameters"]);r!=null&&S(t,["parameters"],r);const o=w(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const d=w(e,["response"]);d!=null&&S(t,["response"],d);const g=w(e,["responseJsonSchema"]);if(g!=null&&S(t,["responseJsonSchema"],g),w(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function e9(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],Pa(e,i)),n}function t9(e,t){const n={},i=w(t,["name"]);return i!=null&&S(n,["_url","name"],Pa(e,i)),n}function n9(e){const t={};if(w(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=w(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function i9(e){const t={};if(w(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(w(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=w(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function s9(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);return t!==void 0&&r!=null&&S(t,["_query","pageToken"],r),n}function r9(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);return t!==void 0&&r!=null&&S(t,["_query","pageToken"],r),n}function a9(e){const t={},n=w(e,["config"]);return n!=null&&s9(n,t),t}function o9(e){const t={},n=w(e,["config"]);return n!=null&&r9(n,t),t}function l9(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["cachedContents"],o)}return t}function c9(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["cachedContents"],o)}return t}function u9(e){const t={},n=w(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const i=w(e,["codeExecutionResult"]);i!=null&&S(t,["codeExecutionResult"],i);const r=w(e,["executableCode"]);r!=null&&S(t,["executableCode"],r);const o=w(e,["fileData"]);o!=null&&S(t,["fileData"],$7(o));const d=w(e,["functionCall"]);d!=null&&S(t,["functionCall"],J7(d));const g=w(e,["functionResponse"]);g!=null&&S(t,["functionResponse"],g);const x=w(e,["inlineData"]);x!=null&&S(t,["inlineData"],z7(x));const p=w(e,["text"]);p!=null&&S(t,["text"],p);const _=w(e,["thought"]);_!=null&&S(t,["thought"],_);const E=w(e,["thoughtSignature"]);E!=null&&S(t,["thoughtSignature"],E);const N=w(e,["videoMetadata"]);return N!=null&&S(t,["videoMetadata"],N),t}function d9(e){const t={},n=w(e,["retrievalConfig"]);n!=null&&S(t,["retrievalConfig"],n);const i=w(e,["functionCallingConfig"]);return i!=null&&S(t,["functionCallingConfig"],Z7(i)),t}function f9(e){const t={};if(w(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=w(e,["computerUse"]);n!=null&&S(t,["computerUse"],n);const i=w(e,["fileSearch"]);i!=null&&S(t,["fileSearch"],i);const r=w(e,["codeExecution"]);if(r!=null&&S(t,["codeExecution"],r),w(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=w(e,["functionDeclarations"]);if(o!=null){let _=o;Array.isArray(_)&&(_=_.map(E=>E)),S(t,["functionDeclarations"],_)}const d=w(e,["googleMaps"]);d!=null&&S(t,["googleMaps"],n9(d));const g=w(e,["googleSearch"]);g!=null&&S(t,["googleSearch"],i9(g));const x=w(e,["googleSearchRetrieval"]);x!=null&&S(t,["googleSearchRetrieval"],x);const p=w(e,["urlContext"]);return p!=null&&S(t,["urlContext"],p),t}function h9(e){const t={},n=w(e,["retrieval"]);n!=null&&S(t,["retrieval"],n);const i=w(e,["computerUse"]);if(i!=null&&S(t,["computerUse"],i),w(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=w(e,["codeExecution"]);r!=null&&S(t,["codeExecution"],r);const o=w(e,["enterpriseWebSearch"]);o!=null&&S(t,["enterpriseWebSearch"],o);const d=w(e,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(N=>Q7(N))),S(t,["functionDeclarations"],E)}const g=w(e,["googleMaps"]);g!=null&&S(t,["googleMaps"],g);const x=w(e,["googleSearch"]);x!=null&&S(t,["googleSearch"],x);const p=w(e,["googleSearchRetrieval"]);p!=null&&S(t,["googleSearchRetrieval"],p);const _=w(e,["urlContext"]);return _!=null&&S(t,["urlContext"],_),t}function p9(e,t){const n={},i=w(e,["ttl"]);t!==void 0&&i!=null&&S(t,["ttl"],i);const r=w(e,["expireTime"]);return t!==void 0&&r!=null&&S(t,["expireTime"],r),n}function m9(e,t){const n={},i=w(e,["ttl"]);t!==void 0&&i!=null&&S(t,["ttl"],i);const r=w(e,["expireTime"]);return t!==void 0&&r!=null&&S(t,["expireTime"],r),n}function g9(e,t){const n={},i=w(t,["name"]);i!=null&&S(n,["_url","name"],Pa(e,i));const r=w(t,["config"]);return r!=null&&p9(r,n),n}function x9(e,t){const n={},i=w(t,["name"]);i!=null&&S(n,["_url","name"],Pa(e,i));const r=w(t,["config"]);return r!=null&&m9(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y9 extends La{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(Ma.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=q7(this.apiClient,t);return g=Ve("cachedContents",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>_)}else{const p=H7(this.apiClient,t);return g=Ve("cachedContents",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>_)}}async get(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=t9(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>_)}else{const p=e9(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>_)}}async delete(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=X7(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=K7(_),N=new y_;return Object.assign(N,E),N})}else{const p=Y7(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=W7(_),N=new y_;return Object.assign(N,E),N})}}async update(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=x9(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>_)}else{const p=g9(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>_)}}async listInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=o9(t);return g=Ve("cachedContents",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=c9(_),N=new v_;return Object.assign(N,E),N})}else{const p=a9(t);return g=Ve("cachedContents",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=l9(_),N=new v_;return Object.assign(N,E),N})}}}function Kh(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function N_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(e){return this instanceof pt?(this.v=e,this):new pt(e)}function kr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(k){return function(O){return Promise.resolve(O).then(k,E)}}function g(k,O){i[k]&&(r[k]=function(L){return new Promise(function(P,H){o.push([k,L,P,H])>1||x(k,L)})},O&&(r[k]=O(r[k])))}function x(k,O){try{p(i[k](O))}catch(L){N(o[0][3],L)}}function p(k){k.value instanceof pt?Promise.resolve(k.value.v).then(_,E):N(o[0][2],k)}function _(k){x("next",k)}function E(k){x("throw",k)}function N(k,O){k(O),o.shift(),o.length&&x(o[0][0],o[0][1])}}function Or(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof N_=="function"?N_(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(d){return new Promise(function(g,x){d=e[o](d),r(g,x,d.done,d.value)})}}function r(o,d,g,x){Promise.resolve(x).then(function(p){o({value:p,done:g})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v9(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:g4(n)}function g4(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function b9(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function C_(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const r=[];let o=!0;for(;i<n&&e[i].role==="model";)r.push(e[i]),o&&!g4(e[i])&&(o=!1),i++;o?t.push(...r):t.pop()}return t}class w9{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new _9(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class _9{constructor(t,n,i,r={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),b9(o)}async sendMessage(t){var n;await this.sendPromise;const i=Zi(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,d,g;const x=await r,p=(d=(o=x.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content,_=x.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let N=[];_!=null&&(N=(g=_.slice(E))!==null&&g!==void 0?g:[]);const k=p?[p]:[];this.recordHistory(i,k,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const i=Zi(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(t=!1){const n=t?C_(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return kr(this,arguments,function*(){var r,o,d,g,x,p;const _=[];try{for(var E=!0,N=Or(t),k;k=yield pt(N.next()),r=k.done,!r;E=!0){g=k.value,E=!1;const O=g;if(v9(O)){const L=(p=(x=O.candidates)===null||x===void 0?void 0:x[0])===null||p===void 0?void 0:p.content;L!==void 0&&_.push(L)}yield yield pt(O)}}catch(O){o={error:O}}finally{try{!E&&!r&&(d=N.return)&&(yield pt(d.call(N)))}finally{if(o)throw o.error}}this.recordHistory(n,_)})}recordHistory(t,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...C_(i)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ld extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ld.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E9(e){const t={},n=w(e,["file"]);return n!=null&&S(t,["file"],n),t}function A9(e){const t={},n=w(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function S9(e){const t={},n=w(e,["name"]);return n!=null&&S(t,["_url","file"],c4(n)),t}function N9(e){const t={},n=w(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}function C9(e){const t={},n=w(e,["name"]);return n!=null&&S(t,["_url","file"],c4(n)),t}function T9(e){const t={},n=w(e,["uris"]);return n!=null&&S(t,["uris"],n),t}function I9(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);return t!==void 0&&r!=null&&S(t,["_query","pageToken"],r),n}function R9(e){const t={},n=w(e,["config"]);return n!=null&&I9(n,t),t}function k9(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["files"],o)}return t}function O9(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),S(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M9 extends La{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(Ma.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=R9(t);return o=Ve("files",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>{const p=k9(x),_=new Dk;return Object.assign(_,p),_})}}async createInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=E9(t);return o=Ve("upload/v1beta/files",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=A9(x),_=new Lk;return Object.assign(_,p),_})}}async get(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=C9(t);return o=Ve("files/{file}",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async delete(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=S9(t);return o=Ve("files/{file}",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>{const p=N9(x),_=new Pk;return Object.assign(_,p),_})}}async registerFilesInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=T9(t);return o=Ve("files:register",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=O9(x),_=new jk;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rh(e){const t={},n=w(e,["data"]);if(n!=null&&S(t,["data"],n),w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function D9(e){const t={},n=w(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>$9(o))),S(t,["parts"],r)}const i=w(e,["role"]);return i!=null&&S(t,["role"],i),t}function L9(e){const t={};if(w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=w(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function P9(e){const t={},n=w(e,["id"]);n!=null&&S(t,["id"],n);const i=w(e,["args"]);i!=null&&S(t,["args"],i);const r=w(e,["name"]);if(r!=null&&S(t,["name"],r),w(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(w(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function j9(e){const t={},n=w(e,["description"]);n!=null&&S(t,["description"],n);const i=w(e,["name"]);i!=null&&S(t,["name"],i);const r=w(e,["parameters"]);r!=null&&S(t,["parameters"],r);const o=w(e,["parametersJsonSchema"]);o!=null&&S(t,["parametersJsonSchema"],o);const d=w(e,["response"]);d!=null&&S(t,["response"],d);const g=w(e,["responseJsonSchema"]);if(g!=null&&S(t,["responseJsonSchema"],g),w(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function B9(e){const t={},n=w(e,["modelSelectionConfig"]);n!=null&&S(t,["modelConfig"],n);const i=w(e,["responseJsonSchema"]);i!=null&&S(t,["responseJsonSchema"],i);const r=w(e,["audioTimestamp"]);r!=null&&S(t,["audioTimestamp"],r);const o=w(e,["candidateCount"]);o!=null&&S(t,["candidateCount"],o);const d=w(e,["enableAffectiveDialog"]);d!=null&&S(t,["enableAffectiveDialog"],d);const g=w(e,["frequencyPenalty"]);g!=null&&S(t,["frequencyPenalty"],g);const x=w(e,["logprobs"]);x!=null&&S(t,["logprobs"],x);const p=w(e,["maxOutputTokens"]);p!=null&&S(t,["maxOutputTokens"],p);const _=w(e,["mediaResolution"]);_!=null&&S(t,["mediaResolution"],_);const E=w(e,["presencePenalty"]);E!=null&&S(t,["presencePenalty"],E);const N=w(e,["responseLogprobs"]);N!=null&&S(t,["responseLogprobs"],N);const k=w(e,["responseMimeType"]);k!=null&&S(t,["responseMimeType"],k);const O=w(e,["responseModalities"]);O!=null&&S(t,["responseModalities"],O);const L=w(e,["responseSchema"]);L!=null&&S(t,["responseSchema"],L);const P=w(e,["routingConfig"]);P!=null&&S(t,["routingConfig"],P);const H=w(e,["seed"]);H!=null&&S(t,["seed"],H);const B=w(e,["speechConfig"]);B!=null&&S(t,["speechConfig"],B);const j=w(e,["stopSequences"]);j!=null&&S(t,["stopSequences"],j);const F=w(e,["temperature"]);F!=null&&S(t,["temperature"],F);const Y=w(e,["thinkingConfig"]);Y!=null&&S(t,["thinkingConfig"],Y);const W=w(e,["topK"]);W!=null&&S(t,["topK"],W);const te=w(e,["topP"]);if(te!=null&&S(t,["topP"],te),w(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function U9(e){const t={};if(w(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=w(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function F9(e){const t={};if(w(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(w(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=w(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function z9(e,t){const n={},i=w(e,["generationConfig"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig"],i);const r=w(e,["responseModalities"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig","responseModalities"],r);const o=w(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const d=w(e,["topP"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","topP"],d);const g=w(e,["topK"]);t!==void 0&&g!=null&&S(t,["setup","generationConfig","topK"],g);const x=w(e,["maxOutputTokens"]);t!==void 0&&x!=null&&S(t,["setup","generationConfig","maxOutputTokens"],x);const p=w(e,["mediaResolution"]);t!==void 0&&p!=null&&S(t,["setup","generationConfig","mediaResolution"],p);const _=w(e,["seed"]);t!==void 0&&_!=null&&S(t,["setup","generationConfig","seed"],_);const E=w(e,["speechConfig"]);t!==void 0&&E!=null&&S(t,["setup","generationConfig","speechConfig"],ax(E));const N=w(e,["thinkingConfig"]);t!==void 0&&N!=null&&S(t,["setup","generationConfig","thinkingConfig"],N);const k=w(e,["enableAffectiveDialog"]);t!==void 0&&k!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],k);const O=w(e,["systemInstruction"]);t!==void 0&&O!=null&&S(t,["setup","systemInstruction"],D9(Zi(O)));const L=w(e,["tools"]);if(t!==void 0&&L!=null){let W=pu(L);Array.isArray(W)&&(W=W.map(te=>Z9(hu(te)))),S(t,["setup","tools"],W)}const P=w(e,["sessionResumption"]);t!==void 0&&P!=null&&S(t,["setup","sessionResumption"],J9(P));const H=w(e,["inputAudioTranscription"]);t!==void 0&&H!=null&&S(t,["setup","inputAudioTranscription"],H);const B=w(e,["outputAudioTranscription"]);t!==void 0&&B!=null&&S(t,["setup","outputAudioTranscription"],B);const j=w(e,["realtimeInputConfig"]);t!==void 0&&j!=null&&S(t,["setup","realtimeInputConfig"],j);const F=w(e,["contextWindowCompression"]);t!==void 0&&F!=null&&S(t,["setup","contextWindowCompression"],F);const Y=w(e,["proactivity"]);if(t!==void 0&&Y!=null&&S(t,["setup","proactivity"],Y),w(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function V9(e,t){const n={},i=w(e,["generationConfig"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig"],B9(i));const r=w(e,["responseModalities"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig","responseModalities"],r);const o=w(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const d=w(e,["topP"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","topP"],d);const g=w(e,["topK"]);t!==void 0&&g!=null&&S(t,["setup","generationConfig","topK"],g);const x=w(e,["maxOutputTokens"]);t!==void 0&&x!=null&&S(t,["setup","generationConfig","maxOutputTokens"],x);const p=w(e,["mediaResolution"]);t!==void 0&&p!=null&&S(t,["setup","generationConfig","mediaResolution"],p);const _=w(e,["seed"]);t!==void 0&&_!=null&&S(t,["setup","generationConfig","seed"],_);const E=w(e,["speechConfig"]);t!==void 0&&E!=null&&S(t,["setup","generationConfig","speechConfig"],ax(E));const N=w(e,["thinkingConfig"]);t!==void 0&&N!=null&&S(t,["setup","generationConfig","thinkingConfig"],N);const k=w(e,["enableAffectiveDialog"]);t!==void 0&&k!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],k);const O=w(e,["systemInstruction"]);t!==void 0&&O!=null&&S(t,["setup","systemInstruction"],Zi(O));const L=w(e,["tools"]);if(t!==void 0&&L!=null){let te=pu(L);Array.isArray(te)&&(te=te.map(ne=>Q9(hu(ne)))),S(t,["setup","tools"],te)}const P=w(e,["sessionResumption"]);t!==void 0&&P!=null&&S(t,["setup","sessionResumption"],P);const H=w(e,["inputAudioTranscription"]);t!==void 0&&H!=null&&S(t,["setup","inputAudioTranscription"],H);const B=w(e,["outputAudioTranscription"]);t!==void 0&&B!=null&&S(t,["setup","outputAudioTranscription"],B);const j=w(e,["realtimeInputConfig"]);t!==void 0&&j!=null&&S(t,["setup","realtimeInputConfig"],j);const F=w(e,["contextWindowCompression"]);t!==void 0&&F!=null&&S(t,["setup","contextWindowCompression"],F);const Y=w(e,["proactivity"]);t!==void 0&&Y!=null&&S(t,["setup","proactivity"],Y);const W=w(e,["explicitVadSignal"]);return t!==void 0&&W!=null&&S(t,["setup","explicitVadSignal"],W),n}function G9(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["setup","model"],Kt(e,i));const r=w(t,["config"]);return r!=null&&S(n,["config"],z9(r,n)),n}function H9(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["setup","model"],Kt(e,i));const r=w(t,["config"]);return r!=null&&S(n,["config"],V9(r,n)),n}function q9(e){const t={},n=w(e,["musicGenerationConfig"]);return n!=null&&S(t,["musicGenerationConfig"],n),t}function Y9(e){const t={},n=w(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),S(t,["weightedPrompts"],i)}return t}function X9(e){const t={},n=w(e,["media"]);if(n!=null){let p=s4(n);Array.isArray(p)&&(p=p.map(_=>Rh(_))),S(t,["mediaChunks"],p)}const i=w(e,["audio"]);i!=null&&S(t,["audio"],Rh(a4(i)));const r=w(e,["audioStreamEnd"]);r!=null&&S(t,["audioStreamEnd"],r);const o=w(e,["video"]);o!=null&&S(t,["video"],Rh(r4(o)));const d=w(e,["text"]);d!=null&&S(t,["text"],d);const g=w(e,["activityStart"]);g!=null&&S(t,["activityStart"],g);const x=w(e,["activityEnd"]);return x!=null&&S(t,["activityEnd"],x),t}function W9(e){const t={},n=w(e,["media"]);if(n!=null){let p=s4(n);Array.isArray(p)&&(p=p.map(_=>_)),S(t,["mediaChunks"],p)}const i=w(e,["audio"]);i!=null&&S(t,["audio"],a4(i));const r=w(e,["audioStreamEnd"]);r!=null&&S(t,["audioStreamEnd"],r);const o=w(e,["video"]);o!=null&&S(t,["video"],r4(o));const d=w(e,["text"]);d!=null&&S(t,["text"],d);const g=w(e,["activityStart"]);g!=null&&S(t,["activityStart"],g);const x=w(e,["activityEnd"]);return x!=null&&S(t,["activityEnd"],x),t}function K9(e){const t={},n=w(e,["setupComplete"]);n!=null&&S(t,["setupComplete"],n);const i=w(e,["serverContent"]);i!=null&&S(t,["serverContent"],i);const r=w(e,["toolCall"]);r!=null&&S(t,["toolCall"],r);const o=w(e,["toolCallCancellation"]);o!=null&&S(t,["toolCallCancellation"],o);const d=w(e,["usageMetadata"]);d!=null&&S(t,["usageMetadata"],eO(d));const g=w(e,["goAway"]);g!=null&&S(t,["goAway"],g);const x=w(e,["sessionResumptionUpdate"]);x!=null&&S(t,["sessionResumptionUpdate"],x);const p=w(e,["voiceActivityDetectionSignal"]);p!=null&&S(t,["voiceActivityDetectionSignal"],p);const _=w(e,["voiceActivity"]);return _!=null&&S(t,["voiceActivity"],tO(_)),t}function $9(e){const t={},n=w(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const i=w(e,["codeExecutionResult"]);i!=null&&S(t,["codeExecutionResult"],i);const r=w(e,["executableCode"]);r!=null&&S(t,["executableCode"],r);const o=w(e,["fileData"]);o!=null&&S(t,["fileData"],L9(o));const d=w(e,["functionCall"]);d!=null&&S(t,["functionCall"],P9(d));const g=w(e,["functionResponse"]);g!=null&&S(t,["functionResponse"],g);const x=w(e,["inlineData"]);x!=null&&S(t,["inlineData"],Rh(x));const p=w(e,["text"]);p!=null&&S(t,["text"],p);const _=w(e,["thought"]);_!=null&&S(t,["thought"],_);const E=w(e,["thoughtSignature"]);E!=null&&S(t,["thoughtSignature"],E);const N=w(e,["videoMetadata"]);return N!=null&&S(t,["videoMetadata"],N),t}function J9(e){const t={},n=w(e,["handle"]);if(n!=null&&S(t,["handle"],n),w(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Z9(e){const t={};if(w(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=w(e,["computerUse"]);n!=null&&S(t,["computerUse"],n);const i=w(e,["fileSearch"]);i!=null&&S(t,["fileSearch"],i);const r=w(e,["codeExecution"]);if(r!=null&&S(t,["codeExecution"],r),w(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=w(e,["functionDeclarations"]);if(o!=null){let _=o;Array.isArray(_)&&(_=_.map(E=>E)),S(t,["functionDeclarations"],_)}const d=w(e,["googleMaps"]);d!=null&&S(t,["googleMaps"],U9(d));const g=w(e,["googleSearch"]);g!=null&&S(t,["googleSearch"],F9(g));const x=w(e,["googleSearchRetrieval"]);x!=null&&S(t,["googleSearchRetrieval"],x);const p=w(e,["urlContext"]);return p!=null&&S(t,["urlContext"],p),t}function Q9(e){const t={},n=w(e,["retrieval"]);n!=null&&S(t,["retrieval"],n);const i=w(e,["computerUse"]);if(i!=null&&S(t,["computerUse"],i),w(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=w(e,["codeExecution"]);r!=null&&S(t,["codeExecution"],r);const o=w(e,["enterpriseWebSearch"]);o!=null&&S(t,["enterpriseWebSearch"],o);const d=w(e,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(N=>j9(N))),S(t,["functionDeclarations"],E)}const g=w(e,["googleMaps"]);g!=null&&S(t,["googleMaps"],g);const x=w(e,["googleSearch"]);x!=null&&S(t,["googleSearch"],x);const p=w(e,["googleSearchRetrieval"]);p!=null&&S(t,["googleSearchRetrieval"],p);const _=w(e,["urlContext"]);return _!=null&&S(t,["urlContext"],_),t}function eO(e){const t={},n=w(e,["promptTokenCount"]);n!=null&&S(t,["promptTokenCount"],n);const i=w(e,["cachedContentTokenCount"]);i!=null&&S(t,["cachedContentTokenCount"],i);const r=w(e,["candidatesTokenCount"]);r!=null&&S(t,["responseTokenCount"],r);const o=w(e,["toolUsePromptTokenCount"]);o!=null&&S(t,["toolUsePromptTokenCount"],o);const d=w(e,["thoughtsTokenCount"]);d!=null&&S(t,["thoughtsTokenCount"],d);const g=w(e,["totalTokenCount"]);g!=null&&S(t,["totalTokenCount"],g);const x=w(e,["promptTokensDetails"]);if(x!=null){let k=x;Array.isArray(k)&&(k=k.map(O=>O)),S(t,["promptTokensDetails"],k)}const p=w(e,["cacheTokensDetails"]);if(p!=null){let k=p;Array.isArray(k)&&(k=k.map(O=>O)),S(t,["cacheTokensDetails"],k)}const _=w(e,["candidatesTokensDetails"]);if(_!=null){let k=_;Array.isArray(k)&&(k=k.map(O=>O)),S(t,["responseTokensDetails"],k)}const E=w(e,["toolUsePromptTokensDetails"]);if(E!=null){let k=E;Array.isArray(k)&&(k=k.map(O=>O)),S(t,["toolUsePromptTokensDetails"],k)}const N=w(e,["trafficType"]);return N!=null&&S(t,["trafficType"],N),t}function tO(e){const t={},n=w(e,["type"]);return n!=null&&S(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nO(e,t){const n={},i=w(e,["data"]);if(i!=null&&S(n,["data"],i),w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=w(e,["mimeType"]);return r!=null&&S(n,["mimeType"],r),n}function iO(e,t){const n={},i=w(e,["content"]);i!=null&&S(n,["content"],i);const r=w(e,["citationMetadata"]);r!=null&&S(n,["citationMetadata"],sO(r));const o=w(e,["tokenCount"]);o!=null&&S(n,["tokenCount"],o);const d=w(e,["finishReason"]);d!=null&&S(n,["finishReason"],d);const g=w(e,["avgLogprobs"]);g!=null&&S(n,["avgLogprobs"],g);const x=w(e,["groundingMetadata"]);x!=null&&S(n,["groundingMetadata"],x);const p=w(e,["index"]);p!=null&&S(n,["index"],p);const _=w(e,["logprobsResult"]);_!=null&&S(n,["logprobsResult"],_);const E=w(e,["safetyRatings"]);if(E!=null){let k=E;Array.isArray(k)&&(k=k.map(O=>O)),S(n,["safetyRatings"],k)}const N=w(e,["urlContextMetadata"]);return N!=null&&S(n,["urlContextMetadata"],N),n}function sO(e,t){const n={},i=w(e,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),S(n,["citations"],r)}return n}function rO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let d=dr(o);Array.isArray(d)&&(d=d.map(g=>g)),S(i,["contents"],d)}return i}function aO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(n,["tokensInfo"],o)}return n}function oO(e,t){const n={},i=w(e,["values"]);i!=null&&S(n,["values"],i);const r=w(e,["statistics"]);return r!=null&&S(n,["statistics"],lO(r)),n}function lO(e,t){const n={},i=w(e,["truncated"]);i!=null&&S(n,["truncated"],i);const r=w(e,["token_count"]);return r!=null&&S(n,["tokenCount"],r),n}function N0(e,t){const n={},i=w(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(d=>xM(d))),S(n,["parts"],o)}const r=w(e,["role"]);return r!=null&&S(n,["role"],r),n}function cO(e,t){const n={},i=w(e,["controlType"]);i!=null&&S(n,["controlType"],i);const r=w(e,["enableControlImageComputation"]);return r!=null&&S(n,["computeControl"],r),n}function uO(e,t){const n={};if(w(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(w(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(w(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function dO(e,t,n){const i={},r=w(e,["systemInstruction"]);t!==void 0&&r!=null&&S(t,["systemInstruction"],Zi(r));const o=w(e,["tools"]);if(t!==void 0&&o!=null){let g=o;Array.isArray(g)&&(g=g.map(x=>b4(x))),S(t,["tools"],g)}const d=w(e,["generationConfig"]);return t!==void 0&&d!=null&&S(t,["generationConfig"],nM(d)),i}function fO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let g=dr(o);Array.isArray(g)&&(g=g.map(x=>N0(x))),S(i,["contents"],g)}const d=w(t,["config"]);return d!=null&&uO(d),i}function hO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let g=dr(o);Array.isArray(g)&&(g=g.map(x=>x)),S(i,["contents"],g)}const d=w(t,["config"]);return d!=null&&dO(d,i),i}function pO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["totalTokens"]);r!=null&&S(n,["totalTokens"],r);const o=w(e,["cachedContentTokenCount"]);return o!=null&&S(n,["cachedContentTokenCount"],o),n}function mO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["totalTokens"]);return r!=null&&S(n,["totalTokens"],r),n}function gO(e,t,n){const i={},r=w(t,["model"]);return r!=null&&S(i,["_url","name"],Kt(e,r)),i}function xO(e,t,n){const i={},r=w(t,["model"]);return r!=null&&S(i,["_url","name"],Kt(e,r)),i}function yO(e,t){const n={},i=w(e,["sdkHttpResponse"]);return i!=null&&S(n,["sdkHttpResponse"],i),n}function vO(e,t){const n={},i=w(e,["sdkHttpResponse"]);return i!=null&&S(n,["sdkHttpResponse"],i),n}function bO(e,t,n){const i={},r=w(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const o=w(e,["negativePrompt"]);t!==void 0&&o!=null&&S(t,["parameters","negativePrompt"],o);const d=w(e,["numberOfImages"]);t!==void 0&&d!=null&&S(t,["parameters","sampleCount"],d);const g=w(e,["aspectRatio"]);t!==void 0&&g!=null&&S(t,["parameters","aspectRatio"],g);const x=w(e,["guidanceScale"]);t!==void 0&&x!=null&&S(t,["parameters","guidanceScale"],x);const p=w(e,["seed"]);t!==void 0&&p!=null&&S(t,["parameters","seed"],p);const _=w(e,["safetyFilterLevel"]);t!==void 0&&_!=null&&S(t,["parameters","safetySetting"],_);const E=w(e,["personGeneration"]);t!==void 0&&E!=null&&S(t,["parameters","personGeneration"],E);const N=w(e,["includeSafetyAttributes"]);t!==void 0&&N!=null&&S(t,["parameters","includeSafetyAttributes"],N);const k=w(e,["includeRaiReason"]);t!==void 0&&k!=null&&S(t,["parameters","includeRaiReason"],k);const O=w(e,["language"]);t!==void 0&&O!=null&&S(t,["parameters","language"],O);const L=w(e,["outputMimeType"]);t!==void 0&&L!=null&&S(t,["parameters","outputOptions","mimeType"],L);const P=w(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&S(t,["parameters","outputOptions","compressionQuality"],P);const H=w(e,["addWatermark"]);t!==void 0&&H!=null&&S(t,["parameters","addWatermark"],H);const B=w(e,["labels"]);t!==void 0&&B!=null&&S(t,["labels"],B);const j=w(e,["editMode"]);t!==void 0&&j!=null&&S(t,["parameters","editMode"],j);const F=w(e,["baseSteps"]);return t!==void 0&&F!=null&&S(t,["parameters","editConfig","baseSteps"],F),i}function wO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["prompt"]);o!=null&&S(i,["instances[0]","prompt"],o);const d=w(t,["referenceImages"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(p=>EM(p))),S(i,["instances[0]","referenceImages"],x)}const g=w(t,["config"]);return g!=null&&bO(g,i),i}function _O(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>C0(d))),S(n,["generatedImages"],o)}return n}function EO(e,t,n){const i={},r=w(e,["taskType"]);t!==void 0&&r!=null&&S(t,["requests[]","taskType"],r);const o=w(e,["title"]);t!==void 0&&o!=null&&S(t,["requests[]","title"],o);const d=w(e,["outputDimensionality"]);if(t!==void 0&&d!=null&&S(t,["requests[]","outputDimensionality"],d),w(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(w(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function AO(e,t,n){const i={},r=w(e,["taskType"]);t!==void 0&&r!=null&&S(t,["instances[]","task_type"],r);const o=w(e,["title"]);t!==void 0&&o!=null&&S(t,["instances[]","title"],o);const d=w(e,["outputDimensionality"]);t!==void 0&&d!=null&&S(t,["parameters","outputDimensionality"],d);const g=w(e,["mimeType"]);t!==void 0&&g!=null&&S(t,["instances[]","mimeType"],g);const x=w(e,["autoTruncate"]);return t!==void 0&&x!=null&&S(t,["parameters","autoTruncate"],x),i}function SO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let x=ix(e,o);Array.isArray(x)&&(x=x.map(p=>p)),S(i,["requests[]","content"],x)}const d=w(t,["config"]);d!=null&&EO(d,i);const g=w(t,["model"]);return g!==void 0&&S(i,["requests[]","model"],Kt(e,g)),i}function NO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let g=ix(e,o);Array.isArray(g)&&(g=g.map(x=>x)),S(i,["instances[]","content"],g)}const d=w(t,["config"]);return d!=null&&AO(d,i),i}function CO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),S(n,["embeddings"],d)}const o=w(e,["metadata"]);return o!=null&&S(n,["metadata"],o),n}function TO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["predictions[]","embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>oO(g))),S(n,["embeddings"],d)}const o=w(e,["metadata"]);return o!=null&&S(n,["metadata"],o),n}function IO(e,t){const n={},i=w(e,["endpoint"]);i!=null&&S(n,["name"],i);const r=w(e,["deployedModelId"]);return r!=null&&S(n,["deployedModelId"],r),n}function RO(e,t){const n={};if(w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=w(e,["fileUri"]);i!=null&&S(n,["fileUri"],i);const r=w(e,["mimeType"]);return r!=null&&S(n,["mimeType"],r),n}function kO(e,t){const n={},i=w(e,["id"]);i!=null&&S(n,["id"],i);const r=w(e,["args"]);r!=null&&S(n,["args"],r);const o=w(e,["name"]);if(o!=null&&S(n,["name"],o),w(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(w(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function OO(e,t){const n={},i=w(e,["allowedFunctionNames"]);i!=null&&S(n,["allowedFunctionNames"],i);const r=w(e,["mode"]);if(r!=null&&S(n,["mode"],r),w(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function MO(e,t){const n={},i=w(e,["description"]);i!=null&&S(n,["description"],i);const r=w(e,["name"]);r!=null&&S(n,["name"],r);const o=w(e,["parameters"]);o!=null&&S(n,["parameters"],o);const d=w(e,["parametersJsonSchema"]);d!=null&&S(n,["parametersJsonSchema"],d);const g=w(e,["response"]);g!=null&&S(n,["response"],g);const x=w(e,["responseJsonSchema"]);if(x!=null&&S(n,["responseJsonSchema"],x),w(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function DO(e,t,n,i){const r={},o=w(t,["systemInstruction"]);n!==void 0&&o!=null&&S(n,["systemInstruction"],N0(Zi(o)));const d=w(t,["temperature"]);d!=null&&S(r,["temperature"],d);const g=w(t,["topP"]);g!=null&&S(r,["topP"],g);const x=w(t,["topK"]);x!=null&&S(r,["topK"],x);const p=w(t,["candidateCount"]);p!=null&&S(r,["candidateCount"],p);const _=w(t,["maxOutputTokens"]);_!=null&&S(r,["maxOutputTokens"],_);const E=w(t,["stopSequences"]);E!=null&&S(r,["stopSequences"],E);const N=w(t,["responseLogprobs"]);N!=null&&S(r,["responseLogprobs"],N);const k=w(t,["logprobs"]);k!=null&&S(r,["logprobs"],k);const O=w(t,["presencePenalty"]);O!=null&&S(r,["presencePenalty"],O);const L=w(t,["frequencyPenalty"]);L!=null&&S(r,["frequencyPenalty"],L);const P=w(t,["seed"]);P!=null&&S(r,["seed"],P);const H=w(t,["responseMimeType"]);H!=null&&S(r,["responseMimeType"],H);const B=w(t,["responseSchema"]);B!=null&&S(r,["responseSchema"],sx(B));const j=w(t,["responseJsonSchema"]);if(j!=null&&S(r,["responseJsonSchema"],j),w(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(w(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=w(t,["safetySettings"]);if(n!==void 0&&F!=null){let ue=F;Array.isArray(ue)&&(ue=ue.map(X=>AM(X))),S(n,["safetySettings"],ue)}const Y=w(t,["tools"]);if(n!==void 0&&Y!=null){let ue=pu(Y);Array.isArray(ue)&&(ue=ue.map(X=>kM(hu(X)))),S(n,["tools"],ue)}const W=w(t,["toolConfig"]);if(n!==void 0&&W!=null&&S(n,["toolConfig"],RM(W)),w(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=w(t,["cachedContent"]);n!==void 0&&te!=null&&S(n,["cachedContent"],Pa(e,te));const ne=w(t,["responseModalities"]);ne!=null&&S(r,["responseModalities"],ne);const ie=w(t,["mediaResolution"]);ie!=null&&S(r,["mediaResolution"],ie);const _e=w(t,["speechConfig"]);if(_e!=null&&S(r,["speechConfig"],rx(_e)),w(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ee=w(t,["thinkingConfig"]);Ee!=null&&S(r,["thinkingConfig"],Ee);const pe=w(t,["imageConfig"]);pe!=null&&S(r,["imageConfig"],oM(pe));const Ne=w(t,["enableEnhancedCivicAnswers"]);if(Ne!=null&&S(r,["enableEnhancedCivicAnswers"],Ne),w(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function LO(e,t,n,i){const r={},o=w(t,["systemInstruction"]);n!==void 0&&o!=null&&S(n,["systemInstruction"],Zi(o));const d=w(t,["temperature"]);d!=null&&S(r,["temperature"],d);const g=w(t,["topP"]);g!=null&&S(r,["topP"],g);const x=w(t,["topK"]);x!=null&&S(r,["topK"],x);const p=w(t,["candidateCount"]);p!=null&&S(r,["candidateCount"],p);const _=w(t,["maxOutputTokens"]);_!=null&&S(r,["maxOutputTokens"],_);const E=w(t,["stopSequences"]);E!=null&&S(r,["stopSequences"],E);const N=w(t,["responseLogprobs"]);N!=null&&S(r,["responseLogprobs"],N);const k=w(t,["logprobs"]);k!=null&&S(r,["logprobs"],k);const O=w(t,["presencePenalty"]);O!=null&&S(r,["presencePenalty"],O);const L=w(t,["frequencyPenalty"]);L!=null&&S(r,["frequencyPenalty"],L);const P=w(t,["seed"]);P!=null&&S(r,["seed"],P);const H=w(t,["responseMimeType"]);H!=null&&S(r,["responseMimeType"],H);const B=w(t,["responseSchema"]);B!=null&&S(r,["responseSchema"],sx(B));const j=w(t,["responseJsonSchema"]);j!=null&&S(r,["responseJsonSchema"],j);const F=w(t,["routingConfig"]);F!=null&&S(r,["routingConfig"],F);const Y=w(t,["modelSelectionConfig"]);Y!=null&&S(r,["modelConfig"],Y);const W=w(t,["safetySettings"]);if(n!==void 0&&W!=null){let oe=W;Array.isArray(oe)&&(oe=oe.map(fe=>fe)),S(n,["safetySettings"],oe)}const te=w(t,["tools"]);if(n!==void 0&&te!=null){let oe=pu(te);Array.isArray(oe)&&(oe=oe.map(fe=>b4(hu(fe)))),S(n,["tools"],oe)}const ne=w(t,["toolConfig"]);n!==void 0&&ne!=null&&S(n,["toolConfig"],ne);const ie=w(t,["labels"]);n!==void 0&&ie!=null&&S(n,["labels"],ie);const _e=w(t,["cachedContent"]);n!==void 0&&_e!=null&&S(n,["cachedContent"],Pa(e,_e));const Ee=w(t,["responseModalities"]);Ee!=null&&S(r,["responseModalities"],Ee);const pe=w(t,["mediaResolution"]);pe!=null&&S(r,["mediaResolution"],pe);const Ne=w(t,["speechConfig"]);Ne!=null&&S(r,["speechConfig"],rx(Ne));const ue=w(t,["audioTimestamp"]);ue!=null&&S(r,["audioTimestamp"],ue);const X=w(t,["thinkingConfig"]);X!=null&&S(r,["thinkingConfig"],X);const K=w(t,["imageConfig"]);if(K!=null&&S(r,["imageConfig"],lM(K)),w(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const J=w(t,["modelArmorConfig"]);return n!==void 0&&J!=null&&S(n,["modelArmorConfig"],J),r}function T_(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let g=dr(o);Array.isArray(g)&&(g=g.map(x=>N0(x))),S(i,["contents"],g)}const d=w(t,["config"]);return d!=null&&S(i,["generationConfig"],DO(e,d,i)),i}function I_(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["contents"]);if(o!=null){let g=dr(o);Array.isArray(g)&&(g=g.map(x=>x)),S(i,["contents"],g)}const d=w(t,["config"]);return d!=null&&S(i,["generationConfig"],LO(e,d,i)),i}function R_(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(_=>iO(_))),S(n,["candidates"],p)}const o=w(e,["modelVersion"]);o!=null&&S(n,["modelVersion"],o);const d=w(e,["promptFeedback"]);d!=null&&S(n,["promptFeedback"],d);const g=w(e,["responseId"]);g!=null&&S(n,["responseId"],g);const x=w(e,["usageMetadata"]);return x!=null&&S(n,["usageMetadata"],x),n}function k_(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(E=>E)),S(n,["candidates"],_)}const o=w(e,["createTime"]);o!=null&&S(n,["createTime"],o);const d=w(e,["modelVersion"]);d!=null&&S(n,["modelVersion"],d);const g=w(e,["promptFeedback"]);g!=null&&S(n,["promptFeedback"],g);const x=w(e,["responseId"]);x!=null&&S(n,["responseId"],x);const p=w(e,["usageMetadata"]);return p!=null&&S(n,["usageMetadata"],p),n}function PO(e,t,n){const i={};if(w(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(w(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=w(e,["numberOfImages"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const o=w(e,["aspectRatio"]);t!==void 0&&o!=null&&S(t,["parameters","aspectRatio"],o);const d=w(e,["guidanceScale"]);if(t!==void 0&&d!=null&&S(t,["parameters","guidanceScale"],d),w(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const g=w(e,["safetyFilterLevel"]);t!==void 0&&g!=null&&S(t,["parameters","safetySetting"],g);const x=w(e,["personGeneration"]);t!==void 0&&x!=null&&S(t,["parameters","personGeneration"],x);const p=w(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&S(t,["parameters","includeSafetyAttributes"],p);const _=w(e,["includeRaiReason"]);t!==void 0&&_!=null&&S(t,["parameters","includeRaiReason"],_);const E=w(e,["language"]);t!==void 0&&E!=null&&S(t,["parameters","language"],E);const N=w(e,["outputMimeType"]);t!==void 0&&N!=null&&S(t,["parameters","outputOptions","mimeType"],N);const k=w(e,["outputCompressionQuality"]);if(t!==void 0&&k!=null&&S(t,["parameters","outputOptions","compressionQuality"],k),w(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(w(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=w(e,["imageSize"]);if(t!==void 0&&O!=null&&S(t,["parameters","sampleImageSize"],O),w(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function jO(e,t,n){const i={},r=w(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const o=w(e,["negativePrompt"]);t!==void 0&&o!=null&&S(t,["parameters","negativePrompt"],o);const d=w(e,["numberOfImages"]);t!==void 0&&d!=null&&S(t,["parameters","sampleCount"],d);const g=w(e,["aspectRatio"]);t!==void 0&&g!=null&&S(t,["parameters","aspectRatio"],g);const x=w(e,["guidanceScale"]);t!==void 0&&x!=null&&S(t,["parameters","guidanceScale"],x);const p=w(e,["seed"]);t!==void 0&&p!=null&&S(t,["parameters","seed"],p);const _=w(e,["safetyFilterLevel"]);t!==void 0&&_!=null&&S(t,["parameters","safetySetting"],_);const E=w(e,["personGeneration"]);t!==void 0&&E!=null&&S(t,["parameters","personGeneration"],E);const N=w(e,["includeSafetyAttributes"]);t!==void 0&&N!=null&&S(t,["parameters","includeSafetyAttributes"],N);const k=w(e,["includeRaiReason"]);t!==void 0&&k!=null&&S(t,["parameters","includeRaiReason"],k);const O=w(e,["language"]);t!==void 0&&O!=null&&S(t,["parameters","language"],O);const L=w(e,["outputMimeType"]);t!==void 0&&L!=null&&S(t,["parameters","outputOptions","mimeType"],L);const P=w(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&S(t,["parameters","outputOptions","compressionQuality"],P);const H=w(e,["addWatermark"]);t!==void 0&&H!=null&&S(t,["parameters","addWatermark"],H);const B=w(e,["labels"]);t!==void 0&&B!=null&&S(t,["labels"],B);const j=w(e,["imageSize"]);t!==void 0&&j!=null&&S(t,["parameters","sampleImageSize"],j);const F=w(e,["enhancePrompt"]);return t!==void 0&&F!=null&&S(t,["parameters","enhancePrompt"],F),i}function BO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["prompt"]);o!=null&&S(i,["instances[0]","prompt"],o);const d=w(t,["config"]);return d!=null&&PO(d,i),i}function UO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["prompt"]);o!=null&&S(i,["instances[0]","prompt"],o);const d=w(t,["config"]);return d!=null&&jO(d,i),i}function FO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>ZO(g))),S(n,["generatedImages"],d)}const o=w(e,["positivePromptSafetyAttributes"]);return o!=null&&S(n,["positivePromptSafetyAttributes"],y4(o)),n}function zO(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>C0(g))),S(n,["generatedImages"],d)}const o=w(e,["positivePromptSafetyAttributes"]);return o!=null&&S(n,["positivePromptSafetyAttributes"],v4(o)),n}function VO(e,t,n){const i={},r=w(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r),w(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(w(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=w(e,["durationSeconds"]);if(t!==void 0&&o!=null&&S(t,["parameters","durationSeconds"],o),w(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=w(e,["aspectRatio"]);t!==void 0&&d!=null&&S(t,["parameters","aspectRatio"],d);const g=w(e,["resolution"]);t!==void 0&&g!=null&&S(t,["parameters","resolution"],g);const x=w(e,["personGeneration"]);if(t!==void 0&&x!=null&&S(t,["parameters","personGeneration"],x),w(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=w(e,["negativePrompt"]);t!==void 0&&p!=null&&S(t,["parameters","negativePrompt"],p);const _=w(e,["enhancePrompt"]);if(t!==void 0&&_!=null&&S(t,["parameters","enhancePrompt"],_),w(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=w(e,["lastFrame"]);t!==void 0&&E!=null&&S(t,["instances[0]","lastFrame"],T0(E));const N=w(e,["referenceImages"]);if(t!==void 0&&N!=null){let k=N;Array.isArray(k)&&(k=k.map(O=>HM(O))),S(t,["instances[0]","referenceImages"],k)}if(w(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(w(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function GO(e,t,n){const i={},r=w(e,["numberOfVideos"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const o=w(e,["outputGcsUri"]);t!==void 0&&o!=null&&S(t,["parameters","storageUri"],o);const d=w(e,["fps"]);t!==void 0&&d!=null&&S(t,["parameters","fps"],d);const g=w(e,["durationSeconds"]);t!==void 0&&g!=null&&S(t,["parameters","durationSeconds"],g);const x=w(e,["seed"]);t!==void 0&&x!=null&&S(t,["parameters","seed"],x);const p=w(e,["aspectRatio"]);t!==void 0&&p!=null&&S(t,["parameters","aspectRatio"],p);const _=w(e,["resolution"]);t!==void 0&&_!=null&&S(t,["parameters","resolution"],_);const E=w(e,["personGeneration"]);t!==void 0&&E!=null&&S(t,["parameters","personGeneration"],E);const N=w(e,["pubsubTopic"]);t!==void 0&&N!=null&&S(t,["parameters","pubsubTopic"],N);const k=w(e,["negativePrompt"]);t!==void 0&&k!=null&&S(t,["parameters","negativePrompt"],k);const O=w(e,["enhancePrompt"]);t!==void 0&&O!=null&&S(t,["parameters","enhancePrompt"],O);const L=w(e,["generateAudio"]);t!==void 0&&L!=null&&S(t,["parameters","generateAudio"],L);const P=w(e,["lastFrame"]);t!==void 0&&P!=null&&S(t,["instances[0]","lastFrame"],Pr(P));const H=w(e,["referenceImages"]);if(t!==void 0&&H!=null){let F=H;Array.isArray(F)&&(F=F.map(Y=>qM(Y))),S(t,["instances[0]","referenceImages"],F)}const B=w(e,["mask"]);t!==void 0&&B!=null&&S(t,["instances[0]","mask"],GM(B));const j=w(e,["compressionQuality"]);return t!==void 0&&j!=null&&S(t,["parameters","compressionQuality"],j),i}function HO(e,t){const n={},i=w(e,["name"]);i!=null&&S(n,["name"],i);const r=w(e,["metadata"]);r!=null&&S(n,["metadata"],r);const o=w(e,["done"]);o!=null&&S(n,["done"],o);const d=w(e,["error"]);d!=null&&S(n,["error"],d);const g=w(e,["response","generateVideoResponse"]);return g!=null&&S(n,["response"],WO(g)),n}function qO(e,t){const n={},i=w(e,["name"]);i!=null&&S(n,["name"],i);const r=w(e,["metadata"]);r!=null&&S(n,["metadata"],r);const o=w(e,["done"]);o!=null&&S(n,["done"],o);const d=w(e,["error"]);d!=null&&S(n,["error"],d);const g=w(e,["response"]);return g!=null&&S(n,["response"],KO(g)),n}function YO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["prompt"]);o!=null&&S(i,["instances[0]","prompt"],o);const d=w(t,["image"]);d!=null&&S(i,["instances[0]","image"],T0(d));const g=w(t,["video"]);g!=null&&S(i,["instances[0]","video"],w4(g));const x=w(t,["source"]);x!=null&&$O(x,i);const p=w(t,["config"]);return p!=null&&VO(p,i),i}function XO(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["prompt"]);o!=null&&S(i,["instances[0]","prompt"],o);const d=w(t,["image"]);d!=null&&S(i,["instances[0]","image"],Pr(d));const g=w(t,["video"]);g!=null&&S(i,["instances[0]","video"],_4(g));const x=w(t,["source"]);x!=null&&JO(x,i);const p=w(t,["config"]);return p!=null&&GO(p,i),i}function WO(e,t){const n={},i=w(e,["generatedSamples"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(g=>eM(g))),S(n,["generatedVideos"],d)}const r=w(e,["raiMediaFilteredCount"]);r!=null&&S(n,["raiMediaFilteredCount"],r);const o=w(e,["raiMediaFilteredReasons"]);return o!=null&&S(n,["raiMediaFilteredReasons"],o),n}function KO(e,t){const n={},i=w(e,["videos"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(g=>tM(g))),S(n,["generatedVideos"],d)}const r=w(e,["raiMediaFilteredCount"]);r!=null&&S(n,["raiMediaFilteredCount"],r);const o=w(e,["raiMediaFilteredReasons"]);return o!=null&&S(n,["raiMediaFilteredReasons"],o),n}function $O(e,t,n){const i={},r=w(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const o=w(e,["image"]);t!==void 0&&o!=null&&S(t,["instances[0]","image"],T0(o));const d=w(e,["video"]);return t!==void 0&&d!=null&&S(t,["instances[0]","video"],w4(d)),i}function JO(e,t,n){const i={},r=w(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const o=w(e,["image"]);t!==void 0&&o!=null&&S(t,["instances[0]","image"],Pr(o));const d=w(e,["video"]);return t!==void 0&&d!=null&&S(t,["instances[0]","video"],_4(d)),i}function ZO(e,t){const n={},i=w(e,["_self"]);i!=null&&S(n,["image"],cM(i));const r=w(e,["raiFilteredReason"]);r!=null&&S(n,["raiFilteredReason"],r);const o=w(e,["_self"]);return o!=null&&S(n,["safetyAttributes"],y4(o)),n}function C0(e,t){const n={},i=w(e,["_self"]);i!=null&&S(n,["image"],x4(i));const r=w(e,["raiFilteredReason"]);r!=null&&S(n,["raiFilteredReason"],r);const o=w(e,["_self"]);o!=null&&S(n,["safetyAttributes"],v4(o));const d=w(e,["prompt"]);return d!=null&&S(n,["enhancedPrompt"],d),n}function QO(e,t){const n={},i=w(e,["_self"]);i!=null&&S(n,["mask"],x4(i));const r=w(e,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(n,["labels"],o)}return n}function eM(e,t){const n={},i=w(e,["video"]);return i!=null&&S(n,["video"],zM(i)),n}function tM(e,t){const n={},i=w(e,["_self"]);return i!=null&&S(n,["video"],VM(i)),n}function nM(e,t){const n={},i=w(e,["modelSelectionConfig"]);i!=null&&S(n,["modelConfig"],i);const r=w(e,["responseJsonSchema"]);r!=null&&S(n,["responseJsonSchema"],r);const o=w(e,["audioTimestamp"]);o!=null&&S(n,["audioTimestamp"],o);const d=w(e,["candidateCount"]);d!=null&&S(n,["candidateCount"],d);const g=w(e,["enableAffectiveDialog"]);g!=null&&S(n,["enableAffectiveDialog"],g);const x=w(e,["frequencyPenalty"]);x!=null&&S(n,["frequencyPenalty"],x);const p=w(e,["logprobs"]);p!=null&&S(n,["logprobs"],p);const _=w(e,["maxOutputTokens"]);_!=null&&S(n,["maxOutputTokens"],_);const E=w(e,["mediaResolution"]);E!=null&&S(n,["mediaResolution"],E);const N=w(e,["presencePenalty"]);N!=null&&S(n,["presencePenalty"],N);const k=w(e,["responseLogprobs"]);k!=null&&S(n,["responseLogprobs"],k);const O=w(e,["responseMimeType"]);O!=null&&S(n,["responseMimeType"],O);const L=w(e,["responseModalities"]);L!=null&&S(n,["responseModalities"],L);const P=w(e,["responseSchema"]);P!=null&&S(n,["responseSchema"],P);const H=w(e,["routingConfig"]);H!=null&&S(n,["routingConfig"],H);const B=w(e,["seed"]);B!=null&&S(n,["seed"],B);const j=w(e,["speechConfig"]);j!=null&&S(n,["speechConfig"],j);const F=w(e,["stopSequences"]);F!=null&&S(n,["stopSequences"],F);const Y=w(e,["temperature"]);Y!=null&&S(n,["temperature"],Y);const W=w(e,["thinkingConfig"]);W!=null&&S(n,["thinkingConfig"],W);const te=w(e,["topK"]);te!=null&&S(n,["topK"],te);const ne=w(e,["topP"]);if(ne!=null&&S(n,["topP"],ne),w(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function iM(e,t,n){const i={},r=w(t,["model"]);return r!=null&&S(i,["_url","name"],Kt(e,r)),i}function sM(e,t,n){const i={},r=w(t,["model"]);return r!=null&&S(i,["_url","name"],Kt(e,r)),i}function rM(e,t){const n={};if(w(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=w(e,["enableWidget"]);return i!=null&&S(n,["enableWidget"],i),n}function aM(e,t){const n={};if(w(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(w(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=w(e,["timeRangeFilter"]);return i!=null&&S(n,["timeRangeFilter"],i),n}function oM(e,t){const n={},i=w(e,["aspectRatio"]);i!=null&&S(n,["aspectRatio"],i);const r=w(e,["imageSize"]);if(r!=null&&S(n,["imageSize"],r),w(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(w(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(w(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function lM(e,t){const n={},i=w(e,["aspectRatio"]);i!=null&&S(n,["aspectRatio"],i);const r=w(e,["imageSize"]);r!=null&&S(n,["imageSize"],r);const o=w(e,["personGeneration"]);o!=null&&S(n,["personGeneration"],o);const d=w(e,["outputMimeType"]);d!=null&&S(n,["imageOutputOptions","mimeType"],d);const g=w(e,["outputCompressionQuality"]);return g!=null&&S(n,["imageOutputOptions","compressionQuality"],g),n}function cM(e,t){const n={},i=w(e,["bytesBase64Encoded"]);i!=null&&S(n,["imageBytes"],Do(i));const r=w(e,["mimeType"]);return r!=null&&S(n,["mimeType"],r),n}function x4(e,t){const n={},i=w(e,["gcsUri"]);i!=null&&S(n,["gcsUri"],i);const r=w(e,["bytesBase64Encoded"]);r!=null&&S(n,["imageBytes"],Do(r));const o=w(e,["mimeType"]);return o!=null&&S(n,["mimeType"],o),n}function T0(e,t){const n={};if(w(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=w(e,["imageBytes"]);i!=null&&S(n,["bytesBase64Encoded"],Do(i));const r=w(e,["mimeType"]);return r!=null&&S(n,["mimeType"],r),n}function Pr(e,t){const n={},i=w(e,["gcsUri"]);i!=null&&S(n,["gcsUri"],i);const r=w(e,["imageBytes"]);r!=null&&S(n,["bytesBase64Encoded"],Do(r));const o=w(e,["mimeType"]);return o!=null&&S(n,["mimeType"],o),n}function uM(e,t,n,i){const r={},o=w(t,["pageSize"]);n!==void 0&&o!=null&&S(n,["_query","pageSize"],o);const d=w(t,["pageToken"]);n!==void 0&&d!=null&&S(n,["_query","pageToken"],d);const g=w(t,["filter"]);n!==void 0&&g!=null&&S(n,["_query","filter"],g);const x=w(t,["queryBase"]);return n!==void 0&&x!=null&&S(n,["_url","models_url"],u4(e,x)),r}function dM(e,t,n,i){const r={},o=w(t,["pageSize"]);n!==void 0&&o!=null&&S(n,["_query","pageSize"],o);const d=w(t,["pageToken"]);n!==void 0&&d!=null&&S(n,["_query","pageToken"],d);const g=w(t,["filter"]);n!==void 0&&g!=null&&S(n,["_query","filter"],g);const x=w(t,["queryBase"]);return n!==void 0&&x!=null&&S(n,["_url","models_url"],u4(e,x)),r}function fM(e,t,n){const i={},r=w(t,["config"]);return r!=null&&uM(e,r,i),i}function hM(e,t,n){const i={},r=w(t,["config"]);return r!=null&&dM(e,r,i),i}function pM(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["nextPageToken"]);r!=null&&S(n,["nextPageToken"],r);const o=w(e,["_self"]);if(o!=null){let d=d4(o);Array.isArray(d)&&(d=d.map(g=>Fm(g))),S(n,["models"],d)}return n}function mM(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["nextPageToken"]);r!=null&&S(n,["nextPageToken"],r);const o=w(e,["_self"]);if(o!=null){let d=d4(o);Array.isArray(d)&&(d=d.map(g=>zm(g))),S(n,["models"],d)}return n}function gM(e,t){const n={},i=w(e,["maskMode"]);i!=null&&S(n,["maskMode"],i);const r=w(e,["segmentationClasses"]);r!=null&&S(n,["maskClasses"],r);const o=w(e,["maskDilation"]);return o!=null&&S(n,["dilation"],o),n}function Fm(e,t){const n={},i=w(e,["name"]);i!=null&&S(n,["name"],i);const r=w(e,["displayName"]);r!=null&&S(n,["displayName"],r);const o=w(e,["description"]);o!=null&&S(n,["description"],o);const d=w(e,["version"]);d!=null&&S(n,["version"],d);const g=w(e,["_self"]);g!=null&&S(n,["tunedModelInfo"],OM(g));const x=w(e,["inputTokenLimit"]);x!=null&&S(n,["inputTokenLimit"],x);const p=w(e,["outputTokenLimit"]);p!=null&&S(n,["outputTokenLimit"],p);const _=w(e,["supportedGenerationMethods"]);_!=null&&S(n,["supportedActions"],_);const E=w(e,["temperature"]);E!=null&&S(n,["temperature"],E);const N=w(e,["maxTemperature"]);N!=null&&S(n,["maxTemperature"],N);const k=w(e,["topP"]);k!=null&&S(n,["topP"],k);const O=w(e,["topK"]);O!=null&&S(n,["topK"],O);const L=w(e,["thinking"]);return L!=null&&S(n,["thinking"],L),n}function zm(e,t){const n={},i=w(e,["name"]);i!=null&&S(n,["name"],i);const r=w(e,["displayName"]);r!=null&&S(n,["displayName"],r);const o=w(e,["description"]);o!=null&&S(n,["description"],o);const d=w(e,["versionId"]);d!=null&&S(n,["version"],d);const g=w(e,["deployedModels"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(k=>IO(k))),S(n,["endpoints"],N)}const x=w(e,["labels"]);x!=null&&S(n,["labels"],x);const p=w(e,["_self"]);p!=null&&S(n,["tunedModelInfo"],MM(p));const _=w(e,["defaultCheckpointId"]);_!=null&&S(n,["defaultCheckpointId"],_);const E=w(e,["checkpoints"]);if(E!=null){let N=E;Array.isArray(N)&&(N=N.map(k=>k)),S(n,["checkpoints"],N)}return n}function xM(e,t){const n={},i=w(e,["mediaResolution"]);i!=null&&S(n,["mediaResolution"],i);const r=w(e,["codeExecutionResult"]);r!=null&&S(n,["codeExecutionResult"],r);const o=w(e,["executableCode"]);o!=null&&S(n,["executableCode"],o);const d=w(e,["fileData"]);d!=null&&S(n,["fileData"],RO(d));const g=w(e,["functionCall"]);g!=null&&S(n,["functionCall"],kO(g));const x=w(e,["functionResponse"]);x!=null&&S(n,["functionResponse"],x);const p=w(e,["inlineData"]);p!=null&&S(n,["inlineData"],nO(p));const _=w(e,["text"]);_!=null&&S(n,["text"],_);const E=w(e,["thought"]);E!=null&&S(n,["thought"],E);const N=w(e,["thoughtSignature"]);N!=null&&S(n,["thoughtSignature"],N);const k=w(e,["videoMetadata"]);return k!=null&&S(n,["videoMetadata"],k),n}function yM(e,t){const n={},i=w(e,["productImage"]);return i!=null&&S(n,["image"],Pr(i)),n}function vM(e,t,n){const i={},r=w(e,["numberOfImages"]);t!==void 0&&r!=null&&S(t,["parameters","sampleCount"],r);const o=w(e,["baseSteps"]);t!==void 0&&o!=null&&S(t,["parameters","baseSteps"],o);const d=w(e,["outputGcsUri"]);t!==void 0&&d!=null&&S(t,["parameters","storageUri"],d);const g=w(e,["seed"]);t!==void 0&&g!=null&&S(t,["parameters","seed"],g);const x=w(e,["safetyFilterLevel"]);t!==void 0&&x!=null&&S(t,["parameters","safetySetting"],x);const p=w(e,["personGeneration"]);t!==void 0&&p!=null&&S(t,["parameters","personGeneration"],p);const _=w(e,["addWatermark"]);t!==void 0&&_!=null&&S(t,["parameters","addWatermark"],_);const E=w(e,["outputMimeType"]);t!==void 0&&E!=null&&S(t,["parameters","outputOptions","mimeType"],E);const N=w(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&S(t,["parameters","outputOptions","compressionQuality"],N);const k=w(e,["enhancePrompt"]);t!==void 0&&k!=null&&S(t,["parameters","enhancePrompt"],k);const O=w(e,["labels"]);return t!==void 0&&O!=null&&S(t,["labels"],O),i}function bM(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["source"]);o!=null&&_M(o,i);const d=w(t,["config"]);return d!=null&&vM(d,i),i}function wM(e,t){const n={},i=w(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>C0(o))),S(n,["generatedImages"],r)}return n}function _M(e,t,n){const i={},r=w(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const o=w(e,["personImage"]);t!==void 0&&o!=null&&S(t,["instances[0]","personImage","image"],Pr(o));const d=w(e,["productImages"]);if(t!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(x=>yM(x))),S(t,["instances[0]","productImages"],g)}return i}function EM(e,t){const n={},i=w(e,["referenceImage"]);i!=null&&S(n,["referenceImage"],Pr(i));const r=w(e,["referenceId"]);r!=null&&S(n,["referenceId"],r);const o=w(e,["referenceType"]);o!=null&&S(n,["referenceType"],o);const d=w(e,["maskImageConfig"]);d!=null&&S(n,["maskImageConfig"],gM(d));const g=w(e,["controlImageConfig"]);g!=null&&S(n,["controlImageConfig"],cO(g));const x=w(e,["styleImageConfig"]);x!=null&&S(n,["styleImageConfig"],x);const p=w(e,["subjectImageConfig"]);return p!=null&&S(n,["subjectImageConfig"],p),n}function y4(e,t){const n={},i=w(e,["safetyAttributes","categories"]);i!=null&&S(n,["categories"],i);const r=w(e,["safetyAttributes","scores"]);r!=null&&S(n,["scores"],r);const o=w(e,["contentType"]);return o!=null&&S(n,["contentType"],o),n}function v4(e,t){const n={},i=w(e,["safetyAttributes","categories"]);i!=null&&S(n,["categories"],i);const r=w(e,["safetyAttributes","scores"]);r!=null&&S(n,["scores"],r);const o=w(e,["contentType"]);return o!=null&&S(n,["contentType"],o),n}function AM(e,t){const n={},i=w(e,["category"]);if(i!=null&&S(n,["category"],i),w(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=w(e,["threshold"]);return r!=null&&S(n,["threshold"],r),n}function SM(e,t){const n={},i=w(e,["image"]);return i!=null&&S(n,["image"],Pr(i)),n}function NM(e,t,n){const i={},r=w(e,["mode"]);t!==void 0&&r!=null&&S(t,["parameters","mode"],r);const o=w(e,["maxPredictions"]);t!==void 0&&o!=null&&S(t,["parameters","maxPredictions"],o);const d=w(e,["confidenceThreshold"]);t!==void 0&&d!=null&&S(t,["parameters","confidenceThreshold"],d);const g=w(e,["maskDilation"]);t!==void 0&&g!=null&&S(t,["parameters","maskDilation"],g);const x=w(e,["binaryColorThreshold"]);t!==void 0&&x!=null&&S(t,["parameters","binaryColorThreshold"],x);const p=w(e,["labels"]);return t!==void 0&&p!=null&&S(t,["labels"],p),i}function CM(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["source"]);o!=null&&IM(o,i);const d=w(t,["config"]);return d!=null&&NM(d,i),i}function TM(e,t){const n={},i=w(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>QO(o))),S(n,["generatedMasks"],r)}return n}function IM(e,t,n){const i={},r=w(e,["prompt"]);t!==void 0&&r!=null&&S(t,["instances[0]","prompt"],r);const o=w(e,["image"]);t!==void 0&&o!=null&&S(t,["instances[0]","image"],Pr(o));const d=w(e,["scribbleImage"]);return t!==void 0&&d!=null&&S(t,["instances[0]","scribble"],SM(d)),i}function RM(e,t){const n={},i=w(e,["retrievalConfig"]);i!=null&&S(n,["retrievalConfig"],i);const r=w(e,["functionCallingConfig"]);return r!=null&&S(n,["functionCallingConfig"],OO(r)),n}function kM(e,t){const n={};if(w(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=w(e,["computerUse"]);i!=null&&S(n,["computerUse"],i);const r=w(e,["fileSearch"]);r!=null&&S(n,["fileSearch"],r);const o=w(e,["codeExecution"]);if(o!=null&&S(n,["codeExecution"],o),w(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=w(e,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(N=>N)),S(n,["functionDeclarations"],E)}const g=w(e,["googleMaps"]);g!=null&&S(n,["googleMaps"],rM(g));const x=w(e,["googleSearch"]);x!=null&&S(n,["googleSearch"],aM(x));const p=w(e,["googleSearchRetrieval"]);p!=null&&S(n,["googleSearchRetrieval"],p);const _=w(e,["urlContext"]);return _!=null&&S(n,["urlContext"],_),n}function b4(e,t){const n={},i=w(e,["retrieval"]);i!=null&&S(n,["retrieval"],i);const r=w(e,["computerUse"]);if(r!=null&&S(n,["computerUse"],r),w(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=w(e,["codeExecution"]);o!=null&&S(n,["codeExecution"],o);const d=w(e,["enterpriseWebSearch"]);d!=null&&S(n,["enterpriseWebSearch"],d);const g=w(e,["functionDeclarations"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(k=>MO(k))),S(n,["functionDeclarations"],N)}const x=w(e,["googleMaps"]);x!=null&&S(n,["googleMaps"],x);const p=w(e,["googleSearch"]);p!=null&&S(n,["googleSearch"],p);const _=w(e,["googleSearchRetrieval"]);_!=null&&S(n,["googleSearchRetrieval"],_);const E=w(e,["urlContext"]);return E!=null&&S(n,["urlContext"],E),n}function OM(e,t){const n={},i=w(e,["baseModel"]);i!=null&&S(n,["baseModel"],i);const r=w(e,["createTime"]);r!=null&&S(n,["createTime"],r);const o=w(e,["updateTime"]);return o!=null&&S(n,["updateTime"],o),n}function MM(e,t){const n={},i=w(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&S(n,["baseModel"],i);const r=w(e,["createTime"]);r!=null&&S(n,["createTime"],r);const o=w(e,["updateTime"]);return o!=null&&S(n,["updateTime"],o),n}function DM(e,t,n){const i={},r=w(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const o=w(e,["description"]);t!==void 0&&o!=null&&S(t,["description"],o);const d=w(e,["defaultCheckpointId"]);return t!==void 0&&d!=null&&S(t,["defaultCheckpointId"],d),i}function LM(e,t,n){const i={},r=w(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const o=w(e,["description"]);t!==void 0&&o!=null&&S(t,["description"],o);const d=w(e,["defaultCheckpointId"]);return t!==void 0&&d!=null&&S(t,["defaultCheckpointId"],d),i}function PM(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","name"],Kt(e,r));const o=w(t,["config"]);return o!=null&&DM(o,i),i}function jM(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["config"]);return o!=null&&LM(o,i),i}function BM(e,t,n){const i={},r=w(e,["outputGcsUri"]);t!==void 0&&r!=null&&S(t,["parameters","storageUri"],r);const o=w(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&S(t,["parameters","safetySetting"],o);const d=w(e,["personGeneration"]);t!==void 0&&d!=null&&S(t,["parameters","personGeneration"],d);const g=w(e,["includeRaiReason"]);t!==void 0&&g!=null&&S(t,["parameters","includeRaiReason"],g);const x=w(e,["outputMimeType"]);t!==void 0&&x!=null&&S(t,["parameters","outputOptions","mimeType"],x);const p=w(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&S(t,["parameters","outputOptions","compressionQuality"],p);const _=w(e,["enhanceInputImage"]);t!==void 0&&_!=null&&S(t,["parameters","upscaleConfig","enhanceInputImage"],_);const E=w(e,["imagePreservationFactor"]);t!==void 0&&E!=null&&S(t,["parameters","upscaleConfig","imagePreservationFactor"],E);const N=w(e,["labels"]);t!==void 0&&N!=null&&S(t,["labels"],N);const k=w(e,["numberOfImages"]);t!==void 0&&k!=null&&S(t,["parameters","sampleCount"],k);const O=w(e,["mode"]);return t!==void 0&&O!=null&&S(t,["parameters","mode"],O),i}function UM(e,t,n){const i={},r=w(t,["model"]);r!=null&&S(i,["_url","model"],Kt(e,r));const o=w(t,["image"]);o!=null&&S(i,["instances[0]","image"],Pr(o));const d=w(t,["upscaleFactor"]);d!=null&&S(i,["parameters","upscaleConfig","upscaleFactor"],d);const g=w(t,["config"]);return g!=null&&BM(g,i),i}function FM(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>C0(d))),S(n,["generatedImages"],o)}return n}function zM(e,t){const n={},i=w(e,["uri"]);i!=null&&S(n,["uri"],i);const r=w(e,["encodedVideo"]);r!=null&&S(n,["videoBytes"],Do(r));const o=w(e,["encoding"]);return o!=null&&S(n,["mimeType"],o),n}function VM(e,t){const n={},i=w(e,["gcsUri"]);i!=null&&S(n,["uri"],i);const r=w(e,["bytesBase64Encoded"]);r!=null&&S(n,["videoBytes"],Do(r));const o=w(e,["mimeType"]);return o!=null&&S(n,["mimeType"],o),n}function GM(e,t){const n={},i=w(e,["image"]);i!=null&&S(n,["_self"],Pr(i));const r=w(e,["maskMode"]);return r!=null&&S(n,["maskMode"],r),n}function HM(e,t){const n={},i=w(e,["image"]);i!=null&&S(n,["image"],T0(i));const r=w(e,["referenceType"]);return r!=null&&S(n,["referenceType"],r),n}function qM(e,t){const n={},i=w(e,["image"]);i!=null&&S(n,["image"],Pr(i));const r=w(e,["referenceType"]);return r!=null&&S(n,["referenceType"],r),n}function w4(e,t){const n={},i=w(e,["uri"]);i!=null&&S(n,["uri"],i);const r=w(e,["videoBytes"]);r!=null&&S(n,["encodedVideo"],Do(r));const o=w(e,["mimeType"]);return o!=null&&S(n,["encoding"],o),n}function _4(e,t){const n={},i=w(e,["uri"]);i!=null&&S(n,["gcsUri"],i);const r=w(e,["videoBytes"]);r!=null&&S(n,["bytesBase64Encoded"],Do(r));const o=w(e,["mimeType"]);return o!=null&&S(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YM(e,t){const n={},i=w(e,["displayName"]);return t!==void 0&&i!=null&&S(t,["displayName"],i),n}function XM(e){const t={},n=w(e,["config"]);return n!=null&&YM(n,t),t}function WM(e,t){const n={},i=w(e,["force"]);return t!==void 0&&i!=null&&S(t,["_query","force"],i),n}function KM(e){const t={},n=w(e,["name"]);n!=null&&S(t,["_url","name"],n);const i=w(e,["config"]);return i!=null&&WM(i,t),t}function $M(e){const t={},n=w(e,["name"]);return n!=null&&S(t,["_url","name"],n),t}function JM(e,t){const n={},i=w(e,["customMetadata"]);if(t!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["customMetadata"],o)}const r=w(e,["chunkingConfig"]);return t!==void 0&&r!=null&&S(t,["chunkingConfig"],r),n}function ZM(e){const t={},n=w(e,["name"]);n!=null&&S(t,["name"],n);const i=w(e,["metadata"]);i!=null&&S(t,["metadata"],i);const r=w(e,["done"]);r!=null&&S(t,["done"],r);const o=w(e,["error"]);o!=null&&S(t,["error"],o);const d=w(e,["response"]);return d!=null&&S(t,["response"],eD(d)),t}function QM(e){const t={},n=w(e,["fileSearchStoreName"]);n!=null&&S(t,["_url","file_search_store_name"],n);const i=w(e,["fileName"]);i!=null&&S(t,["fileName"],i);const r=w(e,["config"]);return r!=null&&JM(r,t),t}function eD(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["parent"]);i!=null&&S(t,["parent"],i);const r=w(e,["documentName"]);return r!=null&&S(t,["documentName"],r),t}function tD(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);return t!==void 0&&r!=null&&S(t,["_query","pageToken"],r),n}function nD(e){const t={},n=w(e,["config"]);return n!=null&&tD(n,t),t}function iD(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["fileSearchStores"],o)}return t}function E4(e,t){const n={},i=w(e,["mimeType"]);t!==void 0&&i!=null&&S(t,["mimeType"],i);const r=w(e,["displayName"]);t!==void 0&&r!=null&&S(t,["displayName"],r);const o=w(e,["customMetadata"]);if(t!==void 0&&o!=null){let g=o;Array.isArray(g)&&(g=g.map(x=>x)),S(t,["customMetadata"],g)}const d=w(e,["chunkingConfig"]);return t!==void 0&&d!=null&&S(t,["chunkingConfig"],d),n}function sD(e){const t={},n=w(e,["fileSearchStoreName"]);n!=null&&S(t,["_url","file_search_store_name"],n);const i=w(e,["config"]);return i!=null&&E4(i,t),t}function rD(e){const t={},n=w(e,["sdkHttpResponse"]);return n!=null&&S(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aD="Content-Type",oD="X-Server-Timeout",lD="User-Agent",Vm="x-goog-api-client",cD="1.41.0",uD=`google-genai-sdk/${cD}`,dD="v1beta1",fD="v1beta",hD=5,pD=[408,429,500,502,503,504];class mD{constructor(t){var n,i,r;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const g=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!g?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:dD}else{if(!this.clientOptions.apiKey)throw new Ld({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:fD,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===Pm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[d,g]of Object.entries(t.queryParams))r.searchParams.append(d,String(g));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),t.abortSignal),this.unaryApiCall(r,o,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),t.abortSignal),this.streamApiCall(r,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,r){if(n&&n.timeout||r){const o=new AbortController,d=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const g=setTimeout(()=>o.abort(),n.timeout);g&&typeof g.unref=="function"&&g.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),t.signal=d}return n&&n.extraBody!==null&&gD(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await O_(r),new jm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await O_(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return kr(this,arguments,function*(){var i;const r=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";const g="data:",x=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield pt(r.read());if(p){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=o.decode(_,{stream:!0});try{const O=JSON.parse(E);if("error"in O){const L=JSON.parse(JSON.stringify(O.error)),P=L.status,H=L.code,B=`got status: ${P}. ${JSON.stringify(O)}`;if(H>=400&&H<600)throw new Ld({message:B,status:H})}}catch(O){if(O.name==="ApiError")throw O}d+=E;let N=-1,k=0;for(;;){N=-1,k=0;for(const P of x){const H=d.indexOf(P);H!==-1&&(N===-1||H<N)&&(N=H,k=P.length)}if(N===-1)break;const O=d.substring(0,N);d=d.substring(N+k);const L=O.trim();if(L.startsWith(g)){const P=L.substring(g.length).trim();try{const H=new Response(P,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield pt(new jm(H))}catch(H){throw new Error(`exception parsing stream chunk ${P}. ${H}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,n){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(t,n);const r=this.clientOptions.httpOptions.retryOptions;return rk(async()=>{const d=await fetch(t,n);if(d.ok)return d;throw pD.includes(d.status)?new Error(`Retryable HTTP Error: ${d.statusText}`):new t4(`Non-retryable exception ${d.statusText} sending request`)},{retries:((i=r.attempts)!==null&&i!==void 0?i:hD)-1})}getDefaultHeaders(){const t={},n=uD+" "+this.clientOptions.userAgentExtra;return t[lD]=n,t[Vm]=n,t[aD]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[r,o]of Object.entries(t.headers))i.append(r,o);t.timeout&&t.timeout>0&&i.append(oD,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,d=await o.stat(t);r.sizeBytes=String(d.size);const g=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:d.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const x={file:r},p=this.getFileName(t),_=Ve("upload/v1beta/files",x._url),E=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,p,x,n==null?void 0:n.httpOptions);return o.upload(t,E,this)}async uploadFileToFileSearchStore(t,n,i){var r;const o=this.clientOptions.uploader,d=await o.stat(n),g=String(d.size),x=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:d.type;if(x===void 0||x==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${t}:uploadToFileSearchStore`,_=this.getFileName(n),E={};i!=null&&E4(i,E);const N=await this.fetchUploadUrl(p,g,x,_,E,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,N,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,r,o,d){var g;let x={};d?x=d:x={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:x});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(g=p==null?void 0:p.headers)===null||g===void 0?void 0:g["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function O_(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Ld({message:r,status:n}):new Error(r)}}function gD(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,d){const g=Object.assign({},o);for(const x in d)if(Object.prototype.hasOwnProperty.call(d,x)){const p=d[x],_=g[x];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?g[x]=i(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${x}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),g[x]=p)}return g}const r=i(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xD="mcp_used/unknown";let yD=!1;function A4(e){for(const t of e)if(vD(t)||typeof t=="object"&&"inputSchema"in t)return!0;return yD}function S4(e){var t;const n=(t=e[Vm])!==null&&t!==void 0?t:"";e[Vm]=(n+` ${xD}`).trimStart()}function vD(e){return e!==null&&typeof e=="object"&&e instanceof ox}function bD(e){return kr(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const d=yield pt(n.listTools({cursor:r}));for(const g of d.tools)yield yield pt(g),o++;if(!d.nextCursor)break;r=d.nextCursor}})}class ox{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new ox(t,n)}async initialize(){var t,n,i,r;if(this.mcpTools.length>0)return;const o={},d=[];for(const _ of this.mcpClients)try{for(var g=!0,x=(n=void 0,Or(bD(_))),p;p=await x.next(),t=p.done,!t;g=!0){r=p.value,g=!1;const E=r;d.push(E);const N=E.name;if(o[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);o[N]=_}}catch(E){n={error:E}}finally{try{!g&&!t&&(i=x.return)&&await i.call(x)}finally{if(n)throw n.error}}this.mcpTools=d,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Xk(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const d=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wD(e,t,n){const i=new Uk;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),t(i)}class _D{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),d=SD(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),x=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${g}`;let p=()=>{};const _=new Promise(j=>{p=j}),E=t.callbacks,N=function(){p({})},k=this.apiClient,O={onopen:N,onmessage:j=>{wD(k,E.onmessage,j)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(j){}},L=this.webSocketFactory.create(x,AD(d),O);L.connect(),await _;const B={setup:{model:Kt(this.apiClient,t.model)}};return L.send(JSON.stringify(B)),new ED(L,this.apiClient)}}class ED{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Y9(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=q9(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Rc.PLAY)}pause(){this.sendPlaybackControl(Rc.PAUSE)}stop(){this.sendPlaybackControl(Rc.STOP)}resetContext(){this.sendPlaybackControl(Rc.RESET_CONTEXT)}close(){this.conn.close()}}function AD(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function SD(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ND="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function CD(e,t,n){const i=new Bk;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(e.isVertexAI()){const d=K9(o);Object.assign(i,d)}else Object.assign(i,o);t(i)}class TD{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new _D(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,r,o,d,g;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const x=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();t.config&&t.config.tools&&A4(t.config.tools)&&S4(E);const N=OD(E);if(this.apiClient.isVertexAI()){const ie=this.apiClient.getProject(),_e=this.apiClient.getLocation(),Ee=this.apiClient.getApiKey(),pe=!!ie&&!!_e||!!Ee;this.apiClient.getCustomBaseUrl()&&!pe?_=x:(_=`${x}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N,_))}else{const ie=this.apiClient.getApiKey();let _e="BidiGenerateContent",Ee="key";ie!=null&&ie.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),_e="BidiGenerateContentConstrained",Ee="access_token"),_=`${x}/ws/google.ai.generativelanguage.${p}.GenerativeService.${_e}?${Ee}=${ie}`}let k=()=>{};const O=new Promise(ie=>{k=ie}),L=t.callbacks,P=function(){var ie;(ie=L==null?void 0:L.onopen)===null||ie===void 0||ie.call(L),k({})},H=this.apiClient,B={onopen:P,onmessage:ie=>{CD(H,L.onmessage,ie)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(ie){},onclose:(i=L==null?void 0:L.onclose)!==null&&i!==void 0?i:function(ie){}},j=this.webSocketFactory.create(_,kD(N),B);j.connect(),await O;let F=Kt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const ie=this.apiClient.getProject(),_e=this.apiClient.getLocation();ie&&_e&&(F=`projects/${ie}/locations/${_e}/`+F)}let Y={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Yh.AUDIO]}:t.config.responseModalities=[Yh.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(g=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&g!==void 0?g:[],te=[];for(const ie of W)if(this.isCallableTool(ie)){const _e=ie;te.push(await _e.tool())}else te.push(ie);te.length>0&&(t.config.tools=te);const ne={model:F,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Y=H9(this.apiClient,ne):Y=G9(this.apiClient,ne),delete Y.config,j.send(JSON.stringify(Y)),new RD(j,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const ID={turnComplete:!0};class RD{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=dr(n.turns),t.isVertexAI()||(i=i.map(r=>N0(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(ND)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},ID),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:W9(t)}:n={realtimeInput:X9(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function kD(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function OD(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M_=10;function D_(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const d of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Bc(d)){r=!0;break}if(!r)return!0;const o=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Bc(e){return"callTool"in e&&typeof e.callTool=="function"}function MD(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>Bc(r)))!==null&&i!==void 0?i:!1}function L_(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,r)=>{if(Bc(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function P_(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DD extends La{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,r,o,d,g;const x=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!MD(n)||D_(n.config))return await this.generateContentInternal(x);const p=L_(n);if(p.length>0){const L=p.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let _,E;const N=dr(x.contents),k=(o=(r=(i=x.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:M_;let O=0;for(;O<k&&(_=await this.generateContentInternal(x),!(!_.functionCalls||_.functionCalls.length===0));){const L=_.candidates[0].content,P=[];for(const H of(g=(d=n.config)===null||d===void 0?void 0:d.tools)!==null&&g!==void 0?g:[])if(Bc(H)){const j=await H.callTool(_.functionCalls);P.push(...j)}O++,E={role:"user",parts:P},x.contents=dr(x.contents),x.contents.push(L),x.contents.push(E),P_(x.config)&&(N.push(L),N.push(E))}return P_(x.config)&&(_.automaticFunctionCallingHistory=N),_},this.generateContentStream=async n=>{var i,r,o,d,g;if(this.maybeMoveToResponseJsonSchem(n),D_(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const x=L_(n);if(x.length>0){const E=x.map(N=>`tools[${N}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,_=(g=(d=n==null?void 0:n.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||g===void 0?void 0:g.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const d=[];if(i!=null&&i.generatedImages)for(const x of i.generatedImages)x&&(x!=null&&x.safetyAttributes)&&((r=x==null?void 0:x.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=x==null?void 0:x.safetyAttributes:d.push(x);let g;return o?g={generatedImages:d,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:g={generatedImages:d,sdkHttpResponse:i.sdkHttpResponse},g}),this.list=async n=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Rl(Ma.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(d),d)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,d,g,x;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((d=(o=n.source)===null||o===void 0?void 0:o.video)===null||d===void 0)&&d.uri&&(!((x=(g=n.source)===null||g===void 0?void 0:g.video)===null||x===void 0)&&x.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,r;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const d=await Promise.all(o.map(async x=>Bc(x)?await x.tool():x)),g={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:d})};if(g.config.tools=d,t.config&&t.config.tools&&A4(t.config.tools)){const x=(r=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},x);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),S4(p),g.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:p})}return g}async initAfcToolsMap(t){var n,i,r;const o=new Map;for(const d of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Bc(d)){const g=d,x=await g.tool();for(const p of(r=x.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(o.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);o.set(p.name,g)}}return o}async processAfcStream(t){var n,i,r;const o=(r=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:M_;let d=!1,g=0;const x=await this.initAfcToolsMap(t);return(function(p,_,E){return kr(this,arguments,function*(){for(var N,k,O,L,P,H;g<o;){d&&(g++,d=!1);const Y=yield pt(p.processParamsMaybeAddMcpUsage(E)),W=yield pt(p.generateContentStreamInternal(Y)),te=[],ne=[];try{for(var B=!0,j=(k=void 0,Or(W)),F;F=yield pt(j.next()),N=F.done,!N;B=!0){L=F.value,B=!1;const ie=L;if(yield yield pt(ie),ie.candidates&&(!((P=ie.candidates[0])===null||P===void 0)&&P.content)){ne.push(ie.candidates[0].content);for(const _e of(H=ie.candidates[0].content.parts)!==null&&H!==void 0?H:[])if(g<o&&_e.functionCall){if(!_e.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(_e.functionCall.name)){const Ee=yield pt(_.get(_e.functionCall.name).callTool([_e.functionCall]));te.push(...Ee)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${_e.functionCall.name}`)}}}}catch(ie){k={error:ie}}finally{try{!B&&!N&&(O=j.return)&&(yield pt(O.call(j)))}finally{if(k)throw k.error}}if(te.length>0){d=!0;const ie=new ud;ie.candidates=[{content:{role:"user",parts:te}}],yield yield pt(ie);const _e=[];_e.push(...ne),_e.push({role:"user",parts:te});const Ee=dr(E.contents).concat(_e);E.contents=Ee}else break}})})(this,x,t)}async generateContentInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=I_(this.apiClient,t);return g=Ve("{model}:generateContent",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=k_(_),N=new ud;return Object.assign(N,E),N})}else{const p=T_(this.apiClient,t);return g=Ve("{model}:generateContent",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=R_(_),N=new ud;return Object.assign(N,E),N})}}async generateContentStreamInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=I_(this.apiClient,t);return g=Ve("{model}:streamGenerateContent?alt=sse",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(E){return kr(this,arguments,function*(){var N,k,O,L;try{for(var P=!0,H=Or(E),B;B=yield pt(H.next()),N=B.done,!N;P=!0){L=B.value,P=!1;const j=L,F=k_(yield pt(j.json()),t);F.sdkHttpResponse={headers:j.headers};const Y=new ud;Object.assign(Y,F),yield yield pt(Y)}}catch(j){k={error:j}}finally{try{!P&&!N&&(O=H.return)&&(yield pt(O.call(H)))}finally{if(k)throw k.error}}})})}else{const p=T_(this.apiClient,t);return g=Ve("{model}:streamGenerateContent?alt=sse",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(E){return kr(this,arguments,function*(){var N,k,O,L;try{for(var P=!0,H=Or(E),B;B=yield pt(H.next()),N=B.done,!N;P=!0){L=B.value,P=!1;const j=L,F=R_(yield pt(j.json()),t);F.sdkHttpResponse={headers:j.headers};const Y=new ud;Object.assign(Y,F),yield yield pt(Y)}}catch(j){k={error:j}}finally{try{!P&&!N&&(O=H.return)&&(yield pt(O.call(H)))}finally{if(k)throw k.error}}})})}}async embedContent(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=NO(this.apiClient,t);return g=Ve("{model}:predict",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=TO(_),N=new d_;return Object.assign(N,E),N})}else{const p=SO(this.apiClient,t);return g=Ve("{model}:batchEmbedContents",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=CO(_),N=new d_;return Object.assign(N,E),N})}}async generateImagesInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=UO(this.apiClient,t);return g=Ve("{model}:predict",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=zO(_),N=new f_;return Object.assign(N,E),N})}else{const p=BO(this.apiClient,t);return g=Ve("{model}:predict",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=FO(_),N=new f_;return Object.assign(N,E),N})}}async editImageInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=wO(this.apiClient,t);return o=Ve("{model}:predict",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>{const p=_O(x),_=new Nk;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=UM(this.apiClient,t);return o=Ve("{model}:predict",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>{const p=FM(x),_=new Ck;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=bM(this.apiClient,t);return o=Ve("{model}:predict",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=wM(x),_=new Tk;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=CM(this.apiClient,t);return o=Ve("{model}:predict",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=TM(x),_=new Ik;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=sM(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>zm(_))}else{const p=iM(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>Fm(_))}}async listInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=hM(this.apiClient,t);return g=Ve("{models_url}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=mM(_),N=new h_;return Object.assign(N,E),N})}else{const p=fM(this.apiClient,t);return g=Ve("{models_url}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=pM(_),N=new h_;return Object.assign(N,E),N})}}async update(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=jM(this.apiClient,t);return g=Ve("{model}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>zm(_))}else{const p=PM(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>Fm(_))}}async delete(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=xO(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=vO(_),N=new p_;return Object.assign(N,E),N})}else{const p=gO(this.apiClient,t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=yO(_),N=new p_;return Object.assign(N,E),N})}}async countTokens(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=hO(this.apiClient,t);return g=Ve("{model}:countTokens",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=mO(_),N=new m_;return Object.assign(N,E),N})}else{const p=fO(this.apiClient,t);return g=Ve("{model}:countTokens",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=pO(_),N=new m_;return Object.assign(N,E),N})}}async computeTokens(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=rO(this.apiClient,t);return o=Ve("{model}:computeTokens",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>{const p=aO(x),_=new Rk;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=XO(this.apiClient,t);return g=Ve("{model}:predictLongRunning",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>{const E=qO(_),N=new Xh;return Object.assign(N,E),N})}else{const p=YO(this.apiClient,t);return g=Ve("{model}:predictLongRunning",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d.then(_=>{const E=HO(_),N=new Xh;return Object.assign(N,E),N})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LD extends La{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=bk(t);return g=Ve("{operationName}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d}else{const p=vk(t);return g=Ve("{operationName}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),d}}async fetchPredictVideosOperationInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=fk(t);return o=Ve("{resourceName}:fetchPredictOperation",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PD(e){const t={},n=w(e,["data"]);if(n!=null&&S(t,["data"],n),w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function jD(e){const t={},n=w(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>YD(o))),S(t,["parts"],r)}const i=w(e,["role"]);return i!=null&&S(t,["role"],i),t}function BD(e,t,n){const i={},r=w(t,["expireTime"]);n!==void 0&&r!=null&&S(n,["expireTime"],r);const o=w(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&S(n,["newSessionExpireTime"],o);const d=w(t,["uses"]);n!==void 0&&d!=null&&S(n,["uses"],d);const g=w(t,["liveConnectConstraints"]);n!==void 0&&g!=null&&S(n,["bidiGenerateContentSetup"],qD(e,g));const x=w(t,["lockAdditionalFields"]);return n!==void 0&&x!=null&&S(n,["fieldMask"],x),i}function UD(e,t){const n={},i=w(t,["config"]);return i!=null&&S(n,["config"],BD(e,i,n)),n}function FD(e){const t={};if(w(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=w(e,["fileUri"]);n!=null&&S(t,["fileUri"],n);const i=w(e,["mimeType"]);return i!=null&&S(t,["mimeType"],i),t}function zD(e){const t={},n=w(e,["id"]);n!=null&&S(t,["id"],n);const i=w(e,["args"]);i!=null&&S(t,["args"],i);const r=w(e,["name"]);if(r!=null&&S(t,["name"],r),w(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(w(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function VD(e){const t={};if(w(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=w(e,["enableWidget"]);return n!=null&&S(t,["enableWidget"],n),t}function GD(e){const t={};if(w(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(w(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=w(e,["timeRangeFilter"]);return n!=null&&S(t,["timeRangeFilter"],n),t}function HD(e,t){const n={},i=w(e,["generationConfig"]);t!==void 0&&i!=null&&S(t,["setup","generationConfig"],i);const r=w(e,["responseModalities"]);t!==void 0&&r!=null&&S(t,["setup","generationConfig","responseModalities"],r);const o=w(e,["temperature"]);t!==void 0&&o!=null&&S(t,["setup","generationConfig","temperature"],o);const d=w(e,["topP"]);t!==void 0&&d!=null&&S(t,["setup","generationConfig","topP"],d);const g=w(e,["topK"]);t!==void 0&&g!=null&&S(t,["setup","generationConfig","topK"],g);const x=w(e,["maxOutputTokens"]);t!==void 0&&x!=null&&S(t,["setup","generationConfig","maxOutputTokens"],x);const p=w(e,["mediaResolution"]);t!==void 0&&p!=null&&S(t,["setup","generationConfig","mediaResolution"],p);const _=w(e,["seed"]);t!==void 0&&_!=null&&S(t,["setup","generationConfig","seed"],_);const E=w(e,["speechConfig"]);t!==void 0&&E!=null&&S(t,["setup","generationConfig","speechConfig"],ax(E));const N=w(e,["thinkingConfig"]);t!==void 0&&N!=null&&S(t,["setup","generationConfig","thinkingConfig"],N);const k=w(e,["enableAffectiveDialog"]);t!==void 0&&k!=null&&S(t,["setup","generationConfig","enableAffectiveDialog"],k);const O=w(e,["systemInstruction"]);t!==void 0&&O!=null&&S(t,["setup","systemInstruction"],jD(Zi(O)));const L=w(e,["tools"]);if(t!==void 0&&L!=null){let W=pu(L);Array.isArray(W)&&(W=W.map(te=>WD(hu(te)))),S(t,["setup","tools"],W)}const P=w(e,["sessionResumption"]);t!==void 0&&P!=null&&S(t,["setup","sessionResumption"],XD(P));const H=w(e,["inputAudioTranscription"]);t!==void 0&&H!=null&&S(t,["setup","inputAudioTranscription"],H);const B=w(e,["outputAudioTranscription"]);t!==void 0&&B!=null&&S(t,["setup","outputAudioTranscription"],B);const j=w(e,["realtimeInputConfig"]);t!==void 0&&j!=null&&S(t,["setup","realtimeInputConfig"],j);const F=w(e,["contextWindowCompression"]);t!==void 0&&F!=null&&S(t,["setup","contextWindowCompression"],F);const Y=w(e,["proactivity"]);if(t!==void 0&&Y!=null&&S(t,["setup","proactivity"],Y),w(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function qD(e,t){const n={},i=w(t,["model"]);i!=null&&S(n,["setup","model"],Kt(e,i));const r=w(t,["config"]);return r!=null&&S(n,["config"],HD(r,n)),n}function YD(e){const t={},n=w(e,["mediaResolution"]);n!=null&&S(t,["mediaResolution"],n);const i=w(e,["codeExecutionResult"]);i!=null&&S(t,["codeExecutionResult"],i);const r=w(e,["executableCode"]);r!=null&&S(t,["executableCode"],r);const o=w(e,["fileData"]);o!=null&&S(t,["fileData"],FD(o));const d=w(e,["functionCall"]);d!=null&&S(t,["functionCall"],zD(d));const g=w(e,["functionResponse"]);g!=null&&S(t,["functionResponse"],g);const x=w(e,["inlineData"]);x!=null&&S(t,["inlineData"],PD(x));const p=w(e,["text"]);p!=null&&S(t,["text"],p);const _=w(e,["thought"]);_!=null&&S(t,["thought"],_);const E=w(e,["thoughtSignature"]);E!=null&&S(t,["thoughtSignature"],E);const N=w(e,["videoMetadata"]);return N!=null&&S(t,["videoMetadata"],N),t}function XD(e){const t={},n=w(e,["handle"]);if(n!=null&&S(t,["handle"],n),w(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function WD(e){const t={};if(w(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=w(e,["computerUse"]);n!=null&&S(t,["computerUse"],n);const i=w(e,["fileSearch"]);i!=null&&S(t,["fileSearch"],i);const r=w(e,["codeExecution"]);if(r!=null&&S(t,["codeExecution"],r),w(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=w(e,["functionDeclarations"]);if(o!=null){let _=o;Array.isArray(_)&&(_=_.map(E=>E)),S(t,["functionDeclarations"],_)}const d=w(e,["googleMaps"]);d!=null&&S(t,["googleMaps"],VD(d));const g=w(e,["googleSearch"]);g!=null&&S(t,["googleSearch"],GD(g));const x=w(e,["googleSearchRetrieval"]);x!=null&&S(t,["googleSearchRetrieval"],x);const p=w(e,["urlContext"]);return p!=null&&S(t,["urlContext"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KD(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);t.push(...r)}else t.push(n)}return t.join(",")}function $D(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const o=KD(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)o?e.fieldMask=o:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];r.length>0&&(g=r.map(p=>d.includes(p)?`generationConfig.${p}`:p));const x=[];o&&x.push(o),g.length>0&&x.push(...g),x.length>0?e.fieldMask=x.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class JD extends La{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=UD(this.apiClient,t);o=Ve("auth_tokens",g._url),d=g._query,delete g.config,delete g._url,delete g._query;const x=$D(g,t.config);return r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZD(e,t){const n={},i=w(e,["force"]);return t!==void 0&&i!=null&&S(t,["_query","force"],i),n}function QD(e){const t={},n=w(e,["name"]);n!=null&&S(t,["_url","name"],n);const i=w(e,["config"]);return i!=null&&ZD(i,t),t}function eL(e){const t={},n=w(e,["name"]);return n!=null&&S(t,["_url","name"],n),t}function tL(e,t){const n={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&S(t,["_query","pageSize"],i);const r=w(e,["pageToken"]);return t!==void 0&&r!=null&&S(t,["_query","pageToken"],r),n}function nL(e){const t={},n=w(e,["parent"]);n!=null&&S(t,["_url","parent"],n);const i=w(e,["config"]);return i!=null&&tL(i,t),t}function iL(e){const t={},n=w(e,["sdkHttpResponse"]);n!=null&&S(t,["sdkHttpResponse"],n);const i=w(e,["nextPageToken"]);i!=null&&S(t,["nextPageToken"],i);const r=w(e,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),S(t,["documents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sL extends La{constructor(t){super(),this.apiClient=t,this.list=async n=>new Rl(Ma.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=eL(t);return o=Ve("{name}",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async delete(t){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QD(t);r=Ve("{name}",d._url),o=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=nL(t);return o=Ve("{parent}/documents",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=iL(x),_=new kk;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rL extends La{constructor(t,n=new sL(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Rl(Ma.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=XM(t);return o=Ve("fileSearchStores",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async get(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=$M(t);return o=Ve("{name}",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async delete(t){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KM(t);r=Ve("{name}",d._url),o=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=nD(t);return o=Ve("fileSearchStores",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=iD(x),_=new Ok;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=sD(t);return o=Ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=rD(x),_=new Mk;return Object.assign(_,p),_})}}async importFile(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=QM(t);return o=Ve("{file_search_store_name}:importFile",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),r.then(x=>{const p=ZM(x),_=new tx;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let N4=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return N4=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const aL=()=>N4();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gm(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Hm=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fr extends Error{}class as extends fr{constructor(t,n,i,r){super(`${as.makeMessage(t,n,i)}`),this.status=t,this.headers=r,this.error=n}static makeMessage(t,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,n,i,r){if(!t||!r)return new I0({message:i,cause:Hm(n)});const o=n;return t===400?new T4(t,o,i,r):t===401?new I4(t,o,i,r):t===403?new R4(t,o,i,r):t===404?new k4(t,o,i,r):t===409?new O4(t,o,i,r):t===422?new M4(t,o,i,r):t===429?new D4(t,o,i,r):t>=500?new L4(t,o,i,r):new as(t,o,i,r)}}class qm extends as{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class I0 extends as{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class C4 extends I0{constructor({message:t}={}){super({message:t??"Request timed out."})}}class T4 extends as{}class I4 extends as{}class R4 extends as{}class k4 extends as{}class O4 extends as{}class M4 extends as{}class D4 extends as{}class L4 extends as{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oL=/^[a-z][a-z0-9+.-]*:/i,lL=e=>oL.test(e);let Ym=e=>(Ym=Array.isArray,Ym(e));const cL=Ym;let uL=cL;const j_=uL;function dL(e){if(!e)return!0;for(const t in e)return!1;return!0}function fL(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const hL=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new fr(`${e} must be an integer`);if(t<0)throw new fr(`${e} must be a positive integer`);return t},pL=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mL=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xL=()=>{var e,t,n,i,r;const o=gL();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sc,"X-Stainless-OS":U_(Deno.build.os),"X-Stainless-Arch":B_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sc,"X-Stainless-OS":U_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":B_((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const d=yL();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yL(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,d=i[3]||0;return{browser:t,version:`${r}.${o}.${d}`}}}return null}const B_=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",U_=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let wh;const vL=()=>wh??(wh=xL());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function P4(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function wL(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return P4({start(){},async pull(n){const{done:i,value:r}=await t.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function j4(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _L(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EL=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B4=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function W1(e,t,n){return B4(),new File(e,t??"unknown_file",n)}function AL(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const SL=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U4=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",NL=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&U4(e),CL=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function TL(e,t,n){if(B4(),e=await e,NL(e))return e instanceof File?e:W1([await e.arrayBuffer()],e.name);if(CL(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),W1(await Xm(r),t,n)}const i=await Xm(e);if(t||(t=AL(e)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return W1(i,t,n)}async function Xm(e){var t,n,i,r,o;let d=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)d.push(e);else if(U4(e))d.push(e instanceof Blob?e:await e.arrayBuffer());else if(SL(e))try{for(var g=!0,x=Or(e),p;p=await x.next(),t=p.done,!t;g=!0){r=p.value,g=!1;const _=r;d.push(...await Xm(_))}}catch(_){n={error:_}}finally{try{!g&&!t&&(i=x.return)&&await i.call(x)}finally{if(n)throw n.error}}else{const _=(o=e==null?void 0:e.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof e}${_?`; constructor: ${_}`:""}${IL(e)}`)}return d}function IL(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F4{constructor(t){this._client=t}}F4._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z4(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const F_=Object.freeze(Object.create(null)),RL=(e=z4)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],d=n.reduce((_,E,N)=>{var k,O,L;/[?#]/.test(E)&&(r=!0);const P=i[N];let H=(r?encodeURIComponent:e)(""+P);return N!==i.length&&(P==null||typeof P=="object"&&P.toString===((L=Object.getPrototypeOf((O=Object.getPrototypeOf((k=P.hasOwnProperty)!==null&&k!==void 0?k:F_))!==null&&O!==void 0?O:F_))===null||L===void 0?void 0:L.toString))&&(H=P+"",o.push({start:_.length+E.length,length:H.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+E+(N===i.length?"":H)},""),g=d.split(/[?#]/,1)[0],x=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=x.exec(g))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((_,E)=>_.start-E.start),o.length>0){let _=0;const E=o.reduce((N,k)=>{const O=" ".repeat(k.start-_),L="^".repeat(k.length);return _=k.start+k.length,N+O+L},"");throw new fr(`Path parameters result in path with invalid segments:
${o.map(N=>N.error).join(`
`)}
${d}
${E}`)}return d}),_h=RL(z4);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V4 extends F4{create(t,n){var i;const{api_version:r=this._client.apiVersion}=t,o=Kh(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new fr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new fr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_h`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(_h`/${r}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(_h`/${r}/interactions/${t}/cancel`,i)}get(t,n={},i){var r;const o=n??{},{api_version:d=this._client.apiVersion}=o,g=Kh(o,["api_version"]);return this._client.get(_h`/${d}/interactions/${t}`,Object.assign(Object.assign({query:g},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}V4._key=Object.freeze(["interactions"]);class G4 extends V4{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kL(e){let t=0;for(const r of e)t+=r.length;const n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}let Eh;function lx(e){let t;return(Eh??(t=new globalThis.TextEncoder,Eh=t.encode.bind(t)))(e)}let Ah;function z_(e){let t;return(Ah??(t=new globalThis.TextDecoder,Ah=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R0{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?lx(t):t;this.buffer=kL([this.buffer,n]);const i=[];let r;for(;(r=OL(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(z_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,d=z_(this.buffer.subarray(0,o));i.push(d),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}R0.NEWLINE_CHARS=new Set([`
`,"\r"]);R0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function OL(e,t){for(let r=t??0;r<e.length;r++){if(e[r]===10)return{preceding:r,index:r+1,carriage:!1};if(e[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function ML(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $h={off:0,error:200,warn:300,info:400,debug:500},V_=(e,t,n)=>{if(e){if(fL($h,e))return e;rs(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys($h))}`)}};function xd(){}function Sh(e,t,n){return!t||$h[e]>$h[n]?xd:t[e].bind(t)}const DL={error:xd,warn:xd,info:xd,debug:xd};let G_=new WeakMap;function rs(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return DL;const r=G_.get(n);if(r&&r[0]===i)return r[1];const o={error:Sh("error",n,i),warn:Sh("warn",n,i),info:Sh("info",n,i),debug:Sh("debug",n,i)};return G_.set(n,[i,o]),o}const ul=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kc{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let r=!1;const o=i?rs(i):console;function d(){return kr(this,arguments,function*(){var x,p,_,E;if(r)throw new fr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let N=!1;try{try{for(var k=!0,O=Or(LL(t,n)),L;L=yield pt(O.next()),x=L.done,!x;k=!0){E=L.value,k=!1;const P=E;if(!N)if(P.data.startsWith("[DONE]")){N=!0;continue}else try{yield yield pt(JSON.parse(P.data))}catch(H){throw o.error("Could not parse message into JSON:",P.data),o.error("From chunk:",P.raw),H}}}catch(P){p={error:P}}finally{try{!k&&!x&&(_=O.return)&&(yield pt(_.call(O)))}finally{if(p)throw p.error}}N=!0}catch(P){if(Gm(P))return yield pt(void 0);throw P}finally{N||n.abort()}})}return new kc(d,n,i)}static fromReadableStream(t,n,i){let r=!1;function o(){return kr(this,arguments,function*(){var x,p,_,E;const N=new R0,k=j4(t);try{for(var O=!0,L=Or(k),P;P=yield pt(L.next()),x=P.done,!x;O=!0){E=P.value,O=!1;const H=E;for(const B of N.decode(H))yield yield pt(B)}}catch(H){p={error:H}}finally{try{!O&&!x&&(_=L.return)&&(yield pt(_.call(L)))}finally{if(p)throw p.error}}for(const H of N.flush())yield yield pt(H)})}function d(){return kr(this,arguments,function*(){var x,p,_,E;if(r)throw new fr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let N=!1;try{try{for(var k=!0,O=Or(o()),L;L=yield pt(O.next()),x=L.done,!x;k=!0){E=L.value,k=!1;const P=E;N||P&&(yield yield pt(JSON.parse(P)))}}catch(P){p={error:P}}finally{try{!k&&!x&&(_=O.return)&&(yield pt(_.call(O)))}finally{if(p)throw p.error}}N=!0}catch(P){if(Gm(P))return yield pt(void 0);throw P}finally{N||n.abort()}})}return new kc(d,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const d=i.next();t.push(d),n.push(d)}return o.shift()}});return[new kc(()=>r(t),this.controller,this.client),new kc(()=>r(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return P4({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const d=lx(JSON.stringify(r)+`
`);i.enqueue(d)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function LL(e,t){return kr(this,arguments,function*(){var i,r,o,d;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new fr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new fr("Attempted to iterate over a response with no body");const g=new jL,x=new R0,p=j4(e.body);try{for(var _=!0,E=Or(PL(p)),N;N=yield pt(E.next()),i=N.done,!i;_=!0){d=N.value,_=!1;const k=d;for(const O of x.decode(k)){const L=g.decode(O);L&&(yield yield pt(L))}}}catch(k){r={error:k}}finally{try{!_&&!i&&(o=E.return)&&(yield pt(o.call(E)))}finally{if(r)throw r.error}}for(const k of x.flush()){const O=g.decode(k);O&&(yield yield pt(O))}})}function PL(e){return kr(this,arguments,function*(){var n,i,r,o;let d=new Uint8Array;try{for(var g=!0,x=Or(e),p;p=yield pt(x.next()),n=p.done,!n;g=!0){o=p.value,g=!1;const _=o;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?lx(_):_;let N=new Uint8Array(d.length+E.length);N.set(d),N.set(E,d.length),d=N;let k;for(;(k=ML(d))!==-1;)yield yield pt(d.slice(0,k)),d=d.slice(k)}}catch(_){i={error:_}}finally{try{!g&&!n&&(r=x.return)&&(yield pt(r.call(x)))}finally{if(i)throw i.error}}d.length>0&&(yield yield pt(d))})}class jL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,r]=BL(t,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function BL(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UL(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=t,d=await(async()=>{var g;if(t.options.stream)return rs(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):kc.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const x=n.headers.get("content-type"),p=(g=x==null?void 0:x.split(";")[0])===null||g===void 0?void 0:g.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return rs(e).debug(`[${i}] response parsed`,ul({retryOfRequestLogID:r,url:n.url,status:n.status,body:d,durationMs:Date.now()-o})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cx extends Promise{constructor(t,n,i=UL){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new cx(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H4=Symbol("brand.privateNullableHeaders");function*FL(e){if(!e)return;if(H4 in e){const{values:i,nulls:r}=e;yield*i.entries();for(const o of r)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():j_(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=j_(i[1])?i[1]:[i[1]];let d=!1;for(const g of o)g!==void 0&&(t&&!d&&(d=!0,yield[r,null]),yield[r,g])}}const dd=e=>{const t=new Headers,n=new Set;for(const i of e){const r=new Set;for(const[o,d]of FL(i)){const g=o.toLowerCase();r.has(g)||(t.delete(o),r.add(g)),d===null?(t.delete(o),n.add(g)):(t.append(o,d),n.delete(g))}}return{[H4]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K1=e=>{var t,n,i,r,o,d;if(typeof globalThis.process<"u")return(i=(n=(t=ak)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(d=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,e))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var q4;class k0{constructor(t){var n,i,r,o,d,g,x,{baseURL:p=K1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=K1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=t,N=Kh(t,["baseURL","apiKey","apiVersion"]);const k=Object.assign(Object.assign({apiKey:_,apiVersion:E},N),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=k.baseURL,this.timeout=(i=k.timeout)!==null&&i!==void 0?i:k0.DEFAULT_TIMEOUT,this.logger=(r=k.logger)!==null&&r!==void 0?r:console;const O="warn";this.logLevel=O,this.logLevel=(d=(o=V_(k.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:V_(K1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:O,this.fetchOptions=k.fetchOptions,this.maxRetries=(g=k.maxRetries)!==null&&g!==void 0?g:2,this.fetch=(x=k.fetch)!==null&&x!==void 0?x:bL(),this.encoder=EL,this._options=k,this.apiKey=_,this.apiVersion=E,this.clientAdapter=k.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=dd([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return dd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return dd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new fr(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sc}`}defaultIdempotencyKey(){return`stainless-node-retry-${aL()}`}makeStatusError(t,n,i,r){return as.generate(t,n,i,r)}buildURL(t,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=lL(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),d=this.defaultQuery();return dL(d)||(n=Object.assign(Object.assign({},d),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:t,path:n},r)))}request(t,n=null){return new cx(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var r,o,d;const g=await t,x=(r=g.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=x),await this.prepareOptions(g);const{req:p,url:_,timeout:E}=await this.buildRequest(g,{retryCount:x-n});await this.prepareRequest(p,{url:_,options:g});const N="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),k=i===void 0?"":`, retryOf: ${i}`,O=Date.now();if(rs(this).debug(`[${N}] sending request`,ul({retryOfRequestLogID:i,method:g.method,url:_,options:g,headers:p.headers})),!((o=g.signal)===null||o===void 0)&&o.aborted)throw new qm;const L=new AbortController,P=await this.fetchWithTimeout(_,p,E,L).catch(Hm),H=Date.now();if(P instanceof globalThis.Error){const j=`retrying, ${n} attempts remaining`;if(!((d=g.signal)===null||d===void 0)&&d.aborted)throw new qm;const F=Gm(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(n)return rs(this).info(`[${N}] connection ${F?"timed out":"failed"} - ${j}`),rs(this).debug(`[${N}] connection ${F?"timed out":"failed"} (${j})`,ul({retryOfRequestLogID:i,url:_,durationMs:H-O,message:P.message})),this.retryRequest(g,n,i??N);throw rs(this).info(`[${N}] connection ${F?"timed out":"failed"} - error; no more retries left`),rs(this).debug(`[${N}] connection ${F?"timed out":"failed"} (error; no more retries left)`,ul({retryOfRequestLogID:i,url:_,durationMs:H-O,message:P.message})),F?new C4:new I0({cause:P})}const B=`[${N}${k}] ${p.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${H-O}ms`;if(!P.ok){const j=await this.shouldRetry(P);if(n&&j){const ie=`retrying, ${n} attempts remaining`;return await _L(P.body),rs(this).info(`${B} - ${ie}`),rs(this).debug(`[${N}] response error (${ie})`,ul({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:H-O})),this.retryRequest(g,n,i??N,P.headers)}const F=j?"error; no more retries left":"error; not retryable";rs(this).info(`${B} - ${F}`);const Y=await P.text().catch(ie=>Hm(ie).message),W=pL(Y),te=W?void 0:Y;throw rs(this).debug(`[${N}] response error (${F})`,ul({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:te,durationMs:Date.now()-O})),this.makeStatusError(P.status,W,te,P.headers)}return rs(this).info(B),rs(this).debug(`[${N}] response start`,ul({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:H-O})),{response:P,options:g,controller:L,requestLogID:N,retryOfRequestLogID:i,startTime:O}}async fetchWithTimeout(t,n,i,r){const o=n||{},{signal:d,method:g}=o,x=Kh(o,["signal","method"]),p=this._makeAbort(r);d&&d.addEventListener("abort",p,{once:!0});const _=setTimeout(p,i),E=globalThis.ReadableStream&&x.body instanceof globalThis.ReadableStream||typeof x.body=="object"&&x.body!==null&&Symbol.asyncIterator in x.body,N=Object.assign(Object.assign(Object.assign({signal:r.signal},E?{duplex:"half"}:{}),{method:"GET"}),x);g&&(N.method=g.toUpperCase());try{return await this.fetch.call(void 0,t,N)}finally{clearTimeout(_)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,r){var o;let d;const g=r==null?void 0:r.get("retry-after-ms");if(g){const p=parseFloat(g);Number.isNaN(p)||(d=p)}const x=r==null?void 0:r.get("retry-after");if(x&&!d){const p=parseFloat(x);Number.isNaN(p)?d=Date.parse(x)-Date.now():d=p*1e3}if(!(d&&0<=d&&d<60*1e3)){const p=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(n,p)}return await mL(d),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,d=Math.min(.5*Math.pow(2,o),8),g=1-Math.random()*.25;return d*g*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,r,o;const d=Object.assign({},t),{method:g,path:x,query:p,defaultBaseURL:_}=d,E=this.buildURL(x,p,_);"timeout"in d&&hL("timeout",d.timeout),d.timeout=(i=d.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:N,body:k}=this.buildBody({options:d}),O=await this.buildHeaders({options:t,method:g,bodyHeaders:N,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:O},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&k instanceof globalThis.ReadableStream&&{duplex:"half"}),k&&{body:k}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=d.fetchOptions)!==null&&o!==void 0?o:{}),url:E,timeout:d.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const d=await this.authHeaders(t);let g=dd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),vL()),this._options.defaultHeaders,i,t.headers,d]);return this.validateHeaders(g),g.values}_makeAbort(t){return()=>t.abort()}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=dd([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:wL(t)}:this.encoder({body:t,headers:i})}}k0.DEFAULT_TIMEOUT=6e4;class Li extends k0{constructor(){super(...arguments),this.interactions=new G4(this)}}q4=Li;Li.GeminiNextGenAPIClient=q4;Li.GeminiNextGenAPIClientError=fr;Li.APIError=as;Li.APIConnectionError=I0;Li.APIConnectionTimeoutError=C4;Li.APIUserAbortError=qm;Li.NotFoundError=k4;Li.ConflictError=O4;Li.RateLimitError=D4;Li.BadRequestError=T4;Li.AuthenticationError=I4;Li.InternalServerError=L4;Li.PermissionDeniedError=R4;Li.UnprocessableEntityError=M4;Li.toFile=TL;Li.Interactions=G4;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zL(e,t){const n={},i=w(e,["name"]);return i!=null&&S(n,["_url","name"],i),n}function VL(e,t){const n={},i=w(e,["name"]);return i!=null&&S(n,["_url","name"],i),n}function GL(e,t){const n={},i=w(e,["sdkHttpResponse"]);return i!=null&&S(n,["sdkHttpResponse"],i),n}function HL(e,t){const n={},i=w(e,["sdkHttpResponse"]);return i!=null&&S(n,["sdkHttpResponse"],i),n}function qL(e,t,n){const i={};if(w(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=w(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&S(t,["displayName"],r),w(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=w(e,["epochCount"]);t!==void 0&&o!=null&&S(t,["tuningTask","hyperparameters","epochCount"],o);const d=w(e,["learningRateMultiplier"]);if(d!=null&&S(i,["tuningTask","hyperparameters","learningRateMultiplier"],d),w(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(w(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(w(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(w(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(w(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const g=w(e,["batchSize"]);t!==void 0&&g!=null&&S(t,["tuningTask","hyperparameters","batchSize"],g);const x=w(e,["learningRate"]);if(t!==void 0&&x!=null&&S(t,["tuningTask","hyperparameters","learningRate"],x),w(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(w(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(w(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(w(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(w(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(w(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(w(e,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function YL(e,t,n){const i={};let r=w(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const W=w(e,["validationDataset"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec"],$1(W))}else if(r==="PREFERENCE_TUNING"){const W=w(e,["validationDataset"]);t!==void 0&&W!=null&&S(t,["preferenceOptimizationSpec"],$1(W))}else if(r==="DISTILLATION"){const W=w(e,["validationDataset"]);t!==void 0&&W!=null&&S(t,["distillationSpec"],$1(W))}const o=w(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&S(t,["tunedModelDisplayName"],o);const d=w(e,["description"]);t!==void 0&&d!=null&&S(t,["description"],d);let g=w(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const W=w(e,["epochCount"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(g==="PREFERENCE_TUNING"){const W=w(e,["epochCount"]);t!==void 0&&W!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(g==="DISTILLATION"){const W=w(e,["epochCount"]);t!==void 0&&W!=null&&S(t,["distillationSpec","hyperParameters","epochCount"],W)}let x=w(n,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const W=w(e,["learningRateMultiplier"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(x==="PREFERENCE_TUNING"){const W=w(e,["learningRateMultiplier"]);t!==void 0&&W!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(x==="DISTILLATION"){const W=w(e,["learningRateMultiplier"]);t!==void 0&&W!=null&&S(t,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let p=w(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const W=w(e,["exportLastCheckpointOnly"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(p==="PREFERENCE_TUNING"){const W=w(e,["exportLastCheckpointOnly"]);t!==void 0&&W!=null&&S(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(p==="DISTILLATION"){const W=w(e,["exportLastCheckpointOnly"]);t!==void 0&&W!=null&&S(t,["distillationSpec","exportLastCheckpointOnly"],W)}let _=w(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const W=w(e,["adapterSize"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(_==="PREFERENCE_TUNING"){const W=w(e,["adapterSize"]);t!==void 0&&W!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(_==="DISTILLATION"){const W=w(e,["adapterSize"]);t!==void 0&&W!=null&&S(t,["distillationSpec","hyperParameters","adapterSize"],W)}let E=w(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const W=w(e,["tuningMode"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","tuningMode"],W)}const N=w(e,["customBaseModel"]);t!==void 0&&N!=null&&S(t,["customBaseModel"],N);let k=w(n,["config","method"]);if(k===void 0&&(k="SUPERVISED_FINE_TUNING"),k==="SUPERVISED_FINE_TUNING"){const W=w(e,["batchSize"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let O=w(n,["config","method"]);if(O===void 0&&(O="SUPERVISED_FINE_TUNING"),O==="SUPERVISED_FINE_TUNING"){const W=w(e,["learningRate"]);t!==void 0&&W!=null&&S(t,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const L=w(e,["labels"]);t!==void 0&&L!=null&&S(t,["labels"],L);const P=w(e,["beta"]);t!==void 0&&P!=null&&S(t,["preferenceOptimizationSpec","hyperParameters","beta"],P);const H=w(e,["baseTeacherModel"]);t!==void 0&&H!=null&&S(t,["distillationSpec","baseTeacherModel"],H);const B=w(e,["tunedTeacherModelSource"]);t!==void 0&&B!=null&&S(t,["distillationSpec","tunedTeacherModelSource"],B);const j=w(e,["sftLossWeightMultiplier"]);t!==void 0&&j!=null&&S(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],j);const F=w(e,["outputUri"]);t!==void 0&&F!=null&&S(t,["outputUri"],F);const Y=w(e,["encryptionSpec"]);return t!==void 0&&Y!=null&&S(t,["encryptionSpec"],Y),i}function XL(e,t){const n={},i=w(e,["baseModel"]);i!=null&&S(n,["baseModel"],i);const r=w(e,["preTunedModel"]);r!=null&&S(n,["preTunedModel"],r);const o=w(e,["trainingDataset"]);o!=null&&sP(o);const d=w(e,["config"]);return d!=null&&qL(d,n),n}function WL(e,t){const n={},i=w(e,["baseModel"]);i!=null&&S(n,["baseModel"],i);const r=w(e,["preTunedModel"]);r!=null&&S(n,["preTunedModel"],r);const o=w(e,["trainingDataset"]);o!=null&&rP(o,n,t);const d=w(e,["config"]);return d!=null&&YL(d,n,t),n}function KL(e,t){const n={},i=w(e,["name"]);return i!=null&&S(n,["_url","name"],i),n}function $L(e,t){const n={},i=w(e,["name"]);return i!=null&&S(n,["_url","name"],i),n}function JL(e,t,n){const i={},r=w(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const o=w(e,["pageToken"]);t!==void 0&&o!=null&&S(t,["_query","pageToken"],o);const d=w(e,["filter"]);return t!==void 0&&d!=null&&S(t,["_query","filter"],d),i}function ZL(e,t,n){const i={},r=w(e,["pageSize"]);t!==void 0&&r!=null&&S(t,["_query","pageSize"],r);const o=w(e,["pageToken"]);t!==void 0&&o!=null&&S(t,["_query","pageToken"],o);const d=w(e,["filter"]);return t!==void 0&&d!=null&&S(t,["_query","filter"],d),i}function QL(e,t){const n={},i=w(e,["config"]);return i!=null&&JL(i,n),n}function eP(e,t){const n={},i=w(e,["config"]);return i!=null&&ZL(i,n),n}function tP(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["nextPageToken"]);r!=null&&S(n,["nextPageToken"],r);const o=w(e,["tunedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(g=>Y4(g))),S(n,["tuningJobs"],d)}return n}function nP(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["nextPageToken"]);r!=null&&S(n,["nextPageToken"],r);const o=w(e,["tuningJobs"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(g=>Wm(g))),S(n,["tuningJobs"],d)}return n}function iP(e,t){const n={},i=w(e,["name"]);i!=null&&S(n,["model"],i);const r=w(e,["name"]);return r!=null&&S(n,["endpoint"],r),n}function sP(e,t){const n={};if(w(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(w(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=w(e,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),S(n,["examples","examples"],r)}return n}function rP(e,t,n){const i={};let r=w(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const d=w(e,["gcsUri"]);t!==void 0&&d!=null&&S(t,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(r==="PREFERENCE_TUNING"){const d=w(e,["gcsUri"]);t!==void 0&&d!=null&&S(t,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(r==="DISTILLATION"){const d=w(e,["gcsUri"]);t!==void 0&&d!=null&&S(t,["distillationSpec","promptDatasetUri"],d)}let o=w(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const d=w(e,["vertexDatasetResource"]);t!==void 0&&d!=null&&S(t,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(o==="PREFERENCE_TUNING"){const d=w(e,["vertexDatasetResource"]);t!==void 0&&d!=null&&S(t,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(o==="DISTILLATION"){const d=w(e,["vertexDatasetResource"]);t!==void 0&&d!=null&&S(t,["distillationSpec","promptDatasetUri"],d)}if(w(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Y4(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["name"]);r!=null&&S(n,["name"],r);const o=w(e,["state"]);o!=null&&S(n,["state"],l4(o));const d=w(e,["createTime"]);d!=null&&S(n,["createTime"],d);const g=w(e,["tuningTask","startTime"]);g!=null&&S(n,["startTime"],g);const x=w(e,["tuningTask","completeTime"]);x!=null&&S(n,["endTime"],x);const p=w(e,["updateTime"]);p!=null&&S(n,["updateTime"],p);const _=w(e,["description"]);_!=null&&S(n,["description"],_);const E=w(e,["baseModel"]);E!=null&&S(n,["baseModel"],E);const N=w(e,["_self"]);return N!=null&&S(n,["tunedModel"],iP(N)),n}function Wm(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["name"]);r!=null&&S(n,["name"],r);const o=w(e,["state"]);o!=null&&S(n,["state"],l4(o));const d=w(e,["createTime"]);d!=null&&S(n,["createTime"],d);const g=w(e,["startTime"]);g!=null&&S(n,["startTime"],g);const x=w(e,["endTime"]);x!=null&&S(n,["endTime"],x);const p=w(e,["updateTime"]);p!=null&&S(n,["updateTime"],p);const _=w(e,["error"]);_!=null&&S(n,["error"],_);const E=w(e,["description"]);E!=null&&S(n,["description"],E);const N=w(e,["baseModel"]);N!=null&&S(n,["baseModel"],N);const k=w(e,["tunedModel"]);k!=null&&S(n,["tunedModel"],k);const O=w(e,["preTunedModel"]);O!=null&&S(n,["preTunedModel"],O);const L=w(e,["supervisedTuningSpec"]);L!=null&&S(n,["supervisedTuningSpec"],L);const P=w(e,["preferenceOptimizationSpec"]);P!=null&&S(n,["preferenceOptimizationSpec"],P);const H=w(e,["distillationSpec"]);H!=null&&S(n,["distillationSpec"],H);const B=w(e,["tuningDataStats"]);B!=null&&S(n,["tuningDataStats"],B);const j=w(e,["encryptionSpec"]);j!=null&&S(n,["encryptionSpec"],j);const F=w(e,["partnerModelTuningSpec"]);F!=null&&S(n,["partnerModelTuningSpec"],F);const Y=w(e,["customBaseModel"]);Y!=null&&S(n,["customBaseModel"],Y);const W=w(e,["experiment"]);W!=null&&S(n,["experiment"],W);const te=w(e,["labels"]);te!=null&&S(n,["labels"],te);const ne=w(e,["outputUri"]);ne!=null&&S(n,["outputUri"],ne);const ie=w(e,["pipelineJob"]);ie!=null&&S(n,["pipelineJob"],ie);const _e=w(e,["serviceAccount"]);_e!=null&&S(n,["serviceAccount"],_e);const Ee=w(e,["tunedModelDisplayName"]);Ee!=null&&S(n,["tunedModelDisplayName"],Ee);const pe=w(e,["veoTuningSpec"]);return pe!=null&&S(n,["veoTuningSpec"],pe),n}function aP(e,t){const n={},i=w(e,["sdkHttpResponse"]);i!=null&&S(n,["sdkHttpResponse"],i);const r=w(e,["name"]);r!=null&&S(n,["name"],r);const o=w(e,["metadata"]);o!=null&&S(n,["metadata"],o);const d=w(e,["done"]);d!=null&&S(n,["done"],d);const g=w(e,["error"]);return g!=null&&S(n,["error"],g),n}function $1(e,t){const n={},i=w(e,["gcsUri"]);i!=null&&S(n,["validationDatasetUri"],i);const r=w(e,["vertexDatasetResource"]);return r!=null&&S(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oP extends La{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Rl(Ma.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let d="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?d=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(d=o.name.split("/operations/")[0]),{name:d,state:Lm.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=$L(t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>Wm(_))}else{const p=KL(t);return g=Ve("{name}",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>Y4(_))}}async listInternal(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=eP(t);return g=Ve("tuningJobs",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=nP(_),N=new g_;return Object.assign(N,E),N})}else{const p=QL(t);return g=Ve("tunedModels",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=tP(_),N=new g_;return Object.assign(N,E),N})}}async cancel(t){var n,i,r,o;let d,g="",x={};if(this.apiClient.isVertexAI()){const p=VL(t);return g=Ve("{name}:cancel",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=HL(_),N=new x_;return Object.assign(N,E),N})}else{const p=zL(t);return g=Ve("{name}:cancel",p._url),x=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const N=E;return N.sdkHttpResponse={headers:_.headers},N})),d.then(_=>{const E=GL(_),N=new x_;return Object.assign(N,E),N})}}async tuneInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const g=WL(t,t);return o=Ve("tuningJobs",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>Wm(x))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=XL(t);return o=Ve("tunedModels",g._url),d=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:x.headers},_})),r.then(x=>aP(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lP{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cP=1024*1024*8,uP=3,dP=1e3,fP=2,Jh="x-goog-upload-status";async function hP(e,t,n){var i;const r=await X4(e,t,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Jh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function pP(e,t,n){var i;const r=await X4(e,t,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Jh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=n4(o),g=new nx;return Object.assign(g,d),g}async function X4(e,t,n){var i,r;let o=0,d=0,g=new jm(new Response),x="upload";for(o=e.size;d<o;){const p=Math.min(cP,o-d),_=e.slice(d,d+p);d+p>=o&&(x+=", finalize");let E=0,N=dP;for(;E<uP&&(g=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":String(d),"Content-Length":String(p)}}}),!(!((i=g==null?void 0:g.headers)===null||i===void 0)&&i[Jh]));)E++,await gP(N),N=N*fP;if(d+=p,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[Jh])!=="active")break;if(o<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return g}async function mP(e){return{size:e.size,type:e.type}}function gP(e){return new Promise(t=>setTimeout(t,e))}class xP{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hP(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pP(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mP(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yP{create(t,n,i){return new vP(t,n,i)}}class vP{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H_="x-goog-api-key";class bP{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(H_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(H_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wP="gl-node/";class _P{get interactions(){var t;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new Li({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(t=n==null?void 0:n.retryOptions)===null||t===void 0?void 0:t.attempts});return this._interactions=i.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=uk(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new bP(this.apiKey);this.apiClient=new mD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:wP+"web",uploader:new xP,downloader:new lP}),this.models=new DD(this.apiClient),this.live=new TD(this.apiClient,r,new yP),this.batches=new F7(this.apiClient),this.chats=new w9(this.models,this.apiClient),this.caches=new y9(this.apiClient),this.files=new M9(this.apiClient),this.operations=new LD(this.apiClient),this.authTokens=new JD(this.apiClient),this.tunings=new oP(this.apiClient),this.fileSearchStores=new rL(this.apiClient)}}var K_,$_,J_,Z_,Q_,e3;const q_=(($_=(K_=import.meta)==null?void 0:K_.env)==null?void 0:$_.VITE_GEMINI_API_KEY)||((Z_=(J_=import.meta)==null?void 0:J_.env)==null?void 0:Z_.GEMINI_API_KEY)||((e3=(Q_=import.meta)==null?void 0:Q_.env)==null?void 0:e3.API_KEY)||"",Y_=q_?new _P({apiKey:q_}):null,EP=async(e,t=[])=>{try{return Y_?(await Y_.models.generateContent({model:"gemini-3-flash-preview",contents:t.length>0?t.concat([{role:"user",parts:[{text:e}]}]):e,config:{systemInstruction:"Voc  o Vanta Concierge, um assistente de elite para membros de um clube exclusivo."}})).text??"Lamento, Membro. No consegui gerar uma resposta agora.":"Concierge indisponvel no ambiente local (sem GEMINI API KEY)."}catch(n){return console.error("Concierge fetch error:",n),"Lamento, Membro. Tivemos uma instabilidade em nossos servidores de elite. Tente novamente em breve."}},Fs="vanta-concierge",fd={id:Fs,participantId:Fs,participantName:"Vanta Concierge",avatar_url:"",lastMessage:"Em que posso ajudar?",unreadCount:0,timestamp:864e13},AP=(e,t,n,i,r)=>{const[o,d]=V.useState([]),[g,x]=V.useState([]),[p,_]=V.useState("MENSAGENS"),[E,N]=V.useState(""),[k,O]=V.useState(!1),[L,P]=V.useState(!1),[H,B]=V.useState(""),[j,F]=V.useState(""),[Y,W]=V.useState(new Set),te=V.useRef(null),ne=V.useRef(0);V.useEffect(()=>{if(e){_e(),ie();const J=pe();return()=>{J&&Q.removeChannel(J)}}},[e]),V.useEffect(()=>{i&&e&&(Ee(i),Ji.markMessagesAsRead(i),B(""),F(""),n(J=>J.map(oe=>oe.id===i?{...oe,unreadCount:0}:oe)))},[i,e]);const ie=async()=>{if(!Q||!e)return;const{data:J}=await Q.from("event_rsvps").select("user_id, events(start_at, end_at)").eq("status","going");if(J){const oe=new Date,fe=J.filter(Se=>{if(!Se.events)return!1;const ee=new Date(Se.events.start_at),ae=Se.events.end_at?new Date(Se.events.end_at):new Date(ee.getTime()+480*60*1e3);return oe>=ee&&oe<=ae}).map(Se=>Se.user_id);W(new Set(fe))}},_e=async()=>{if(!(!e||!Q))try{const{data:J,error:oe}=await Q.from("friendships").select(`
          status, 
          user_id, 
          friend_id, 
          profiles:friendships_friend_id_fkey(id, full_name, instagram_handle, avatar_url, gender), 
          requester:friendships_user_id_fkey(id, full_name, instagram_handle, avatar_url, gender)
        `).or(`user_id.eq.${e.id},friend_id.eq.${e.id}`);if(oe)throw oe;const fe=(J||[]).map(ae=>{const ve=ae.user_id===e.id,Ie=ve?ae.profiles:ae.requester;return!Ie||!Ie.id?null:{id:Ie.id,full_name:Ie.full_name,avatar_url:Ie.avatar_url,gender:Ie.gender,status:ae.status,isOutgoing:ve}}).filter(Boolean);x(fe);const Se=fe.filter(ae=>ae.status==="friends"),ee=await Promise.all(Se.map(async ae=>{const{data:ve}=await Q.from("messages").select("text, created_at").or(`and(sender_id.eq.${e.id},receiver_id.eq.${ae.id}),and(sender_id.eq.${ae.id},receiver_id.eq.${e.id})`).order("created_at",{ascending:!1}).limit(1).maybeSingle();return{id:ae.id,participantId:ae.id,participantName:ae.full_name,avatar_url:ae.avatar_url,gender:ae.gender,lastMessage:(ve==null?void 0:ve.text)||"Inicie uma conversa",unreadCount:0,timestamp:ve?new Date(ve.created_at).getTime():0}}));n([fd,...ee])}catch(J){console.error("[VANTA SOCIAL] Erro na sincronizao:",J),n(oe=>oe.some(fe=>fe.id===Fs)?oe:[fd,...oe])}},Ee=async J=>{if(!e||!Q)return;if(J===Fs){d([{id:"c1",sender_id:Fs,text:"Bem-vindo ao Vanta Concierge. Como posso elevar sua experincia hoje?",created_at:new Date().toISOString()}]);return}O(!0);const{data:oe,error:fe}=await Q.from("messages").select("*").or(`and(sender_id.eq.${e.id},receiver_id.eq.${J}),and(sender_id.eq.${J},receiver_id.eq.${e.id})`).order("created_at",{ascending:!0});!fe&&oe&&d(oe),O(!1)},pe=()=>!Q||!e?null:Q.channel(`social_events_${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},J=>{const oe=J.new.sender_id;n(fe=>{if(oe===Fs)return fe;const Se=fe.find(ve=>ve.id===oe),ee=fe.filter(ve=>ve.id!==oe&&ve.id!==Fs);let ae;if(Se)ae={...Se,lastMessage:J.new.text,unreadCount:i===oe?0:Se.unreadCount+1,timestamp:Date.now()};else return fe;return[fd,ae,...ee]}),oe===i&&(d(fe=>[...fe,J.new]),P(!1),Ji.markMessagesAsRead(oe))}).on("broadcast",{event:"typing"},J=>{J.payload.senderId===i&&(P(!0),te.current&&clearTimeout(te.current),te.current=setTimeout(()=>P(!1),3e3))}).subscribe(),Ne=()=>{if(!Q||!i||i===Fs)return;const J=Date.now();J-ne.current<2e3||(ne.current=J,Q.channel(`social_events_${i}`).send({type:"broadcast",event:"typing",payload:{senderId:e==null?void 0:e.id}}))},ue=async()=>{if(!E.trim()||!i||!e||!Q)return;const J=E.trim();if(N(""),i===Fs){const oe={id:Date.now().toString(),sender_id:e.id,text:J,created_at:new Date().toISOString()};d(ae=>[...ae,oe]),O(!0);const fe=o.map(ae=>({role:ae.sender_id===Fs?"model":"user",parts:[{text:ae.text}]})),Se=await EP(J,fe);O(!1);const ee={id:(Date.now()+1).toString(),sender_id:Fs,text:Se,created_at:new Date().toISOString()};d(ae=>[...ae,ee])}else{const{data:oe,error:fe}=await Q.from("messages").insert([{sender_id:e.id,receiver_id:i,text:J}]).select().single();!fe&&oe&&(d(Se=>[...Se,oe]),n(Se=>{const ee=Se.find(ae=>ae.id===i);if(ee){const ae=Se.filter(ve=>ve.id!==i&&ve.id!==Fs);return[fd,{...ee,lastMessage:J,timestamp:Date.now()},...ae]}return Se}),await Ji.addNotification("message",i,e.fullName,{action_type:"message_received"}))}},X=V.useMemo(()=>{const J=t.filter(ee=>ee.id!==Fs).sort((ee,ae)=>ae.timestamp-ee.timestamp);let oe=[fd,...J];if(!H.trim())return oe;const fe=H.toLowerCase();return oe.filter(ee=>ee.participantName.toLowerCase().includes(fe))},[t,H]),K=V.useMemo(()=>{if(!j.trim())return g;const J=j.toLowerCase();return g.filter(oe=>oe.full_name.toLowerCase().includes(J))},[g,j]);return{messages:o,friendsList:g,activeTab:p,draft:E,isLoading:k,isTyping:L,msgSearchQuery:H,friendSearchQuery:j,activePresence:Y,setActiveTab:_,setDraft:N,setMsgSearchQuery:B,setFriendSearchQuery:F,handleSendMessage:ue,handleTyping:Ne,filteredConversations:X,filteredFriends:K}},SP=({activeTab:e,setActiveTab:t,searchQuery:n,setSearchQuery:i})=>u.jsxs("header",{className:"px-10 pt-20 pb-6 flex-shrink-0 safe-top space-y-8",children:[u.jsx("h1",{className:"text-5xl font-serif italic text-white tracking-tighter",children:"Social"}),u.jsx("div",{className:"flex gap-8 border-b border-white/5",children:["MENSAGENS","AMIGOS"].map(r=>u.jsxs("button",{onClick:()=>t(r),className:`pb-4 text-[9px] font-black uppercase tracking-[0.4em] transition-all relative ${e===r?"text-[#d4af37]":"text-zinc-700"}`,children:[r,e===r&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-[#d4af37] animate-in slide-in-from-left duration-300"})]},r))}),u.jsxs("div",{className:"relative animate-in slide-in-from-top-2 duration-500",children:[u.jsx(Ge.Search,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-zinc-600"}),u.jsx("input",{type:"text",value:n,onChange:r=>i(r.target.value),placeholder:e==="MENSAGENS"?"PROCURAR CONVERSAS ATIVAS...":"BUSCAR NA MINHA REDE...",className:"w-full bg-zinc-900/50 border border-white/5 rounded-full py-5 pl-14 pr-6 text-[9px] text-white uppercase tracking-[0.2em] outline-none focus:border-[#d4af37]/20 transition-all placeholder:text-zinc-700"})]})]}),NP="vanta-concierge",CP=({conversations:e,activePresence:t,onSelect:n})=>e.length===0?u.jsx("div",{className:"py-20 text-center opacity-30",children:u.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhuma conversa encontrada"})}):u.jsx("div",{className:"space-y-4",children:e.map(i=>{const r=t.has(i.participantId);return u.jsxs("button",{onClick:()=>n(i.id),className:"w-full flex items-center gap-6 p-5 bg-zinc-900/20 border border-white/5 rounded-[2.5rem] hover:bg-white/5 transition-all text-left group",children:[u.jsxs("div",{className:`w-16 h-16 rounded-full border p-1 flex-shrink-0 bg-zinc-900 overflow-hidden relative transition-all ${r?"border-[#d4af37] shadow-[0_0_15px_rgba(212,175,55,0.2)]":"border-white/10"}`,children:[i.id===NP?u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black",children:u.jsx("span",{className:"text-xl font-serif italic text-[#d4af37]",children:"V"})}):u.jsx(Kn,{src:i.avatar_url,gender:i.gender}),r&&u.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 bg-[#d4af37] border-2 border-black rounded-full"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("h3",{className:"text-white text-[12px] font-black uppercase tracking-widest truncate",children:i.participantName}),i.unreadCount>0&&u.jsx("span",{className:"px-2 py-0.5 bg-[#d4af37] text-black text-[7px] font-black rounded-full",children:i.unreadCount})]}),u.jsx("p",{className:`text-[9px] font-black uppercase tracking-widest truncate ${i.unreadCount>0?"text-[#d4af37]":"text-zinc-600"}`,children:i.lastMessage})]})]},i.id)})}),TP=({friends:e,activePresence:t,onChat:n})=>e.length===0?u.jsx("div",{className:"py-20 text-center opacity-30",children:u.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhuma conexo encontrada"})}):u.jsx("div",{className:"space-y-4",children:e.map(i=>{const r=t.has(i.id);return u.jsxs("div",{className:"flex items-center gap-6 p-5 bg-zinc-900/20 border border-white/5 rounded-[2.5rem]",children:[u.jsx("div",{className:`w-16 h-16 rounded-full border p-1 flex-shrink-0 bg-zinc-900 overflow-hidden transition-all ${r?"border-[#d4af37]":"border-white/10"}`,children:u.jsx(Kn,{src:i.avatar_url,gender:i.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("button",{onClick:()=>Vs.setOpenMemberProfile(i.id),className:"text-white text-[12px] font-black uppercase tracking-widest truncate hover:text-[#d4af37] transition-colors",children:i.full_name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("p",{className:"text-zinc-600 text-[9px] font-black uppercase tracking-widest truncate",children:i.status==="friends"?"AMIGO VERIFICADO":"AGUARDANDO APROVAO"}),r&&u.jsx("span",{className:"text-[#d4af37] text-[6px] font-black uppercase italic",children:"Ativo na Noite"})]})]}),i.status==="friends"&&u.jsx("button",{onClick:()=>n(i.id),className:"px-4 py-2 bg-white text-black text-[7px] font-black uppercase rounded-full active:scale-95",children:"Conversar"})]},i.id)})}),IP="vanta-concierge",RP=({currentUser:e,activeConversation:t,messages:n,isTyping:i,isLoading:r,draft:o,setDraft:d,onSend:g,onTyping:x,onBack:p,activePresence:_})=>{const E=V.useRef(null),[N,k]=V.useState([]),O=(t==null?void 0:t.id)===IP,L=_.has(t==null?void 0:t.id);V.useEffect(()=>{k([])},[t==null?void 0:t.id]),V.useEffect(()=>{if(!(t!=null&&t.id)||!(e!=null&&e.id)||O)return;const H=Q.channel(`chat_interface:${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},B=>{const j=B.new,F=t.id,Y=e.id;(j.sender_id===Y&&j.receiver_id===F||j.sender_id===F&&j.receiver_id===Y)&&k(te=>te.find(ne=>ne.id===j.id)?te:[...te,j])}).subscribe();return()=>{Q.removeChannel(H)}},[t==null?void 0:t.id,e.id,O]);const P=V.useMemo(()=>{const H=[...n,...N],B=new Map;return H.forEach(j=>{B.set(j.id,j)}),Array.from(B.values()).sort((j,F)=>new Date(j.created_at).getTime()-new Date(F.created_at).getTime())},[n,N]);return V.useEffect(()=>{E.current&&E.current.scrollTo({top:E.current.scrollHeight,behavior:"smooth"})},[P.length,i]),u.jsxs("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right duration-500 h-full",children:[u.jsxs("header",{className:"px-6 pt-16 pb-6 border-b border-white/5 flex items-center gap-4 bg-black/80 backdrop-blur-xl",children:[u.jsx("button",{onClick:p,className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white active:scale-90 transition-all",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current rotate-180",children:u.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-4",children:[u.jsx("div",{className:`w-10 h-10 rounded-full border p-0.5 bg-zinc-900 overflow-hidden transition-all ${L?"border-[#d4af37] shadow-[0_0_15px_rgba(212,175,55,0.2)]":"border-white/10"}`,children:O?u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black",children:u.jsx("span",{className:"text-sm font-serif italic text-[#d4af37]",children:"V"})}):u.jsx(Kn,{src:t==null?void 0:t.avatar_url,gender:t==null?void 0:t.gender})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-white text-[11px] font-black uppercase tracking-widest truncate",children:t==null?void 0:t.participantName}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-1 h-1 rounded-full transition-all duration-500 ${i?"bg-[#d4af37] animate-pulse scale-150":L?"bg-emerald-500":"bg-zinc-800"}`}),u.jsx("span",{className:"text-[7px] text-[#d4af37] font-black uppercase tracking-widest italic",children:O?"Vanta AI Support":i?"Digitando...":L?"Online":"Visto recentemente"})]})]})]})]}),u.jsxs("div",{ref:E,className:"flex-1 overflow-y-auto p-6 space-y-4 no-scrollbar",children:[P.map((H,B)=>{const j=H.sender_id===e.id;return u.jsx("div",{className:`flex ${j?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:u.jsxs("div",{className:`max-w-[80%] p-4 rounded-3xl text-[11px] leading-relaxed ${j?"bg-white text-black rounded-tr-none shadow-lg":"bg-zinc-900 text-white rounded-tl-none border border-white/5"}`,children:[H.text,u.jsx("div",{className:`text-[6px] mt-1 opacity-40 font-black uppercase ${j?"text-black":"text-zinc-500"}`,children:new Date(H.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},H.id||B)}),i&&u.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:u.jsxs("div",{className:"bg-zinc-900/50 border border-white/5 p-3 rounded-2xl flex gap-1 items-center",children:[u.jsx("div",{className:"w-1 h-1 bg-[#d4af37] rounded-full animate-bounce"}),u.jsx("div",{className:"w-1 h-1 bg-[#d4af37] rounded-full animate-bounce [animation-delay:0.2s]"}),u.jsx("div",{className:"w-1 h-1 bg-[#d4af37] rounded-full animate-bounce [animation-delay:0.4s]"})]})})]}),u.jsx("footer",{className:"p-6 bg-black border-t border-white/5 pb-10",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:o,onChange:H=>{d(H.target.value),x()},onKeyDown:H=>H.key==="Enter"&&g(),placeholder:"ESCREVA SUA MENSAGEM...",className:"w-full bg-zinc-900 border border-white/5 rounded-full py-5 pl-8 pr-16 text-[10px] text-white uppercase tracking-widest outline-none focus:border-white/20 transition-all shadow-inner"}),u.jsx("button",{onClick:g,disabled:!o.trim()||r,className:"absolute right-2 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white flex items-center justify-center text-black active:scale-90 transition-all disabled:opacity-20 shadow-xl",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current",children:u.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})})]})};function kP({currentUser:e,activeConversationId:t,setActiveConversationId:n,conversations:i,setConversations:r}){const o=AP(e,i,r,t);return e!=null&&e.isGloballyRestricted?u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-black p-10 text-center space-y-8 animate-in fade-in duration-1000",children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-zinc-900 border border-red-900/30 flex items-center justify-center text-5xl shadow-[0_0_50px_rgba(220,38,38,0.2)] animate-pulse",children:""}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter",children:"Comunicao Suspensa"}),u.jsx("p",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-[0.3em] leading-relaxed max-w-xs mx-auto",children:"Seu privilgio social foi temporariamente revogado pelo Conselho de tica."})]})]}):u.jsx("div",{className:"flex-1 flex flex-col bg-black h-full overflow-hidden animate-in fade-in duration-500",children:t?u.jsx(RP,{currentUser:e,activeConversation:i.find(g=>g.id===t),messages:o.messages,isTyping:o.isTyping,isLoading:o.isLoading,draft:o.draft,setDraft:o.setDraft,onSend:o.handleSendMessage,onTyping:o.handleTyping,onBack:()=>n(null),activePresence:o.activePresence}):u.jsxs(u.Fragment,{children:[u.jsx(SP,{activeTab:o.activeTab,setActiveTab:o.setActiveTab,searchQuery:o.activeTab==="MENSAGENS"?o.msgSearchQuery:o.friendSearchQuery,setSearchQuery:o.activeTab==="MENSAGENS"?o.setMsgSearchQuery:o.setFriendSearchQuery}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 no-scrollbar pb-10",children:o.activeTab==="MENSAGENS"?u.jsx(CP,{conversations:o.filteredConversations,activePresence:o.activePresence,onSelect:n}):u.jsx(TP,{friends:o.filteredFriends,activePresence:o.activePresence,onChat:g=>{n(g),o.setActiveTab("MENSAGENS")}})})]})})}const OP=()=>{const[e,t]=V.useState(null),[n,i]=V.useState(!0),[r,o]=V.useState("home"),[d,g]=V.useState([]),[x,p]=V.useState(!1),[_,E]=V.useState("Rio de Janeiro"),[N,k]=V.useState(!1),[O,L]=V.useState(!1),[P,H]=V.useState(null),[B,j]=V.useState(null),[F,Y]=V.useState(null),[W,te]=V.useState(null),[ne,ie]=V.useState([]),[_e,Ee]=V.useState(null),pe=V.useMemo(()=>[...new Set(d.map(oe=>oe.city))].filter(Boolean).sort(),[d]),Ne=async oe=>{if(Q)try{const{data:fe}=await Q.from("profiles").select("*").eq("id",oe).single();if(!fe)return;const{data:{user:Se}}=await Q.auth.getUser();if(!Se)return;const ee={...Se,user_metadata:{...Se.user_metadata,...fe}},ae=om(ee),ve=new Set([Ki.ADMIN,Ki.VANTA_PROD,Ki.VANTA_SOCIO,Ki.VANTA_PROMOTER,Ki.VANTA_PORTARIA,Ki.VANTA_STAFF]);let Ie=ae.status;const qe=!!(fe.role&&String(fe.role).startsWith("vanta_"));!ve.has(ae.status)&&!qe&&(fe.is_globally_restricted?Ie=Ki.RESTRICTED:Ie=Ki.APPROVED),t({...ae,status:Ie,permissions:fe.permissions||{},isGloballyRestricted:!!fe.is_globally_restricted,restriction_notes:fe.restriction_notes||"",approvedAt:fe.approved_at||void 0,approvedByName:fe.approved_by_name||void 0})}catch(fe){console.error("[VANTA CONTEXT] Erro ao sincronizar perfil:",fe)}},ue=async()=>{try{const oe=await N3();if(oe){const fe=oe.filter(Se=>!Uc(Se));g(fe)}}catch(oe){console.error("[VANTA EVENTS] Erro ao carregar eventos:",oe)}},X=()=>{t(null),o("home"),p(!1),H(null),Y(null)};return V.useEffect(()=>{let oe=null,fe=!0;if((async()=>{var ee;try{if(Q){const{data:ae}=await Q.auth.getSession();(ee=ae==null?void 0:ae.session)!=null&&ee.user&&await Ne(ae.session.user.id)}}catch(ae){console.error("[VANTA BOOT ERROR]",ae)}finally{fe&&i(!1)}})(),!Q)return()=>{fe=!1};try{const{data:{subscription:ee}}=Q.auth.onAuthStateChange(async(ae,ve)=>{try{ve!=null&&ve.user?await Ne(ve.user.id):ae==="SIGNED_OUT"&&X()}catch(Ie){console.error("[VANTA AUTH] Erro no onAuthStateChange:",Ie)}});oe=()=>{var ae;return(ae=ee==null?void 0:ee.unsubscribe)==null?void 0:ae.call(ee)}}catch(ee){console.error("[VANTA AUTH] Falha ao iniciar onAuthStateChange:",ee)}return()=>{fe=!1;try{oe==null||oe()}catch{}}},[]),V.useEffect(()=>e!=null&&e.id?Dc.subscribe(()=>{Ne(e.id)}):void 0,[e==null?void 0:e.id]),V.useEffect(()=>{if(ue(),!Q)return;const oe=Q,fe=oe.channel("vanta_global_sync").on("postgres_changes",{event:"*",schema:"public",table:"events"},()=>{ue()}).subscribe(),Se=()=>{ue(),e!=null&&e.id&&Ne(e.id)};window.addEventListener("vanta:refresh",Se);const ee=setInterval(()=>{g(ae=>{const ve=ae.filter(Ie=>!Uc(Ie));return ve.length!==ae.length?ve:ae})},3e4);return()=>{oe.removeChannel(fe),window.removeEventListener("vanta:refresh",Se),clearInterval(ee)}},[e==null?void 0:e.id]),{currentUser:e,setCurrentUser:t,isCheckingSession:n,activeTab:r,setActiveTab:o,events:d,setEvents:g,isAdminMode:x,setIsAdminMode:p,selectedCity:_,setSelectedCity:E,showCitySelector:N,setShowCitySelector:k,showNotifications:O,setShowNotifications:L,selectedEventId:P,setSelectedEventId:H,blockedFeature:B,setBlockedFeature:j,showAuth:F,setShowAuth:Y,activeConversationId:W,setActiveConversationId:te,conversations:ne,setConversations:ie,availableCities:pe,handleTabChange:oe=>{const fe={messages:"Social",profile:"Perfil",wallet:"Acesso"};if(!e&&fe[oe]){j(fe[oe]);return}o(oe),H(null),oe!=="messages"&&te(null)},handleLogout:async()=>{X();try{if(Q){const oe=Q.auth.signOut(),fe=new Promise((Se,ee)=>setTimeout(()=>ee(new Error("Timeout")),8e3));await Promise.race([oe,fe])}}catch(oe){console.warn("[VANTA AUTH] Logout remoto falhou:",oe)}},systemError:_e,setSystemError:Ee}},MP=({show:e,onClose:t,onEventClick:n,setActiveTab:i})=>{const[r,o]=V.useState([]),[d,g]=V.useState(0);if(V.useEffect(()=>{const E=()=>{o(Ji.getAll()),g(Ji.getUnreadCount())};return E(),Ji.subscribe(E)},[]),!e)return null;const x=E=>{try{Ji.markAsRead(E)}catch(N){console.error("[VANTA NOTIFICATIONS] markAsRead failed:",N)}},p=E=>{const N=E.metadata||{},k=E.eventId||N.eventId||N.event_id,O=E.memberId||N.memberId||N.member_id||N.fromUserId||N.from_user_id,L=N.communityId||N.community_id;if(N.action_type||N.actionType,L){i("admin"),t(),x(E.id);return}if((E.type==="vip_invite"||E.type==="event"||E.type==="event_share"||k)&&k){E.type==="vip_invite"&&Vs.setTriggerVipInvite(k),n(k),t(),x(E.id);return}if(E.type==="message"&&O){Vs.setOpenChat(O),i("messages"),t(),x(E.id);return}if((E.type==="friend_request"||E.type==="friend_accepted")&&O){Vs.setOpenMemberProfile(O),i("search"),t(),x(E.id);return}if(E.type==="staff_assignment"||E.type==="quota_received"||E.type==="guest_arrival"){i("admin"),t(),x(E.id);return}x(E.id)},_=E=>{switch(E){case"vip_invite":return u.jsx(Ge.Star,{className:"w-4 h-4 text-[#d4af37]"});case"friend_request":return u.jsx(Ge.User,{className:"w-4 h-4 text-purple-400"});case"event":return u.jsx(Ge.Calendar,{className:"w-4 h-4 text-emerald-400"});case"event_share":return u.jsx(Ge.Calendar,{className:"w-4 h-4 text-emerald-400"});case"message":return u.jsx(Ge.Message,{className:"w-4 h-4 text-blue-400"});case"staff_assignment":return u.jsx(Ge.User,{className:"w-4 h-4 text-[#d4af37]"});case"quota_received":return u.jsx(Ge.Star,{className:"w-4 h-4 text-[#d4af37]"});case"guest_arrival":return u.jsx(Ge.User,{className:"w-4 h-4 text-emerald-400"});case"info":return u.jsx(Ge.Bell,{className:"w-4 h-4 text-zinc-500"});default:return u.jsx(Ge.Bell,{className:"w-4 h-4 text-zinc-500"})}};return u.jsxs("div",{className:"fixed inset-0 z-[8000] bg-black/90 backdrop-blur-2xl animate-in fade-in duration-300 flex flex-col",children:[u.jsxs("header",{className:"px-10 pt-20 pb-10 flex justify-between items-end shrink-0 safe-top",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h2",{className:"text-5xl font-serif italic text-white tracking-tighter",children:"Inbox"}),u.jsx("p",{className:"text-[#d4af37] text-[8px] font-black uppercase tracking-[0.5em] italic",children:d>0?`${d} NOVOS PROTOCOLOS`:"VOC EST ATUALIZADO"})]}),u.jsx("button",{onClick:t,className:"w-12 h-12 rounded-full border border-white/10 flex items-center justify-center text-zinc-500 active:scale-90 transition-all mb-2",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:u.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 no-scrollbar pb-32",children:r.length>0?u.jsx("div",{className:"space-y-4",children:r.map(E=>u.jsx("div",{onClick:()=>p(E),className:`p-6 rounded-[2.5rem] border transition-all cursor-pointer group active:scale-[0.98] ${E.read?"bg-zinc-950/40 border-white/5 opacity-60":"bg-zinc-900 border-[#d4af37]/30 shadow-[0_10px_30px_rgba(212,175,55,0.1)]"}`,children:u.jsxs("div",{className:"flex gap-5",children:[u.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${E.read?"bg-zinc-900 border border-white/5":"bg-[#d4af37]/10 border border-[#d4af37]/20"}`,children:_(E.type)}),u.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest",children:new Date(E.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),!E.read&&u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#d4af37] animate-pulse"})]}),u.jsx("p",{className:`text-[11px] uppercase tracking-wide leading-relaxed ${E.read?"text-zinc-500":"text-white font-bold"}`,children:E.text})]})]})},E.id))}):u.jsxs("div",{className:"h-[50vh] flex flex-col items-center justify-center text-center px-10 space-y-6",children:[u.jsx("div",{className:"w-20 h-20 rounded-full border border-white/5 flex items-center justify-center opacity-20",children:u.jsx(Ge.Bell,{className:"w-10 h-10 text-zinc-700"})}),u.jsxs("p",{className:"text-[9px] text-zinc-700 font-black uppercase tracking-[0.5em] leading-relaxed italic",children:["NENHUMA NOTIFICAO",u.jsx("br",{}),"DE ELITE NO MOMENTO."]})]})}),u.jsx("div",{className:"p-8 bg-gradient-to-t from-black via-black to-transparent shrink-0",children:u.jsx("p",{className:"text-[7px] text-zinc-800 font-black uppercase tracking-[0.4em] text-center",children:"VANTA PRIVACY PROTOCOL V1.6"})})]})},DP=async(e,t)=>{if(!Q)throw new Error("Supabase no configurado.");const{data:{session:n}}=await Q.auth.getSession();if(!n||n.user.id!==e)throw new Error("No autorizado.");const i=`${e}/${Date.now()}.jpg`,{error:r}=await Q.storage.from("selfies").upload(i,t,{contentType:"image/jpeg",upsert:!1});if(r)throw r;return Q.storage.from("selfies").getPublicUrl(i).data.publicUrl},LP=async(e,t)=>{var g;const{data:{session:n}}=await Q.auth.getSession(),i=(g=n==null?void 0:n.user)==null?void 0:g.id;if(!i)throw new Error("Sesso no autenticada no Supabase (auth.uid() nulo).");if(i!==e)throw new Error(`Sesso mismatch (RLS Security): session=${i} userId=${e}`);if(!Q)throw new Error("Supabase no configurado.");const r=["full_name","instagram_handle","avatar_url","selfie_url","bio","gallery","privacy","gender","city","state","birth_date","phone_e164"],o={};r.forEach(x=>{t[x]!==void 0&&(o[x]=t[x])});const{error:d}=await Q.from("profiles").upsert({id:e,...o,updated_at:new Date().toISOString()},{onConflict:"id"});if(d)throw console.error("[VANTA SYNC ERROR]",d),d},PP=async(e,t)=>{var o;const{data:{session:n}}=await Q.auth.getSession(),i=(o=n==null?void 0:n.user)==null?void 0:o.id;if(!i)throw new Error("Sesso no autenticada.");if(i!==e)throw new Error("Sesso mismatch durante aplicao.");if(!Q)throw new Error("Supabase no configurado.");const{error:r}=await Q.from("member_applications").insert([{user_id:e,selfie_url:t,status:"pending",applied_at:new Date().toISOString()}]);if(r)throw console.error("[VANTA SUBMIT ERROR]",r),r},jP=({hasActiveSession:e,isProcessing:t,onContinueAsMember:n,onSignOut:i,onSetView:r,onClose:o})=>u.jsxs("div",{className:"w-full h-full flex flex-col animate-in fade-in duration-1000 relative",children:[u.jsx("button",{onClick:o,className:"absolute top-12 right-8 p-4 text-zinc-500 hover:text-white transition-colors z-20",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:u.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),u.jsx("div",{className:"flex-1"}),u.jsxs("div",{className:"flex-none flex flex-col items-center justify-center text-center",children:[u.jsx("h1",{className:"text-6xl font-serif font-bold text-white italic mb-4",children:"VANTA"}),u.jsx("p",{className:"text-[#d4af37] text-[9px] font-black uppercase tracking-[0.7em]",children:"estilo de vida  acesso."})]}),u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 pb-4 safe-bottom",children:u.jsx("div",{className:"space-y-3 w-[280px]",children:e?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:n,className:"w-full py-5 bg-white text-black font-black rounded-full uppercase text-[10px] tracking-widest shadow-xl active:scale-95 transition-transform",children:"Continuar como Membro"}),u.jsx("button",{onClick:i,disabled:t,className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest",children:t?"Encerrando...":"Sair"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>r("form"),className:"w-full py-5 bg-white text-black font-black rounded-full uppercase text-[10px] tracking-widest shadow-xl active:scale-95 transition-transform",children:"Entrar"}),u.jsx("button",{onClick:()=>r("signup"),className:"w-full py-5 bg-transparent border border-white/10 text-white font-black rounded-full uppercase text-[9px] tracking-widest active:scale-95 transition-all",children:"Solicitar Acesso"}),u.jsx("button",{onClick:o,className:"w-full py-4 text-zinc-700 text-[8px] font-black uppercase tracking-[0.3em] hover:text-zinc-500 transition-colors mt-4",children:"Explorar como Convidado"})]})})})]}),BP=({email:e,setEmail:t,password:n,setPassword:i,loginError:r,isProcessing:o,onLogin:d,onSetView:g,onBack:x})=>u.jsxs("div",{className:"w-full max-sm px-8 py-10 animate-in fade-in duration-500",children:[u.jsx("h1",{className:"text-4xl font-serif font-bold text-white text-center mb-12 italic",children:"VANTA"}),u.jsxs("form",{onSubmit:d,className:"space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"space-y-2",children:u.jsx("input",{required:!0,type:"email",value:e,onChange:p=>t(p.target.value),placeholder:"SEU E-MAIL CADASTRADO",className:"w-full bg-zinc-900/40 border border-white/5 rounded-2xl p-6 text-white text-[10px] uppercase outline-none focus:border-white/20 transition-all",disabled:o})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{required:!0,type:"password",value:n,onChange:p=>i(p.target.value),placeholder:"SENHA",className:"w-full bg-zinc-900/40 border border-white/5 rounded-2xl p-6 text-white text-[10px] uppercase outline-none focus:border-white/20 transition-all",disabled:o}),u.jsx("div",{className:"flex justify-end px-2",children:u.jsx("button",{type:"button",onClick:()=>g("recovery"),className:"text-[8px] text-zinc-500 font-black uppercase tracking-widest hover:text-white transition-colors",children:"Esqueceu sua senha?"})})]})]}),r&&u.jsx("p",{className:"text-[8px] text-red-500 font-black uppercase tracking-widest text-center animate-pulse",children:r}),u.jsx("button",{disabled:o,className:"w-full py-6 bg-white text-black font-black rounded-full uppercase text-[11px] tracking-widest shadow-xl active:scale-95 transition-all disabled:opacity-50",children:o?"Entrando...":"Entrar"}),u.jsx("button",{type:"button",onClick:x,className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest",children:"Voltar"})]})]}),UP=({recoveryEmail:e,setRecoveryEmail:t,recoverySent:n,loginError:i,isProcessing:r,onRecover:o,onSetView:d})=>u.jsxs("div",{className:"w-full max-sm px-8 py-10 animate-in fade-in duration-500",children:[u.jsx("h1",{className:"text-4xl font-serif font-bold text-white text-center mb-8 italic uppercase tracking-tighter",children:"Recuperar Acesso"}),n?u.jsxs("div",{className:"space-y-8 text-center animate-in zoom-in-95",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-[#d4af37]/10 border border-[#d4af37]/20 flex items-center justify-center mx-auto text-[#d4af37]",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-10 h-10 fill-current",children:u.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-white text-[11px] font-black uppercase tracking-widest leading-relaxed",children:"instruo de recuperao enviado."}),u.jsx("p",{className:"text-zinc-500 text-[9px] font-medium uppercase tracking-[0.2em] leading-relaxed",children:"Verifique sua caixa de entrada para recuperar seu acesso ao VANTA."})]}),u.jsx("button",{onClick:()=>d("form"),className:"w-full py-6 bg-white text-black font-black rounded-full uppercase text-[11px] tracking-widest shadow-xl active:scale-95 transition-all",children:"OK, ENTENDI"})]}):u.jsxs("form",{onSubmit:o,className:"space-y-6",children:[u.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-[0.2em] text-center mb-4 leading-relaxed",children:"Insira o e-mail cadastrado para receber o protocolo de redefinio de acesso."}),u.jsx("input",{required:!0,type:"email",value:e,onChange:g=>t(g.target.value),placeholder:"E-MAIL",className:"w-full bg-zinc-900/40 border border-white/5 rounded-2xl p-6 text-white text-[10px] uppercase outline-none focus:border-white/20 transition-all"}),i&&u.jsx("p",{className:"text-[8px] text-red-500 font-black uppercase tracking-widest text-center animate-pulse",children:i}),u.jsx("button",{disabled:r,className:"w-full py-6 bg-white text-black font-black rounded-full uppercase text-[11px] tracking-widest shadow-xl active:scale-95 transition-all disabled:opacity-50",children:r?"Enviando...":"Enviar Protocolo"}),u.jsx("button",{type:"button",onClick:()=>d("form"),className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest",children:"Voltar ao Login"})]})]}),FP=({value:e,onChange:t,error:n})=>{const[i,r,o]=e?e.split("-"):["","",""],d=V.useMemo(()=>{const E=new Date().getFullYear(),N=[];for(let k=E-18;k>=1920;k--)N.push(k.toString());return N},[]),g=[{v:"01",l:"Jan"},{v:"02",l:"Fev"},{v:"03",l:"Mar"},{v:"04",l:"Abr"},{v:"05",l:"Mai"},{v:"06",l:"Jun"},{v:"07",l:"Jul"},{v:"08",l:"Ago"},{v:"09",l:"Set"},{v:"10",l:"Out"},{v:"11",l:"Nov"},{v:"12",l:"Dez"}],x=V.useMemo(()=>{const E=[],N=r&&i?new Date(parseInt(i),parseInt(r),0).getDate():31;for(let k=1;k<=N;k++)E.push(k.toString().padStart(2,"0"));return E},[i,r]),p=(E,N,k)=>{t(`${k}-${N}-${E}`)},_=E=>`
    w-full bg-zinc-900/60 border ${n&&!E?"border-red-500/50":"border-white/5"} 
    rounded-2xl p-5 text-white text-[10px] font-black uppercase outline-none 
    appearance-none cursor-pointer transition-all focus:border-[#d4af37]/30 text-center
  `;return u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"relative group",children:[u.jsxs("select",{value:o,onChange:E=>p(E.target.value,r,i),className:_(o),children:[u.jsx("option",{value:"",className:"bg-zinc-950",children:"DIA"}),x.map(E=>u.jsx("option",{value:E,className:"bg-zinc-950",children:E},E))]}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none opacity-20",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-3 h-3 fill-white",children:u.jsx("path",{d:"M7 10l5 5 5-5z"})})})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("select",{value:r,onChange:E=>p(o,E.target.value,i),className:_(r),children:[u.jsx("option",{value:"",className:"bg-zinc-950",children:"MS"}),g.map(E=>u.jsx("option",{value:E.v,className:"bg-zinc-950",children:E.l.toUpperCase()},E.v))]}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none opacity-20",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-3 h-3 fill-white",children:u.jsx("path",{d:"M7 10l5 5 5-5z"})})})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("select",{value:i,onChange:E=>p(o,r,E.target.value),className:_(i),children:[u.jsx("option",{value:"",className:"bg-zinc-950",children:"ANO"}),d.map(E=>u.jsx("option",{value:E,className:"bg-zinc-950",children:E},E))]}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none opacity-20",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-3 h-3 fill-white",children:u.jsx("path",{d:"M7 10l5 5 5-5z"})})})]})]}),n&&u.jsx("p",{className:"text-[7px] text-red-500 font-bold uppercase tracking-widest ml-4",children:n})]})},zP=({signupData:e,setSignupData:t,signupErrors:n,setSignupErrors:i,touched:r,setTouched:o,handleBlur:d,getInputClass:g,renderError:x,setSignupStep:p,onBackToLanding:_,isStep1Valid:E})=>u.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Nome completo"}),u.jsx("input",{value:e.fullName,onBlur:()=>d("fullName"),onChange:N=>{t({...e,fullName:N.target.value}),n.fullName&&i({...n,fullName:""})},placeholder:"Ex: Joao Antonio Oliveira",className:g("fullName")}),x("fullName")]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Nascimento"}),u.jsx(FP,{value:e.birthDate,onChange:N=>{t({...e,birthDate:N}),o(k=>({...k,birthDate:!0})),n.birthDate&&i({...n,birthDate:""})},error:r.birthDate?n.birthDate:""})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Gnero"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>{t({...e,gender:"male"}),o(N=>({...N,gender:!0})),n.gender&&i({...n,gender:""})},className:`flex-1 py-4 rounded-2xl text-[9px] font-black uppercase tracking-widest border transition-all ${e.gender==="male"?"bg-white text-black border-white":"bg-zinc-900 text-zinc-500 border-white/5"}`,children:"Masculino"}),u.jsx("button",{type:"button",onClick:()=>{t({...e,gender:"female"}),o(N=>({...N,gender:!0})),n.gender&&i({...n,gender:""})},className:`flex-1 py-4 rounded-2xl text-[9px] font-black uppercase tracking-widest border transition-all ${e.gender==="female"?"bg-white text-black border-white":"bg-zinc-900 text-zinc-500 border-white/5"}`,children:"Feminino"})]}),x("gender")]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Estado"}),u.jsxs("select",{value:e.state,onBlur:()=>d("state"),onChange:N=>{t({...e,state:N.target.value,city:""}),n.state&&i({...n,state:""})},className:g("state"),children:[u.jsx("option",{value:"",children:"UF"}),Object.entries(cm).map(([N,k])=>u.jsxs("option",{value:N,children:[N," - ",k.name]},N))]}),x("state")]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-widest ml-4",children:"Cidade"}),u.jsxs("select",{value:e.city,onBlur:()=>d("city"),disabled:!e.state,onChange:N=>{t({...e,city:N.target.value}),n.city&&i({...n,city:""})},className:g("city"),children:[u.jsx("option",{value:"",children:"Cidade"}),e.state&&cm[e.state].cities.map(N=>u.jsx("option",{value:N,children:N},N))]}),x("city")]})]}),u.jsx("button",{onClick:()=>p(2),disabled:!E,className:"w-full py-5 bg-white text-black font-black rounded-full uppercase text-[10px] tracking-widest active:scale-95 transition-all mt-4 disabled:opacity-30 disabled:pointer-events-none",children:"Prximo"}),u.jsx("button",{onClick:_,className:"w-full py-2 text-zinc-700 text-[8px] font-black uppercase tracking-widest",children:"Voltar"})]}),VP=({signupData:e,setSignupData:t,signupErrors:n,setSignupErrors:i,handleBlur:r,getInputClass:o,renderError:d,setSignupStep:g,isStep2Valid:x})=>u.jsxs("form",{onSubmit:p=>{p.preventDefault(),g(3)},className:"space-y-6 animate-in fade-in",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-[0.3em] ml-4",children:"Instagram (Sem @)"}),u.jsx("input",{required:!0,value:e.instagram,onBlur:()=>r("instagram"),onChange:p=>{t({...e,instagram:p.target.value}),n.instagram&&i({...n,instagram:""})},placeholder:"SEU.PERFIL",className:o("instagram")}),d("instagram")]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-[0.3em] ml-4",children:"Email Pessoal"}),u.jsx("input",{required:!0,type:"email",value:e.email,onBlur:()=>r("email"),onChange:p=>{t({...e,email:p.target.value}),n.email&&i({...n,email:""})},placeholder:"SEU MELHOR EMAIL",className:o("email")}),d("email")]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-[0.3em] ml-4",children:"Contato (WhatsApp)"}),u.jsxs("div",{className:`relative w-full bg-zinc-900 border rounded-2xl flex items-center transition-all focus-within:border-[#d4af37]/50 focus-within:bg-zinc-900/80 ${n.phone?"border-red-500/50":"border-white/5"}`,children:[u.jsxs("div",{className:"relative flex items-center h-full pl-5 pr-4 border-r border-white/5 group cursor-pointer hover:bg-white/5 transition-colors rounded-l-2xl",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-zinc-600 text-[9px] font-black tracking-widest pointer-events-none",children:"+55"}),u.jsxs("span",{className:"text-[#d4af37] text-[11px] font-black tracking-widest pointer-events-none",children:["(",e.ddd,")"]}),u.jsx("svg",{viewBox:"0 0 24 24",className:"w-3 h-3 fill-zinc-700 group-hover:fill-white transition-colors ml-1 pointer-events-none",children:u.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),u.jsx("select",{value:e.ddd,onChange:p=>t({...e,ddd:p.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer text-[16px]",children:kI.map(p=>u.jsx("option",{value:p,children:p},p))})]}),u.jsx("input",{required:!0,type:"tel",value:e.phone,onBlur:()=>r("phone"),onChange:p=>{t({...e,phone:p.target.value.replace(/\D/g,"").slice(0,9)}),n.phone&&i({...n,phone:""})},placeholder:"99999-9999",className:"flex-1 bg-transparent border-none outline-none text-white text-[11px] font-black uppercase tracking-[0.25em] pl-5 py-5 placeholder:text-zinc-700/50 h-full rounded-r-2xl"})]}),d("phone")]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{required:!0,type:"password",value:e.password,onBlur:()=>r("password"),onChange:p=>{t({...e,password:p.target.value}),n.password&&i({...n,password:""})},placeholder:"CRIAR SENHA",className:o("password")}),d("password")]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{required:!0,type:"password",value:e.confirmPassword,onBlur:()=>r("confirmPassword"),onChange:p=>t({...e,confirmPassword:p.target.value}),placeholder:"CONFIRMAR",className:o("password")}),d("confirmPassword")]})]}),u.jsx("button",{type:"submit",disabled:!x,className:"w-full py-6 bg-white text-black font-black rounded-full uppercase text-[10px] tracking-[0.2em] shadow-xl mt-6 disabled:opacity-30 disabled:pointer-events-none transition-all active:scale-95",children:"Avanar para Biometria"}),u.jsx("button",{type:"button",onClick:()=>g(1),className:"w-full py-3 text-zinc-600 text-[8px] font-black uppercase tracking-widest hover:text-zinc-400 transition-colors",children:"Voltar"})]}),GP=({signupErrors:e,setSignupErrors:t,setSignupStep:n,isProcessing:i,onSignupFinalize:r,onBackToLanding:o})=>{const d=g=>{i||Fe.confirm({title:"Finalizar Cadastro",message:"Protocolar sua identidade para curadoria?",confirmLabel:"Sim, Protocolar",onConfirm:()=>{r(g),Fe.toast("success","Boas Vindas","Cadastro concludo com sucesso. Bem vindo ao VANTA")}})};return u.jsxs("div",{className:"space-y-4 animate-in fade-in relative",children:[(e.form||e.action)&&u.jsxs("div",{className:"p-6 bg-red-950/30 border border-red-500/40 rounded-3xl flex flex-col items-center text-center space-y-4 animate-in slide-in-from-top duration-300 ring-1 ring-red-500/20",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("span",{className:"text-red-500 text-[12px] font-bold",children:"!"})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"text-red-500 text-[9px] font-black uppercase tracking-[0.2em]",children:"Protocolo Interrompido"}),u.jsx("p",{className:"text-[10px] text-white/90 font-medium leading-relaxed",children:e.form})]}),e.action&&u.jsxs("div",{className:"pt-3 border-t border-red-500/10 w-full space-y-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[7px] text-red-400 font-black uppercase tracking-[0.2em] block",children:"Diagnstico:"}),u.jsx("p",{className:"text-[8px] text-zinc-400 font-medium italic",children:e.action})]}),u.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[u.jsx("button",{onClick:()=>t({}),className:"w-full py-3 bg-white/10 border border-white/10 text-white text-[8px] font-black uppercase rounded-full hover:bg-white/20 transition-all",children:"Tentar Novamente"}),u.jsx("button",{onClick:()=>{t({}),n(2)},className:"w-full py-3 bg-red-600 text-white text-[8px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all",children:"Corrigir Dados (E-mail/Insta)"}),u.jsx("button",{onClick:o,className:"w-full py-2 text-zinc-600 text-[7px] font-black uppercase tracking-widest",children:"Abortar Cadastro"})]})]})]}),!e.form&&!e.action&&u.jsx(QA,{onCapture:d,onCancel:()=>n(2),ctaLabel:"Concluir cadastro"}),!e.form&&!e.action&&u.jsx("button",{type:"button",onClick:()=>n(2),className:"w-full py-2 text-zinc-700 text-[8px] font-black uppercase tracking-widest",children:"Voltar"}),i&&u.jsxs("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md flex flex-col items-center justify-center space-y-4 z-50 rounded-[3rem]",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-[#d4af37] rounded-full animate-spin"}),u.jsx("span",{className:"text-[8px] text-white font-black uppercase tracking-widest animate-pulse",children:"Sincronizando Protocolo..."})]})]})},HP=({signupStep:e,setSignupStep:t,signupData:n,setSignupData:i,signupErrors:r,setSignupErrors:o,touched:d,setTouched:g,isProcessing:x,onSignupFinalize:p,onBackToLanding:_,renderError:E,getInputClass:N,isStep1Valid:k,isStep2Valid:O,handleBlur:L})=>u.jsxs("div",{className:"w-full max-w-md py-10",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-serif italic text-white uppercase tracking-tighter",children:"Membro VANTA"}),u.jsxs("p",{className:"text-[8px] text-zinc-500 font-black uppercase tracking-[0.4em] mt-2",children:["Protocolo Etapa ",e," de 3"]})]}),u.jsxs("div",{className:"bg-zinc-950/40 border border-white/10 rounded-[3rem] p-8 relative overflow-hidden",children:[e===1&&u.jsx(zP,{signupData:n,setSignupData:i,signupErrors:r,setSignupErrors:o,touched:d,setTouched:g,handleBlur:L,getInputClass:N,renderError:E,setSignupStep:t,onBackToLanding:_,isStep1Valid:k}),e===2&&u.jsx(VP,{signupData:n,setSignupData:i,signupErrors:r,setSignupErrors:o,handleBlur:L,getInputClass:N,renderError:E,setSignupStep:t,isStep2Valid:O}),e===3&&u.jsx(GP,{signupErrors:r,setSignupErrors:o,setSignupStep:t,isProcessing:x,onSignupFinalize:p,onBackToLanding:_})]})]}),X_=e=>{const t=e.message||"";return t.includes("User already registered")||t.includes("already exists")?{field:"email",message:"Identidade j registrada na rede.",action:"Este e-mail j possui um registro ativo."}:t.includes("Invalid login credentials")?{field:"form",message:"Credenciais invlidas.",action:"Verifique seu e-mail e senha."}:{field:"form",message:"Falha no protocolo.",action:"Erro inesperado na comunicao."}},qP=({onLoginSuccess:e,initialView:t="landing",onClose:n})=>{const[i,r]=V.useState(t),[o,d]=V.useState(!1),[g,x]=V.useState(null),[p,_]=V.useState(null),[E,N]=V.useState(""),[k,O]=V.useState(""),[L,P]=V.useState(!1),[H,B]=V.useState(""),[j,F]=V.useState(!1),[Y,W]=V.useState(""),[te,ne]=V.useState(""),[ie,_e]=V.useState(1),[Ee,pe]=V.useState({}),[Ne,ue]=V.useState({}),[X,K]=V.useState({fullName:"",birthDate:"",state:"",city:"",gender:"",email:"",instagram:"",ddd:"21",phone:"",password:"",confirmPassword:""});V.useEffect(()=>{if(!Q)return;Q.auth.getSession().then(({data:{session:ve}})=>{ve!=null&&ve.user&&P(!0)});const{data:{subscription:ae}}=Q.auth.onAuthStateChange((ve,Ie)=>{ve==="SIGNED_IN"&&(Ie!=null&&Ie.user)?(P(!0),sessionStorage.getItem("vanta_signup_success_pending")||e(om(Ie.user))):ve==="SIGNED_OUT"?(P(!1),r("landing")):ve==="PASSWORD_RECOVERY"&&r("redefine")});return()=>ae==null?void 0:ae.unsubscribe()},[e]);const J=async ae=>{if(ae.preventDefault(),!!Q){d(!0),_(null);try{const{error:ve}=await Q.auth.signInWithPassword({email:E.trim(),password:k});if(ve)throw ve}catch(ve){const Ie=X_(ve);_(Ie.message)}finally{d(!1)}}},oe=async ae=>{if(Q){d(!0);try{const{data:ve,error:Ie}=await Q.auth.signUp({email:X.email.trim(),password:X.password,options:{data:{full_name:X.fullName.trim(),instagram_handle:X.instagram.trim(),phone_e164:`+55${X.ddd}${X.phone}`,city:X.city,state:X.state,gender:X.gender,birth_date:X.birthDate}}});if(Ie)throw Ie;const qe=ve.user;if(!qe)throw new Error("Falha ao gerar UID.");const Oe=await DP(qe.id,ae);await LP(qe.id,{selfie_url:Oe}),await PP(qe.id,Oe),sessionStorage.setItem("vanta_signup_success_pending","true"),x(om(qe)),Fe.confirm({title:"Cadastro finalizado com sucesso.",message:"Bem-vindo ao VANTA.",confirmLabel:"ENTRAR",onConfirm:()=>{sessionStorage.removeItem("vanta_signup_success_pending"),r("landing")}})}catch(ve){const Ie=X_(ve);pe({form:Ie.message,action:Ie.action})}finally{d(!1)}}},fe=()=>{Fe.confirm({title:"Excluir Identidade",message:"Esta ao  irreversvel. Todos os seus convites, histrico e conexes sero apagados da rede permanentemente.",confirmLabel:"Excluir Definitivamente",isDestructive:!0,onConfirm:async()=>{await(Q==null?void 0:Q.auth).signOut(),Fe.toast("info","Identidade Excluda","Seus dados foram removidos dos nossos clusters.")}})},Se=!!(X.fullName&&X.birthDate&&X.state&&X.city&&X.gender),ee=!!(X.instagram&&X.email&&X.phone&&X.password&&X.password===X.confirmPassword);return u.jsxs("div",{className:"fixed inset-0 z-[7000] bg-black flex flex-col items-center justify-center",children:[i==="landing"&&u.jsx(jP,{hasActiveSession:L,isProcessing:o,onContinueAsMember:()=>g&&e(g),onSignOut:()=>(Q==null?void 0:Q.auth).signOut(),onSetView:r,onClose:n}),i==="form"&&u.jsx(BP,{email:E,setEmail:N,password:k,setPassword:O,loginError:p,isProcessing:o,onLogin:J,onSetView:r,onBack:()=>r("landing")}),i==="signup"&&u.jsx(HP,{signupStep:ie,setSignupStep:_e,signupData:X,setSignupData:K,signupErrors:Ee,setSignupErrors:pe,touched:Ne,setTouched:ue,isProcessing:o,onSignupFinalize:oe,onBackToLanding:()=>r("landing"),renderError:()=>null,getInputClass:()=>"w-full bg-zinc-900 border border-white/5 rounded-2xl p-5 text-white",isStep1Valid:Se,isStep2Valid:ee,handleBlur:()=>{}}),i==="recovery"&&u.jsx(UP,{recoveryEmail:H,setRecoveryEmail:B,recoverySent:j,loginError:p,isProcessing:o,onRecover:J,onSetView:()=>r("form")}),i==="signup"&&ie===1&&u.jsx("div",{className:"absolute bottom-10",children:u.jsx("button",{onClick:fe,className:"text-[7px] text-zinc-800 font-black uppercase tracking-widest hover:text-red-900 transition-colors",children:"Solicitar Remoo de Dados"})})]})},YP=({showNotifications:e,setShowNotifications:t,setSelectedEventId:n,handleTabChange:i,blockedFeature:r,setBlockedFeature:o,setShowAuth:d,showAuth:g,setCurrentUser:x,showCitySelector:p,setShowCitySelector:_,selectedCity:E,setSelectedCity:N,availableCities:k})=>u.jsxs(u.Fragment,{children:[u.jsx(MP,{show:e,onClose:()=>t(!1),onEventClick:O=>n(O),setActiveTab:i}),r&&u.jsx("div",{className:"fixed inset-0 z-[6000] bg-black/90 flex items-center justify-center p-10",onClick:()=>o(null),children:u.jsxs("div",{className:"bg-zinc-950 border border-white/10 rounded-[3rem] p-10 text-center space-y-8",onClick:O=>O.stopPropagation(),children:[u.jsx("h3",{className:"text-3xl font-serif italic text-white uppercase",children:r}),u.jsx("p",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-widest",children:"Acesso exclusivo para membros."}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{o(null),d("login")},className:"w-full py-5 bg-white text-black font-black rounded-full uppercase text-[10px]",children:"Entrar"}),u.jsx("button",{onClick:()=>{o(null),d("signup")},className:"w-full py-5 border border-white/10 text-white font-black rounded-full uppercase text-[9px]",children:"Solicitar Acesso"}),u.jsx("button",{onClick:()=>o(null),className:"w-full py-3 text-zinc-600 font-black uppercase text-[8px] tracking-widest",children:"Talvez mais tarde"})]})]})}),g&&u.jsx("div",{className:"fixed inset-0 z-[7000] bg-black",children:u.jsx(qP,{onLoginSuccess:O=>{x(O),d(null)},initialView:g==="login"?"form":"signup",onClose:()=>d(null)})}),u.jsx(w8,{show:p,onClose:()=>_(!1),selectedCity:E,onSelectCity:N,availableCities:k})]}),W_="BK_PLACEHOLDER_KEY_REPLACE_WITH_REAL_VAPID_PUBLIC_KEY";function XP(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(n),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}const WP=e=>{const[t,n]=V.useState(!1),[i,r]=V.useState("default");V.useEffect(()=>{if(!e)return;if(!("serviceWorker"in navigator)||!("PushManager"in window)){console.warn("[VANTA PUSH] Push messaging is not supported");return}(async()=>{const p=Notification.permission;r(p);const _=localStorage.getItem("vanta_push_denied");p==="granted"?o():p==="default"&&!_&&setTimeout(()=>n(!0),6e4)})()},[e]);const o=async()=>{if(!(!e||!Q))try{const p=await(await navigator.serviceWorker.ready).pushManager.getSubscription();p&&await Q.from("user_devices").upsert({user_id:e.id,subscription:p,user_agent:navigator.userAgent,last_active_at:new Date().toISOString()},{onConflict:"user_id, subscription"})}catch(x){console.error("[VANTA PUSH] Erro ao sincronizar token existente:",x)}};return{showPushPrompt:t,permissionState:i,subscribeUser:async()=>{n(!1);try{const x=await Notification.requestPermission();if(r(x),x==="granted"){const p=await navigator.serviceWorker.ready;if(W_.includes("PLACEHOLDER")){console.warn("[VANTA PUSH] Chave VAPID no configurada. Token real no gerado.");return}const _=await p.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:XP(W_)});if(Q&&e){const{error:E}=await Q.from("user_devices").upsert({user_id:e.id,subscription:_,user_agent:navigator.userAgent,platform:"web",last_active_at:new Date().toISOString()},{onConflict:"user_id, subscription"});if(E)throw E;console.log("[VANTA PUSH] Dispositivo registrado com sucesso na rede.")}}}catch(x){console.error("[VANTA PUSH] Failed to subscribe the user: ",x)}},declinePush:()=>{n(!1),localStorage.setItem("vanta_push_denied","true")}}},KP=({onAccept:e,onDecline:t})=>u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-xl flex items-center justify-center p-8 animate-in fade-in duration-500",children:u.jsxs("div",{className:"w-full max-w-sm bg-zinc-950 border border-[#d4af37]/30 rounded-[3rem] p-10 flex flex-col items-center text-center space-y-8 shadow-[0_0_100px_rgba(212,175,55,0.15)] relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#d4af37] to-transparent"}),u.jsxs("div",{className:"w-24 h-24 rounded-full bg-[#d4af37]/10 border border-[#d4af37]/20 flex items-center justify-center relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-full border border-[#d4af37]/40 animate-ping opacity-20"}),u.jsx(Ge.Bell,{className:"w-10 h-10 text-[#d4af37]"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter leading-tight",children:"Nao perca nada"}),u.jsx("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-[0.2em] leading-relaxed",children:"Ative as notificaes para receber convites VIP, novidades, e muito mais em tempo real"})]}),u.jsxs("div",{className:"w-full space-y-3",children:[u.jsx("button",{onClick:e,className:"w-full py-5 bg-[#d4af37] text-black text-[10px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all hover:bg-[#e5c158]",children:"Ativar Notificaes"}),u.jsx("button",{onClick:t,className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest hover:text-zinc-400 transition-colors",children:"Agora no"})]})]})}),$P=({error:e,onDismiss:t})=>e?u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/95 backdrop-blur-xl flex items-center justify-center p-8 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-zinc-950 border border-red-900/30 rounded-[3rem] p-10 flex flex-col items-center text-center space-y-8 shadow-[0_0_100px_rgba(220,38,38,0.2)] relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-600 to-transparent"}),u.jsx("div",{className:"w-20 h-20 rounded-full bg-red-600/10 border border-red-600/20 flex items-center justify-center relative",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-2xl font-serif italic text-white uppercase tracking-tighter leading-tight",children:"Interrupo de Sistema"}),u.jsx("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-[0.2em] leading-relaxed break-words",children:e})]}),u.jsxs("div",{className:"w-full space-y-3",children:[u.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-5 bg-white text-black text-[10px] font-black uppercase rounded-full shadow-lg active:scale-95 transition-all hover:bg-zinc-200",children:"Reiniciar VANTA"}),u.jsx("button",{onClick:t,className:"w-full py-4 text-zinc-600 text-[8px] font-black uppercase tracking-widest hover:text-zinc-400 transition-colors",children:"Ignorar e Tentar Continuar"})]}),u.jsx("div",{className:"absolute bottom-4",children:u.jsx("span",{className:"text-[6px] text-red-900/40 font-mono",children:"ERR_CODE: VANTA_DEADLOCK_PREVENTION"})})]})}):null,JP=()=>{const[e,t]=V.useState(Fe.getToasts()),[n,i]=V.useState(Fe.getConfirm());V.useEffect(()=>Fe.subscribe(()=>{t(Fe.getToasts()),i(Fe.getConfirm())}),[]);const r=(n==null?void 0:n.confirmLabel)==="ENTRAR";return u.jsxs("div",{className:"fixed inset-0 z-[30000] pointer-events-none flex items-center justify-center",children:[!n&&e.length>0&&u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-sm p-6 flex flex-col items-center justify-center",children:e.slice(-1).map(o=>u.jsxs("div",{className:"pointer-events-auto w-full glass rounded-[2.5rem] p-8 border border-[#d4af37]/30 shadow-[0_20px_50px_rgba(0,0,0,0.9)] flex flex-col items-center text-center gap-6 animate-in zoom-in-95 duration-300 backdrop-blur-3xl bg-black/80",children:[u.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center shrink-0 border-2 ${o.type==="success"?"bg-emerald-500/10 border-emerald-500 text-emerald-500":o.type==="error"?"bg-red-500/10 border-red-500 text-red-500":"bg-[#d4af37]/10 border-[#d4af37] text-[#d4af37]"}`,children:u.jsx("span",{className:"text-2xl font-black",children:o.type==="success"?"":o.type==="error"?"!":""})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"text-lg font-serif italic text-white tracking-tighter leading-none",children:o.title}),o.message&&u.jsx("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-widest leading-relaxed",children:o.message})]}),u.jsx("button",{onClick:()=>Fe.removeToast(o.id),className:"px-8 py-3 bg-white/5 border border-white/10 rounded-full text-[8px] font-black uppercase tracking-widest hover:bg-white/10 transition-all text-zinc-300",children:"Entendido"})]},o.id))}),n&&u.jsx("div",{className:"fixed inset-0 pointer-events-auto flex items-center justify-center bg-black/95 backdrop-blur-2xl z-[30050] p-8 animate-in fade-in duration-300",children:u.jsxs("div",{className:"w-full max-w-sm bg-zinc-950 border border-white/5 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,0,0,0.8)] relative overflow-hidden flex flex-col items-center text-center space-y-8 transform transition-all animate-in zoom-in-95 duration-300",children:[u.jsx("div",{className:`w-24 h-24 rounded-full border-2 flex items-center justify-center mb-2 shadow-[0_0_40px_rgba(0,0,0,0.5)] ${r?"border-emerald-500 bg-black text-emerald-500":n.isDestructive?"border-red-600 bg-black text-red-600":"border-[#d4af37] bg-black text-[#d4af37]"}`,children:n.isDestructive?u.jsx("svg",{viewBox:"0 0 24 24",className:"w-10 h-10 fill-current",children:u.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}):u.jsx("svg",{viewBox:"0 0 24 24",className:"w-10 h-10 fill-current",children:u.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-3xl font-serif italic text-white tracking-tighter leading-none",children:n.title}),u.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] leading-relaxed",children:n.message})]}),u.jsxs("div",{className:"w-full space-y-4",children:[u.jsx("button",{onClick:()=>Fe.resolveConfirm(!0),className:`w-full py-5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-2xl active:scale-95 transition-all ${r?"bg-emerald-500 text-black hover:bg-emerald-400 shadow-[0_0_30px_rgba(16,185,129,0.3)]":n.isDestructive?"bg-red-900 border border-red-600 text-red-100 hover:bg-red-800":"bg-[#d4af37] text-black hover:bg-[#bfa030]"}`,children:n.confirmLabel||"Confirmar"}),!r&&u.jsx("button",{onClick:()=>Fe.resolveConfirm(!1),className:"w-full py-2 text-zinc-600 text-[8px] font-black uppercase tracking-widest hover:text-zinc-400 transition-colors",children:n.cancelLabel||"Cancelar Protocolo"})]})]})})]})},ZP=()=>{const e=OP(),[t,n]=V.useState(null),{showPushPrompt:i,subscribeUser:r,declinePush:o}=WP(e.currentUser);if(V.useEffect(()=>{const g=new URLSearchParams(window.location.search),x=g.get("event"),p=g.get("staff");x&&p&&n({eventId:x,staffId:p})},[]),e.isCheckingSession)return u.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center",children:u.jsx("div",{className:"text-white text-3xl font-serif italic animate-pulse tracking-widest",children:"VANTA"})});if(t)return u.jsx(JR,{eventId:t.eventId,promoterId:t.staffId,onSuccess:()=>{n(null),window.history.replaceState({},"","/"),e.handleTabChange("wallet")}});if(e.isAdminMode&&e.currentUser)return u.jsx(y8,{currentUser:e.currentUser,events:e.events,setEvents:e.setEvents,onExit:()=>e.setIsAdminMode(!1)});const d=e.selectedEventId?e.events.find(g=>g.id===e.selectedEventId):null;return u.jsxs("div",{className:"h-full w-full bg-black",children:[u.jsx(A8,{currentUser:e.currentUser,activeTab:e.activeTab,setActiveTab:g=>e.handleTabChange(g),selectedCity:e.selectedCity,setShowCitySelector:e.setShowCitySelector,setShowNotifications:e.setShowNotifications,events:e.events,onEventClick:g=>e.setSelectedEventId(g??null),isDetailView:!!e.selectedEventId,children:d?u.jsx(U8,{event:d,onBack:()=>e.setSelectedEventId(null),currentUser:e.currentUser,onRequireAuth:g=>e.setBlockedFeature(g??null)}):u.jsxs(u.Fragment,{children:[e.activeTab==="home"&&u.jsx(T8,{selectedCity:e.selectedCity,onOpenConcierge:()=>e.handleTabChange("messages"),onEventClick:g=>e.setSelectedEventId(g),onNavigate:e.handleTabChange,events:e.events}),e.activeTab==="map"&&u.jsx(KR,{events:e.events,currentUser:e.currentUser,onRequireAuth:g=>e.setBlockedFeature(g??null),onEventClick:g=>e.setSelectedEventId(g)}),e.activeTab==="search"&&u.jsx(YR,{events:e.events,currentUser:e.currentUser,setActiveTab:g=>e.handleTabChange(g),onEventClick:g=>e.setSelectedEventId(g),onBlockSocial:()=>e.setBlockedFeature("Membros")}),e.activeTab==="messages"&&e.currentUser&&u.jsx(kP,{currentUser:e.currentUser,conversations:e.conversations,setConversations:e.setConversations,activeConversationId:e.activeConversationId,setActiveConversationId:e.setActiveConversationId}),e.activeTab==="wallet"&&e.currentUser&&u.jsx(e4,{currentUser:e.currentUser}),e.activeTab==="profile"&&e.currentUser&&u.jsx(VR,{currentUser:e.currentUser,onLogout:e.handleLogout,onOpenAdmin:()=>e.setIsAdminMode(!0)})]})}),u.jsx(YP,{showNotifications:e.showNotifications,setShowNotifications:e.setShowNotifications,setSelectedEventId:e.setSelectedEventId,handleTabChange:e.handleTabChange,blockedFeature:e.blockedFeature,setBlockedFeature:e.setBlockedFeature,setShowAuth:e.setShowAuth,showAuth:e.showAuth,setCurrentUser:e.setCurrentUser,showCitySelector:e.showCitySelector,setShowCitySelector:e.setShowCitySelector,selectedCity:e.selectedCity,setSelectedCity:e.setSelectedCity,availableCities:e.availableCities}),u.jsx($P,{error:e.systemError,onDismiss:()=>e.setSystemError(null)}),u.jsx(JP,{}),i&&u.jsx(KP,{onAccept:r,onDecline:o})]})};(async()=>{try{const e=window.location.hostname;if(!(e==="localhost"||e==="127.0.0.1"||e==="[::1]"))return;if("serviceWorker"in navigator){const n=await navigator.serviceWorker.getRegistrations();await Promise.all(n.map(i=>i.unregister()))}if("caches"in window){const n=await caches.keys();await Promise.all(n.map(i=>caches.delete(i)))}try{localStorage.clear()}catch{}try{sessionStorage.clear()}catch{}try{const n=indexedDB;if(n!=null&&n.databases){const i=await n.databases();await Promise.all((i||[]).map(r=>r!=null&&r.name?new Promise(o=>{const d=indexedDB.deleteDatabase(r.name);d.onsuccess=()=>o(),d.onerror=()=>o(),d.onblocked=()=>o()}):Promise.resolve()))}}catch{}}catch{}})();EN.createRoot(document.getElementById("root")).render(u.jsx(an.StrictMode,{children:u.jsx(ZP,{})}));
